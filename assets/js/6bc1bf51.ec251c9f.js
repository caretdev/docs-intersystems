"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[50637],{33544:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>r,default:()=>o,frontMatter:()=>i,toc:()=>l});var n=s(74848),a=s(28453);const i={pagination_prev:null,pagination_next:null},r="%DeepSee.KPI",l=[{value:"Parameters",id:"parameters",level:2},{value:"CACHEABLE",id:"cacheable",level:3},{value:"ASYNC",id:"async",level:3},{value:"LABELCONCAT",id:"labelconcat",level:3},{value:"MAXLISTINGROWS",id:"maxlistingrows",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"KPI",id:"kpi",level:3},{value:"Methods",id:"methods",level:2},{value:"%IsCacheable",id:"iscacheable",level:3},{value:"%IsAsync",id:"isasync",level:3},{value:"%GetMaxListingRows",id:"getmaxlistingrows",level:3},{value:"%Generate",id:"generate",level:3},{value:"%GetKPIName",id:"getkpiname",level:3},{value:"%GetKPICaptionName",id:"getkpicaptionname",level:3},{value:"%OnGetListingSQL",id:"ongetlistingsql",level:3},{value:"%OnGetListingResultSet",id:"ongetlistingresultset",level:3},{value:"%GetListingResultSet",id:"getlistingresultset",level:3},{value:"%GetSourceType",id:"getsourcetype",level:3},{value:"%GetSQLText",id:"getsqltext",level:3},{value:"%GetMDXText",id:"getmdxtext",level:3},{value:"%ApplyDefaults",id:"applydefaults",level:3},{value:"%OnLoadModel",id:"onloadmodel",level:3},{value:"%QueueKPI",id:"queuekpi",level:3},{value:"%ComputeKPI",id:"computekpi",level:3},{value:"%ValidateKPICache",id:"validatekpicache",level:3},{value:"%TestKPICache",id:"testkpicache",level:3},{value:"%ComputeKPICacheKey",id:"computekpicachekey",level:3},{value:"%OnKPICleanup",id:"onkpicleanup",level:3},{value:"%OnComputeKPICacheKey",id:"oncomputekpicachekey",level:3},{value:"%ComputeKPITimestamp",id:"computekpitimestamp",level:3},{value:"%OnComputeKPITimestamp",id:"oncomputekpitimestamp",level:3},{value:"%LoadKPIFromCache",id:"loadkpifromcache",level:3},{value:"%OnLoadKPIFromCache",id:"onloadkpifromcache",level:3},{value:"%SetPercentComplete",id:"setpercentcomplete",level:3},{value:"%SaveKPIToCache",id:"savekpitocache",level:3},{value:"%OnSaveKPIToCache",id:"onsavekpitocache",level:3},{value:"%GetKPIPropertyInfo",id:"getkpipropertyinfo",level:3},{value:"%OnGetKPIPropertyInfo",id:"ongetkpipropertyinfo",level:3},{value:"%GetMDX",id:"getmdx",level:3},{value:"%OnGetMDX",id:"ongetmdx",level:3},{value:"%GetMDXContextFilter",id:"getmdxcontextfilter",level:3},{value:"%ExecuteMDX",id:"executemdx",level:3},{value:"%GetSQL",id:"getsql",level:3},{value:"%GetListingSQL",id:"getlistingsql",level:3},{value:"%OnGetSQL",id:"ongetsql",level:3},{value:"%ExecuteSQL",id:"executesql",level:3},{value:"%OnExecute",id:"onexecute",level:3},{value:"%GetFilterList",id:"getfilterlist",level:3},{value:"%OnGetFilterList",id:"ongetfilterlist",level:3},{value:"%GetFilterMembers",id:"getfiltermembers",level:3},{value:"%GetActionList",id:"getactionlist",level:3},{value:"%InvokeDashboardAction",id:"invokedashboardaction",level:3},{value:"%GetMembersForFilter",id:"getmembersforfilter",level:3},{value:"%GetSQLForFilter",id:"getsqlforfilter",level:3},{value:"%GetMDXForFilter",id:"getmdxforfilter",level:3},{value:"%SplitList",id:"splitlist",level:3}];function c(e){const t={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"deepseekpi",children:"%DeepSee.KPI"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Class %DeepSee.KPI Extends %DeepSee.AbstractKPI [ Abstract, System = 4 ]\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Subclasses of this class are used to define KPIs (key performance indicators). A KPI defines a set of related values that can be used to drive widgets on a DeepSee dashboard.",(0,n.jsx)(t.br,{}),"\nA KPI can define a set of actions that can be called from control buttons on a dashboard widget.",(0,n.jsx)(t.br,{}),"\nEach KPI class is also also a %CSP page; if you view it as a Web Page, you can view a test page for the KPI (you must hold Developer privileges to do this)."]}),"\n",(0,n.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(t.h3,{id:"cacheable",children:"CACHEABLE"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter CACHEABLE As BOOL = 0;\n"})}),"\n",(0,n.jsx)(t.p,{children:"This projection is used to keep track of when KPI classes are compiled or deleted. If true, then results for this KPI can be cached."}),"\n",(0,n.jsx)(t.h3,{id:"async",children:"ASYNC"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter ASYNC As BOOL = 0;\n"})}),"\n",(0,n.jsx)(t.p,{children:"If true, then this KPI can be executed asychronously."}),"\n",(0,n.jsx)(t.h3,{id:"labelconcat",children:"LABELCONCAT"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter LABELCONCAT As STRING = "/";\n'})}),"\n",(0,n.jsx)(t.p,{children:"For MDX-based KPIs, use this character when concatenating labels for nested rows."}),"\n",(0,n.jsx)(t.h3,{id:"maxlistingrows",children:"MAXLISTINGROWS"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter MAXLISTINGROWS As INTEGER;\n"})}),"\n",(0,n.jsx)(t.p,{children:"Use this parameter to limit the number of losting rows displayed in pivot tables. This setting is ignored for exports."}),"\n",(0,n.jsx)(t.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,n.jsx)(t.h3,{id:"kpi",children:"KPI"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'XData KPI [ XMLNamespace = "http://www.intersystems.com/deepsee/kpi" ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"This XData definition defines the KPI."}),"\n",(0,n.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(t.h3,{id:"iscacheable",children:"%IsCacheable"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %IsCacheable() As %String\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return true if this KPI can interact with the cache."}),"\n",(0,n.jsx)(t.h3,{id:"isasync",children:"%IsAsync"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %IsAsync() As %Boolean\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return true if this kpi can be computed asynchronously."}),"\n",(0,n.jsx)(t.h3,{id:"getmaxlistingrows",children:"%GetMaxListingRows"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetMaxListingRows() As %Integer\n"})}),"\n",(0,n.jsx)(t.h3,{id:"generate",children:"%Generate"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %Generate() As %Status [ CodeMode = objectgenerator, Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Process the xml definition for this KPI and generate meta data."}),"\n",(0,n.jsx)(t.h3,{id:"getkpiname",children:"%GetKPIName"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetKPIName(pName As %String = "") As %String [ CodeMode = objectgenerator, GenerateAfter = %Generate ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Return the logical name for this KPI."}),"\n",(0,n.jsx)(t.h3,{id:"getkpicaptionname",children:"%GetKPICaptionName"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetKPICaptionName(pName As %String = "") As %String [ CodeMode = objectgenerator, GenerateAfter = %Generate ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Return the caption as defined in the XML for this KPI."}),"\n",(0,n.jsx)(t.h3,{id:"ongetlistingsql",children:"%OnGetListingSQL"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %OnGetListingSQL(ByRef pFilters As %String, ByRef pSelection As %String, pListingName As %String = "") As %String\n'})}),"\n",(0,n.jsxs)(t.p,{children:['This callback, if implemented, returns the text of an SQL query used to provide a "detail listing" for this KPI.',(0,n.jsx)(t.br,{}),"\npFilters is an array of current filter values: pFilters(name)=value.",(0,n.jsx)(t.br,{}),"\npSelection is an array containing information about the current selected items in the pivot. It contains several values:",(0,n.jsx)(t.br,{}),'\npSelection("selectedRange") contains the current selected cells in the pivot as a string in the form "startRow,startCol,endRow,endCol" (1-based). "" if no cells are selected.',(0,n.jsx)(t.br,{}),'\npSelection("rowValues") contains a csv-list of "row" values for the selected rows in the pivot (similar to the $$$VALUELIST value used for OpenWindow URLs. This may contain "\\," for "," within the data values.',(0,n.jsx)(t.br,{}),'\npSelection("sortColumn") is the number of the column to sort on (or 0 for no sort).',(0,n.jsx)(t.br,{}),'\npSelection("sortDir") is the sort direction ("ASC" or "DESC").',(0,n.jsx)(t.br,{}),"\npListingName is the name of the listing to display. This is reserved for future use.",(0,n.jsx)(t.br,{}),"\nThis method is simply a convenient alternative to the %OnGetListingResultSet method. It takes precedence over the %OnGetListingResultSet method."]}),"\n",(0,n.jsx)(t.h3,{id:"ongetlistingresultset",children:"%OnGetListingResultSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %OnGetListingResultSet(ByRef pFilters As %String, ByRef pSelection As %String, pListingName As %String = "", Output pRS As %SQL.StatementResult) As %Status\n'})}),"\n",(0,n.jsxs)(t.p,{children:['This callback, if implemented, can prepare and execute a listing query used to provide a "detail listing" for this KPI. pFilters is an array of current filter values.',(0,n.jsx)(t.br,{}),"\npListingName is the name of the listing to display. This is reserved for future use."]}),"\n",(0,n.jsx)(t.h3,{id:"getlistingresultset",children:"%GetListingResultSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetListingResultSet(ByRef pFilters As %String, ByRef pSelection As %String, pListingName As %String = "", Output pRS As %SQL.StatementResult) As %Status [ Final, Internal ]\n'})}),"\n",(0,n.jsxs)(t.p,{children:['This method is used to get the "detail listing" result set for this KPI, if any.',(0,n.jsx)(t.br,{}),"\npSelection is an array of values that can be used to control the listings:",(0,n.jsx)(t.br,{}),'\npSelection("rowValues") contains a csv-list of selected row values.',(0,n.jsx)(t.br,{}),'\npSelection("selectedRange") contains the selected range of cells in the pivot table: startRow,startCol,endRow,endCol (1-based).',(0,n.jsx)(t.br,{}),'\npSelection("sortColumn") is the number of the column to sort by (or 0).',(0,n.jsx)(t.br,{}),'\npSelection("sortDir") is the direction to sort in, "ASC" or "DESC".']}),"\n",(0,n.jsx)(t.h3,{id:"getsourcetype",children:"%GetSourceType"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetSourceType() As %String [ CodeMode = objectgenerator, GenerateAfter = %Generate ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return the sourceType for this KPI"}),"\n",(0,n.jsx)(t.h3,{id:"getsqltext",children:"%GetSQLText"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetSQLText() As %String [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return the default SQL statement for this KPI."}),"\n",(0,n.jsx)(t.h3,{id:"getmdxtext",children:"%GetMDXText"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetMDXText() As %String [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return the default MDX statement for this KPI."}),"\n",(0,n.jsx)(t.h3,{id:"applydefaults",children:"%ApplyDefaults"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %ApplyDefaults() [ CodeMode = objectgenerator, GenerateAfter = %Generate, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Apply property defaults from the KPI model."}),"\n",(0,n.jsx)(t.h3,{id:"onloadmodel",children:"%OnLoadModel"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnLoadModel(pSource As %RegisteredObject) As %Status [ Final ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"This callback method does the actual work of loading values from the source object."}),"\n",(0,n.jsx)(t.h3,{id:"queuekpi",children:"%QueueKPI"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %QueueKPI() As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Add a request to compute this KPI to the background agent queue."}),"\n",(0,n.jsx)(t.h3,{id:"computekpi",children:"%ComputeKPI"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %ComputeKPI(pCacheKey As %String) As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"This is called by a task master background agent that wants to compute the value of this KPI."}),"\n",(0,n.jsx)(t.h3,{id:"validatekpicache",children:"%ValidateKPICache"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %ValidateKPICache(pSourceType As %String, pQueryText As %String = "") As %Status [ Final ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Test if the data cached for this KPI is up-to-date. If not, clear the cached data."}),"\n",(0,n.jsx)(t.h3,{id:"testkpicache",children:"%TestKPICache"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %TestKPICache(Output pIsCached As %Boolean, pSourceType As %String, pQueryText As %String = "") As %Status [ Final ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Test if this KPI has cached data."}),"\n",(0,n.jsx)(t.h3,{id:"computekpicachekey",children:"%ComputeKPICacheKey"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %ComputeKPICacheKey(pSourceType As %String, pQueryText As %String = "") As %Status [ Final ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Compute the kpi cache key for the current KPI result. Place the result in %cacheKey."}),"\n",(0,n.jsx)(t.h3,{id:"onkpicleanup",children:"%OnKPICleanup"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnKPICleanup() As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Runs after the KPI loads and runs"}),"\n",(0,n.jsx)(t.h3,{id:"oncomputekpicachekey",children:"%OnComputeKPICacheKey"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %OnComputeKPICacheKey(Output pCacheKey As %String, pQueryText As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Compute the kpi cache timestamp for the current KPI result. Overridden by subclasses."}),"\n",(0,n.jsx)(t.h3,{id:"computekpitimestamp",children:"%ComputeKPITimestamp"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %ComputeKPITimestamp(Output pTimestamp As %String, pSourceType As %String, pQueryText As %String = "") As %String [ Final ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Compute the kpi cache timestamp for the current KPI result."}),"\n",(0,n.jsx)(t.h3,{id:"oncomputekpitimestamp",children:"%OnComputeKPITimestamp"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %OnComputeKPITimestamp(ByRef pTimestamp As %String, pSourceType As %String, pQueryText As %String = "") As %Status\n'})}),"\n",(0,n.jsx)(t.p,{children:"Compute and return the KPI cache timestamp for the current KPI result. Typically this is the timestamp of the cube this KPI depends on."}),"\n",(0,n.jsx)(t.h3,{id:"loadkpifromcache",children:"%LoadKPIFromCache"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %LoadKPIFromCache() As %Status [ Final ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Load this KPI from cached data."}),"\n",(0,n.jsx)(t.h3,{id:"onloadkpifromcache",children:"%OnLoadKPIFromCache"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnLoadKPIFromCache() As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Notification that we are loading this KPI from cached data."}),"\n",(0,n.jsx)(t.h3,{id:"setpercentcomplete",children:"%SetPercentComplete"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %SetPercentComplete(pPctComplete As %Integer, pErrorCode As %Status = "") As %Status [ Final ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"For a KPI running in the background, set the percentage complete."}),"\n",(0,n.jsx)(t.h3,{id:"savekpitocache",children:"%SaveKPIToCache"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method %SaveKPIToCache(pSourceType As %String, pQueryText As %String = "") As %Status [ Final ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Save this KPI to the KPI cache."}),"\n",(0,n.jsx)(t.h3,{id:"onsavekpitocache",children:"%OnSaveKPIToCache"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnSaveKPIToCache() As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Notification that we are saving this KPI to the cache."}),"\n",(0,n.jsx)(t.h3,{id:"getkpipropertyinfo",children:"%GetKPIPropertyInfo"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetKPIPropertyInfo(Output pList As %String, pModelId As %String = "") As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate, Internal ]\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Return information on properties defined in the KPI block. This takes the form:",(0,n.jsx)(t.br,{}),"\npList(n) = name",(0,n.jsx)(t.br,{}),'\npList(n,"defaultValue") = value',(0,n.jsx)(t.br,{}),'\npList(n,"columnNo") = #']}),"\n",(0,n.jsx)(t.h3,{id:"ongetkpipropertyinfo",children:"%OnGetKPIPropertyInfo"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %OnGetKPIPropertyInfo(ByRef pList As %String, pPropNo As %Integer, pModelId As %String = "") As %Status\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Add additional properties beyond those defined in the KPI block. This takes the form:",(0,n.jsx)(t.br,{}),"\npList(n) = name",(0,n.jsx)(t.br,{}),'\npList(n,"defaultValue") = value',(0,n.jsx)(t.br,{}),'\npList(n,"columnNo") = #',(0,n.jsx)(t.br,{}),"\npPropNo is the number of next open slot in the list."]}),"\n",(0,n.jsx)(t.h3,{id:"getmdx",children:"%GetMDX"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %GetMDX(Output pMDX As %String) As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return an MDX statement to provide the KPI data."}),"\n",(0,n.jsx)(t.h3,{id:"ongetmdx",children:"%OnGetMDX"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnGetMDX(ByRef pMDX As %String) As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"This callback, if implemented, lets a subclass provide an MDX statement to fetch data for this KPI. If there are filter values, they will be within the %filterValues property (an object)."}),"\n",(0,n.jsx)(t.h3,{id:"getmdxcontextfilter",children:"%GetMDXContextFilter"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %GetMDXContextFilter() As %String\n"})}),"\n",(0,n.jsx)(t.p,{children:'Return a series of %FILTER clauses (as a single string) based on the "%CONTEXT" of the %KPI or %MDX function that invoked this KPI. This behavior is automatic; you can override this method and return "" if you do not want this to happen.'}),"\n",(0,n.jsx)(t.h3,{id:"executemdx",children:"%ExecuteMDX"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %ExecuteMDX(pMDX As %String) As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Execute an MDX statement and use the results to provide the KPI data."}),"\n",(0,n.jsx)(t.h3,{id:"getsql",children:"%GetSQL"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %GetSQL(Output pSQL As %String) As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return an SQL statement to provide the KPI data."}),"\n",(0,n.jsx)(t.h3,{id:"getlistingsql",children:"%GetListingSQL"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %GetListingSQL(Output pSQL As %String, ByRef pFilters, ByRef pSelection, pListingName) As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return an SQL statement to provide the KPI's listing data."}),"\n",(0,n.jsx)(t.h3,{id:"ongetsql",children:"%OnGetSQL"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnGetSQL(ByRef pSQL As %String) As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"This callback, if implemented, lets a subclass provide an SQL statement to fetch data for this KPI. If there are filter values, they will be within the %filterValues property (an object)."}),"\n",(0,n.jsx)(t.h3,{id:"executesql",children:"%ExecuteSQL"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %ExecuteSQL(pSQL As %String) As %Status [ Final, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Execute an SQL statement and use the results to provide the KPI data."}),"\n",(0,n.jsx)(t.h3,{id:"onexecute",children:"%OnExecute"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnExecute() As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Get data for this KPI manually. This is implemented by subclasses that provide manual data."}),"\n",(0,n.jsx)(t.h3,{id:"getfilterlist",children:"%GetFilterList"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetFilterList(Output pFilters As %List, pDataSourceName As %String = "") As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate, Internal ]\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Return list of possible filters for this KPI. This drives the list of filter selections for widget connected to this KPI. This takes the form:",(0,n.jsx)(t.br,{}),"\npFilters(n)=$LB(name,caption,filterProperty,multiSelect,dependsOn,searchType)"]}),"\n",(0,n.jsx)(t.h3,{id:"ongetfilterlist",children:"%OnGetFilterList"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %OnGetFilterList(Output pFilters As %List, pDataSourceName As %String = "") As %Status\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Callback to get additional possible filters for this KPI. This drives the list of filter selections for widget connected to this KPI. This takes the form:",(0,n.jsx)(t.br,{}),"\npFilters($I(pFilters))=$LB(name,caption,value,multiSelect)"]}),"\n",(0,n.jsx)(t.h3,{id:"getfiltermembers",children:"%GetFilterMembers"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetFilterMembers(pFilter As %String, Output pMembers As %List, Output pDefaultValue As %String, pSearchKey As %String = "", pDataSourceName As %String = "", ByRef pFilterValues As %String) As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate, Internal ]\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Return a list of possible filter values for a given filter. This takes the form:",(0,n.jsx)(t.br,{}),"\npMembers(n)=$LB(text,value)"]}),"\n",(0,n.jsx)(t.h3,{id:"getactionlist",children:"%GetActionList"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetActionList(ByRef pActions As %List, pDataSourceName As %String = "") As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate, Internal ]\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Return list of possible actions for this KPI. This drives the list of action selections for widget connected to this KPI. This takes the form:",(0,n.jsx)(t.br,{}),"\npActions(n)=$LB(name,caption)"]}),"\n",(0,n.jsx)(t.h3,{id:"invokedashboardaction",children:"%InvokeDashboardAction"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %InvokeDashboardAction(pAction As %String, pContext As %ZEN.proxyObject, pDataSourceName As %String = "") As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %Generate, Internal ]\n'})}),"\n",(0,n.jsx)(t.p,{children:"Internal method that gets invoked from a client dashboard and dispatches to a user callback."}),"\n",(0,n.jsx)(t.h3,{id:"getmembersforfilter",children:"%GetMembersForFilter"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetMembersForFilter(pCube As %String, pFilterSpec As %String, Output pMembers, pSearchKey As %String = "") As %Status\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Convenience method. For a given DeepSee cube and filter spec, return a list of members in the form:",(0,n.jsx)(t.br,{}),"\npMembers(n)=$LB(text,value)",(0,n.jsx)(t.br,{}),"\nThis list contains both the display names (text) of the filter items and the logical names (value).",(0,n.jsx)(t.br,{}),'\npCube is the logical name of the cube with .cube appended, for example: "holefoods.cube"',(0,n.jsx)(t.br,{}),"\npFilterSpec is the COMPLETE name of a level within the cube:",(0,n.jsx)(t.br,{}),'\n"[DateOfSale].[Actual].[YearSold]"',(0,n.jsx)(t.br,{}),"\npSearchKey is any search text entered by the user."]}),"\n",(0,n.jsx)(t.h3,{id:"getsqlforfilter",children:"%GetSQLForFilter"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %GetSQLForFilter(pFieldName As %String, pFilterName As %String) As %String\n"})}),"\n",(0,n.jsxs)(t.p,{children:['Given a filter name, pFilterName, and an SQL field name, pFieldName, return an SQL expression based on the filter value(s) that can be used within an SQL WHERE clause. Returns "" if there is no filter value.',(0,n.jsx)(t.br,{}),"\nFor example: if you have a SQL-based KPI class based on a table with a YearSold field, you can get an SQL expression for it:",(0,n.jsx)(t.br,{}),'\nSet tYearExpr = ..%GetSQLForFilter("YearSold","Year")',(0,n.jsx)(t.br,{}),'\nIf tYearExpr is not "", then you can add it to your SQL WHERE clause to add the filtering:',(0,n.jsx)(t.br,{}),'\nSet tSQL = tSQL _ " WHERE " _ tYearExpr',(0,n.jsx)(t.br,{}),"\nor if your query already has a WHERE clause:",(0,n.jsx)(t.br,{}),'\nSet tSQL = tSQL _ " AND " _ tYearExpr']}),"\n",(0,n.jsx)(t.h3,{id:"getmdxforfilter",children:"%GetMDXForFilter"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %GetMDXForFilter(pLevelSpec As %String, pFilterName As %String) As %String\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Given a filter name, pFilterName, and a level specification, pLevelSpec, return an MDX expression based on the filter value(s) that can be used within an MDX WHERE or %FILTER clause.",(0,n.jsx)(t.br,{}),'\nReturns "" if there is no filter value.',(0,n.jsx)(t.br,{}),"\nFor example: if you have a MDX-based KPI class with a YearSold level within a DateOfSale dimension and a filter named Year, you can get an MDX filter expression for it:",(0,n.jsx)(t.br,{}),'\nSet tYearFilter = ..%GetMDXForFilter("[DateOfSale].[YearSold]","Year")',(0,n.jsx)(t.br,{}),'\nIf tYearFilter is not "", then you can add it to your MDX query to add the filtering:',(0,n.jsx)(t.br,{}),'\nSet tMDX = tMDX _ " %FILTER " _ tYearFilter']}),"\n",(0,n.jsx)(t.h3,{id:"splitlist",children:"%SplitList"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %SplitList(pValue As %String, Output pList) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsxs)(t.p,{children:['Given a value, test if it has multiple values and return a list of them. For example, "Apple" returns "Apple" and a count of 1. "{[2001],[2002]}" returns "[2001]","[2002]", and count of 2. This method assumes that enclosing {} have already been removed.',(0,n.jsx)(t.br,{}),"\nReturn number of items in the value."]})]})}function o(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>l});var n=s(96540);const a={},i=n.createContext(a);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);