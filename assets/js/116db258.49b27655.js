"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[53816],{49068:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>a,default:()=>o,frontMatter:()=>r,toc:()=>c});var t=n(74848),l=n(28453);const r={pagination_prev:null,pagination_next:null},a="SYS.Stats.WriteDaemon",c=[{value:"Properties",id:"properties",level:2},{value:"Index",id:"index",level:3},{value:"CurBlk",id:"curblk",level:3},{value:"TotBlk",id:"totblk",level:3},{value:"Cycles",id:"cycles",level:3},{value:"CycleBlk",id:"cycleblk",level:3},{value:"VolumeQ",id:"volumeq",level:3},{value:"Wake",id:"wake",level:3},{value:"WakeStart",id:"wakestart",level:3},{value:"CycleTime",id:"cycletime",level:3},{value:"CycleStart",id:"cyclestart",level:3},{value:"Phase",id:"phase",level:3},{value:"Methods",id:"methods",level:2},{value:"SampleExecute",id:"sampleexecute",level:3},{value:"SampleClose",id:"sampleclose",level:3},{value:"SampleFetch",id:"samplefetch",level:3},{value:"Sample",id:"sample",level:3},{value:"Time",id:"time",level:3}];function i(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sysstatswritedaemon",children:"SYS.Stats.WriteDaemon"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class SYS.Stats.WriteDaemon Extends SYS.WSMon.wsResource [ System = 4 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This class provides detailed system metrics captured for the Write Daemon(s). Each instance of InterSystems IRIS has a Write Daemon, and on some operating systems may also have Auxiliary Write Daemons. Each instance of this class presents the data for one of these daemons, with the first instance being the main Write Daemon."}),"\n",(0,t.jsx)(s.p,{children:"The current values for each class instance may be fetched using the Query 'Sample', and then the current value of each property can be accessed."}),"\n",(0,t.jsxs)(s.p,{children:["For example: ",(0,t.jsx)(s.code,{children:'s prop="Index,CurBlk,TotBlk,Cycles,CycleBlk,VolumeQ,Wake,CycleTime" ; list of properties s rset=##class(%ResultSet).%New("SYS.Stats.WriteDaemon:Sample") d rset.Execute() s len=$l(prop,",") ; list properties for all Write Daemons while rset.Next() { f i=1:1:len w rset.Data($p(prop,",",i)) w:i'})]}),"\n",(0,t.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(s.h3,{id:"index",children:"Index"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Index As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"An index number to uniquely identify this daemon."}),"\n",(0,t.jsx)(s.h3,{id:"curblk",children:"CurBlk"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property CurBlk As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The number of blocks written by current/latest cycle."}),"\n",(0,t.jsx)(s.h3,{id:"totblk",children:"TotBlk"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TotBlk As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The cumulative number of blocks written by this daemon."}),"\n",(0,t.jsx)(s.h3,{id:"cycles",children:"Cycles"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Cycles As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The number of active cycles for this daemon."}),"\n",(0,t.jsx)(s.h3,{id:"cycleblk",children:"CycleBlk"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property CycleBlk As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The average number of blocks written per WD cycle."}),"\n",(0,t.jsx)(s.h3,{id:"volumeq",children:"VolumeQ"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property VolumeQ As %String;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The list of databases served by this daemon"}),"\n",(0,t.jsx)(s.h3,{id:"wake",children:"Wake"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Wake As %Boolean;\n"})}),"\n",(0,t.jsx)(s.p,{children:"A flag indicating if this daemon is currently active."}),"\n",(0,t.jsx)(s.h3,{id:"wakestart",children:"WakeStart"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property WakeStart As %String;\n"})}),"\n",(0,t.jsx)(s.p,{children:'Time that the current write cycle started (returns "" if Wake = 0) This is returned in the same format at $ZTIMESTAMP (UTC date/time)'}),"\n",(0,t.jsx)(s.h3,{id:"cycletime",children:"CycleTime"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property CycleTime As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The time (in milliseconds) it took for the last complete write cycle."}),"\n",(0,t.jsx)(s.h3,{id:"cyclestart",children:"CycleStart"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property CycleStart As %String;\n"})}),"\n",(0,t.jsx)(s.p,{children:"The start time of the last complete write cycle. This is returned in the same format at $ZTIMESTAMP (UTC date/time)"}),"\n",(0,t.jsx)(s.h3,{id:"phase",children:"Phase"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Phase As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"Current phase of the Write Daemon."}),"\n",(0,t.jsx)(s.p,{children:"This is an integer that represents the current phase of a processing cycle. The phases are:"}),"\n",(0,t.jsxs)(s.p,{children:["0: Idle",(0,t.jsx)(s.br,{}),"\n1: Cycle initialization",(0,t.jsx)(s.br,{}),"\n2: Lock set, waiting for updaters",(0,t.jsx)(s.br,{}),"\n3: Forming block write list",(0,t.jsx)(s.br,{}),"\n4: Lock clear, waking updaters",(0,t.jsx)(s.br,{}),"\n5: Writing image journal",(0,t.jsx)(s.br,{}),"\n6: Image journal done, starting journal sync",(0,t.jsx)(s.br,{}),"\n7: Commiting WIJ and Journal",(0,t.jsx)(s.br,{}),"\n8: Database write phase",(0,t.jsx)(s.br,{}),"\n9: Commiting database writes to disk",(0,t.jsx)(s.br,{}),"\n10: Clearing WIJ",(0,t.jsx)(s.br,{}),"\n11: Cycle post processing",(0,t.jsx)(s.br,{}),"\n12: Cycle complete"]}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"sampleexecute",children:"SampleExecute"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SampleExecute(ByRef qHandle As %Binary) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Sample counters for all Buffer sizes"}),"\n",(0,t.jsx)(s.h3,{id:"sampleclose",children:"SampleClose"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SampleClose(ByRef qHandle As %Binary) As %Status [ PlaceAfter = SampleExecute ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"samplefetch",children:"SampleFetch"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SampleFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ PlaceAfter = SampleExecute ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"sample",children:"Sample"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Sample(DaemonID As %Integer = 1) As SYS.Stats.WriteDaemon\n"})}),"\n",(0,t.jsx)(s.p,{children:"Instantiate the class for an individual Write Daemon and fill in current values for all properties. 'DaemonID' is an integer from 1 to 'n' used to reference each daemon. A number greater than 'n' returns the property 'Index' as zero."}),"\n",(0,t.jsx)(s.p,{children:"Allows for XML output of a single WriteDaemon instance."}),"\n",(0,t.jsx)(s.h3,{id:"time",children:"Time"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Time(time As %String) As %String [ Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Convert WD start times stored internally to $ZTIMESTAMP format."})]})}function o(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>c});var t=n(96540);const l={},r=t.createContext(l);function a(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);