"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[87829],{48697:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>o,default:()=>c,frontMatter:()=>r,toc:()=>a});var s=t(74848),i=t(28453);const r={pagination_prev:null,pagination_next:null},o="%Api.Atelier.v7",a=[{value:"XDatas",id:"xdatas",level:2},{value:"UrlMap",id:"urlmap",level:3},{value:"Methods",id:"methods",level:2},{value:"RunTerminal",id:"runterminal",level:3},{value:"ExportToXMLFile",id:"exporttoxmlfile",level:3},{value:"LoadXMLFiles",id:"loadxmlfiles",level:3},{value:"ListDocumentsInXMLFiles",id:"listdocumentsinxmlfiles",level:3}];function l(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",string:"string",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"apiatelierv7",children:"%Api.Atelier.v7"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Class %Api.Atelier.v7 Extends %Api.Atelier.v6\n"})}),"\n",(0,s.jsx)(n.p,{children:"%Api.Atelier.v7 provides version 7 APIs for Atelier"}),"\n",(0,s.jsx)(n.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,s.jsx)(n.h3,{id:"urlmap",children:"UrlMap"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'XData UrlMap [ XMLNamespace = "http://www.intersystems.com/urlmap" ]\n'})}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"runterminal",children:"RunTerminal"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod RunTerminal() As %Status\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exporttoxmlfile",children:"ExportToXMLFile"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod ExportToXMLFile(pNamespace As %String) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"This method gets the text of one or more documents in a single legacy XML file."}),"\n",(0,s.jsxs)(n.p,{children:["The method expects a content body to be encoded in JSON and contain an",(0,s.jsx)(n.br,{}),"\narray of items (document names) to be exported. Note that items may also",(0,s.jsx)(n.br,{}),"\nuse ? or * wild cards and if you wish to exclude items pass ' before the item name:"]}),"\n",(0,s.jsx)(n.p,{children:'[ "User.Test.cls", "abc*.mac" ]'}),"\n",(0,s.jsx)(n.p,{children:"HTTP Codes returned:-"}),"\n",(0,s.jsxs)(n.p,{children:["HTTP 200 if OK",(0,s.jsx)(n.br,{}),"\nHTTP 400 if the posted content is empty or not valid json",(0,s.jsx)(n.br,{}),"\nHTTP 415 if content type is not application/json",(0,s.jsx)(n.br,{}),"\nHTTP 500 if an error occurs (details will be in status error array)"]}),"\n",(0,s.jsx)(n.p,{children:"Returned content is an array of lines of the legacy XML file:"}),"\n",(0,s.jsxs)(n.p,{children:['{   "status": {     "errors": [],     "summary": ""   },   "console": [],   "result": {     "content": [       "','",       ...     ]   } }']}),"\n",(0,s.jsx)(n.h3,{id:"loadxmlfiles",children:"LoadXMLFiles"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod LoadXMLFiles(pNamespace As %String) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"This method loads and optionally compiles the selected documents within legacy XML files."}),"\n",(0,s.jsx)(n.p,{children:"The method expects a content body to be encoded in JSON and contain an array of objects, one for each XML file. Each object must contain a string to identify the file (for example, its filesystem path) and a content array containing the lines of the file. An array of specific documents to import may be provided. If omitted, all documents in the XML file are imported:"}),"\n",(0,s.jsxs)(n.p,{children:['[   {     "file": "/path/to/file.xml",     "content": [       "','",       ...     ],     "selected": [       "User.Test.cls"     ]   } [']}),"\n",(0,s.jsx)(n.p,{children:"HTTP Codes returned:-"}),"\n",(0,s.jsxs)(n.p,{children:["HTTP 200 if OK",(0,s.jsx)(n.br,{}),"\nHTTP 400 if the posted content is empty or not valid json",(0,s.jsx)(n.br,{}),"\nHTTP 415 if content type is not application/json",(0,s.jsx)(n.br,{}),"\nHTTP 500 if an error occurs (details will be in status error array)"]}),"\n",(0,s.jsxs)(n.p,{children:["The URL parameter ?flags=",(0,s.jsxs)(n.string,{children:[" can be passed to modify the load",(0,s.jsx)(n.br,{}),"\nbehavior. The list of supported flags or qualifiers can be displayed with",(0,s.jsx)(n.br,{}),"\n'Do $system.OBJ.ShowQualifiers()' and 'Do $system.OBJ.ShowFlags()'."]})]}),"\n",(0,s.jsx)(n.p,{children:"Return content is an array of objects, one per XML file. Each object contains the identifier of the XML file, an array containing the names of all documents from that file that were successfully imported, and a status string if an error occurred while importing it:"}),"\n",(0,s.jsx)(n.p,{children:'{   "status": {     "errors": [],     "summary": ""   },   "console": [],   "result": {     "content": [       {         "file": "/path/to/file.xml",         "status": "",         "imported": [           "User.Test.cls"         ]       }     ]   } }'}),"\n",(0,s.jsx)(n.p,{children:"NOTE: If you are experiencing timeouts using this method, consider calling method Load() in class %SYSTEM.OBJ from a terminal instead."}),"\n",(0,s.jsx)(n.h3,{id:"listdocumentsinxmlfiles",children:"ListDocumentsInXMLFiles"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod ListDocumentsInXMLFiles(pNamespace As %String) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"This method gets the names and timestamps of documents contained in legacy XML files."}),"\n",(0,s.jsx)(n.p,{children:"The method expects a content body to be encoded in JSON and contain an array of objects, one for each XML file. Each object must contain a string to identify the file (for example, its filesystem path) and a content array containing the lines of the file:"}),"\n",(0,s.jsxs)(n.p,{children:['[   {     "file": "/path/to/file.xml",     "content": [       "','",       ...     ]   } [']}),"\n",(0,s.jsx)(n.p,{children:"HTTP Codes returned:-"}),"\n",(0,s.jsxs)(n.p,{children:["HTTP 200 if OK",(0,s.jsx)(n.br,{}),"\nHTTP 400 if the posted content is empty or not valid json",(0,s.jsx)(n.br,{}),"\nHTTP 415 if content type is not application/json",(0,s.jsx)(n.br,{}),"\nHTTP 500 if an error occurs (details will be in status error array)"]}),"\n",(0,s.jsx)(n.p,{children:"Return content is an array of objects, one per XML file. Each object contains the identifier of the XML file, an array containing the names and timestamps of the documents, and a status string if an error occurred while processing it:"}),"\n",(0,s.jsx)(n.p,{children:'{   "status": {     "errors": [],     "summary": ""   },   "console": [],   "result": {     "content": [       {         "file": "/path/to/file.xml",         "status": "",         "documents": [           {             "name": "User.Test.cls",             "ts": "2016-01-04 14:00:04.000"           }         ]       }     ]   } }'}),"\n",(0,s.jsx)(n.p,{children:"NOTE: If you are experiencing timeouts using this method, consider calling method Load() in class %SYSTEM.OBJ from a terminal instead."})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);