"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[15431],{50533:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>a,default:()=>d,frontMatter:()=>l,toc:()=>i});var n=t(74848),r=t(28453);const l={pagination_prev:null,pagination_next:null},a="%CSP.Routine",i=[{value:"Parameters",id:"parameters",level:2},{value:"FILEEXT",id:"fileext",level:3},{value:"Properties",id:"properties",level:2},{value:"Generated",id:"generated",level:3},{value:"IsModified",id:"ismodified",level:3},{value:"UpToDate",id:"uptodate",level:3},{value:"Url",id:"url",level:3},{value:"Namespace",id:"namespace",level:3},{value:"TimeStamp",id:"timestamp",level:3},{value:"Locked",id:"locked",level:3},{value:"Methods",id:"methods",level:2},{value:"UpToDateGet",id:"uptodateget",level:3},{value:"%OnClose",id:"onclose",level:3},{value:"IOGetStreamId",id:"iogetstreamid",level:3},{value:"%OnNew",id:"onnew",level:3},{value:"OpenStream",id:"openstream",level:3},{value:"SaveStream",id:"savestream",level:3},{value:"ClearGatewayCache",id:"cleargatewaycache",level:3},{value:"UrlSet",id:"urlset",level:3},{value:"NamespaceSet",id:"namespaceset",level:3},{value:"LinkToUrl",id:"linktourl",level:3},{value:"CopyFile",id:"copyfile",level:3},{value:"Compile",id:"compile",level:3},{value:"Delete",id:"delete",level:3},{value:"Exists",id:"exists",level:3},{value:"GetDate",id:"getdate",level:3},{value:"GetCurrentTimeStamp",id:"getcurrenttimestamp",level:3},{value:"TimeStampGet",id:"timestampget",level:3},{value:"Lock",id:"lock",level:3},{value:"Unlock",id:"unlock",level:3},{value:"LockRoutine",id:"lockroutine",level:3},{value:"GetReadOpenParameter",id:"getreadopenparameter",level:3},{value:"GetWriteOpenParameter",id:"getwriteopenparameter",level:3},{value:"Clear",id:"clear",level:3}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"csproutine",children:"%CSP.Routine"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class %CSP.Routine Extends %FileCharacterStream [ System = 3 ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Subclass of %FileCharacterStream that is used to load, save, compile, delete, etc. CSP files. To create one you pass it the URL of the CSP file you wish to manipulate such as: ",(0,n.jsx)(s.code,{children:'Set stream=##class(%CSP.Routine).%New("/csp/samples/inspector.csp") Do stream.OutputToDevice()'})]}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.h3,{id:"fileext",children:"FILEEXT"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter FILEEXT = "csp";\n'})}),"\n",(0,n.jsx)(s.p,{children:"Override of file extension from %FileCharacterStream."}),"\n",(0,n.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(s.h3,{id:"generated",children:"Generated"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Generated As %Boolean;\n"})}),"\n",(0,n.jsx)(s.p,{children:"True if this routine is generated from something else"}),"\n",(0,n.jsx)(s.h3,{id:"ismodified",children:"IsModified"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property IsModified As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.h3,{id:"uptodate",children:"UpToDate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property UpToDate As %Boolean [ Calculated ];\n"})}),"\n",(0,n.jsx)(s.h3,{id:"url",children:"Url"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Url As %String;\n"})}),"\n",(0,n.jsx)(s.p,{children:"Property holding the URL for this CSP application."}),"\n",(0,n.jsx)(s.h3,{id:"namespace",children:"Namespace"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Namespace As %String;\n"})}),"\n",(0,n.jsx)(s.p,{children:"Readonly property holding the namespace for this CSP application."}),"\n",(0,n.jsx)(s.h3,{id:"timestamp",children:"TimeStamp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property TimeStamp As %TimeStamp [ Calculated ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Caclulated property that contains the current timestamp for the routine."}),"\n",(0,n.jsx)(s.h3,{id:"locked",children:"Locked"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Locked As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Number of times this routines has been locked."}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"uptodateget",children:"UpToDateGet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method UpToDateGet() As %Boolean\n"})}),"\n",(0,n.jsx)(s.h3,{id:"onclose",children:"%OnClose"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnClose() As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Override of %OnClose method from %FileCharacterStream"}),"\n",(0,n.jsx)(s.h3,{id:"iogetstreamid",children:"IOGetStreamId"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method IOGetStreamId() As %String [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Override of IOGetStreamId method from %FileCharacterStream"}),"\n",(0,n.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Method %OnNew(url As %String = "") As %Status [ Internal, Private ]\n'})}),"\n",(0,n.jsx)(s.p,{children:"Override of %OnNew method from %FileCharacterStream"}),"\n",(0,n.jsx)(s.h3,{id:"openstream",children:"OpenStream"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method OpenStream(url As %String) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Override of OpenStream method from %FileCharacterStream to open a %CSP.Routine."}),"\n",(0,n.jsx)(s.h3,{id:"savestream",children:"SaveStream"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method SaveStream(supressbackup As %Boolean = 1, Output Refresh As %Boolean) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Override of SaveStream method from %FileCharacterStream to save this stream"}),"\n",(0,n.jsx)(s.h3,{id:"cleargatewaycache",children:"ClearGatewayCache"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ClearGatewayCache(url As %String, clear As %List = "") As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"If needed this will clear the gateway cache of this static url"}),"\n",(0,n.jsx)(s.h3,{id:"urlset",children:"UrlSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method UrlSet(url As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set method for Url property"}),"\n",(0,n.jsx)(s.h3,{id:"namespaceset",children:"NamespaceSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method NamespaceSet(val As %String) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set method for Namespace property to make it readonly"}),"\n",(0,n.jsx)(s.h3,{id:"linktourl",children:"LinkToUrl"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Method LinkToUrl(url As %String = "") As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Link this stream to the file pointed to by this url."}),"\n",(0,n.jsx)(s.h3,{id:"copyfile",children:"CopyFile"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CopyFile(oldn As %String, newn As %String) As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Copy file."}),"\n",(0,n.jsx)(s.h3,{id:"compile",children:"Compile"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Method Compile(qspec As %String = "") As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Compile this CSP page. This calls SaveStream to flush the stream out to disk before calling compile."}),"\n",(0,n.jsx)(s.h3,{id:"delete",children:"Delete"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Delete(url As %String) As %Status [ ProcedureBlock = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Delete the file associated with this CSP url"}),"\n",(0,n.jsx)(s.h3,{id:"exists",children:"Exists"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Exists(url As %String) As %Boolean\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return true if the CSP file exists (not the class) and false otherwise."}),"\n",(0,n.jsx)(s.h3,{id:"getdate",children:"GetDate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetDate(url As %String) As %TimeStamp\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return the timestamp of this CSP/CSR file. If there is no file then return -1"}),"\n",(0,n.jsx)(s.h3,{id:"getcurrenttimestamp",children:"GetCurrentTimeStamp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetCurrentTimeStamp() As %TimeStamp\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get the timestamp for the routine."}),"\n",(0,n.jsx)(s.h3,{id:"timestampget",children:"TimeStampGet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method TimeStampGet() As %TimeStamp [ CodeMode = expression, Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get method for TimeStamp property."}),"\n",(0,n.jsx)(s.h3,{id:"lock",children:"Lock"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method Lock() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Lock the current routine"}),"\n",(0,n.jsx)(s.h3,{id:"unlock",children:"Unlock"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method Unlock() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Unlock the current routine"}),"\n",(0,n.jsx)(s.h3,{id:"lockroutine",children:"LockRoutine"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod LockRoutine(name As %String, lock As %Boolean = 1, checkfile As %Boolean = 1) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Lock or unlock a particular routine name. If lock is true then it will be locked else it will be unlocked."}),"\n",(0,n.jsx)(s.h3,{id:"getreadopenparameter",children:"GetReadOpenParameter"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetReadOpenParameter(filename As %String, mode As %Integer, ByRef pos As %Integer) As %String [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Override of GetReadOpenParameter from %FileCharacterStream"}),"\n",(0,n.jsx)(s.h3,{id:"getwriteopenparameter",children:"GetWriteOpenParameter"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetWriteOpenParameter(filename As %String, mode As %Integer) As %String [ Private ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"clear",children:"Clear"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method Clear(permanent As %Boolean = 1) As %Status\n"})})]})}function d(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>i});var n=t(96540);const r={},l=n.createContext(r);function a(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);