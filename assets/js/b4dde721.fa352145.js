"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[12662],{7843:(e,t,o)=>{o.r(t),o.d(t,{contentTitle:()=>l,default:()=>c,frontMatter:()=>a,toc:()=>n});var s=o(74848),r=o(28453);const a={pagination_prev:null,pagination_next:null},l="%SYS.PTools.Stats",n=[{value:"Properties",id:"properties",level:2},{value:"NameSpace",id:"namespace",level:3},{value:"RoutineName",id:"routinename",level:3},{value:"CursorName",id:"cursorname",level:3},{value:"StatsGroup",id:"statsgroup",level:3},{value:"RoutineInfo",id:"routineinfo",level:3},{value:"ModuleName",id:"modulename",level:3},{value:"Counter",id:"counter",level:3},{value:"RowCount",id:"rowcount",level:3},{value:"GlobalRefs",id:"globalrefs",level:3},{value:"CommandsExecuted",id:"commandsexecuted",level:3},{value:"LinesOfCode",id:"linesofcode",level:3},{value:"DiskWait",id:"diskwait",level:3},{value:"TimeSpent",id:"timespent",level:3},{value:"TotalTime",id:"totaltime",level:3},{value:"TimeToFirstRow",id:"timetofirstrow",level:3},{value:"StartTime",id:"starttime",level:3},{value:"UserName",id:"username",level:3},{value:"IPAddress",id:"ipaddress",level:3},{value:"MachineName",id:"machinename",level:3},{value:"ExeName",id:"exename",level:3},{value:"Pid",id:"pid",level:3},{value:"ModuleCount",id:"modulecount",level:3},{value:"StatsMarker",id:"statsmarker",level:3},{value:"Triggers",id:"triggers",level:2},{value:"OnDelete",id:"ondelete",level:3},{value:"Methods",id:"methods",level:2},{value:"Start",id:"start",level:3},{value:"Stop",id:"stop",level:3},{value:"Report",id:"report",level:3},{value:"exportStats",id:"exportstats",level:3},{value:"clearStatsALL",id:"clearstatsall",level:3},{value:"clearStats",id:"clearstats",level:3},{value:"clearStatsAllNS",id:"clearstatsallns",level:3},{value:"clearStatsSQLALL",id:"clearstatssqlall",level:3},{value:"clearStatsSQLOLD",id:"clearstatssqlold",level:3},{value:"clearStatsSQLNEW",id:"clearstatssqlnew",level:3},{value:"clearStatsSQLIndexALL",id:"clearstatssqlindexall",level:3},{value:"clearStatsSQLIndexOLD",id:"clearstatssqlindexold",level:3},{value:"clearStatsSQLIndexNEW",id:"clearstatssqlindexnew",level:3},{value:"getPToolsError",id:"getptoolserror",level:3},{value:"clearPToolsError",id:"clearptoolserror",level:3},{value:"version",id:"version",level:3},{value:"TriggerOnDelete",id:"triggerondelete",level:3}];function i(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"sysptoolsstats",children:"%SYS.PTools.Stats"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Class %SYS.PTools.Stats Extends (%Persistent, %SYS.PTools.FileCreation) [ System = 4 ]\n"})}),"\n",(0,s.jsxs)(t.p,{children:['Class: %SYS.PTools.Stats Replaces: N/A Purpose: This class is designed to gather performance statistics for any type of routine or code block. The data for this class is stored in the following optimized global: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") By calling pairs of the Start() and Stop() methods we will record GlobalRef, commands executed, TimeSpent, and some additional process info for each code block. You need to manually add the calls to the Start() and Stop() methods to your code. Each method takes 3 parameters: NS - The namespace in which the stats collection is occurring Rou - The routine name for which the stats collection is occurring Mod - The module name for which the stats collection is occurring [DEFAULT: 1] For example, when the following code is executed, the three entries will be recorded into the %SYS_PTools.Stats table, one for each call to Stop(). ',(0,s.jsx)(t.code,{children:'Test ; new ns set ns=$NAMESPACE if ns\'="SAMPLES" new $NAMESPACE set $NAMESPACE="SAMPLES" // Change to \'SAMPLES\' NS do ##class(%SYS.PTools.Stats).Start($NAMESPACE,"Test","Full_Module") do ##class(%SYS.PTools.Stats).Start($NAMESPACE,"Test","Populate") do ##class(Sample.Person).Populate(100) do ##class(%SYS.PTools.Stats).Stop($NAMESPACE,"Test","Populate") do ##class(%SYS.PTools.Stats).Start($NAMESPACE,"Test","PrintPersons") do ##class(Sample.Person).PrintPersons() do ##class(%SYS.PTools.Stats).Stop($NAMESPACE,"Test","PrintPersons") do ##class(%SYS.PTools.Stats).Stop($NAMESPACE,"Test","Full_Module") QUIT'})]}),"\n",(0,s.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,s.jsx)(t.h3,{id:"namespace",children:"NameSpace"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property NameSpace As %String(MAXLEN = 2000) [ InitialExpression = {$NAMESPACE}, Required ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"The NameSpace in which the Stats collection is being invoked"}),"\n",(0,s.jsx)(t.h3,{id:"routinename",children:"RoutineName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property RoutineName As %String(MAXLEN = 2000) [ Required ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"The name of the routine in which the Stats collection is being invoked"}),"\n",(0,s.jsx)(t.h3,{id:"cursorname",children:"CursorName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Property CursorName As %String(MAXLEN = 2000) [ InitialExpression = "*", Required ];\n'})}),"\n",(0,s.jsx)(t.p,{children:"Placeholder (*) indicating that this is not a Cursor Name for an SQL Statement [Used in %SYS.PTools.StatsSQL]"}),"\n",(0,s.jsx)(t.h3,{id:"statsgroup",children:"StatsGroup"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property StatsGroup As %Integer [ Required, SqlComputeCode = { Set {*} = $$$bumpSYSPToolsStatsGroup({NameSpace},{RoutineName},{ModuleName}) }, SqlComputed ];\n"})}),"\n",(0,s.jsx)(t.p,{children:'This is a unique number that specifies the Stats Collection Group for each query run The counter comes from bumping the following global: ^%sqlcq($NAMESPACE,"PTools","db","StatsZ","StatsGroup",0,{NameSpace},{RoutineName},{ModuleName}) USE: $$$bumpSYSPToolsStatsGroup({NameSpace},{RoutineName},{ModuleName})'}),"\n",(0,s.jsx)(t.h3,{id:"routineinfo",children:"RoutineInfo"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property RoutineInfo As %String(MAXLEN = 4000);\n"})}),"\n",(0,s.jsx)(t.p,{children:"Contains the NameSpace and Routine these stats are for The format is NameSpace|RoutineName This is not used in the %SYS.PTools.SQLStats class"}),"\n",(0,s.jsx)(t.h3,{id:"modulename",children:"ModuleName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property ModuleName As %String(MAXLEN = 2000) [ SqlColumnNumber = 6 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"This is the name of the method within a given routine to be analyzed [DEFAULT: 1] This name can be used to distinguish a block of code within a give routine"}),"\n",(0,s.jsx)(t.h3,{id:"counter",children:"Counter"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property Counter As %Integer [ SqlColumnNumber = 5 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"This is the number of times the query has been run since the last compile."}),"\n",(0,s.jsx)(t.h3,{id:"rowcount",children:"RowCount"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property RowCount As %Integer [ SqlColumnNumber = 7 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"How many rows did the query return for this run Used only by Sub class"}),"\n",(0,s.jsx)(t.h3,{id:"globalrefs",children:"GlobalRefs"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property GlobalRefs As %Integer [ SqlColumnNumber = 8 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"The number globals that were referenced in this Module for the given query The Modules are nested and the count for the outer ones is cumulative"}),"\n",(0,s.jsx)(t.h3,{id:"commandsexecuted",children:"CommandsExecuted"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property CommandsExecuted As %Integer [ SqlColumnNumber = 9 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"The number of ObjectScript commands that were executed in this Module for the given query The Modules are nested and the count for the outer ones is cumulative"}),"\n",(0,s.jsx)(t.h3,{id:"linesofcode",children:"LinesOfCode"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property LinesOfCode As %Integer [ Deprecated, ReadOnly, SqlColumnNumber = 19, SqlComputeCode = { set {*} = {CommandsExecuted} }, SqlComputed, Transient ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"*** DEPRECATED via MRP1300 as of 05/30/2022 *** The 'LinesOfCode' property has been deprecated and replaced by the 'CommandsExecuted' property, but is left here for backwards compatibility and returns the 'CommandsExecuted' value. At some point in the future this property will be removed from the product, so users should not rely on its availability going forward and should use the 'CommandsExecuted' property instead."}),"\n",(0,s.jsx)(t.h3,{id:"diskwait",children:"DiskWait"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property DiskWait As %Integer [ SqlColumnNumber = 18 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"Number of Milliseconds spent waiting for Disk reads in this Module for the given query the Modules are nested and the count for the outer ones is cumulative"}),"\n",(0,s.jsx)(t.h3,{id:"timespent",children:"TimeSpent"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property TimeSpent As %Float [ SqlColumnNumber = 10 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"How much time was spent in this Module for the given query the Modules are nested and the count for the outer ones is cumulative"}),"\n",(0,s.jsx)(t.h3,{id:"totaltime",children:"TotalTime"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property TotalTime As %Float [ SqlComputeCode = { Set {*} = {TimeSpent} }, SqlComputed, Transient ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"Maintained for Backward-Compatibility. See 'TimeSpent'"}),"\n",(0,s.jsx)(t.h3,{id:"timetofirstrow",children:"TimeToFirstRow"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property TimeToFirstRow As %Float;\n"})}),"\n",(0,s.jsx)(t.p,{children:"How much time was spent finding the first row This is only set for Module Main"}),"\n",(0,s.jsx)(t.h3,{id:"starttime",children:"StartTime"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property StartTime As %TimeStamp [ SqlColumnNumber = 11 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"TimeStamp of when the query was compiled/run"}),"\n",(0,s.jsx)(t.h3,{id:"username",children:"UserName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property UserName As %String(MAXLEN = 2000) [ InitialExpression = {$UserName}, SqlColumnNumber = 12 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"InterSystems IRIS UserName of the person who ran this query"}),"\n",(0,s.jsx)(t.h3,{id:"ipaddress",children:"IPAddress"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property IPAddress As %String(MAXLEN = 100) [ SqlColumnNumber = 13 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"IP Address of the machine that ran this query"}),"\n",(0,s.jsx)(t.h3,{id:"machinename",children:"MachineName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property MachineName As %String(MAXLEN = 2000) [ SqlColumnNumber = 14 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"Name of the machine that ran this query"}),"\n",(0,s.jsx)(t.h3,{id:"exename",children:"ExeName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property ExeName As %String(MAXLEN = 2000) [ SqlColumnNumber = 15 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"Name of the executable that ran this query"}),"\n",(0,s.jsx)(t.h3,{id:"pid",children:"Pid"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property Pid As %String(MAXLEN = 2000) [ SqlColumnNumber = 17 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"OS level Process ID"}),"\n",(0,s.jsx)(t.h3,{id:"modulecount",children:"ModuleCount"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property ModuleCount As %String(MAXLEN = 100) [ SqlColumnNumber = 16 ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"Number of times we entered this module for the run of the query Used only by Sub class"}),"\n",(0,s.jsx)(t.h3,{id:"statsmarker",children:"StatsMarker"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property StatsMarker As %Boolean [ InitialExpression = 0, Required ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"This marker indicates if the statistical data is from an SQL Query, in which case the %SYS.PTools.StatsSQL class should be use, or if these stats are general purpose stats for non-SQL modules, in which case the '%SYS.PTools.Stats' class should be use."}),"\n",(0,s.jsx)(t.h2,{id:"triggers",children:"Triggers"}),"\n",(0,s.jsx)(t.h3,{id:"ondelete",children:"OnDelete"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Trigger OnDelete [ Event = DELETE, Time = AFTER ]\n"})}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"start",children:"Start"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Start(NS As %String, Rou As %String, Mod As %String = 1)\n"})}),"\n",(0,s.jsx)(t.p,{children:'Method: Start Replaces: N/A Status: Original Functionality Purpose: This method is used to START the PTools statistics collection Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).Start(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Start collecting stats to analyze the class \'Populate\' method: do ##class(%SYS.PTools.Stats).Start($NAMESPACE,"Test","Populate") do ##class(Sample.Person).Populate(100) do ##class(%SYS.PTools.Stats).Stop($NAMESPACE,"Test","Populate") Data Storage: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") Parameters: NS - The namespace in which the stats collection is occurring Rou - The routine name for which the stats collection is occurring Mod - The module name for which the stats collection is occurring [DEFAULT: 1] RETURN Value: (NONE)'}),"\n",(0,s.jsx)(t.h3,{id:"stop",children:"Stop"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Stop(NS As %String, Rou As %String, Mod As %String = 1)\n"})}),"\n",(0,s.jsx)(t.p,{children:'Method: Stop Replaces: N/A Status: Original Functionality Purpose: This method is used to STOP the PTools statistics collection This method INSERTs the stats information into the %SYS_PTools.Stats table Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).Stop(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Stop collecting stats to analyze the class \'Populate\' method: do ##class(%SYS.PTools.Stats).Start($NAMESPACE,"Test","Populate") do ##class(Sample.Person).Populate(100) do ##class(%SYS.PTools.Stats).Stop($NAMESPACE,"Test","Populate") Data Storage: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") Parameters: NS - The namespace in which the stats collection is occurring Rou - The routine name for which the stats collection is occurring Mod - The module name for which the stats collection is occurring RETURN Value: (NONE)'}),"\n",(0,s.jsx)(t.h3,{id:"report",children:"Report"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod Report(file = "", ByRef conds, ByRef ptInfo) As %String [ SqlName = Stats_Report, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:'Method: Report [SQL: Stats_Report] Replaces: N/A Status: Maintained for Backward-Compatibility. See exportStats(...) [DEPRECATED] Purpose: This method generates a comma delimited file containing the data from the \'%SYS.PTools.Stats\' class By default the file will be created in the MGR directory of the InterSystems IRIS instance. You can pass a different value for the \'file\' parameters if you wish to override the default location and file name. Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).Report(...) SQL: CALL %SYS_PTools.Stats_Report(...) SELECT %SYS_PTools.Stats_Report(...) NOTE: This \'SqlProc\' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Display this export file to the screen via a InterSystems IRIS Terminal: set io=##class(%SYS.PTools.Stats).Report($IO) #2 Display this export file via the SQL Query Page of the Management Portal: CALL %SYS_PTools.Stats_Report(\'$IO\') Where: \'$IO\' = Output to the current device NOTE: \'$IO\' can be omitted, as it is the default \'file\' when invoked via the CALL interface Data Storage: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") Parameters: file - The path and file in which to create and store the data from the %SYS.PTools.Stats class: (e.g. C:\\exportFile.txt) NOTE: $IO = Outputs the data to the screen \'$IO\' = Output the data to the current device when invoked from the CALL/SELECT-interface \'$DEF\' = Ouput the data to the DEFAULT file when invoked from the CALL/SELECT-interface [DEFAULT: {MGR-Directory}\\{computerName}_{ConfigName}_YYYYMMDD_HHMMSS.Stats] conds - A string/array of possible conditions by which to restrict the output of the Export file, in the following format: conds= OR conds(0)=pos Count (WHERE pos = {1...n}) conds(pos)=$LIST() Pieces: 1) [] (Assumed Default: &&) 2) [{Heading}] (Omit for override cond) 3)  |  WHERE:  :=  := {&& | ||} (&& = AND | || = OR) @* := @ :=  @ = Contains no references to {Heading} * = Contains no references to {*} EXAMPLE:  conds="("",INFO,MAIN,""[("",""_{Module}_"",""))||({GlobalRefs}>20)"  conds(0)=3 conds(1)=$LB(,"Module","=""INFO""") conds(2)=$LB("||","Module","=""MAIN""") conds(3)=$LB("||","GlobalRefs",">20")  conds(0)=2 conds(1)=$LB(,"Module",""",INFO,MAIN,""[("",""_{*}_"","")") conds(2)=$LB("||","GlobalRefs","{*}>20") WHERE: {*} = value substitution for the \'Module\' & \'GlobalRefs\' fields NOTE: Conditions that don\'t contain any references to {Heading} fields, often called s, can be included as s, as in the following example: conds(pos)=$LB(,,"$g(^zAction(""runIt""))=1") NOTE: All conditions must be satisfied for the conds() to be considered true and for the row to be exported [PASS BY REFERENCE] ptInfo - A Pass By Reference information array that returns to the user the following details: ptInfo(variable)=value ptInfo("outputFile")=The canonical name of the Export/Reporting file RETURN Value: The output locations of the exported data; Otherwise, return the error status if one occurred'}),"\n",(0,s.jsx)(t.h3,{id:"exportstats",children:"exportStats"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod exportStats(file = "", format = "P", silent = 0, statsType = 0, rtnName = "", modName = "", ByRef conds As %RawString, ByRef ptInfo As %RawString, bcFlag = "") As %Status [ ProcedureBlock = 1, PublicList = (d, thisMethod, outputFile, statsMarker, tSC, version), SqlName = PT_exportStats, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:'Method: exportStats [SQL: PT_exportStats] Replaces: Report [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it \'Replaces\' Purpose: Create a Performance Tool file containing the data from the \'%SYS.PTools.Stats\' and return the output location... By default, the file will be created in the current directory of the InterSystems IRIS instance. NOTE: Current directory can be obtained in the following way, from a InterSystems IRIS Terminal: >write $ZU(12,"") You can pass a different value for the \'file\' parameters if you wish to override the default location and file name. Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).exportStats(...) SQL: CALL %SYS_PTools.PT_exportStats(...) SELECT %SYS_PTools.PT_exportStats(...) NOTE: This \'SqlProc\' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Display this export file to the screen via a InterSystems IRIS Terminal: set tSC=##class(%SYS.PTools.Stats).exportStats($IO) #2 Display this export file via the SQL Query Page of the Management Portal: CALL %SYS_PTools.PT_exportStats(\'$IO\',\'H\') Where: \'$IO\' = Output to the current device NOTE: \'$IO\' can be omitted, as it is the default \'file\' when invoked via the CALL interface \'H\' = Output the format in HTML format NOTE: \'H\' can be omitted, as it is the default \'format\' when invoked via the CALL interface Data Storage: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") Parameters: file - The path and file in which to create and store the data from the %SYS.PTools.Stats class: (e.g. C:\\exportFile.txt) NOTE: $IO = Outputs the data to the screen \'$IO\' = Output the data to the current device when invoked from the CALL/SELECT-interface \'$DEF\' = Ouput the data to the DEFAULT file when invoked from the CALL/SELECT-interface [DEFAULT: {Current-Directory}\\PT_Stats_exportStats_YYYYMMDD_HHMMSS.{ext}] WHERE {Current-Directory} = The directory of the Namespace in which this method is invoked (e.g. $ZU(12,"")) NOTE 2: If Passed By Reference, then \'file\' will be returned as the canonical name of the Export/Reporting file format - The output format of the Export/Reporting file This parameter has the following structure of constituent elements: format=[:$LB(,,)] Where the constituent elements have the following values:  - The format of the Export/Reporting file: - P = Printable/Viewable report file (.txt file, no pagination) - D = Comma-delimited data file (.csv file) which can be read into a spreadsheet - X = Microsoft Excel XML markup file suitable for import into Excel (.xml file) - H = HTML page file (.html file) - Z = User-defined delimiter "P" formatted file (.dlm file) NOTE: The  element is required or defaulted to $C(9) (TAB) Optional Elements:  - User-defined delimiter [DEFAULT: $C(9) (TAB)] NOTE: This is generally used for ="Z"  - .csv file header for ="D": - 0 = Don\'t add non-standard information header to file [DEFAULT] - 1 = Add non-standard information header to file  - .csv file footer for ="D": - 0 = Don\'t add non-standard information footer to file [DEFAULT] - 1 = Add non-standard information footer to file EXAMPLES: Valid \'format\' values: - "H" // HTML file - "D" // CSV file with No information header or footer - "D:"_$LB(,1,1) // CSV file with information header & footer - "Z:"_$LB("^") // User-defined delimiter file (delim="^") silent - 0 - Display all messages during the running of this method 1 - Don\'t display any messages during the running of this method statsType - 0 - Return all rows from %SYS.PTools.Stats ONLY [DEFAULT] 1 - Return all rows from %SYS.PTools.StatsSQL ONLY 2 - Return all rows from %SYS.PTools.Stats & %SYS.PTools.StatsSQL rtnName - If specified, return only the rows where the \'RoutineName\' matches the value of this parameter; Otherwise, return rows for all \'RoutineName\' values modName - If specified, return only the rows where the \'ModuleName\' matches the value of this parameter; Otherwise, return rows for all \'ModuleName\' values conds - A string/array of possible conditions by which to restrict the output of the Export file, in the following format: conds= OR conds(0)=pos Count (WHERE pos = {1...n}) conds(pos)=$LIST() Pieces: 1) [] (Assumed Default: &&) 2) [{Heading}] (Omit for override cond) 3)  |  WHERE:  :=  := {&& | ||} (&& = AND | || = OR) @* := @ :=  @ = Contains no references to {Heading} * = Contains no references to {*} EXAMPLE:  conds="("",INFO,MAIN,""[("",""_{Module}_"",""))||({GlobalRefs}>20)"  conds(0)=3 conds(1)=$LB(,"Module","=""INFO""") conds(2)=$LB("||","Module","=""MAIN""") conds(3)=$LB("||","GlobalRefs",">20")  conds(0)=2 conds(1)=$LB(,"Module",""",INFO,MAIN,""[("",""_{*}_"","")") conds(2)=$LB("||","GlobalRefs","{*}>20") WHERE: {*} = value substitution for the \'Module\' & \'GlobalRefs\' fields NOTE: Conditions that don\'t contain any references to {Heading} fields, often called s, can be included as s, as in the following example: conds(pos)=$LB(,,"$g(^zAction(""runIt""))=1") NOTE: All conditions must be satisfied for the conds() to be considered true and for the row to be exported [PASS BY REFERENCE] ptInfo - A Pass By Reference information array that returns to the user the following details: ptInfo(variable)=value ptInfo("outputFile")=The canonical name of the Export/Reporting file bcFlag - This is a Backward-Compatibility flag used for [Internal Purposes ONLY] RETURN Value: The status from the invocation of this method'}),"\n",(0,s.jsx)(t.h3,{id:"clearstatsall",children:"clearStatsALL"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsALL(ns As %String = "", rtn As %String = "", ph3 As %Integer = 0, clearErrs As %Integer = 1, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsALL, SqlProc ]\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"C L E A R 'Stats' D A T A"}),"  --------------------------- The following methods are used to remove all of the 'Stats' data: - clearStatsALL() - clearStats() - clearStatsAllNS() The aforementioned methods remove data stored in the following classes: - %SYS.PTools.Stats (old/new) NOTE: old = Backward-compatible data"]}),"\n",(0,s.jsx)(t.p,{children:'Method: clearStatsALL [SQL: PT_clearStatsALL] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Original (backward-compatible) and the Optimal (new) PTools Stats class (%SYS.PTools.Stats), based on the specified parameters... NOTE: Clear ALL PTools Stats data: OLD & NEW (By Default) Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsALL(...) ..clearStatsALL(...) SQL: CALL %SYS_PTools.PT_clearStatsALL(...) SELECT %SYS_PTools.PT_clearStatsALL(...) NOTE: This \'SqlProc\' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") Parameters: ns - The namespace in which to clear PTools Stats [DEFAULT: $NAMESPACE] rtn - The routine in which to clear PTools SQL Statistics [DEFAULT: ""] If none provided, clear all routines in the given \'ns\' ph3 - Placeholder Parameter for future extensibility clearErrs - 0 = Don\'t delete the \'PTools\' Application Errors 1 = Delete all of the \'PTools\' Application Errors [DEFAULT] silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don\'t display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { "cnt" | "curr" | "term" | ... } variable = A var corresponding to the given \'category\' Example: ptInfo("cnt","clearStatsALL")=The number of rows deleted via this method RETURN Value: Based on the value of the \'returnType\' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred'}),"\n",(0,s.jsx)(t.h3,{id:"clearstats",children:"clearStats"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStats(ns As %String = "", rtn As %String = "", ph3 As %Integer = 0, clearErrs As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStats, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStats [SQL: PT_clearStats] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the '%SYS.PTools.Stats' class, based on the specified 'ns' and 'rtn' parameters... This method clears statistics which are gathered by the invocation of the following two methods: do ##class(%SYS.PTools.Stats).Start(NS,Rou,Mod) // Start Stats Collection // Invoke the method in which statistics are to be collected do ##class(%SYS.PTools.Stats).Stop(NS,Rou,Mod) // Stop Stats Collection Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStats(...) SQL: CALL %SYS_PTools.PT_clearStats(...) SELECT %SYS_PTools.PT_clearStats(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",\"db\",\"Stats{C|D|I|S|Z}\") Parameters: ns - The namespace in which to clear Statistics If none provided, use the current namespaces where Stats collected [DEFAULT: Current Namespace] rtn - The routine for which to clear Statistics If none provided, clear all routines in the given 'ns' [OPTIONAL] ph3 - Placeholder Parameter for future extensibility clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT: 0] returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() 1 = Return the number of Stats rows deleted from the following class: %SYS.PTools.Stats [DEFAULT: 0] ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStats\")=The number of rows deleted via this method RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the number of Stats rows deleted from the following class; Otherwise, return an error message if an error occurred: %SYS.PTools.Stats"}),"\n",(0,s.jsx)(t.h3,{id:"clearstatsallns",children:"clearStatsAllNS"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsAllNS(rtn As %String = "", ph2 As %Integer = 0, ph3 As %String = "", clearErrs As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsAllNS, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:'Method: clearStatsAllNS [SQL: PT_clearStatsAllNS] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the \'%SYS.PTools.Stats\' class in All Namespaces on a system for which the user has Write privileges (Write infers Read), based on the optional \'rtn\' parameter. This method clears statistics in all namespaces which are gathered by the invocation of the following two methods: do ##class(%SYS.PTools.Stats).Start(NS,Rou,Mod) // Start Stats Collection // Invoke the method in which statistics are to be collected do ##class(%SYS.PTools.Stats).Stop(NS,Rou,Mod) // Stop Stats Collection Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsAllNS(...) SQL: CALL %SYS_PTools.PT_clearStatsAllNS(...) SELECT %SYS_PTools.PT_clearStatsAllNS(...) NOTE: This \'SqlProc\' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,"PTools","db","Stats{C|D|I|S|Z}") Parameters: rtn - The routine in which to clear SQL Statistics If none provided, clear all routines in all appropriate namespaces [OPTIONAL] ph2 - Placeholder Parameter for future extensibility ph3 - Placeholder Parameter for future extensibility clearErrs - 0 = Don\'t delete the \'PTools\' Application Errors 1 = Delete all of the \'PTools\' Application Errors [DEFAULT: 0] returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() 1 = Return the total number of Stats rows deleted from the following class, for each namespace: %SYS.PTools.Stats [DEFAULT: 0] ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { "cnt" | "curr" | "term" | ... } variable = A var corresponding to the given \'category\' Example: ptInfo("cnt","clearStatsAllNS")=The number of rows deleted via this method RETURN Value: Based on the value of the \'returnType\' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the number of Stats rows deleted from the following class; Otherwise, return an error message if an error occurred: %SYS.PTools.Stats'}),"\n",(0,s.jsx)(t.h3,{id:"clearstatssqlall",children:"clearStatsSQLALL"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsSQLALL(ns As %String = "", rtn As %String = "", ph3 As %Integer = 0, clearAll As %Integer = 1, clearSQLQuery As %Integer = 1, clearBench As %Integer = 1, clearSQLIndex As %Integer = 0, clearErrs As %Integer = 1, purgeCQ As %Integer = 0, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLALL, SqlProc ]\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"C L E A R 'SQL Stats' D A T A"}),"  ------------------------------- The following methods are used to remove all of the 'SQL Stats' data: - clearStatsSQLALL() - clearStatsSQLOLD() - clearSQLStats() %SYS.PTools.SQLStats - clearSQLQuery() %SYS.PTools.SQLQuery - clearSQLBenchMarkQry() %SYS.PTools.SQLBenchMarkQueries - clearSQLBenchMarkRslt() %SYS.PTools.SQLBenchMarkResults - clearStatsSQLNEW() - clearStatsSQL() %SYS.PTools.StatsSQL - clearStatsSQLAllNS() %SYS.PTools.StatsSQL The aforementioned methods remove data stored in the following classes: - %SYS.PTools.SQLStats (old) - %SYS.PTools.SQLQuery (old) - %SYS.PTools.SQLBenchMarkQueries (old) - %SYS.PTools.SQLBenchMarkResults (old) - %SYS.PTools.StatsSQL (new) Optional: - %SYS.PTools.SQLUtilities (old) - %SYS.PTools.SQLUtilResults (old) - %SYS.PTools.UtilSQLStatements (new) - %SYS.PTools.UtilSQLAnalysisDB (new) NOTE: old = Backward-compatible data"]}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStatsSQLALL [SQL: PT_clearStatsSQLALL] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Original (backward-compatible) and the Optimal (new) PTools SQL Stats classes, based on the specified parameters... NOTE: Clear ALL PTools SQL Stats data: OLD & NEW (By Default) Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsSQLALL(...) ..clearStatsSQLALL(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLALL(...) SELECT %SYS_PTools.PT_clearStatsSQLALL(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Since this method returns a $LIST() of %Status codes, the output can be converted to a comma-delimited string by using the $LISTTOSTRING(...) function on the ObjectScript or SQL result. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",...) PARAMETERS: ns - The namespace in which to clear PTools SQL Statistics [DEFAULT: $NAMESPACE] rtn - The routine in which to clear PTools SQL Statistics [DEFAULT: \"\"] If none provided, clear all routines in the given 'ns' ph3 - Placeholder Parameter for future extensibility clearAll - 0 = Delete all of the data, except the 'INFO' rows, stored in the StatsSQL class: - %SYS.PTools.StatsSQL (new) 1 = Delete all of the data, including the 'INFO' rows, [DEFAULT] stored in the StatsSQL class: - %SYS.PTools.StatsSQL (new) clearSQLQuery - 0 = Don't delete the data stored in the SQLQuery class: - %SYS.PTools.SQLQuery (old) 1 = Delete all of the data stored in the SQLQuery class: [DEFAULT] - %SYS.PTools.SQLQuery (old) clearBench - 0 = Don't delete the data stored in the SQLBenchmark class: - %SYS.PTools.SQLBenchMarkQueries (old) 1 = Delete all of the data stored in the SQLBenchmark class: [DEFAULT] - %SYS.PTools.SQLBenchMarkQueries (old) clearSQLIndex - 0 = Don't delete the data stored in the Utility SQL [DEFAULT] Index/Analysis classes: - %SYS.PTools.SQLUtilities (old) - %SYS.PTools.SQLUtilResults (old) - %SYS.PTools.UtilSQLStatements (new) - %SYS.PTools.UtilSQLAnalysisDB (new) 1 = Delete all of the data stored in the Utility SQL Index/Analysis classes: - %SYS.PTools.SQLUtilities (old) - %SYS.PTools.SQLUtilResults (old) - %SYS.PTools.UtilSQLStatements (new) - %SYS.PTools.UtilSQLAnalysisDB (new) clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT] purgeCQ - 0 = Don't purge all of the Cached Queries [DEFAULT] 1 = Purge all of the Cached Queries silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don't display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStatsSQLALL\")=The number of rows deleted via this method NOTE: old = Backward-compatible data RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred"}),"\n",(0,s.jsx)(t.h3,{id:"clearstatssqlold",children:"clearStatsSQLOLD"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsSQLOLD(ns As %String = "", rtn As %String = "", ph3 As %Integer = 0, clearSQLQuery As %Integer = 1, clearBench As %Integer = 1, clearSQLIndex As %Integer = 0, clearErrs As %Integer = 1, purgeCQ As %Integer = 0, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLOLD, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStatsSQLOLD [SQL: PT_clearStatsSQLOLD] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Original (backward-compatible) PTools SQL Stats classes, based on the specified parameters... Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsSQLOLD(...) ..clearStatsSQLOLD(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLOLD(...) SELECT %SYS_PTools.PT_clearStatsSQLOLD(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",...) PARAMETERS: ns - The namespace in which to clear PTools SQL Statistics [DEFAULT: $NAMESPACE] rtn - The routine in which to clear PTools SQL Statistics [DEFAULT: \"\"] If none provided, clear all routines in the given 'ns' ph3 - Placeholder Parameter for future extensibility clearSQLQuery - 0 = Don't delete the data stored in the SQLQuery class: - %SYS.PTools.SQLQuery (old) 1 = Delete all of the data stored in the SQLQuery class: [DEFAULT] - %SYS.PTools.SQLQuery (old) clearBench - 0 = Don't delete the data stored in the SQLBenchmark class: - %SYS.PTools.SQLBenchMarkQueries (old) 1 = Delete all of the data stored in the SQLBenchmark class: [DEFAULT] - %SYS.PTools.SQLBenchMarkQueries (old) clearSQLIndex - 0 = Don't delete the data stored in the Utility SQL [DEFAULT] Index/Analysis classes: - %SYS.PTools.SQLUtilities (old) - %SYS.PTools.SQLUtilResults (old) 1 = Delete all of the data stored in the Utility SQL Index Analysis classes: - %SYS.PTools.SQLUtilities (old) - %SYS.PTools.SQLUtilResults (old) clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT] purgeCQ - 0 = Don't purge all of the Cached Queries [DEFAULT] 1 = Purge all of the Cached Queries silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don't display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStatsSQLOLD\")=The number of rows deleted via this method RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred"}),"\n",(0,s.jsx)(t.h3,{id:"clearstatssqlnew",children:"clearStatsSQLNEW"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsSQLNEW(ns As %String = "", rtn As %String = "", ph3 As %Integer = 0, clearAll As %Integer = 1, clearSQLIndex As %Integer = 0, clearErrs As %Integer = 1, purgeCQ As %Integer = 0, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLNEW, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStatsSQLNEW [SQL: PT_clearStatsSQLNEW] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Optimal (new) PTools SQL Stats classes, based on the specified parameters... Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsSQLNEW(...) ..clearStatsSQLNEW(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLNEW(...) SELECT %SYS_PTools.PT_clearStatsSQLNEW(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",...) PARAMETERS: ns - The namespace in which to clear PTools SQL Statistics [DEFAULT: $NAMESPACE] rtn - The routine in which to clear PTools SQL Statistics [DEFAULT: \"\"] If none provided, clear all routines in the given 'ns' ph3 - Placeholder Parameter for future extensibility clearAll - 0 = Delete all of the data, except the 'INFO' rows, stored in the StatsSQL class: - %SYS.PTools.StatsSQL (new) 1 = Delete all of the data, including the 'INFO' rows, [DEFAULT] stored in the StatsSQL class: - %SYS.PTools.StatsSQL (new) clearSQLIndex - 0 = Don't delete the data stored in the Utility SQL [DEFAULT] Index/Analysis classes: - %SYS.PTools.UtilSQLStatements (new) - %SYS.PTools.UtilSQLAnalysisDB (new) 1 = Delete all of the data stored in the Utility SQL Index/Analysis classes: - %SYS.PTools.UtilSQLStatements (new) - %SYS.PTools.UtilSQLAnalysisDB (new) clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT] purgeCQ - 0 = Don't purge all of the Cached Queries [DEFAULT] 1 = Purge all of the Cached Queries silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don't display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStatsSQLNEW\")=The number of rows deleted via this method RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred"}),"\n",(0,s.jsx)(t.h3,{id:"clearstatssqlindexall",children:"clearStatsSQLIndexALL"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsSQLIndexALL(ns As %String = "", clearErrs As %Integer = 1, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLIndexALL, SqlProc ]\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"C L E A R 'SQL Index Stats' D A T A"}),"  ------------------------------------- The following methods are used to remove all of the 'SQL Index Stats' data: - clearStatsSQLIndexALL() - clearStatsSQLIndexOLD() - ClearStatements() %SYS.PTools.SQLUtilities - ClearResults() %SYS.PTools.SQLUtilities - clearStatsSQLIndexNEW() - clearSQLStatements() %SYS.PTools.UtilSQLAnalysis - clearSQLAnalysisDB() %SYS.PTools.UtilSQLAnalysis The aforementioned methods remove data stored in the following classes: - %SYS.PTools.SQLUtilities (old) - %SYS.PTools.SQLUtilResults (old) - %SYS.PTools.UtilSQLStatements (new) - %SYS.PTools.UtilSQLAnalysisDB (new) NOTE: old = Backward-compatible data"]}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStatsSQLIndexALL [SQL: PT_clearStatsSQLIndexALL] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Original (backward-compatible) and the Optimal (new) PTools Utility SQL Index/Analysis Stats classes, based on the specified parameters... NOTE: Clear ALL PTools Utility SQL Index/Analysis Stats: OLD & NEW (By Default) Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsSQLIndexALL(...) ..clearStatsSQLIndexALL(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLIndexALL(...) SELECT %SYS_PTools.PT_clearStatsSQLIndexALL(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Since this method returns a $LIST() of %Status codes, the output can be converted to a comma-delimited string by using the $LISTTOSTRING(...) function on the ObjectScript or SQL result. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",...) PARAMETERS: ns - The namespace in which to clear PTools Stats [DEFAULT: $NAMESPACE] clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT] silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don't display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStatsSQLIndexALL\")=The number of rows deleted via this method RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred"}),"\n",(0,s.jsx)(t.h3,{id:"clearstatssqlindexold",children:"clearStatsSQLIndexOLD"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsSQLIndexOLD(ns As %String = "", clearErrs As %Integer = 1, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLIndexOLD, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStatsSQLIndexOLD [SQL: PT_clearStatsSQLIndexOLD] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Original (backward-compatible) PTools Utility SQL Index/Analysis Stats classes, based on the specified parameters... Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsSQLIndexOLD(...) ..clearStatsSQLIndexOLD(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLIndexOLD(...) SELECT %SYS_PTools.PT_clearStatsSQLIndexOLD(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",...) PARAMETERS: ns - The namespace in which to clear PTools Stats [DEFAULT: $NAMESPACE] clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT] silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don't display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStatsSQLIndexOLD\")=The number of rows deleted via this method RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred"}),"\n",(0,s.jsx)(t.h3,{id:"clearstatssqlindexnew",children:"clearStatsSQLIndexNEW"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearStatsSQLIndexNEW(ns As %String = "", clearErrs As %Integer = 1, silent As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLIndexNEW, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Method: clearStatsSQLIndexNEW [SQL: PT_clearStatsSQLIndexNEW] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the Optimal (new) PTools Utility SQL Index/Analysis Stats classes, based on the specified parameters... Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearStatsSQLIndexNEW(...) ..clearStatsSQLIndexNEW(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLIndexNEW(...) SELECT %SYS_PTools.PT_clearStatsSQLIndexNEW(...) NOTE: This 'SqlProc' method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",...) PARAMETERS: ns - The namespace in which to clear PTools Stats [DEFAULT: $NAMESPACE] clearErrs - 0 = Don't delete the 'PTools' Application Errors 1 = Delete all of the 'PTools' Application Errors [DEFAULT] silent - 0 = Display all messages during this method invocation [DEFAULT] 1 = Don't display any messages during this method invocation returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() [DEFAULT] 1 = Return the total number of Stats rows deleted ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { \"cnt\" | \"curr\" | \"term\" | ... } variable = A var corresponding to the given 'category' Example: ptInfo(\"cnt\",\"clearStatsSQLIndexNEW\")=The number of rows deleted via this method RETURN Value: Based on the value of the 'returnType' parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the total number of Stats rows deleted; Otherwise, return an error message if an error occurred"}),"\n",(0,s.jsx)(t.h3,{id:"getptoolserror",children:"getPToolsError"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod getPToolsError(errRowID As %String = "", PToolsErr As %RawString) As %Integer [ SqlName = PT_getPToolsError, SqlProc ]\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"G E T / C L E A R 'PToolsError' D A T A"}),'  ----------------------------------------- The following methods are used to retrieve & remove all of the \'PToolsError\' data: - getPToolsError() - clearPToolsError() The aforementioned methods remove data stored in the following global: - ^%sqlcq($NAMESPACE,"PTools","Error",{errRowID}) (old/new) NOTE: old = Backward-compatible data']}),"\n",(0,s.jsx)(t.p,{children:"Method: getPToolsError [SQL: PT_getPToolsError] Replaces: N/A Status: New Functionality Purpose: This method retrieve a specific 'PTools' Application Error for the given 'errRowID' or retrieve all errors if no 'errRowID' is provided. Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).getPToolsError(...) SQL: SELECT %SYS_PTools.PT_getPToolsError(...) NOTE: 'PTools' Application Errors will be returned in the 'PToolsErr' array as follows: PToolsErr={errRowID} [Counter] PToolsErr({errRowID},0)=$LIST: 1) $HOROLOG [Timestamp Internal] 2) Timestamp External [Timestamp External: YYYY-MM-DD HH:MM:SS] 3) $NAMESPACE [Current Namespace] 4) $JOB [Current $JOB] 5) $ZN [Current Routine] 6) $zu(41) [Stack Level] PToolsErr({errRowID},1)=$LIST: 1) {ns} [Error Namespace] 2) {job} [Error $JOB] 3) {rtn} [Error Routine] 4) {curs} [Error SQL Cursor] 5) {mod} [Error SQL Module] 6) {func} [Error Function/Method] 7) {ze} [Error $ZE] 8) {errMsg} [Error Message] --- SQL Errors --- 9) {class} [Error Class] 10) {table} [Error Table] 11) {SQLCODE} [Error SQLCODE] 12) {%msg} [Error SQL Message] PToolsErr({errRowID},2)=errLog(errLogID)=errLogMsg PToolsErr({errRowID},2,{errLogID})={errLogMsg} Parameters: errRowID - The 'PTools' Error RowID to retrieve; If none specified, then retrieve all errors into the 'PToolsErr()' array PToolsErr - An array in which the 'PTools' Application Errors will be returned [PASS BY REFERENCE] RETURN Value: The 'PTools' Error RowID ({errRowID}) retrieved, the empty string (\"\") if {errRowID} invalid, or the word 'all' indicating an array of all errors returned."}),"\n",(0,s.jsx)(t.h3,{id:"clearptoolserror",children:"clearPToolsError"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod clearPToolsError(errRowID As %String = "") As %Integer [ SqlName = PT_clearPToolsError, SqlProc ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Method: clearPToolsError [SQL: PT_clearPToolsError] Replaces: N/A Status: New Functionality Purpose: This method deletes a specific 'PTools' Application Error for the given 'errRowID' or Deletes all errors if no 'errRowID' is provided. Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.Stats).clearPToolsError(...) SQL: SELECT %SYS_PTools.PT_clearPToolsError(...) Data Storage: ^%sqlcq($NAMESPACE,\"PTools\",\"Error\",{errRowID}) Parameters: errRowID - The 'PTools' Error RowID to delete; If none specified, then delete all recorded PTools errors RETURN Value: The 'PTools' Error RowID ({errRowID}) deleted, the empty string (\"\") if {errRowID} invalid, or the word 'all' indicating an array of all errors deleted."}),"\n",(0,s.jsx)(t.h3,{id:"version",children:"version"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod version() As %String [ SqlName = Stats_version, SqlProc ]\n"})}),"\n",(0,s.jsx)(t.p,{children:"Provide the current version for the %SYS.PTools.Stats class/section of the Performance Tools (PTools) Application"}),"\n",(0,s.jsx)(t.h3,{id:"triggerondelete",children:"TriggerOnDelete"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod TriggerOnDelete(timing, ns, rtn, curs, sgrp, mod)\n"})}),"\n",(0,s.jsx)(t.p,{children:"Perform the OnDelete Trigger operations for this class..."})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>l,x:()=>n});var s=o(96540);const r={},a=s.createContext(r);function l(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);