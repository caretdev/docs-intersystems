"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[68773],{51289:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>t,default:()=>d,frontMatter:()=>a,toc:()=>i});var l=n(74848),r=n(28453);const a={pagination_prev:null,pagination_next:null},t="%Stream.TmpCharacter",i=[{value:"Parameters",id:"parameters",level:2},{value:"BUFFERLEN",id:"bufferlen",level:3},{value:"COMPRESS",id:"compress",level:3},{value:"Properties",id:"properties",level:2},{value:"Mode",id:"mode",level:3},{value:"TempGbl",id:"tempgbl",level:3},{value:"MaxNodeNo",id:"maxnodeno",level:3},{value:"NodeNo",id:"nodeno",level:3},{value:"Buffer",id:"buffer",level:3},{value:"shardid",id:"shardid",level:3},{value:"rollback",id:"rollback",level:3},{value:"Position",id:"position",level:3},{value:"IOSize",id:"iosize",level:3},{value:"Compress",id:"compress-1",level:3},{value:"LineTerminator",id:"lineterminator",level:3},{value:"RemoveOnClose",id:"removeonclose",level:3},{value:"mLastModified",id:"mlastmodified",level:3},{value:"Methods",id:"methods",level:2},{value:"%NormalizeObject",id:"normalizeobject",level:3},{value:"%ValidateObject",id:"validateobject",level:3},{value:"IsNull",id:"isnull",level:3},{value:"%IsNull",id:"isnull-1",level:3},{value:"LastModifiedGet",id:"lastmodifiedget",level:3},{value:"%OnNew",id:"onnew",level:3},{value:"%OnClose",id:"onclose",level:3},{value:"%LoadData",id:"loaddata",level:3},{value:"%OnRollBack",id:"onrollback",level:3},{value:"%SaveData",id:"savedata",level:3},{value:"%DeleteData",id:"deletedata",level:3},{value:"%GetLockReference",id:"getlockreference",level:3},{value:"%OnConstructClone",id:"onconstructclone",level:3},{value:"Read",id:"read",level:3},{value:"ReadLine",id:"readline",level:3},{value:"ReadLineIntoStream",id:"readlineintostream",level:3},{value:"Write",id:"write",level:3},{value:"SetupTmpGbl",id:"setuptmpgbl",level:3},{value:"WriteLine",id:"writeline",level:3},{value:"MoveToEnd",id:"movetoend",level:3},{value:"Rewind",id:"rewind",level:3},{value:"Flush",id:"flush",level:3},{value:"SizeGet",id:"sizeget",level:3},{value:"CheckAtEnd",id:"checkatend",level:3},{value:"ReadIntoBuffer",id:"readintobuffer",level:3},{value:"CopyFrom",id:"copyfrom",level:3},{value:"OutputToDevice",id:"outputtodevice",level:3},{value:"Clear",id:"clear",level:3},{value:"%Exists",id:"exists",level:3},{value:"%ObjectModified",id:"objectmodified",level:3},{value:"%IsModified",id:"ismodified",level:3},{value:"BuildValueArray",id:"buildvaluearray",level:3},{value:"%ObjectIsNull",id:"objectisnull",level:3},{value:"NotCompressible",id:"notcompressible",level:3}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"streamtmpcharacter",children:"%Stream.TmpCharacter"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Class %Stream.TmpCharacter Extends %Stream.Object [ ClientDataType = CHARACTERSTREAM, OdbcType = LONGVARCHAR, System = 2 ]\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"For information on this class"}),", see ",(0,l.jsx)(s.a,{href:"/csp/docbook/Doc.View.cls?FIND=CLASSES+%25Stream.TmpCharacter",children:"Working with Streams"}),"."]}),"\n",(0,l.jsx)(s.p,{children:"Temporary character stream. Any calls to save this just return without doing any work."}),"\n",(0,l.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsx)(s.h3,{id:"bufferlen",children:"BUFFERLEN"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter BUFFERLEN = 163280;\n"})}),"\n",(0,l.jsx)(s.p,{children:"Number of characters that we are storing in each global node"}),"\n",(0,l.jsx)(s.h3,{id:"compress",children:"COMPRESS"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter COMPRESS = 0;\n"})}),"\n",(0,l.jsx)(s.p,{children:"Compress behavior of this class."}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"-1 - Do not compress streams, write old stream header format"}),"\n",(0,l.jsx)(s.li,{children:"0 - Do not compress new streams"}),"\n",(0,l.jsx)(s.li,{children:"1 - Compress new streams"}),"\n",(0,l.jsx)(s.li,{children:"2 - Always compress"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,l.jsx)(s.h3,{id:"mode",children:"Mode"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property Mode As %Integer [ InitialExpression = 0, Private ];\n"})}),"\n",(0,l.jsx)(s.h3,{id:"tempgbl",children:"TempGbl"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property TempGbl As %String [ Private, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Where we write the temp data to"}),"\n",(0,l.jsx)(s.h3,{id:"maxnodeno",children:"MaxNodeNo"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property MaxNodeNo As %Integer [ InitialExpression = 0, Private, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Maximum subscript in data we are reading"}),"\n",(0,l.jsx)(s.h3,{id:"nodeno",children:"NodeNo"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property NodeNo As %String(MAXLEN = 5000) [ InitialExpression = 0, Private, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"The current node we are reading from"}),"\n",(0,l.jsx)(s.h3,{id:"buffer",children:"Buffer"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'Property Buffer As %Binary(MAXLEN = "") [ Private, Transient ];\n'})}),"\n",(0,l.jsx)(s.p,{children:"Buffer we are currently using read from stream global"}),"\n",(0,l.jsx)(s.h3,{id:"shardid",children:"shardid"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property shardid As %String [ Internal, Private ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Internal - used for sharded streams"}),"\n",(0,l.jsx)(s.h3,{id:"rollback",children:"rollback"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property rollback As %String [ MultiDimensional, Private ];\n"})}),"\n",(0,l.jsx)(s.h3,{id:"position",children:"Position"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property Position As %Integer [ InitialExpression = 1, Private, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Where we are currently in the Buffer"}),"\n",(0,l.jsx)(s.h3,{id:"iosize",children:"IOSize"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property IOSize As %Integer [ InitialExpression = 0, Private ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Internal size of stream"}),"\n",(0,l.jsx)(s.h3,{id:"compress-1",children:"Compress"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property Compress As %Integer [ InitialExpression = {..#COMPRESS}, Private, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Internal flag to determine if the steam data is compressed"}),"\n",(0,l.jsx)(s.h3,{id:"lineterminator",children:"LineTerminator"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property LineTerminator As %String(MAXLEN = 10) [ InitialExpression = {$char(13,10)}, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"Type of line terminator we use for this stream, defaults to Cr/Lf. Maximum length is 10 characters."}),"\n",(0,l.jsx)(s.h3,{id:"removeonclose",children:"RemoveOnClose"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property RemoveOnClose As %Boolean [ InitialExpression = 0, Transient ];\n"})}),"\n",(0,l.jsx)(s.p,{children:"If true then remove the permanent global as well as any temp global when this object is closed If you call %Save on a stream where RemoveOnClose is true it will set this to false as if you explicitly save the stream you no longer want it to be removed when the object is closed. In order to make sure %Save always runs the logic to reset the flag setting this to true causes %IsModified/%ObjectModified to return true."}),"\n",(0,l.jsx)(s.h3,{id:"mlastmodified",children:"mLastModified"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Property mLastModified As %String [ Private, Transient ];\n"})}),"\n",(0,l.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,l.jsx)(s.h3,{id:"normalizeobject",children:"%NormalizeObject"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %NormalizeObject() As %Status [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"validateobject",children:"%ValidateObject"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %ValidateObject(force As %Integer = 0) As %Status [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"isnull",children:"IsNull"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method IsNull() As %Boolean [ CodeMode = call ]\n"})}),"\n",(0,l.jsx)(s.p,{children:'Returns true if this is a "NULL" stream; that is, a stream which has never been written to and saved. This is used by the InterSystems IRIS ODBC server.'}),"\n",(0,l.jsx)(s.h3,{id:"isnull-1",children:"%IsNull"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %IsNull() As %Boolean [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.p,{children:'Returns true if this is a "NULL" stream; that is, a stream which has never been written to and saved. This is used by the InterSystems IRIS ODBC server.'}),"\n",(0,l.jsx)(s.h3,{id:"lastmodifiedget",children:"LastModifiedGet"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method LastModifiedGet() As %TimeStamp [ CodeMode = expression, Final ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'Method %OnNew(initval As %String = "") As %Status [ Private ]\n'})}),"\n",(0,l.jsx)(s.h3,{id:"onclose",children:"%OnClose"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnClose() As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"loaddata",children:"%LoadData"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %LoadData(id As %String) As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"onrollback",children:"%OnRollBack"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnRollBack() As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"savedata",children:"%SaveData"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %SaveData(ByRef sid As %String) As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"deletedata",children:"%DeleteData"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %DeleteData(streamvalue As %String, concurrency As %Integer) As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"getlockreference",children:"%GetLockReference"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod %GetLockReference(pLocation As %String(MAXLEN="") = "", pId As %String(MAXLEN="") = "") As %String(MAXLEN="") [ Private ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Returns the global reference used to lock the current stream object Throws %Exception.AbstractException"}),"\n",(0,l.jsx)(s.h3,{id:"onconstructclone",children:"%OnConstructClone"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnConstructClone(object As %RegisteredObject, deep As %Boolean = 0, ByRef cloned As %String) As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"read",children:"Read"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method Read(ByRef len As %Integer, ByRef sc As %Status) As %RawString\n"})}),"\n",(0,l.jsx)(s.h3,{id:"readline",children:"ReadLine"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method ReadLine(ByRef len As %Integer = 32000, ByRef sc As %Status, ByRef eol As %Boolean) As %RawString\n"})}),"\n",(0,l.jsx)(s.h3,{id:"readlineintostream",children:"ReadLineIntoStream"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method ReadLineIntoStream(ByRef sc As %Status) As %Stream.Object\n"})}),"\n",(0,l.jsx)(s.p,{children:"This reads from the stream until it find the LineTerminator and returns this as a stream. If the stream does not contain the line terminator this can potentially be the entire stream."}),"\n",(0,l.jsx)(s.h3,{id:"write",children:"Write"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'Method Write(data As %RawString = "") As %Status\n'})}),"\n",(0,l.jsx)(s.h3,{id:"setuptmpgbl",children:"SetupTmpGbl"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method SetupTmpGbl() [ Private ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Setup the TempGbl location of where we will write the temp stream to"}),"\n",(0,l.jsx)(s.h3,{id:"writeline",children:"WriteLine"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'Method WriteLine(data As %RawString = "") As %Status\n'})}),"\n",(0,l.jsx)(s.p,{children:"Appends the string data along with a line terminator to the stream and advances the current stream position by the number of characters in data plus the line terminator."}),"\n",(0,l.jsx)(s.p,{children:"Returns a %Status value indicating success or failure."}),"\n",(0,l.jsx)(s.h3,{id:"movetoend",children:"MoveToEnd"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method MoveToEnd() As %Status\n"})}),"\n",(0,l.jsx)(s.h3,{id:"rewind",children:"Rewind"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method Rewind() As %Status\n"})}),"\n",(0,l.jsx)(s.h3,{id:"flush",children:"Flush"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method Flush() As %Status\n"})}),"\n",(0,l.jsx)(s.h3,{id:"sizeget",children:"SizeGet"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method SizeGet() As %Integer [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return the current size of the data stream."}),"\n",(0,l.jsx)(s.h3,{id:"checkatend",children:"CheckAtEnd"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method CheckAtEnd() [ Private ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Check if we are at the end of the global, but do not read the next buffer"}),"\n",(0,l.jsx)(s.h3,{id:"readintobuffer",children:"ReadIntoBuffer"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method ReadIntoBuffer() As %Boolean [ Private ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Reads the next node into Buffer."}),"\n",(0,l.jsx)(s.p,{children:"Returns 0 if there is no more data."}),"\n",(0,l.jsx)(s.h3,{id:"copyfrom",children:"CopyFrom"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method CopyFrom(source As %Stream.Object) As %Status\n"})}),"\n",(0,l.jsx)(s.h3,{id:"outputtodevice",children:"OutputToDevice"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method OutputToDevice(ByRef len As %Integer = -1) As %Status\n"})}),"\n",(0,l.jsx)(s.h3,{id:"clear",children:"Clear"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method Clear(permanent As %Boolean = 1) As %Status\n"})}),"\n",(0,l.jsx)(s.h3,{id:"exists",children:"%Exists"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %Exists(soid As %ObjectIdentity) As %Boolean\n"})}),"\n",(0,l.jsx)(s.h3,{id:"objectmodified",children:"%ObjectModified"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %ObjectModified() As %Integer [ ServerOnly = 1 ]\n"})}),"\n",(0,l.jsx)(s.h3,{id:"ismodified",children:"%IsModified"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method %IsModified() As %Integer\n"})}),"\n",(0,l.jsx)(s.h3,{id:"buildvaluearray",children:"BuildValueArray"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method BuildValueArray(ByRef subvalue As %String) As %Status [ Private ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Callback for searchable stream"}),"\n",(0,l.jsx)(s.h3,{id:"objectisnull",children:"%ObjectIsNull"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %ObjectIsNull(soid As %ObjectIdentity) As %Boolean\n"})}),"\n",(0,l.jsx)(s.h3,{id:"notcompressible",children:"NotCompressible"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Method NotCompressible(data As %String) As %Boolean [ Internal, Private ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return true if this i%Buffer/data looks like it is not compressible. Check for small buffer, known prefixes of compressed data and check a small segment of the buffer for compressibility"})]})}function d(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>i});var l=n(96540);const r={},a=l.createContext(r);function t(e){const s=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(a.Provider,{value:s},e.children)}}}]);