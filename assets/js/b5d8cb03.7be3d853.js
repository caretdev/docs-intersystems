"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[52068],{29902:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>c,default:()=>h,frontMatter:()=>a,toc:()=>i});var t=n(74848),r=n(28453);const a={pagination_prev:null,pagination_next:null},c="SYS.WSMon.wsman.Service",i=[{value:"Parameters",id:"parameters",level:2},{value:"SERVICENAME",id:"servicename",level:3},{value:"ARGUMENTSTYLE",id:"argumentstyle",level:3},{value:"NAMESPACE",id:"namespace",level:3},{value:"WSADDRESSING",id:"wsaddressing",level:3},{value:"SOAPVERSION",id:"soapversion",level:3},{value:"SOAPHEADERS",id:"soapheaders",level:3},{value:"Methods",id:"methods",level:2},{value:"TransferGet",id:"transferget",level:3},{value:"Enumerate",id:"enumerate",level:3},{value:"Pull",id:"pull",level:3},{value:"Release",id:"release",level:3},{value:"Subscribe",id:"subscribe",level:3},{value:"Unsubscribe",id:"unsubscribe",level:3},{value:"Renew",id:"renew",level:3},{value:"Notify",id:"notify",level:3},{value:"wsmanFault",id:"wsmanfault",level:3},{value:"enum",id:"enum",level:3},{value:"OnPreWebMethod",id:"onprewebmethod",level:3}];function o(e){const s={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"syswsmonwsmanservice",children:"SYS.WSMon.wsman.Service"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class SYS.WSMon.wsman.Service Extends %SOAP.WebService [ System = 4 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Web Services and Methods to support InterSystems IRIS monitoring via the WS-Management specification"}),"\n",(0,t.jsx)(s.p,{children:"The services supported include wxf:Get, wsen:Enumerate, wsen:Pull, wsen:Release, wse:Subscribe, wse:Renew and wse:Unsubscribe. See the WS-Management specification for more information, and the comments on the Methods below for details of the implementation."}),"\n",(0,t.jsx)(s.p,{children:"This is an example of the SOAP request and response message for a Transfer:Get from the WS-Management specification."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"http://1.2.3.4/wsman/ http://example.org/2005/02/physicalDisk  http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous  http://schemas.xmlsoap.org/ws/2004/09/transfer/Get  urn:uuid:d9726315-bc91-430b-9ed8-ce5ffb858a87  2  PT30S "})," ",(0,t.jsx)(s.code,{children:"http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous  http://schemas.xmlsoap.org/ws/2004/09/transfer/GetResponse  urn:uuid:217a431c-b071-3301-9bb8-5f538bec89b8  urn:uuid:d9726315-bc91-430b-9ed8-ce5ffb858a87  Acme, Inc.  123-SCSI 42 GB Drive  2  16384  80  63  512  0"})]}),"\n",(0,t.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(s.h3,{id:"servicename",children:"SERVICENAME"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter SERVICENAME = "CacheWSManService";\n'})}),"\n",(0,t.jsx)(s.p,{children:"Name of the WebService."}),"\n",(0,t.jsx)(s.h3,{id:"argumentstyle",children:"ARGUMENTSTYLE"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter ARGUMENTSTYLE = "message";\n'})}),"\n",(0,t.jsx)(s.p,{children:"Use unwrapped style messages"}),"\n",(0,t.jsx)(s.h3,{id:"namespace",children:"NAMESPACE"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter NAMESPACE = "http://www.intersystems.com/cache/wsman/1/xsd";\n'})}),"\n",(0,t.jsx)(s.p,{children:"SOAP Namespace for the WebService"}),"\n",(0,t.jsx)(s.h3,{id:"wsaddressing",children:"WSADDRESSING"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter WSADDRESSING = "AUTO";\n'})}),"\n",(0,t.jsx)(s.p,{children:"WS-Management uses WS-Addressing and SOAP 1.2"}),"\n",(0,t.jsx)(s.h3,{id:"soapversion",children:"SOAPVERSION"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter SOAPVERSION = 1.2;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"soapheaders",children:"SOAPHEADERS"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter SOAPHEADERS = "ResourceURI:SYS.WSMon.wsman.ResourceURI,SelectorSet:SYS.WSMon.wsman.SelectorSet,OptimizeEnumeration:SYS.WSMon.wsman.OptimizeEnumeration,Identifier:SYS.WSMon.wse.Identifier,RequestTotalItemsCountEstimate:SYS.WSMon.wsman.RequestTotalItemsCountEstimate,MaxEnvelopeSize:SYS.WSMon.wsman.MaxEnvelopeSize,OperationTimeout:SYS.WSMon.wsman.OperationTimeout,Locale:SYS.WSMon.wsman.Locale";\n'})}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"transferget",children:"TransferGet"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method TransferGet() As SYS.WSMon.wsResource(XMLTYPECONSTRAINT="choice") [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/09/transfer/Get", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"This method implements the WS-Management WS-Transfer:Get action"}),"\n",(0,t.jsx)(s.p,{children:"The resource is taken from the wsman:ResourceURI header, and each resource requested returns a different class structure. The last piece of the resource indicates the class name."}),"\n",(0,t.jsx)(s.p,{children:"The selector is from wsman:SelectorSet and identifies the instance."}),"\n",(0,t.jsx)(s.p,{children:"Supported resources for TransferGet are:"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsSystem",children:"http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsSystem"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsDatabase",children:"http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsDatabase"}),' (Selector Name="ID")',(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Global",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Global"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Buffer",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Buffer"}),' (Selector Name="Size")',(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Disk",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Disk"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.ECPAppSvr",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.ECPAppSvr"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.ECPDataSvr",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.ECPDataSvr"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Routine",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Routine"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.WriteDaemon",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.WriteDaemon"}),' (Selector Name="ID")',(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Resource",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Resource"}),' (Selector Name="ID")']}),"\n",(0,t.jsx)(s.h3,{id:"enumerate",children:"Enumerate"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Enumerate(Enumerate As SYS.WSMon.wsen.Enumerate) As SYS.WSMon.wsen.EnumerateResponse [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/09/enumeration/Enumerate", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for a WS-Enumerate Enumerate request, as defined in the WS-Management specification."}),"\n",(0,t.jsx)(s.p,{children:"The resource is taken from the wsman:ResourceURI header, and each resource requested returns a different class structure. The last piece of the resource indicates the class name."}),"\n",(0,t.jsx)(s.p,{children:"Only simple, non-filtered Enumeration is supported at this time. We do support (and recommend) the OptimizeEnumeration header which allows enumerated class instances to be returned as part of the response (rather than requiring a separate wse:Pull request)."}),"\n",(0,t.jsx)(s.p,{children:"Resources which can be enumerated:"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Buffer",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Buffer"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.WriteDaemon",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.WriteDaemon"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Resource",children:"http://intersystems.com/cache/wsman/1/resource/SYS.Stats.Resource"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.a,{href:"http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsDatabase",children:"http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsDatabase"})]}),"\n",(0,t.jsx)(s.h3,{id:"pull",children:"Pull"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Pull(Pull As SYS.WSMon.wsen.Pull) As SYS.WSMon.wsen.PullResponse [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/09/enumeration/Pull", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for a WS-Enumerate Pull request, as defined in the WS-Management specification."}),"\n",(0,t.jsx)(s.p,{children:"Returns enumerated class instances based on the EnumerationContext returned in the wse:Enumerate response (or the reponse from a previous wse:Pull request)."}),"\n",(0,t.jsx)(s.h3,{id:"release",children:"Release"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Release(Release As SYS.WSMon.wsen.Release) [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/09/enumeration/Release", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for a WS-Enumerate Release request, as defined in the WS-Management specification."}),"\n",(0,t.jsx)(s.p,{children:"This service is currently just a no-op, as no context is maintained beyond what's returned in the EnumerationContext, but we accept the request without error (as recommended in the WS-Management spec)."}),"\n",(0,t.jsx)(s.h3,{id:"subscribe",children:"Subscribe"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Subscribe(Subscribe As SYS.WSMon.wse.Subscribe) As SYS.WSMon.wse.SubscribeResponse [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/08/eventing/Subscribe", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for a WS-Eventing Subscribe request, as defined in the WS-Management specification."}),"\n",(0,t.jsx)(s.p,{children:"No Filtering supported at this time. No EndTo message is currently sent, and the EndTo address (if present) must be the same as the NotifyTo address. Only the default 'Push' delivery mode is currently supported."}),"\n",(0,t.jsxs)(s.p,{children:["Notifications which get returned once a system has subscribed are the same 'events' as signaled by SNMP. See the InterSystems IRIS Monitoring Guide for details. The Notifications sent to a subscriber's EventSink will have a SOAP Action of \"",(0,t.jsx)(s.a,{href:"http://www.intersystems.com/cache/wsmon/1/SYS.WSMon.CacheEvent",children:"http://www.intersystems.com/cache/wsmon/1/SYS.WSMon.CacheEvent"}),'", and will contain an instance of the SYS.WSMon.wsEvent class as the body.']}),"\n",(0,t.jsxs)(s.p,{children:["A Notification message would look something like this: ",(0,t.jsx)(s.code,{children:'<?xml version="1.0" encoding="UTF-8" ?> 32768 PT30S http://intersystems.com/cache/wsman/1/resource/SYS.WSMon.wsEvent http://www.intersystems.com/cache/wsmon/1/SYS.WSMon.CacheEvent urn:uuid:E4480818-98AC-4F8D-8FC3-2EF4A20055A9 http://www.w3.org/2005/08/addressing/anonymous http://rdavisE6500:8080/csp/sys/SYS.WSMon.wsman.Service.cls rdavisE6500 C092 cacheTest 3 1 This is a test'})]}),"\n",(0,t.jsx)(s.h3,{id:"unsubscribe",children:"Unsubscribe"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Unsubscribe(Unsubscribe As SYS.WSMon.wse.Unsubscribe) As SYS.WSMon.wse.UnsubscribeResponse [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/08/eventing/Unsubscribe", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for a WS-Eventing Unsubscribe request, as defined in the WS-Management specification."}),"\n",(0,t.jsx)(s.p,{children:"This deletes the current subscription based on the wse:Identifier."}),"\n",(0,t.jsx)(s.h3,{id:"renew",children:"Renew"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Renew(Renew As SYS.WSMon.wse.Renew) As SYS.WSMon.wse.RenewResponse [ SoapAction = "http://schemas.xmlsoap.org/ws/2004/08/eventing/Renew", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for a WS-Eventing Renew request, as defined in the WS-Management specification."}),"\n",(0,t.jsx)(s.p,{children:"This renews and extends the Expires time on the current subscription based on the wse:Identifier."}),"\n",(0,t.jsx)(s.h3,{id:"notify",children:"Notify"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method Notify(Event As SYS.WSMon.wsEvent) As %SOAP.OneWay [ Internal, SoapAction = "http://www.intersystems.com/cache/wsmon/1/SYS.WSMon.CacheEvent", WebMethod ]\n'})}),"\n",(0,t.jsx)(s.p,{children:"Support for testing a WS-Eventing Notification"}),"\n",(0,t.jsx)(s.h3,{id:"wsmanfault",children:"wsmanFault"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method wsmanFault(code As %String, subcode As %String, detail As %String, action As %String) [ Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Send a Fault response in WS-Management format. The Fault 'code', 'subcode', 'detail', and 'action' should come from the Master Faults tables in the WS-Management spec."}),"\n",(0,t.jsx)(s.h3,{id:"enum",children:"enum"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method enum(class As %String, ByRef next As %Integer, max As %Integer) As SYS.WSMon.wsen.Items [ Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Enumerate items in a class for optimized Enumerate or Pull 'next' is the EnumerationContext, indicating the first instance to return Passed byref so we can return the \"next\" instance index Returns 0 to signal end of enumeration 'max' is MaxElements, indicating how many to return (default is 1) Passing a 'max' of 0 create a count of instances (in 'next'), with no 'items' returned"}),"\n",(0,t.jsx)(s.h3,{id:"onprewebmethod",children:"OnPreWebMethod"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnPreWebMethod() [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"The OnPreWebMethod method will be called before any web method in a web service. WS-Management uses this to process a couple of Control Headers. We accept MaxEnvelopeSize with a minimum value of 8192 ... none of our responses should exceed this. OperationTimeout and Locale are faulted right now if mustUnderstand is 'true'."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>i});var t=n(96540);const r={},a=t.createContext(r);function c(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);