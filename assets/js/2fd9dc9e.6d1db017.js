"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[66139],{12723:(e,r,s)=>{s.r(r),s.d(r,{contentTitle:()=>l,default:()=>o,frontMatter:()=>t,toc:()=>d});var n=s(74848),i=s(28453);const t={pagination_prev:null,pagination_next:null},l="%ML.DR.TrainedModel",d=[{value:"Properties",id:"properties",level:2},{value:"drjProvider",id:"drjprovider",level:3},{value:"predServer",id:"predserver",level:3},{value:"withcolumnnames",id:"withcolumnnames",level:3},{value:"withcolumntypes",id:"withcolumntypes",level:3},{value:"Triggers",id:"triggers",level:2},{value:"DeleteTriggerDR",id:"deletetriggerdr",level:3},{value:"Methods",id:"methods",level:2},{value:"%Begin",id:"begin",level:3},{value:"%End",id:"end",level:3},{value:"%PredictAll",id:"predictall",level:3},{value:"%Predict",id:"predict",level:3},{value:"%Probability",id:"probability",level:3},{value:"predictORprobability",id:"predictorprobability",level:3}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"mldrtrainedmodel",children:"%ML.DR.TrainedModel"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Class %ML.DR.TrainedModel Extends %ML.TrainedModel [ ClassType = persistent ]\n"})}),"\n",(0,n.jsx)(r.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(r.h3,{id:"drjprovider",children:"drjProvider"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Property drjProvider As %ML.DR.Provider [ Transient ];\n"})}),"\n",(0,n.jsx)(r.h3,{id:"predserver",children:"predServer"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Property predServer As %List;\n"})}),"\n",(0,n.jsx)(r.p,{children:"1: deploymentId, 2: prediction server ID, 3: prediction server URL, 4: prediction server key"}),"\n",(0,n.jsx)(r.h3,{id:"withcolumnnames",children:"withcolumnnames"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Property withcolumnnames As %List [ Internal, Transient ];\n"})}),"\n",(0,n.jsx)(r.p,{children:"Cached info"}),"\n",(0,n.jsx)(r.h3,{id:"withcolumntypes",children:"withcolumntypes"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Property withcolumntypes As %List [ Internal, Transient ];\n"})}),"\n",(0,n.jsx)(r.p,{children:"Cached info"}),"\n",(0,n.jsx)(r.h2,{id:"triggers",children:"Triggers"}),"\n",(0,n.jsx)(r.h3,{id:"deletetriggerdr",children:"DeleteTriggerDR"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Trigger DeleteTriggerDR [ Event = DELETE, Foreach = row/object ]\n"})}),"\n",(0,n.jsx)(r.p,{children:"When deleting a trained model, delete the project and deployment of model in DR"}),"\n",(0,n.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(r.h3,{id:"begin",children:"%Begin"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Method %Begin() As %Status\n"})}),"\n",(0,n.jsx)(r.p,{children:"Begin trained model operations"}),"\n",(0,n.jsx)(r.h3,{id:"end",children:"%End"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Method %End() As %Status\n"})}),"\n",(0,n.jsx)(r.p,{children:"End trained model operations"}),"\n",(0,n.jsx)(r.h3,{id:"predictall",children:"%PredictAll"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:'Method %PredictAll(tfn As %Integer, argspos As %List, predpos As %List = "", probpos As %List = "", expr As %String = "", headers As %List) As %Status\n'})}),"\n",(0,n.jsx)(r.p,{children:"Bulk Predict arguments: tfn - tempfile index argspos - Positions of the WithColumns in the temp rows, $list(column-positions) predpos - Position of the predicted value, $list(result-column-positions) probpos - Position of the probability value, $list(result-column-positions) expr - expression for probability returns: $$$OK on success, otherwise a $$$ERROR(...)"}),"\n",(0,n.jsx)(r.h3,{id:"predict",children:"%Predict"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Method %Predict(data As %List, ByRef results As %List) As %Status\n"})}),"\n",(0,n.jsx)(r.h3,{id:"probability",children:"%Probability"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Method %Probability(expr As %String = 1, data As %List, ByRef results As %List) As %Status\n"})}),"\n",(0,n.jsx)(r.p,{children:"Predict probability on an ML model Arguments: expr: The argument of PROBABILITY's FOR clause, defaults to 1 data: $List of WITH clause values results: PBR, return value"}),"\n",(0,n.jsx)(r.h3,{id:"predictorprobability",children:"predictORprobability"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-objectscript-class",children:"Method predictORprobability(expr As %String, data As %List, ByRef results As %List, predict As %Boolean) As %Status [ Internal ]\n"})})]})}function o(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,r,s)=>{s.d(r,{R:()=>l,x:()=>d});var n=s(96540);const i={},t=n.createContext(i);function l(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);