"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[55230],{80915:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>l,default:()=>o,frontMatter:()=>a,toc:()=>c});var n=t(74848),r=t(28453);const a={pagination_prev:null,pagination_next:null},l="OAuth2.Server.Auth",c=[{value:"Parameters",id:"parameters",level:2},{value:"HTTP200OK",id:"http200ok",level:3},{value:"Methods",id:"methods",level:2},{value:"OnPage",id:"onpage",level:3},{value:"OnPreHTTP",id:"onprehttp",level:3},{value:"ProcessRequest",id:"processrequest",level:3},{value:"RedirectToSelf",id:"redirecttoself",level:3},{value:"InitializeRequestToken",id:"initializerequesttoken",level:3},{value:"GetQueryParameters",id:"getqueryparameters",level:3},{value:"LoadRequest",id:"loadrequest",level:3},{value:"GetRequestObject",id:"getrequestobject",level:3},{value:"JWTToObject",id:"jwttoobject",level:3},{value:"CheckAlg",id:"checkalg",level:3},{value:"ProcessClaimsRequest",id:"processclaimsrequest",level:3},{value:"SaveQueryParameters",id:"savequeryparameters",level:3},{value:"ProcessFormResponse",id:"processformresponse",level:3},{value:"SaveRequestData",id:"saverequestdata",level:3},{value:"ReturnSimpleError",id:"returnsimpleerror",level:3},{value:"ProcessScope",id:"processscope",level:3},{value:"GetAuthenticateDomain",id:"getauthenticatedomain",level:3},{value:"BeforeAuthenticate",id:"beforeauthenticate",level:3},{value:"AfterAuthenticate",id:"afterauthenticate",level:3},{value:"DelegatedAuthentication",id:"delegatedauthentication",level:3},{value:"DirectLogin",id:"directlogin",level:3},{value:"DisplayLogin",id:"displaylogin",level:3},{value:"Display2FA",id:"display2fa",level:3},{value:"DisplayPermissions",id:"displaypermissions",level:3},{value:"GetLanguageList",id:"getlanguagelist",level:3},{value:"CopyAuthenticationProperties",id:"copyauthenticationproperties",level:3},{value:"GetScopeArray",id:"getscopearray",level:3},{value:"SetScopeArray",id:"setscopearray",level:3},{value:"SetScope",id:"setscope",level:3},{value:"GetOpenIDScope",id:"getopenidscope",level:3},{value:"GetUser",id:"getuser",level:3},{value:"UpdateSession",id:"updatesession",level:3},{value:"Login",id:"login",level:3},{value:"Logout",id:"logout",level:3},{value:"ValidateDelegatedAuthentication",id:"validatedelegatedauthentication",level:3},{value:"ValidateUser",id:"validateuser",level:3},{value:"Validate2FA",id:"validate2fa",level:3},{value:"ValidateClient",id:"validateclient",level:3},{value:"SupportedClaims",id:"supportedclaims",level:3},{value:"AddClaimValues",id:"addclaimvalues",level:3},{value:"PrepareResponse",id:"prepareresponse",level:3},{value:"GenerateAccessToken",id:"generateaccesstoken",level:3},{value:"GenerateAccessTokenCustomization",id:"generateaccesstokencustomization",level:3},{value:"IsJWT",id:"isjwt",level:3},{value:"OnRefreshAccessToken",id:"onrefreshaccesstoken",level:3},{value:"OnRevokeAccessToken",id:"onrevokeaccesstoken",level:3},{value:"OnLogoutAccessToken",id:"onlogoutaccesstoken",level:3},{value:"ExecuteCallback",id:"executecallback",level:3},{value:"ReturnError",id:"returnerror",level:3},{value:"RedirectResponse",id:"redirectresponse",level:3},{value:"SendResponse",id:"sendresponse",level:3}];function i(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"oauth2serverauth",children:"OAuth2.Server.Auth"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class OAuth2.Server.Auth Extends %CSP.Page [ System = 4 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"The authorization server supports the authorization control flow for the Authorization Code and Implicit grant types as specified in RFC 6749. The OAuth2.Server.Auth class is a subclass of %CSP.Page which acts as the Authorization Endpoint and controls the flow in accordance with RFC 6749. This class is used internally by InterSystems IRIS. You should not make direct use of it within your applications. There is no guarantee made about either the behavior or future operation of this class."}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.h3,{id:"http200ok",children:"HTTP200OK"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter HTTP200OK As STRING = "200 OK";\n'})}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"onpage",children:"OnPage"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnPage() As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"onprehttp",children:"OnPreHTTP"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnPreHTTP() As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Event handler for ",(0,n.jsx)(s.strong,{children:"PreHTTP"})," event: this is invoked before the HTTP headers for a CSP page have been sent. All changes to the %CSP.Response class, such as adding cookies, HTTP headers, setting the content type etc. must be made from within the OnPreHTTP() method. Return ",(0,n.jsx)(s.strong,{children:"0"})," to prevent OnPage from being called."]}),"\n",(0,n.jsx)(s.p,{children:"OnPreHttp is used to control flow and redirect back to the requester. OnPage is where the actual authentication takes place."}),"\n",(0,n.jsx)(s.h3,{id:"processrequest",children:"ProcessRequest"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ProcessRequest(client As OAuth2.Server.Client, Output token As OAuth2.Server.AccessToken) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Process the initial request from the client"}),"\n",(0,n.jsx)(s.h3,{id:"redirecttoself",children:"RedirectToSelf"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RedirectToSelf(token As OAuth2.Server.AccessToken) [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Redirect to self with AuthorizationCode in order to display login or permissions."}),"\n",(0,n.jsx)(s.h3,{id:"initializerequesttoken",children:"InitializeRequestToken"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod InitializeRequestToken(client As OAuth2.Server.Client) As OAuth2.Server.AccessToken [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Process the initial request from the client"}),"\n",(0,n.jsx)(s.h3,{id:"getqueryparameters",children:"GetQueryParameters"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetQueryParameters(client As OAuth2.Server.Client, Output requestParameters) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get request properties from %request and the request JWT. Return error description if invalid request."}),"\n",(0,n.jsx)(s.h3,{id:"loadrequest",children:"LoadRequest"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod LoadRequest(requestUri As %String, Output request As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Load request from request_uri specified location."}),"\n",(0,n.jsx)(s.h3,{id:"getrequestobject",children:"GetRequestObject"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetRequestObject(client As OAuth2.Server.Client, request As %String, ByRef requestParameters) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get request parameters from request object"}),"\n",(0,n.jsx)(s.h3,{id:"jwttoobject",children:"JWTToObject"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod JWTToObject(client As OAuth2.Server.Client, jwt As %String, ByRef securityParameters As %String, ByRef jsonObject As %RegisteredObject) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Wrapper function to setup JWTToObject calls on auhtorization server"}),"\n",(0,n.jsx)(s.h3,{id:"checkalg",children:"CheckAlg"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CheckAlg(expectedAlg As %String, actualAlg As %String) As %OAuth2.Error [ Internal ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"processclaimsrequest",children:"ProcessClaimsRequest"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ProcessClaimsRequest(claimsMemberObject As %DynamicObject, claims As %ArrayOfObjects) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Process userinfo and id_token members of the claims parameter"}),"\n",(0,n.jsx)(s.h3,{id:"savequeryparameters",children:"SaveQueryParameters"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SaveQueryParameters(ByRef requestParameters, requestParameterArray As %ArrayOfDataTypes)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Save the %request query parameters in the properties array."}),"\n",(0,n.jsx)(s.h3,{id:"processformresponse",children:"ProcessFormResponse"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ProcessFormResponse(client As OAuth2.Server.Client, token As OAuth2.Server.AccessToken) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Process the form response from the login page or permissions page"}),"\n",(0,n.jsx)(s.h3,{id:"saverequestdata",children:"SaveRequestData"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SaveRequestData(token As OAuth2.Server.AccessToken) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Save %request data whose name begins with p_ in properties"}),"\n",(0,n.jsx)(s.h3,{id:"returnsimpleerror",children:"ReturnSimpleError"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ReturnSimpleError(error As %String, desc As %String, sc As %Status) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return a simple error page, since no client could be identified"}),"\n",(0,n.jsx)(s.h3,{id:"processscope",children:"ProcessScope"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ProcessScope(server As OAuth2.Server.Configuration, client As OAuth2.Server.Client, ByRef scope As %String) As %OAuth2.Error\n"})}),"\n",(0,n.jsx)(s.p,{children:"Handle scope rules"}),"\n",(0,n.jsx)(s.h3,{id:"getauthenticatedomain",children:"GetAuthenticateDomain"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetAuthenticateDomain() As %String [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get the domain to use for the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"beforeauthenticate",children:"BeforeAuthenticate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod BeforeAuthenticate(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute BeforeAuthenticate in the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"afterauthenticate",children:"AfterAuthenticate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AfterAuthenticate(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute AfterAuthenticate in the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"delegatedauthentication",children:"DelegatedAuthentication"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DelegatedAuthentication(token As OAuth2.Server.AccessToken, Output delegatedAuthenticationURL As %String) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Call out to the DelegatedAuthentication() method of the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"directlogin",children:"DirectLogin"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DirectLogin(token As OAuth2.Server.AccessToken, Output password As %String) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute DirectLogin in the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"displaylogin",children:"DisplayLogin"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DisplayLogin(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute DisplayLogin in the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"display2fa",children:"Display2FA"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Display2FA(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute Display2fa in the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"displaypermissions",children:"DisplayPermissions"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DisplayPermissions(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute DisplayPermissions in the authenticate class"}),"\n",(0,n.jsx)(s.h3,{id:"getlanguagelist",children:"GetLanguageList"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetLanguageList(Output sc As %Status) As %List [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute GetLanguageList callback"}),"\n",(0,n.jsx)(s.h3,{id:"copyauthenticationproperties",children:"CopyAuthenticationProperties"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CopyAuthenticationProperties(client As OAuth2.Server.Client, token As OAuth2.Server.AccessToken) [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Copy the properties that are needed by the Authentication Class from OAuth2.Server.Client to CustomProperties."}),"\n",(0,n.jsx)(s.h3,{id:"getscopearray",children:"GetScopeArray"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetScopeArray(scope As %String) As %ArrayOfDataTypes [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get scope array"}),"\n",(0,n.jsx)(s.h3,{id:"setscopearray",children:"SetScopeArray"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetScopeArray(token As OAuth2.Server.AccessToken) [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set scope and scope array in the token baseed on array of scopes."}),"\n",(0,n.jsx)(s.h3,{id:"setscope",children:"SetScope"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetScope(token As OAuth2.Server.AccessToken, scope As %String) [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set scope and scope array in the token as on blank spearated list of scopes."}),"\n",(0,n.jsx)(s.h3,{id:"getopenidscope",children:"GetOpenIDScope"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetOpenIDScope(openid As %Boolean, scope As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get description of OpenID scope if the sacope is valid"}),"\n",(0,n.jsx)(s.h3,{id:"getuser",children:"GetUser"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetUser(Output scope As %String, Output authTime As %Integer, Output sc As %Status, token As OAuth2.Server.AccessToken) As %String [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute GetUser session method"}),"\n",(0,n.jsx)(s.h3,{id:"updatesession",children:"UpdateSession"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UpdateSession(scope As %String) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute UpdateSession session method"}),"\n",(0,n.jsx)(s.h3,{id:"login",children:"Login"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Login(token As OAuth2.Server.AccessToken, interval As %Integer, authTime As %Integer) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute Login session method"}),"\n",(0,n.jsx)(s.h3,{id:"logout",children:"Logout"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Logout(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute Logout session method. If front channel logout is supported, execute that as well"}),"\n",(0,n.jsx)(s.h3,{id:"validatedelegatedauthentication",children:"ValidateDelegatedAuthentication"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ValidateDelegatedAuthentication(token As OAuth2.Server.AccessToken, Output username As %String, Output sc As %Status) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute ValidateDelgatedAuthentication callback of the Validate Class"}),"\n",(0,n.jsx)(s.h3,{id:"validateuser",children:"ValidateUser"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ValidateUser(token As OAuth2.Server.AccessToken, username As %String, password As %String, Output sc As %Status, use2fa As %Boolean) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute ValidateUser callback"}),"\n",(0,n.jsx)(s.h3,{id:"validate2fa",children:"Validate2FA"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Validate2FA(username As %String, token As %String) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"validateclient",children:"ValidateClient"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ValidateClient(token As OAuth2.Server.AccessToken, clientId As %String, clientSecret As %String, Output sc As %Status) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute ValidateClient callback"}),"\n",(0,n.jsx)(s.h3,{id:"supportedclaims",children:"SupportedClaims"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SupportedClaims(Output sc As %Status) As %String [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute SupportedClaims callback"}),"\n",(0,n.jsx)(s.h3,{id:"addclaimvalues",children:"AddClaimValues"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddClaimValues(token As OAuth2.Server.AccessToken, clientId As %String, sub As %String) [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Add iss, sub, exp, sid and aud to ClaimValues and client_id to CustomProperties if they are not already set."}),"\n",(0,n.jsx)(s.h3,{id:"prepareresponse",children:"PrepareResponse"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod PrepareResponse(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Finished authorization. Prepare for response."}),"\n",(0,n.jsx)(s.h3,{id:"generateaccesstoken",children:"GenerateAccessToken"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GenerateAccessToken(token As OAuth2.Server.AccessToken) As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute GenerateAccessToken callback. Optionally also obtain the IDToken."}),"\n",(0,n.jsx)(s.h3,{id:"generateaccesstokencustomization",children:"GenerateAccessTokenCustomization"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GenerateAccessTokenCustomization(properties As %OAuth2.Server.Properties, Output pSC As %Status) As %String [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"isjwt",children:"IsJWT"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsJWT(Output sc As %Status) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute IsJWT callback"}),"\n",(0,n.jsx)(s.h3,{id:"onrefreshaccesstoken",children:"OnRefreshAccessToken"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnRefreshAccessToken(token As OAuth2.Server.AccessToken) As %String [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"onrevokeaccesstoken",children:"OnRevokeAccessToken"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnRevokeAccessToken(token As OAuth2.Server.AccessToken, Output sc As %Status) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute OnRevokeAccessToken callback in the revocation class"}),"\n",(0,n.jsx)(s.h3,{id:"onlogoutaccesstoken",children:"OnLogoutAccessToken"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnLogoutAccessToken(token As OAuth2.Server.AccessToken, ByRef redirectURI As %String, Output sc As %Status) As %Boolean [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute OnLogoutAccessToken callback in the revocation class"}),"\n",(0,n.jsx)(s.h3,{id:"executecallback",children:"ExecuteCallback"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExecuteCallback(customClass As %String, method As %String, args...) As %Status [ Internal, Private, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute a callback in one of the customization classes. This requires %Admin_Secure:USE to access the OAuth2.Server.Configuration instance."}),"\n",(0,n.jsx)(s.h3,{id:"returnerror",children:"ReturnError"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ReturnError(client As OAuth2.Server.Client, token As OAuth2.Server.AccessToken, error As %String, errorDescription As %String, sc As %Status) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return error as redirected response"}),"\n",(0,n.jsx)(s.h3,{id:"redirectresponse",children:"RedirectResponse"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RedirectResponse(client As OAuth2.Server.Client, token As OAuth2.Server.AccessToken) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Setup redirect for done"}),"\n",(0,n.jsx)(s.h3,{id:"sendresponse",children:"SendResponse"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SendResponse(token As OAuth2.Server.AccessToken, ByRef param As %String) [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Send the response back to the client."})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>c});var n=t(96540);const r={},a=n.createContext(r);function l(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);