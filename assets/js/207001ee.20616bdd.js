"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[44823],{20442:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>a,default:()=>o,frontMatter:()=>l,toc:()=>i});var n=t(74848),r=t(28453);const l={pagination_prev:null,pagination_next:null},a="%Monitor.Manager",i=[{value:"Methods",id:"methods",level:2},{value:"Activate",id:"activate",level:3},{value:"Deactivate",id:"deactivate",level:3},{value:"Remove",id:"remove",level:3},{value:"ClassInterval",id:"classinterval",level:3},{value:"Purge",id:"purge",level:3},{value:"IsActive",id:"isactive",level:3},{value:"Start",id:"start",level:3},{value:"Refresh",id:"refresh",level:3},{value:"Halt",id:"halt",level:3},{value:"StartApp",id:"startapp",level:3},{value:"RefreshApp",id:"refreshapp",level:3},{value:"HaltApp",id:"haltapp",level:3},{value:"SignalApp",id:"signalapp",level:3},{value:"ClearSystemCounters",id:"clearsystemcounters",level:3},{value:"StartSystemCounters",id:"startsystemcounters",level:3},{value:"StopSystemCounters",id:"stopsystemcounters",level:3},{value:"SystemCountersActive",id:"systemcountersactive",level:3},{value:"Interval",id:"interval",level:3},{value:"AppInterval",id:"appinterval",level:3},{value:"AppNotify",id:"appnotify",level:3},{value:"AppNotifyMethod",id:"appnotifymethod",level:3},{value:"AppDebug",id:"appdebug",level:3},{value:"SmtpServer",id:"smtpserver",level:3},{value:"SmtpServerPort",id:"smtpserverport",level:3},{value:"SmtpServerSSL",id:"smtpserverssl",level:3},{value:"EnableEmail",id:"enableemail",level:3},{value:"EmailSender",id:"emailsender",level:3},{value:"SmtpUserName",id:"smtpusername",level:3},{value:"SmtpPassword",id:"smtppassword",level:3},{value:"Recipients",id:"recipients",level:3},{value:"AppSmtpServer",id:"appsmtpserver",level:3},{value:"AppEnableEmail",id:"appenableemail",level:3},{value:"AppEmailSender",id:"appemailsender",level:3},{value:"AppSmtpUserName",id:"appsmtpusername",level:3},{value:"AppSmtpPassword",id:"appsmtppassword",level:3},{value:"AppRecipients",id:"apprecipients",level:3},{value:"AlertLevel",id:"alertlevel",level:3},{value:"AlertClear",id:"alertclear",level:3},{value:"AlertTest",id:"alerttest",level:3},{value:"Register",id:"register",level:3}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"monitormanager",children:"%Monitor.Manager"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class %Monitor.Manager Extends (%RegisteredObject, %XML.Adaptor) [ System = 3 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Provides system management functions for the MONITOR and Application Monitor"}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"activate",children:"Activate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Activate(mclass As %String) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Activate a metrics class"}),"\n",(0,n.jsx)(s.h3,{id:"deactivate",children:"Deactivate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Deactivate(mclass As %String) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Deactivate a metrics class"}),"\n",(0,n.jsx)(s.h3,{id:"remove",children:"Remove"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Remove(mclass As %String) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Remove a metrics class"}),"\n",(0,n.jsx)(s.h3,{id:"classinterval",children:"ClassInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ClassInterval(mclass As %String, ByRef interval As %Integer) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set the sample interval for a metrics class"}),"\n",(0,n.jsx)(s.h3,{id:"purge",children:"Purge"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Purge(mclass As %String) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Purge a metrics class"}),"\n",(0,n.jsx)(s.h3,{id:"isactive",children:"IsActive"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsActive() As %Boolean\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return summary active status: 0 - no active classes, else 1 (some active classes)"}),"\n",(0,n.jsx)(s.h3,{id:"start",children:"Start"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Start() As %Integer\n"})}),"\n",(0,n.jsx)(s.p,{children:"Start the System Monitor"}),"\n",(0,n.jsx)(s.h3,{id:"refresh",children:"Refresh"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Refresh() As %Integer\n"})}),"\n",(0,n.jsx)(s.p,{children:"Refresh the System Monitor"}),"\n",(0,n.jsx)(s.h3,{id:"halt",children:"Halt"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Halt() As %Integer\n"})}),"\n",(0,n.jsx)(s.p,{children:"Halt the System monitor"}),"\n",(0,n.jsx)(s.h3,{id:"startapp",children:"StartApp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StartApp() As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Start the Application Monitor"}),"\n",(0,n.jsx)(s.h3,{id:"refreshapp",children:"RefreshApp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RefreshApp() As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Refresh the Monitor agent"}),"\n",(0,n.jsx)(s.h3,{id:"haltapp",children:"HaltApp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod HaltApp() As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Halt the monitor"}),"\n",(0,n.jsx)(s.h3,{id:"signalapp",children:"SignalApp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SignalApp() As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Signal the Monitor agent to run"}),"\n",(0,n.jsx)(s.h3,{id:"clearsystemcounters",children:"ClearSystemCounters"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ClearSystemCounters(System As %Boolean = 0) As %Integer\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Clear the current system MONITOR counters",(0,n.jsx)(s.br,{}),"\nSystem = 1 indicates to specifically clear the system level counters"]}),"\n",(0,n.jsx)(s.h3,{id:"startsystemcounters",children:"StartSystemCounters"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StartSystemCounters(System As %Boolean = 0, Processes As %Integer = {$$$STmaxpid}, Routines As %Integer = 200, Globals As %Integer = 100, Network As %Integer = 5, ProcessList As %List, Databases As %Integer = 10, RtnLines As %Boolean = 1) As %Integer\n"})}),"\n",(0,n.jsx)(s.p,{children:"Enable the system MONITOR counters"}),"\n",(0,n.jsx)(s.p,{children:"System = 1 to separately enable only system level counters (other parameters ignored)"}),"\n",(0,n.jsx)(s.p,{children:"Note that if System level counters are enabled separately, then they must also be specifically stopped or cleared separately (use System = 1 for the Stop() and Clear() methods)"}),"\n",(0,n.jsxs)(s.p,{children:["Processes = the number of individual processes to collect counts for",(0,n.jsx)(s.br,{}),"\nRoutines = the number of individual routines to collect counts for",(0,n.jsx)(s.br,{}),"\nGlobals = the number of individual globals to collect counts for",(0,n.jsx)(s.br,{}),"\nNetwork = the number of individual network nodes to collect counts for",(0,n.jsx)(s.br,{}),"\nProcessList = a $List of specific process IDs to collect counts for",(0,n.jsx)(s.br,{}),"\nDatabases = the number of individual databases to collect counts for",(0,n.jsx)(s.br,{}),"\nRtnLines = choice of counting RtnLines metric (disabling this can reduce overhead)"]}),"\n",(0,n.jsxs)(s.p,{children:["Note that the MONITOR will allocate 'slots' for the number of processes, globals, routines and nodes you indicate. The first 'n' processes, routines, globals and nodes to increment the counters will take those slots, and all counts from other processes, globals, routines, and nodes will be added to the 'Other' slot. The maximum number of 'slots' for each collection is 65,535.",(0,n.jsx)(s.br,{}),"\nThese counters are the same metrics as reported by the PERFMON utility. If you plan to view the data collected via ^PERFMON, you should ensure that the start time for calculating per/second data is properly set for ^PERFMON by running the $$Clear^PERFMON() function. This will reset the counters and start time."]}),"\n",(0,n.jsx)(s.h3,{id:"stopsystemcounters",children:"StopSystemCounters"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StopSystemCounters(System As %Boolean = 0) As %Integer\n"})}),"\n",(0,n.jsx)(s.p,{children:"Stop the system MONITOR counters"}),"\n",(0,n.jsx)(s.p,{children:"System = 1 indicates to specifically stop the system level counters (if those were started separately)"}),"\n",(0,n.jsx)(s.h3,{id:"systemcountersactive",children:"SystemCountersActive"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SystemCountersActive(System As %Boolean = 0) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Check if the system MONITOR counters are currently active"}),"\n",(0,n.jsxs)(s.p,{children:["Returns '0' if not active, or a positive integer if active.",(0,n.jsx)(s.br,{}),"\nA '1' indicates that PERFMON (or the SystemCounters in this class) are active.",(0,n.jsx)(s.br,{}),"\nA '2' indicates that %SYS.MONLBL (or the %Monitor.System.LineByLine class) is active.",(0,n.jsx)(s.br,{}),"\nIf the 'System' parameter is included as '1', then this will also return a second comma-delimited piece indicating the status of the 'system-only' level counters documented above in the StartSystemCounters() method. So, a '1,1' means both PERFMON and the system-only counters are active, but have been started separately. A '1,0' means that just a PERFMON collection was started (which includes system-level counters, but they will be stopped when PERFMON is stopped)."]}),"\n",(0,n.jsx)(s.h3,{id:"interval",children:"Interval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Interval(interval As %Integer) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set sampling interval"}),"\n",(0,n.jsx)(s.h3,{id:"appinterval",children:"AppInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppInterval(interval As %Integer) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set application sampling interval"}),"\n",(0,n.jsx)(s.h3,{id:"appnotify",children:"AppNotify"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppNotify(method As %Integer) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set application default notification scheme"}),"\n",(0,n.jsx)(s.h3,{id:"appnotifymethod",children:"AppNotifyMethod"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppNotifyMethod(ByRef method As %String, ByRef class As %String) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set application default notification method"}),"\n",(0,n.jsx)(s.h3,{id:"appdebug",children:"AppDebug"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppDebug(ByRef Enable As %Boolean, ClassName As %String, ByRef Errors As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Save latest errors generated by executing an Application Monitor user-defined classe. This would include errors from methods such as %Save(), Initialize() or GetSample(). A common example of this is trying to %Save a sample with a %String property longer than 50 characters. Since these errors can happen everytime we fetch a sample, we don't really want to fill a logfile here. So we just save the latest error for each class/method."}),"\n",(0,n.jsxs)(s.p,{children:["'Enable' may be 1 or 0 to enable/disable debugging. Enable=0 disables debugging for all classes and clears the error list. No value leaves the setting as is, and it returns the current setting.",(0,n.jsx)(s.br,{}),"\n'ClassName' can specify a Class to debug (if Enable=1) or select Errors for a Class. No value means all Application Monitor classes.",(0,n.jsx)(s.br,{}),"\n'Errors' returns an array of strings for the latest errors: Errors(Class,Method)=error_string"]}),"\n",(0,n.jsx)(s.h3,{id:"smtpserver",children:"SmtpServer"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SmtpServer(server As %String) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP Server name. Returns current Server name (input argument is optional)."}),"\n",(0,n.jsx)(s.h3,{id:"smtpserverport",children:"SmtpServerPort"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SmtpServerPort(port As %String) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP Server port. Returns current Server port (input argument is optional)."}),"\n",(0,n.jsx)(s.h3,{id:"smtpserverssl",children:"SmtpServerSSL"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SmtpServerSSL(ByRef SSLConfig As %String, ByRef UseSTARTTLS As %Boolean)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP SSLConfiguration and UseSTARTTLS (as defined in %Net.SMTP). Returns current SSLConfiguration and UseSTARTTLS (input arguments are optional)."}),"\n",(0,n.jsx)(s.h3,{id:"enableemail",children:"EnableEmail"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EnableEmail(enable As %Boolean) As %Boolean\n"})}),"\n",(0,n.jsx)(s.p,{children:"Email enabled"}),"\n",(0,n.jsx)(s.h3,{id:"emailsender",children:"EmailSender"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EmailSender(sender As %String) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email sender"}),"\n",(0,n.jsx)(s.h3,{id:"smtpusername",children:"SmtpUserName"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SmtpUserName(name As %String) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP user name"}),"\n",(0,n.jsx)(s.h3,{id:"smtppassword",children:"SmtpPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SmtpPassword(passwd As %String) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP password"}),"\n",(0,n.jsx)(s.h3,{id:"recipients",children:"Recipients"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Recipients(recipients As %List) As %List\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email recipients"}),"\n",(0,n.jsx)(s.h3,{id:"appsmtpserver",children:"AppSmtpServer"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppSmtpServer(Server As %String, ByRef Port As %String, ByRef SSLConfiguration As %String, ByRef UseSTARTTLS As %Boolean) As %String [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Set Application email SMTP Server name. Returns current Server Name ('server' is optional)",(0,n.jsx)(s.br,{}),"\nOptionally, you may also set/get the Port, SSLConfiguration, and UseSTARTTLS properties.",(0,n.jsx)(s.br,{}),"\nSee the %Net.SMTP class for descriptions and defaults of these properties."]}),"\n",(0,n.jsx)(s.h3,{id:"appenableemail",children:"AppEnableEmail"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppEnableEmail(enable As %Boolean) As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Email enabled"}),"\n",(0,n.jsx)(s.h3,{id:"appemailsender",children:"AppEmailSender"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppEmailSender(sender As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email sender"}),"\n",(0,n.jsx)(s.h3,{id:"appsmtpusername",children:"AppSmtpUserName"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppSmtpUserName(name As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP user name"}),"\n",(0,n.jsx)(s.h3,{id:"appsmtppassword",children:"AppSmtpPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppSmtpPassword(passwd As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email SMTP password"}),"\n",(0,n.jsx)(s.h3,{id:"apprecipients",children:"AppRecipients"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AppRecipients(recipients As %List) As %List [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set email recipients"}),"\n",(0,n.jsx)(s.h3,{id:"alertlevel",children:"AlertLevel"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AlertLevel(level As %Integer) As %Integer [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Set alert level"}),"\n",(0,n.jsx)(s.h3,{id:"alertclear",children:"AlertClear"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AlertClear(name As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Signal AppMonSensor to clear the 'Notified' flag for a NotifyOnce Alert."}),"\n",(0,n.jsx)(s.h3,{id:"alerttest",children:"AlertTest"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AlertTest(name As %String, values As %List) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Test method for custom handling Application Monitor Alerts"}),"\n",(0,n.jsx)(s.h3,{id:"register",children:"Register"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Register(classname As %String, update As %Boolean = 0) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Register system classes in current namespace"})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>i});var n=t(96540);const r={},l=n.createContext(r);function a(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);