"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[47819],{72159:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>a,default:()=>c,frontMatter:()=>r,toc:()=>l});var n=t(74848),i=t(28453);const r={pagination_prev:null,pagination_next:null},a="OAuth2.Server.Configuration",l=[{value:"Parameters",id:"parameters",level:2},{value:"HTTP200OK",id:"http200ok",level:3},{value:"HTTP500INTERNALSERVERERROR",id:"http500internalservererror",level:3},{value:"Properties",id:"properties",level:2},{value:"Key",id:"key",level:3},{value:"IssuerEndpoint",id:"issuerendpoint",level:3},{value:"Description",id:"description",level:3},{value:"AccessTokenInterval",id:"accesstokeninterval",level:3},{value:"AuthorizationCodeInterval",id:"authorizationcodeinterval",level:3},{value:"RefreshTokenInterval",id:"refreshtokeninterval",level:3},{value:"SessionInterval",id:"sessioninterval",level:3},{value:"ClientSecretInterval",id:"clientsecretinterval",level:3},{value:"SupportedScopes",id:"supportedscopes",level:3},{value:"DefaultScope",id:"defaultscope",level:3},{value:"AllowUnsupportedScope",id:"allowunsupportedscope",level:3},{value:"SupportedGrantTypes",id:"supportedgranttypes",level:3},{value:"ReturnRefreshToken",id:"returnrefreshtoken",level:3},{value:"SupportSession",id:"supportsession",level:3},{value:"AudRequired",id:"audrequired",level:3},{value:"AllowPublicClientRefresh",id:"allowpublicclientrefresh",level:3},{value:"ForcePKCEForPublicClients",id:"forcepkceforpublicclients",level:3},{value:"ForcePKCEForConfidentialClients",id:"forcepkceforconfidentialclients",level:3},{value:"CustomizationRoles",id:"customizationroles",level:3},{value:"CustomizationNamespace",id:"customizationnamespace",level:3},{value:"AuthenticateClass",id:"authenticateclass",level:3},{value:"SessionClass",id:"sessionclass",level:3},{value:"ValidateUserClass",id:"validateuserclass",level:3},{value:"GenerateTokenClass",id:"generatetokenclass",level:3},{value:"RevokeTokenClass",id:"revoketokenclass",level:3},{value:"ServerCredentials",id:"servercredentials",level:3},{value:"ServerPassword",id:"serverpassword",level:3},{value:"PrivateJWKS",id:"privatejwks",level:3},{value:"PublicJWKS",id:"publicjwks",level:3},{value:"JWKSFromCredentials",id:"jwksfromcredentials",level:3},{value:"SigningAlgorithm",id:"signingalgorithm",level:3},{value:"EncryptionAlgorithm",id:"encryptionalgorithm",level:3},{value:"KeyAlgorithm",id:"keyalgorithm",level:3},{value:"SSLConfiguration",id:"sslconfiguration",level:3},{value:"Metadata",id:"metadata",level:3},{value:"Methods",id:"methods",level:2},{value:"SupportedGrantTypesSet",id:"supportedgranttypesset",level:3},{value:"SupportedGrantTypesGet",id:"supportedgranttypesget",level:3},{value:"GetIssuerURL",id:"getissuerurl",level:3},{value:"%OnNew",id:"onnew",level:3},{value:"Open",id:"open",level:3},{value:"Save",id:"save",level:3},{value:"Delete",id:"delete",level:3},{value:"DeleteSessions",id:"deletesessions",level:3},{value:"GetSupportedAlgorithms",id:"getsupportedalgorithms",level:3},{value:"UpdateMetadata",id:"updatemetadata",level:3},{value:"Discovery",id:"discovery",level:3},{value:"RotateKeys",id:"rotatekeys",level:3},{value:"%OnAddToSaveSet",id:"onaddtosaveset",level:3},{value:"%OnValidateObject",id:"onvalidateobject",level:3},{value:"%OnBeforeSave",id:"onbeforesave",level:3},{value:"%OnDelete",id:"ondelete",level:3},{value:"GetCSPApplication",id:"getcspapplication",level:3},{value:"CreateCSPApplication",id:"createcspapplication",level:3}];function o(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"oauth2serverconfiguration",children:"OAuth2.Server.Configuration"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class OAuth2.Server.Configuration Extends %Persistent [ System = 4 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"The authorization server configuration is maintained by the OAuth2.Server.Configuration class. InterSystems supplies an SMP page, %CSP.UI.Portal.OAuth2.Server.Configuration, which configures the OAuth2 server as part of the SMP. It is possible to customize the authorization server by replacing this page by a user written page which maintains the OAuth2.Server.Configuration class instance."}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.h3,{id:"http200ok",children:"HTTP200OK"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter HTTP200OK As STRING = "200 OK";\n'})}),"\n",(0,n.jsx)(s.h3,{id:"http500internalservererror",children:"HTTP500INTERNALSERVERERROR"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter HTTP500INTERNALSERVERERROR As STRING = "500 Internal Server Error";\n'})}),"\n",(0,n.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(s.h3,{id:"key",children:"Key"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property Key As %String [ InitialExpression = "singleton", Internal ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"The IDKEY for the singleton configuration class. Key for singleton"}),"\n",(0,n.jsx)(s.h3,{id:"issuerendpoint",children:"IssuerEndpoint"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property IssuerEndpoint As OAuth2.Endpoint [ Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"IssuerEndpoint is the endpoint for this authorization server."}),"\n",(0,n.jsx)(s.h3,{id:"description",children:"Description"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Description As %String(MAXLEN = 1024);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Description is a human readable of this authorization server."}),"\n",(0,n.jsx)(s.h3,{id:"accesstokeninterval",children:"AccessTokenInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AccessTokenInterval As %Integer(MINVAL = 1) [ InitialExpression = 3600, Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"AccessTokenInterval is the interval in seconds after which an access token issued by this server will expire. The default is 3600 seconds."}),"\n",(0,n.jsx)(s.h3,{id:"authorizationcodeinterval",children:"AuthorizationCodeInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AuthorizationCodeInterval As %Integer(MINVAL = 1) [ InitialExpression = 60, Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"AuthorizationCodeInterval is the interval in seconds after which an authorization code issued by this server will expire. The default is 60 seconds."}),"\n",(0,n.jsx)(s.h3,{id:"refreshtokeninterval",children:"RefreshTokenInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property RefreshTokenInterval As %Integer(MINVAL = 1) [ InitialExpression = 86400, Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"RefreshTokenInterval is the interval in seconds after which a refresh token issued by this server will expire. The default is 24 hours = 86400 seconds."}),"\n",(0,n.jsx)(s.h3,{id:"sessioninterval",children:"SessionInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property SessionInterval As %Integer(MINVAL = 0) [ InitialExpression = 86400, Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"SessionInterval is the interval in seconds after which a user session will be automatically terminated. The value 0 means the session will not be automatically terminated. The default is 24 hours = 86400 seconds."}),"\n",(0,n.jsx)(s.h3,{id:"clientsecretinterval",children:"ClientSecretInterval"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ClientSecretInterval As %Integer(MINVAL = 0) [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"ClientSecretInterval is the interval in seconds after which a client secret will expire. The default value of 0 means the session will not be automatically terminated."}),"\n",(0,n.jsx)(s.h3,{id:"supportedscopes",children:"SupportedScopes"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property SupportedScopes As array Of %String(MAXLEN = "") [ Required ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"SupportedScopes is a %ArrayOfDatatypes which specifies all scopes supported by this Authorization Server. The index for each array element is the scope and the value is the description of the scope for display."}),"\n",(0,n.jsx)(s.h3,{id:"defaultscope",children:"DefaultScope"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property DefaultScope As %String(MAXLEN = "");\n'})}),"\n",(0,n.jsx)(s.p,{children:"DefaultScope is a blank separated list containing the default for access token scope if scope is not specified in the access token request or in the client configuration."}),"\n",(0,n.jsx)(s.h3,{id:"allowunsupportedscope",children:"AllowUnsupportedScope"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AllowUnsupportedScope As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"If AllowUnsupportedScope is true (1), then unsupported scope values will be ignored. Otherwise, an error will be returned."}),"\n",(0,n.jsx)(s.h3,{id:"supportedgranttypes",children:"SupportedGrantTypes"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property SupportedGrantTypes As %String(MAXLEN = 5, MINLEN = 1);\n"})}),"\n",(0,n.jsxs)(s.p,{children:["**** Moved to OAuth2.Server.Metadata when dynamic client support introduced",(0,n.jsx)(s.br,{}),"\nSupportedGrantTypes is the grant types that are supported to create an access token. This property is a string of 1 to 5 characters with one character for each supported grant type as follows:",(0,n.jsx)(s.br,{}),'\n- "A" - Authorization Code - "I" - Implicit - "P" - Resource Owner Password Credentials - "C" - Client Credentials - "J" - JWT Authorization']}),"\n",(0,n.jsx)(s.h3,{id:"returnrefreshtoken",children:"ReturnRefreshToken"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ReturnRefreshToken As %String;\n"})}),"\n",(0,n.jsxs)(s.p,{children:['ReturnRefreshToken defines the conditions under which a refresh token is returned along with the access token. This property is a string of multiple condition characters which are OR\'ed. "" means only return a RefreshToken as required by OpenID Connect.',(0,n.jsx)(s.br,{}),'\n- "a" - Always - "c" - Confidential client - "f" - if offline_access scope requested']}),"\n",(0,n.jsx)(s.h3,{id:"supportsession",children:"SupportSession"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property SupportSession As %Boolean;\n"})}),"\n",(0,n.jsx)(s.p,{children:"If SupportSession is true, then OAuth 2.0 user sessions will be supported using the specified SessionClass."}),"\n",(0,n.jsx)(s.h3,{id:"audrequired",children:"AudRequired"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AudRequired As %Boolean;\n"})}),"\n",(0,n.jsx)(s.p,{children:"If AudRequired is true, then an authorization code and implicit requests require the aud property."}),"\n",(0,n.jsx)(s.h3,{id:"allowpublicclientrefresh",children:"AllowPublicClientRefresh"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AllowPublicClientRefresh As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"If AllowPublicClientRefresh is true, then a clientSecret will NOT be required to process refresh tokens."}),"\n",(0,n.jsx)(s.h3,{id:"forcepkceforpublicclients",children:"ForcePKCEForPublicClients"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ForcePKCEForPublicClients As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"If ForcePKCEForPublicClients is true, then authorization and token requests from public clients MUST adhere to the Proof Key for Code Exchange (PKCE) specification."}),"\n",(0,n.jsx)(s.h3,{id:"forcepkceforconfidentialclients",children:"ForcePKCEForConfidentialClients"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ForcePKCEForConfidentialClients As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"If ForcePKCEForConfidentialClients is true, then authorization and token requests from confidential clients MUST adhere to the Proof Key for Code Exchange (PKCE) specification."}),"\n",(0,n.jsx)(s.h3,{id:"customizationroles",children:"CustomizationRoles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property CustomizationRoles As %String(MAXLEN = 1024, MINLEN = 1) [ Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"CustomizationRoles is a comma separated list of roles that are set for any call to user supplied customization code."}),"\n",(0,n.jsx)(s.h3,{id:"customizationnamespace",children:"CustomizationNamespace"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property CustomizationNamespace As %String [ Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"CustomizationNamespace is the namespace where the customization code is to be run."}),"\n",(0,n.jsx)(s.h3,{id:"authenticateclass",children:"AuthenticateClass"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property AuthenticateClass As %String(MAXLEN = 256, MINLEN = 1) [ InitialExpression = "%OAuth2.Server.Authenticate", Required ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"AuthenticateClass is the name of a subclass of %OAuth2.Server.Authenticate which will be used to allow override of the DirectLogin, DisplayLogin and DisplayPermissions methods during user authorization."}),"\n",(0,n.jsx)(s.h3,{id:"sessionclass",children:"SessionClass"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property SessionClass As %String(MAXLEN = 256, MINLEN = 1) [ InitialExpression = "OAuth2.Server.Session", Required ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"SessionClass is the name of a class with the same signatures as OAuth2.Server.Session which includes GetUser, Login and Logout methods. These methods maintain an OAuth 2.0 session using any appropriate means. The default OAuth2.Session class uses an httpOnly cookie."}),"\n",(0,n.jsx)(s.h3,{id:"validateuserclass",children:"ValidateUserClass"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property ValidateUserClass As %String(MAXLEN = 256, MINLEN = 1) [ InitialExpression = "%OAuth2.Server.Validate", Required ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"ValidateUserClass is the name of a class with the same signatures as %OAuth2.Server.Validate which may override the ValidateUser method which validates a user and associates a set of properties with this user."}),"\n",(0,n.jsx)(s.h3,{id:"generatetokenclass",children:"GenerateTokenClass"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property GenerateTokenClass As %String(MAXLEN = 256, MINLEN = 1) [ InitialExpression = "%OAuth2.Server.Generate", Required ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"GenerateTokenClass is the name of a class with the same signatures as %OAuth2.Server.Generate which overrides the GenerateToken method. The GenerateToken method must generate an opaque token consisting of a random number. We will also supply a class matching the %OAuth2.Server.Generate interface - %OAuth2.Server.JWT, which will generate a signed JWT based on the token properties."}),"\n",(0,n.jsx)(s.h3,{id:"revoketokenclass",children:"RevokeTokenClass"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property RevokeTokenClass As %String(MAXLEN = 256, MINLEN = 1) [ InitialExpression = "%OAuth2.Server.Revoke", Required ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"RevokeTokenClass is the name of a class with the same signatures as %OAuth2.Server.Revoke which overrides the OnRevokeToken method. Any custom handling on token revocation can be done in this method."}),"\n",(0,n.jsx)(s.h3,{id:"servercredentials",children:"ServerCredentials"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ServerCredentials As %String;\n"})}),"\n",(0,n.jsx)(s.p,{children:"ServerCredentials is the alias of the %SYS.X509Credentials object which contains the authoriization server's certificate and private key."}),"\n",(0,n.jsx)(s.h3,{id:"serverpassword",children:"ServerPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ServerPassword As %String(MAXLEN = 128);\n"})}),"\n",(0,n.jsx)(s.p,{children:"ServerPassword is the password for the private key in ServerCredentials if the password is not in the %SYS.X5009Credentials object"}),"\n",(0,n.jsx)(s.h3,{id:"privatejwks",children:"PrivateJWKS"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property PrivateJWKS As %String(MAXLEN = "") [ Internal ];\n'})}),"\n",(0,n.jsxs)(s.p,{children:["PrivateJWKS is the JWKS which contains the private asymmetric keys for this server. If ServerCredentials is specified, then PrivateJWKS is created using the public/private key pair specified by these credentials. Otherwise, we generate the private/public keys pairs.",(0,n.jsx)(s.br,{}),"\nThis property should never be set directly for configuration."]}),"\n",(0,n.jsx)(s.h3,{id:"publicjwks",children:"PublicJWKS"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property PublicJWKS As %String(MAXLEN = "") [ Internal ];\n'})}),"\n",(0,n.jsxs)(s.p,{children:["PublicJWKS is the JWKS which contains the public asymmetric keys for this server which are to be made available via the jwks_uri metadata property. If ServerCredentials is specified, then PrivateJWKS is created using the public/private key pair specified by these credentials. Otherwise, we generate the private/public keys pairs.",(0,n.jsx)(s.br,{}),"\nThis property should never be set directly for configuration."]}),"\n",(0,n.jsx)(s.h3,{id:"jwksfromcredentials",children:"JWKSFromCredentials"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property JWKSFromCredentials As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["JWKSFromCredentials is true if the JWKSs were created from ServerCredentials.",(0,n.jsx)(s.br,{}),"\nThis property should never be set directly for configuration."]}),"\n",(0,n.jsx)(s.h3,{id:"signingalgorithm",children:"SigningAlgorithm"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property SigningAlgorithm As %String(VALUELIST = ",HS256,HS384,HS512,RS256,RS384,RS512,ES256,ES384,ES512") [ InitialExpression = "RS256" ];\n'})}),"\n",(0,n.jsx)(s.p,{children:'SigningAlgorithm specifies the default signing algorithm used to create JWSs or "" if JWTs are not to be signed. SigningAlgorithm is used for any client specific algorithm which is not specified. See %Net.JSON.JWA for the list of supported algorithms.'}),"\n",(0,n.jsx)(s.h3,{id:"encryptionalgorithm",children:"EncryptionAlgorithm"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property EncryptionAlgorithm As %String(VALUELIST = ",A128CBC-HS256,A192CBC-HS384,A256CBC-HS512");\n'})}),"\n",(0,n.jsx)(s.p,{children:'EncryptionAlgorithm specifies the default encryption algorithm used to create JWEs or "" if JWTs are not to be encrypted. EncryptionAlgorithm is used for any client specific algorithm which is not specified. See %Net.JSON.JWA for the list of supported algorithms. If EncryptionAlgorithm is specified, KeyAlgorithm must also be specified.'}),"\n",(0,n.jsx)(s.h3,{id:"keyalgorithm",children:"KeyAlgorithm"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property KeyAlgorithm As %String(VALUELIST = ",RSA1_5,RSA-OAEP,A128KW,A192KW,A256KW,dir");\n'})}),"\n",(0,n.jsx)(s.p,{children:'KeyAlgorithm specifies the default key management algorithm used to create JWEs or "" if JWTs are not to be encrypted. Keylgorithm is used for any client specific algorithm which is not specified. See %Net.JSON.JWA for the list of supported algorithms. If KeyAlgorithm is specified, EncryptionAlgorithm must also be specified.'}),"\n",(0,n.jsx)(s.h3,{id:"sslconfiguration",children:"SSLConfiguration"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property SSLConfiguration As %String(MAXLEN = 64);\n"})}),"\n",(0,n.jsxs)(s.p,{children:["The name of the activated TLS/SSL configuration to use loading a request object.",(0,n.jsx)(s.br,{}),"\nChosen by user during configuration."]}),"\n",(0,n.jsx)(s.h3,{id:"metadata",children:"Metadata"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Metadata As OAuth2.Server.Metadata;\n"})}),"\n",(0,n.jsx)(s.p,{children:"The meta data which describes this authorization server,"}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"supportedgranttypesset",children:"SupportedGrantTypesSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method SupportedGrantTypesSet(supportedGrantTypes As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Store value in metadata for compatibility"}),"\n",(0,n.jsx)(s.h3,{id:"supportedgranttypesget",children:"SupportedGrantTypesGet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method SupportedGrantTypesGet() As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get value from metadata for compatibility"}),"\n",(0,n.jsx)(s.h3,{id:"getissuerurl",children:"GetIssuerURL"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetIssuerURL() As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get the issuer URL"}),"\n",(0,n.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnNew() As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get a new OAuth2.Server.Configuration instance."}),"\n",(0,n.jsx)(s.h3,{id:"open",children:"Open"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Open(Output sc As %Status) As OAuth2.Server.Configuration\n"})}),"\n",(0,n.jsx)(s.p,{children:"Open the single OAuth2.Server.Configuration instance."}),"\n",(0,n.jsx)(s.h3,{id:"save",children:"Save"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method Save() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Save the single OAuth2.Server.Configuration instance. If this is the first time the configuration is saved, the Save method will also create a CSP application for this authorization server. The CSP application will be /csp/oauth2server."}),"\n",(0,n.jsx)(s.h3,{id:"delete",children:"Delete"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Delete() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Delete this configuration."}),"\n",(0,n.jsx)(s.h3,{id:"deletesessions",children:"DeleteSessions"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method DeleteSessions() As %Status [ Private ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"getsupportedalgorithms",children:"GetSupportedAlgorithms"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetSupportedAlgorithms(Output sigalgs As %List, Output encalgs As %List, Output keyalgs As %List) [ Deprecated ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Get server supported algorithms This method is deprecated. Use the ",(0,n.jsx)(s.strong,{children:"GetSupportedAlgorithms"})," method in %OAuth2.Utils instead."]}),"\n",(0,n.jsx)(s.h3,{id:"updatemetadata",children:"UpdateMetadata"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method UpdateMetadata() [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Update the server metadata. This method is called before creating the JSON string requested using the discovery URL to update the metadata properties which can be changed after compile time."}),"\n",(0,n.jsx)(s.h3,{id:"discovery",children:"Discovery"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Discovery() As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return authorization server metadata as JSON object per OpenID Connect Discovery."}),"\n",(0,n.jsx)(s.h3,{id:"rotatekeys",children:"RotateKeys"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method RotateKeys() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Rotate the auhtorization server's public/private key pairs by adding a new key pair to the JWKS and saving the JWKS. At this time, all private keys are kept. In the future only a limited set of private keys will be kept."}),"\n",(0,n.jsx)(s.h3,{id:"onaddtosaveset",children:"%OnAddToSaveSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnAddToSaveSet(depth As %Integer = 3, insert As %Integer = 0, callcount As %Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked when the current object is added to the SaveSet, either because %Save() was invoked on this object or on an object that references this object. %OnAddToSaveSet can modify the current object. It can also add other objects to the current SaveSet by invoking %AddToSaveSet or remove objects by calling %RemoveFromSaveSet."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error status then %Save() will fail and the transaction will be rolled back."}),"\n",(0,n.jsx)(s.h3,{id:"onvalidateobject",children:"%OnValidateObject"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnValidateObject() As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"onbeforesave",children:"%OnBeforeSave"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnBeforeSave(insert As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called before any data is written to disk."}),"\n",(0,n.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail."}),"\n",(0,n.jsx)(s.h3,{id:"ondelete",children:"%OnDelete"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %OnDelete(oid As %ObjectIdentity) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked by the %Delete method to provide notification that the object specified by oid is being deleted."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error then the object will not be deleted. [Previously private]"}),"\n",(0,n.jsx)(s.h3,{id:"getcspapplication",children:"GetCSPApplication"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetCSPApplication(server As %Boolean) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Get the CSP application name for OAuth2"}),"\n",(0,n.jsx)(s.h3,{id:"createcspapplication",children:"CreateCSPApplication"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CreateCSPApplication(server As %Boolean) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Create CSP application that is used by OAuth2"})]})}function c(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>l});var n=t(96540);const i={},r=n.createContext(i);function a(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);