"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[86821],{24317:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>a,default:()=>o,frontMatter:()=>i,toc:()=>c});var r=t(74848),s=t(28453);const i={pagination_prev:null,pagination_next:null},a="%IO.SocketCommon",c=[{value:"Properties",id:"properties",level:2},{value:"Port",id:"port",level:3},{value:"InputBufferSize",id:"inputbuffersize",level:3},{value:"OutputBufferSize",id:"outputbuffersize",level:3},{value:"SSLConfig",id:"sslconfig",level:3},{value:"Remote",id:"remote",level:3},{value:"DisconnectHandler",id:"disconnecthandler",level:3},{value:"KeepAliveInterval",id:"keepaliveinterval",level:3},{value:"TCPSendBuffer",id:"tcpsendbuffer",level:3},{value:"TCPReceiveBuffer",id:"tcpreceivebuffer",level:3},{value:"LocalInterface",id:"localinterface",level:3},{value:"LineTerminator",id:"lineterminator",level:3},{value:"AtEnd",id:"atend",level:3},{value:"Methods",id:"methods",level:2},{value:"WriteLine",id:"writeline",level:3},{value:"Write",id:"write",level:3},{value:"Read",id:"read",level:3},{value:"ReadLine",id:"readline",level:3},{value:"ReadAny",id:"readany",level:3},{value:"Flush",id:"flush",level:3},{value:"GetLocalInterfaces",id:"getlocalinterfaces",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"iosocketcommon",children:"%IO.SocketCommon"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Class %IO.SocketCommon [ Abstract, CompileAfter = %IO.I.Stream, System = 2 ]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Common class members to both Socket and ServerSocket"}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(n.h3,{id:"port",children:"Port"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property Port As %String(MAXLEN = 6, TRUNCATE = 1);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"inputbuffersize",children:"InputBufferSize"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property InputBufferSize As %Integer [ InitialExpression = 32767 ];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"outputbuffersize",children:"OutputBufferSize"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property OutputBufferSize As %Integer [ InitialExpression = 32767 ];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"sslconfig",children:"SSLConfig"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property SSLConfig As %String;\n"})}),"\n",(0,r.jsx)(n.p,{children:"The name of an existing SSL/TLS system configuration set to use (Secure Socket Layer / Transport Layer Security, configured via the system portal's Security Management page). May include a certificate password after a '|' character for inbound connections."}),"\n",(0,r.jsx)(n.h3,{id:"remote",children:"Remote"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property Remote As %String [ ReadOnly ];\n"})}),"\n",(0,r.jsx)(n.p,{children:"The IP address and port of the remote end of the socket connection Time and IP address and port (and disconnect time) of the last connected remote socket"}),"\n",(0,r.jsx)(n.h3,{id:"disconnecthandler",children:"DisconnectHandler"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property DisconnectHandler As %RegisteredObject;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Object on which to call OnDisconnect() when a connection is lost"}),"\n",(0,r.jsx)(n.h3,{id:"keepaliveinterval",children:"KeepAliveInterval"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property KeepAliveInterval As %Integer(MAXVAL = 432000, MINVAL = -1) [ InitialExpression = 0 ];\n"})}),"\n",(0,r.jsx)(n.p,{children:"Connection-specific TCP keepalive interval in seconds. A setting of -1 means KeepAlive should be disabled entirely. InterSystems IRIS supports per socket keepalive on Windows and Linux, so this setting is ignored on other platforms. The default value of 0 will use the current system-wide TCP keepalive interval. Valid settings are -1, to disable keepalive entirely, and between 0 seconds and 432000 seconds (5 days), where positive values less than 30 will be treated as a 30 second interval."}),"\n",(0,r.jsx)(n.h3,{id:"tcpsendbuffer",children:"TCPSendBuffer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property TCPSendBuffer As %Integer(MINVAL = 0) [ InitialExpression = 0 ];\n"})}),"\n",(0,r.jsx)(n.p,{children:"Control the size, in bytes, of the TCP Send Buffer (SO_SNDBUF) for the TCP device. This should be used in conjunction with TCPReceiveBuffer to increase the TCP window as per RFC1323. The primary use case is in situations with high latency or bandwidth, where the default sizes of the respective buffers may constrain throughput. The default value of 0 will use the OS default setting."}),"\n",(0,r.jsx)(n.h3,{id:"tcpreceivebuffer",children:"TCPReceiveBuffer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property TCPReceiveBuffer As %Integer(MINVAL = 0) [ InitialExpression = 0 ];\n"})}),"\n",(0,r.jsx)(n.p,{children:"Control the size, in bytes, of the TCP Receive Buffer (SO_RCVBUF) for the TCP device. This should be used in conjunction with TCPSendBuffer to increase the TCP window as per RFC1323. The primary use case is in situations with high latency or bandwidth, where the default sizes of the respective buffers may constrain throughput. The default value of 0 will use the OS default setting."}),"\n",(0,r.jsx)(n.h3,{id:"localinterface",children:"LocalInterface"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property LocalInterface As %String;\n"})}),"\n",(0,r.jsx)(n.p,{children:"In a multi-homed system, specify which local network interface the TCP connection should go through. An empty value means use any interface. See GetLocalInterfaces() to enumerate available choices."}),"\n",(0,r.jsx)(n.h3,{id:"lineterminator",children:"LineTerminator"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property LineTerminator As %String(TRUNCATE = 1) [ InitialExpression = {$Char(10)} ];\n"})}),"\n",(0,r.jsx)(n.p,{children:"Override InitialExpression"}),"\n",(0,r.jsx)(n.h3,{id:"atend",children:"AtEnd"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Property AtEnd As %Boolean [ InitialExpression = 0, ReadOnly ];\n"})}),"\n",(0,r.jsx)(n.p,{children:"Override InitialExpression"}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"writeline",children:"WriteLine"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:'Method WriteLine(pLine As %String = "", pFlush As %Boolean, Output pSC As %Status)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"write",children:"Write"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:'Method Write(pData As %String = "", pFlush As %Boolean, Output pSC As %Status)\n'})}),"\n",(0,r.jsx)(n.p,{children:"Write pLine to the stream buffer, followed by the current LineTerminator characters. If pFlush is True, ensure that the characters are actually sent to the stream."}),"\n",(0,r.jsx)(n.h3,{id:"read",children:"Read"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Method Read(pMaxReadLen As %Integer, ByRef pTimeout As %Numeric = -1, Output pSC As %Status) As %String\n"})}),"\n",(0,r.jsx)(n.p,{children:"Read until pMaxReadLen chars are gotten or pTimeout expires. On return, if pTimeout=0 it means no timeout occurred and the returned string contains the full pMaxReadLen characters. If pTimeout is unchanged it means the full timeout period expired before encountering pMaxReadLen chars and the returned string is shorter than pMaxReadLen."}),"\n",(0,r.jsx)(n.h3,{id:"readline",children:"ReadLine"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Method ReadLine(pMaxReadLen As %Integer, ByRef pTimeout = -1, Output pSC As %Status, ByRef pLineTerminator As %String = {..LineTerminator}) As %String\n"})}),"\n",(0,r.jsx)(n.p,{children:"Read until pMaxReadLen chars are gotten, pTimeout expires, or a LineTerminator character is encountered. On return, if pTimeout=0 it means no timeout occurred. If pTimeout=0 and the returned string contains the full pMaxReadLen characters, it means no LineTerminator was encountered yet, even if the following character would be a LineTerminator. If pTimeout=0 and the returned string is shorter than pMaxReadLen, then a LineTerminator was encountered. If pTimeout is unchanged it means the full timeout period expired before encountering a LineTerminator character or pMaxReadLen chars and the returned string is shorter than pMaxReadLen. On return, pLineTerminator contains the encountered LineTerminator character(s) if any."}),"\n",(0,r.jsx)(n.h3,{id:"readany",children:"ReadAny"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Method ReadAny(pMaxReadLen As %Integer, ByRef pTimeout As %Numeric = -1, Output pSC As %Status) As %String\n"})}),"\n",(0,r.jsx)(n.p,{children:"Return as soon as any data arrives, or timeout expires, or MaxReadLen is reached"}),"\n",(0,r.jsx)(n.h3,{id:"flush",children:"Flush"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Method Flush(Output pSC As %Status)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ensure that any data already written to the TCP buffer are actually sent to the remote partner."}),"\n",(0,r.jsx)(n.h3,{id:"getlocalinterfaces",children:"GetLocalInterfaces"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod GetLocalInterfaces(Output pResults) As %Status\n"})}),"\n",(0,r.jsx)(n.p,{children:'Get a list of link-local interface addresses The output argument is an integer-subscripted array of local interface IP addresses. They may be IPv4 or IPv6 addresses. On LINUX systems the address will be suffixed with the name of the interface (e.g. %eth0).  After the IP address each list entry contains a space followed by, in parentheses, the text "IPv4" or "IPv6" depending on the type of interface, a space, and then the full name of the interface.  This entry may be set directly into the LocalInterface property of this class but only the IP address portion will be used in the binding of the socket to local network interfaces.  To be able to bind to IPv6 interfaces you may need to enable IPv6. This is done in the Management Portal by going to System Administration / Configuration / Additional Settings / Startup and editing the IPv6 setting.'})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var r=t(96540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);