"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[89824],{50894:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>t,default:()=>o,frontMatter:()=>r,toc:()=>a});var i=s(74848),l=s(28453);const r={pagination_prev:null,pagination_next:null},t="%MV.File",a=[{value:"Properties",id:"properties",level:2},{value:"%StorageType",id:"storagetype",level:3},{value:"%FileName",id:"filename",level:3},{value:"%Namespace",id:"namespace",level:3},{value:"%DictFlag",id:"dictflag",level:3},{value:"%Global",id:"global",level:3},{value:"%Account",id:"account",level:3},{value:"%TargetAccount",id:"targetaccount",level:3},{value:"%TargetFileName",id:"targetfilename",level:3},{value:"%IsBinary",id:"isbinary",level:3},{value:"%IsTranslated",id:"istranslated",level:3},{value:"%COSName",id:"cosname",level:3},{value:"%LockName",id:"lockname",level:3},{value:"%ClassName",id:"classname",level:3},{value:"%IndexType",id:"indextype",level:3},{value:"%IndexRoutine",id:"indexroutine",level:3},{value:"%IndexName",id:"indexname",level:3},{value:"%IndexCollation",id:"indexcollation",level:3},{value:"%BSCAN",id:"bscan",level:3},{value:"%IndFlag",id:"indflag",level:3},{value:"%IndNames",id:"indnames",level:3},{value:"%IndColl",id:"indcoll",level:3},{value:"%IndMV",id:"indmv",level:3},{value:"%Options",id:"options",level:3},{value:"%TriggerRoutine",id:"triggerroutine",level:3},{value:"%TriggerOperations",id:"triggeroperations",level:3},{value:"%FireTriggers",id:"firetriggers",level:3},{value:"%CasePreserveName",id:"casepreservename",level:3},{value:"%IOTable",id:"iotable",level:3},{value:"%ClassNamespace",id:"classnamespace",level:3},{value:"%SectionName",id:"sectionname",level:3},{value:"Methods",id:"methods",level:2},{value:"Dump",id:"dump",level:3},{value:"UnlockAll",id:"unlockall",level:3},{value:"Close",id:"close",level:3},{value:"%OnClose",id:"onclose",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mvfile",children:"%MV.File"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Class %MV.File Extends %RegisteredObject [ ServerOnly = 1, System = 4 ]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsx)(n.h3,{id:"storagetype",children:"%StorageType"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %StorageType As %Integer [ InitialExpression = {$$$MVFIOTypeUndef} ];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"filename",children:"%FileName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %FileName As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"namespace",children:"%Namespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %Namespace As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"dictflag",children:"%DictFlag"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %DictFlag As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"global",children:"%Global"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %Global As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"account",children:"%Account"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %Account As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"targetaccount",children:"%TargetAccount"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %TargetAccount As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"targetfilename",children:"%TargetFileName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %TargetFileName As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"isbinary",children:"%IsBinary"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IsBinary As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"istranslated",children:"%IsTranslated"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IsTranslated As %Boolean [ InitialExpression = 1 ];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cosname",children:"%COSName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %COSName As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lockname",children:"%LockName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %LockName As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"classname",children:"%ClassName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %ClassName As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"indextype",children:"%IndexType"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndexType As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"indexroutine",children:"%IndexRoutine"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndexRoutine As %String;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"indexname",children:"%IndexName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndexName As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:'When the file variable is produced as a result of OPENINDEX then the index that was opened is stored here for future use by any select lists. Note that at the moment index storage is restricted to the default of ^INDEXGLOBAL("indexName",... and we may need to review this, though it is unlikely to be an issue'}),"\n",(0,i.jsx)(n.h3,{id:"indexcollation",children:"%IndexCollation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndexCollation As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"A select list can represent an index. An index stores the actual keys as oppposed to the key values returned by READNEXT in collated encoding sequence such as MV R or SPACE (equivlant to MV L) etc. This property defines the collation in use for the index."}),"\n",(0,i.jsx)(n.h3,{id:"bscan",children:"%BSCAN"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %BSCAN As %String [ MultiDimensional ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"Simpler index functions such as BSCAN, expect the file variable to track the last index access. In order to allow this, we store these in an array, subscripted by index name. The top level is used to track when BSCAN walks over the global itself, instead of an index."}),"\n",(0,i.jsx)(n.h3,{id:"indflag",children:"%IndFlag"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndFlag As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"Flag to determine if index names/collations has been loaded yet"}),"\n",(0,i.jsx)(n.h3,{id:"indnames",children:"%IndNames"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndNames As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"$LIST of index names that can be used by index functions"}),"\n",(0,i.jsx)(n.h3,{id:"indcoll",children:"%IndColl"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndColl As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"$LIST of index collations that can be used by index functions"}),"\n",(0,i.jsx)(n.h3,{id:"indmv",children:"%IndMV"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IndMV As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"String of index MV flags (0->S,1->M) that can be used by index functions"}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"%Options"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %Options As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Options (from attribute 6)"}),"\n",(0,i.jsx)(n.h3,{id:"triggerroutine",children:"%TriggerRoutine"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %TriggerRoutine As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Stores the name of the generated COS routine (including namespace) that must be called if this file descriptor is subject to any of the file trigger processing options described below. How this works is that when a file is opened the FireTriggers flag is set (if there are ANY triggers). When any MVFIO routine is called it checks to see if this flag is set and if it is, then it checks to see if there are triggers for this specific operation (may do this the other way around). If both tests pass then control is transferred to the named COS routine TriggerRoutine. The first thing the entry point for the particular IO function does is turn that flag off. It is then free to call the BASIC subroutines pre and post operation and call back in to the MVFIO system to do the actual operation (which will this time not fire the COS routine)."}),"\n",(0,i.jsx)(n.h3,{id:"triggeroperations",children:"%TriggerOperations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %TriggerOperations As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"This integer flag stores a number of bits indicating which, if any MVFIO operations must operate trigger subroutines. If the bit corresponding to the operation at hand is set, and the trigger processing is not currently executing then a specific COS routine entry point will be be queued up by the MVFIO C routine and the processing function will DISP to it."}),"\n",(0,i.jsx)(n.h3,{id:"firetriggers",children:"%FireTriggers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %FireTriggers As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"This boolean flag indicates that the MVFIO routines must process trigger calls when it is set to TRUE. The trigger routine itself will clear this flag to call back in to MVFIO to process the operation then set it back to TRUE when the operation is complete. This allows Pre and Post operations to exist for an MVFIO function without interfering with the indexing routine calls."}),"\n",(0,i.jsx)(n.h3,{id:"casepreservename",children:"%CasePreserveName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %CasePreserveName As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Case preserving form of file name"}),"\n",(0,i.jsx)(n.h3,{id:"iotable",children:"%IOTable"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %IOTable As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"IO table used for reading or writing to the files in this directory"}),"\n",(0,i.jsx)(n.h3,{id:"classnamespace",children:"%ClassNamespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %ClassNamespace As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Namespace for Class"}),"\n",(0,i.jsx)(n.h3,{id:"sectionname",children:"%SectionName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property %SectionName As %String;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Section Name when not the default data section"}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"dump",children:"Dump"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method Dump() As %Status\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unlockall",children:"UnlockAll"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method UnlockAll() As %Status\n"})}),"\n",(0,i.jsx)(n.h3,{id:"close",children:"Close"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method Close() As %Status\n"})}),"\n",(0,i.jsx)(n.h3,{id:"onclose",children:"%OnClose"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method %OnClose() As %Status\n"})})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(96540);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);