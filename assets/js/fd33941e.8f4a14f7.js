"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[73598],{45442:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>l,default:()=>c,frontMatter:()=>n,toc:()=>o});var i=t(74848),r=t(28453);const n={pagination_prev:null,pagination_next:null},l="SYS.ArchiveManager",o=[{value:"Methods",id:"methods",level:2},{value:"ZFFlags",id:"zfflags",level:3},{value:"PutFile",id:"putfile",level:3},{value:"GetFile",id:"getfile",level:3},{value:"DeleteFile",id:"deletefile",level:3},{value:"CollectNonMirrorFilesInfo",id:"collectnonmirrorfilesinfo",level:3},{value:"CollectMirrorFilesInfo",id:"collectmirrorfilesinfo",level:3},{value:"FileListExecute",id:"filelistexecute",level:3},{value:"FileListFetch",id:"filelistfetch",level:3},{value:"FileListClose",id:"filelistclose",level:3}];function a(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"sysarchivemanager",children:"SYS.ArchiveManager"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Class SYS.ArchiveManager Extends %RegisteredObject\n"})}),"\n",(0,i.jsx)(s.p,{children:"Managing Archive"}),"\n",(0,i.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(s.h3,{id:"zfflags",children:"ZFFlags"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ZFFlags(Verbose As %Boolean) As %String [ Internal ]\n"})}),"\n",(0,i.jsx)(s.h3,{id:"putfile",children:"PutFile"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod PutFile(FilePath As %SysPath, ArchiveName As %String, ByRef ArchiveSpec As %String, Move As %Boolean = 0, Verbose As %Boolean = 0) As %Status\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Put a file given by 'FilePath' on a given archive destination.",(0,i.jsx)(s.br,{}),"\nParameters:",(0,i.jsx)(s.br,{}),"\nFilePath: the path of the source file",(0,i.jsx)(s.br,{}),"\nArchiveName: the name of the archive destination defined in CPF file",(0,i.jsx)(s.br,{}),"\nArchiveSpec (input/output): the specification of the archive destination, i.e., a comma-delimited string of the type and the location of the archive destination.",(0,i.jsx)(s.br,{}),"\nMove: whether to remove the source file. Default is No.",(0,i.jsx)(s.br,{}),"\nVerbose: whether to display output messages from the command. Default is No."]}),"\n",(0,i.jsx)(s.h3,{id:"getfile",children:"GetFile"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetFile(FilePath As %SysPath, ArchiveSpec As %String, Move As %Boolean = 0, Verbose As %Boolean = 0) As %Status\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Copy a file to 'FilePath' from a given archive source.",(0,i.jsx)(s.br,{}),"\nParameters:",(0,i.jsx)(s.br,{}),"\nFilePath: the path of the destination file",(0,i.jsx)(s.br,{}),"\nArchiveSpec: the specification of the archive source, i.e., a comma-delimited string of the type and the location of the archive source.",(0,i.jsx)(s.br,{}),"\nMove: whether to remove the file from the archive source. Default is No.",(0,i.jsx)(s.br,{}),"\nVerbose: whether to display output messages from the command. Default is No."]}),"\n",(0,i.jsx)(s.h3,{id:"deletefile",children:"DeleteFile"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DeleteFile(FileName As %SysPath, ArchiveSpec As %String, Verbose As %Boolean = 0) As %Status\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Delete a file from a given archive target.",(0,i.jsx)(s.br,{}),"\nParameters:",(0,i.jsx)(s.br,{}),"\nFileName: the name of the file to delete (case sensitive)",(0,i.jsx)(s.br,{}),"\nArchiveSpec: the specification of the archive target where the file is located, i.e., a comma-delimited string of the type and the location of the archive target.",(0,i.jsx)(s.br,{}),"\nVerbose: whether to display output messages from the command. Default is No."]}),"\n",(0,i.jsx)(s.h3,{id:"collectnonmirrorfilesinfo",children:"CollectNonMirrorFilesInfo"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CollectNonMirrorFilesInfo(QTI As %Integer, ArchiveType As %String = "", Location As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,i.jsxs)(s.p,{children:['Parse and store info from ^%SYS("JOURNAL","ARCHIVED","-") in an array of %List strings.',(0,i.jsx)(s.br,{}),"\nQTI: the index # for $$$ISCQUERYTEMP"]}),"\n",(0,i.jsx)(s.h3,{id:"collectmirrorfilesinfo",children:"CollectMirrorFilesInfo"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CollectMirrorFilesInfo(QTI As %Integer, MirrorName As %String, ArchiveType As %String = "", Location As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,i.jsxs)(s.p,{children:['Parse and store info from ^%SYS("JOURNAL","ARCHIVED",MirrorName) in an array of %List strings.',(0,i.jsx)(s.br,{}),"\nQTI: the index # for $$$ISCQUERYTEMP"]}),"\n",(0,i.jsx)(s.h3,{id:"filelistexecute",children:"FileListExecute"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod FileListExecute(ByRef qHandle As %Binary, FileType As %String = "", MirrorName As %String = "", ArchiveType As %String = "", Location As %String = "") As %Status\n'})}),"\n",(0,i.jsx)(s.p,{children:"List archived files."}),"\n",(0,i.jsxs)(s.p,{children:["Parameters:",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"FileType"})," -",(0,i.jsx)(s.br,{}),'\n"" - All record match',(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"MirrorName"}),' - Name of the mirror set or "" for non-mirrored journal file.',(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"FilePath"})," - path of the file before archived",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"ArchiveType"})," - type of the archive target",(0,i.jsx)(s.br,{}),"\ns3 - AWS S3",(0,i.jsx)(s.br,{}),"\nrsync - rsync (Unix) or robocopy (Windows)",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Location"})," - where the archived file is, e.g., s3://myBucket (s3), host:/dir (rsync) or \\\\server\\dir\\ (robocopy)"]}),"\n",(0,i.jsx)(s.h3,{id:"filelistfetch",children:"FileListFetch"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod FileListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = ListExecute ]\n"})}),"\n",(0,i.jsx)(s.h3,{id:"filelistclose",children:"FileListClose"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod FileListClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = ListExecute ]\n"})})]})}function c(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>o});var i=t(96540);const r={},n=i.createContext(r);function l(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);