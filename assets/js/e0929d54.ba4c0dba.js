"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[14517],{30562:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>a,default:()=>o,frontMatter:()=>l,toc:()=>i});var n=s(74848),r=s(28453);const l={pagination_prev:null,pagination_next:null},a="%SYS.Journal.Transaction",i=[{value:"Parameters",id:"parameters",level:2},{value:"READONLY",id:"readonly",level:3},{value:"Properties",id:"properties",level:2},{value:"File",id:"file",level:3},{value:"ProcessID",id:"processid",level:3},{value:"TStart",id:"tstart",level:3},{value:"TStartAddress",id:"tstartaddress",level:3},{value:"TerminationType",id:"terminationtype",level:3},{value:"Records",id:"records",level:3},{value:"Methods",id:"methods",level:2},{value:"%LoadData",id:"loaddata",level:3},{value:"RetrieveSelectedValues",id:"retrieveselectedvalues",level:3},{value:"GetVirtualLocation",id:"getvirtuallocation",level:3},{value:"GetOpenTx",id:"getopentx",level:3},{value:"GetTxJrnTime",id:"gettxjrntime",level:3},{value:"GetTxJrnSize",id:"gettxjrnsize",level:3},{value:"ListExecute",id:"listexecute",level:3},{value:"ListFetch",id:"listfetch",level:3},{value:"ListClose",id:"listclose",level:3}];function c(e){const t={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"sysjournaltransaction",children:"%SYS.Journal.Transaction"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Class %SYS.Journal.Transaction Extends %Persistent [ StorageStrategy = JournalFileStorage, System = 4 ]\n"})}),"\n",(0,n.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(t.h3,{id:"readonly",children:"READONLY"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter READONLY = 1;\n"})}),"\n",(0,n.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(t.h3,{id:"file",children:"File"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property File As %SYS.Journal.File;\n"})}),"\n",(0,n.jsx)(t.h3,{id:"processid",children:"ProcessID"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property ProcessID As %Integer;\n"})}),"\n",(0,n.jsx)(t.h3,{id:"tstart",children:"TStart"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property TStart As %SYS.Journal.Record;\n"})}),"\n",(0,n.jsx)(t.h3,{id:"tstartaddress",children:"TStartAddress"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property TStartAddress As %Integer;\n"})}),"\n",(0,n.jsx)(t.h3,{id:"terminationtype",children:"TerminationType"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property TerminationType As %String;\n"})}),"\n",(0,n.jsx)(t.h3,{id:"records",children:"Records"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Records As list Of %SYS.Journal.Record;\n"})}),"\n",(0,n.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(t.h3,{id:"loaddata",children:"%LoadData"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %LoadData(id As %String) As %Status [ Private, ProcedureBlock = 1 ]\n"})}),"\n",(0,n.jsx)(t.h3,{id:"retrieveselectedvalues",children:"RetrieveSelectedValues"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method RetrieveSelectedValues(ctpRefs As %Integer, ctpValues As %Integer) As %Status\n"})}),"\n",(0,n.jsx)(t.h3,{id:"getvirtuallocation",children:"GetVirtualLocation"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetVirtualLocation() As %String\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Returns the virtual location of the TSTART of current transaction, in the form of JournalFileName,JournalFileOffset,JournalFileCount.",(0,n.jsx)(t.br,{}),"\nNote that the TSTART may be physically located in the next file after journal switches."]}),"\n",(0,n.jsx)(t.h3,{id:"getopentx",children:"GetOpenTx"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetOpenTx(Job As %Integer, ByRef TxInfo As %String) As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Returns the job number of successive processes with open transactions."}),"\n",(0,n.jsx)(t.h3,{id:"gettxjrntime",children:"GetTxJrnTime"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetTxJrnTime(tjrncnt As %Integer, tjrnoff As %Integer, ByRef timestamp As %Integer) As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Returns the timestamp on the txstart record at journal file index and journal file offset."}),"\n",(0,n.jsx)(t.h3,{id:"gettxjrnsize",children:"GetTxJrnSize"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetTxJrnSize(tjrncnt As %Integer, tjrnoff As %Integer, ByRef tjrnbytes As %Integer) As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Returns the number of bytes from starting journal file offset to current journal file offset."}),"\n",(0,n.jsx)(t.h3,{id:"listexecute",children:"ListExecute"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod ListExecute(ByRef qHandle As %Binary, SizeMin As %Integer) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Query to get transaction metrics"}),"\n",(0,n.jsx)(t.p,{children:"SizeMin: limit transactions listed to those whose size exceeds this value."}),"\n",(0,n.jsx)(t.p,{children:"JobNum: job number in pidtab"}),"\n",(0,n.jsx)(t.p,{children:"Pid: job process id"}),"\n",(0,n.jsx)(t.p,{children:"JournalBytes: number of bytes from starting journal file offset to current journal file offset."}),"\n",(0,n.jsx)(t.p,{children:"JournalFile: full path name of starting journal file."}),"\n",(0,n.jsx)(t.p,{children:"JournalRef: starting journal file refcount."}),"\n",(0,n.jsx)(t.p,{children:"StartOffset: byte offset of TStart record in starting journal file."}),"\n",(0,n.jsx)(t.p,{children:"StartTime: timestamp of the TStart record in $Horolog format"}),"\n",(0,n.jsx)(t.h3,{id:"listfetch",children:"ListFetch"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod ListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.h3,{id:"listclose",children:"ListClose"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod ListClose(ByRef qHandle As %Binary) As %Status [ Internal ]\n"})})]})}function o(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>i});var n=s(96540);const r={},l=n.createContext(r);function a(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);