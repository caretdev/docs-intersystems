"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[6498],{26807:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>c,default:()=>d,frontMatter:()=>n,toc:()=>l});var a=s(74848),r=s(28453);const n={pagination_prev:null,pagination_next:null},c="%SQL.FDW.Java",l=[{value:"Parameters",id:"parameters",level:2},{value:"JAVACLASS;",id:"javaclass",level:3},{value:"Properties",id:"properties",level:2},{value:"Gateway",id:"gateway",level:3},{value:"ReaderObject",id:"readerobject",level:3},{value:"Ptr",id:"ptr",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnNew",id:"onnew",level:3},{value:"%Next",id:"next",level:3},{value:"Reset",id:"reset",level:3},{value:"Prepare",id:"prepare",level:3},{value:"Execute",id:"execute",level:3},{value:"CreateReaderObject",id:"createreaderobject",level:3},{value:"GetRequestObject",id:"getrequestobject",level:3},{value:"GetSQLMetaData",id:"getsqlmetadata",level:3}];function i(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"sqlfdwjava",children:"%SQL.FDW.Java"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Class %SQL.FDW.Java Extends %SQL.FDW.Abstract [ System = 4 ]\n"})}),"\n",(0,a.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(t.h3,{id:"javaclass",children:"JAVACLASS;"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter JAVACLASS;\n"})}),"\n",(0,a.jsx)(t.p,{children:"Class in the Foreign Table package"}),"\n",(0,a.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsx)(t.h3,{id:"gateway",children:"Gateway"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Property Gateway As %External.Gateway;\n"})}),"\n",(0,a.jsx)(t.p,{children:"Object representing instance of a specific connection to the external language server"}),"\n",(0,a.jsx)(t.h3,{id:"readerobject",children:"ReaderObject"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Property ReaderObject As %Net.Remote.Object;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"ptr",children:"Ptr"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Property Ptr As %Integer;\n"})}),"\n",(0,a.jsx)(t.p,{children:"Left in for Fetch(), which isn't how we codegen FT TVFs anyway"}),"\n",(0,a.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(t.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnNew() As %Status\n"})}),"\n",(0,a.jsx)(t.h3,{id:"next",children:"%Next"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %Next(ByRef sc As %Library.Status = {$$$OK}) As %Library.Integer\n"})}),"\n",(0,a.jsx)(t.p,{children:"Advance the result set cursor to the next row. Returns 0 if the cursor is at the end of the result set.. An optional argument contains a %Library.Status value on return. This %Status value indicates success or failure of the %Next call. %SQLCODE is also set by %Next."}),"\n",(0,a.jsx)(t.h3,{id:"reset",children:"Reset"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method Reset() As %Status\n"})}),"\n",(0,a.jsx)(t.h3,{id:"prepare",children:"Prepare"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'Method Prepare(Server As %String, FTClassName As %String, Query As %String, Parameters As %List = "") As %Status\n'})}),"\n",(0,a.jsx)(t.p,{children:"Prepare the query for execute; since this is a Java FDW, that means opening the java gateway connection and getting an object to execute with"}),"\n",(0,a.jsx)(t.h3,{id:"execute",children:"Execute"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'Method Execute(Parameters As %List = "") As %Status\n'})}),"\n",(0,a.jsx)(t.p,{children:"Execute the query. For Java FDWs, this blends with the Prepare()"}),"\n",(0,a.jsx)(t.h3,{id:"createreaderobject",children:"CreateReaderObject"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method CreateReaderObject(Server As %String, FTClassName As %String) As %Status\n"})}),"\n",(0,a.jsx)(t.p,{children:"Creates an object of the class containing the functionality needed to access an external source. For now, these will be Java objects (to read CSV/external DBs through JDBC). 1) Create request string, which is used by the external code to connect to the relevant external source. 2) Instantiate the object, store it in ReaderObject property Called by %SQL.FDW.Common:Execute()"}),"\n",(0,a.jsx)(t.h3,{id:"getrequestobject",children:"GetRequestObject"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method GetRequestObject(Server As %String, FTClassName As %String) As %DynamicObject\n"})}),"\n",(0,a.jsx)(t.p,{children:"Build and return request string used by Reader code for connecting to a database. For a file, Server host = abs. path to directory, Table = filename+extension, port & user & pass are all N/A"}),"\n",(0,a.jsx)(t.h3,{id:"getsqlmetadata",children:"GetSQLMetaData"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method GetSQLMetaData(Output metadata) As %Status\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>c,x:()=>l});var a=s(96540);const r={},n=a.createContext(r);function c(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);