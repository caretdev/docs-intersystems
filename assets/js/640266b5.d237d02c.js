"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[85771],{34005:(e,n,r)=>{r.r(n),r.d(n,{contentTitle:()=>o,default:()=>i,frontMatter:()=>l,toc:()=>t});var s=r(74848),a=r(28453);const l={pagination_prev:null,pagination_next:null},o="%SQL.Manager.ShowPlan",t=[{value:"Parameters",id:"parameters",level:2},{value:"DOMAIN",id:"domain",level:3},{value:"SECURITYRESOURCE",id:"securityresource",level:3},{value:"Methods",id:"methods",level:2},{value:"OnPage",id:"onpage",level:3},{value:"ShowPlan",id:"showplan",level:3},{value:"ShowPlanSQLError",id:"showplansqlerror",level:3},{value:"ShowPlanError",id:"showplanerror",level:3},{value:"fullErrorMsg",id:"fullerrormsg",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sqlmanagershowplan",children:"%SQL.Manager.ShowPlan"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Class %SQL.Manager.ShowPlan Extends %CSP.Util.AutoPage [ Not ProcedureBlock, System = 4 ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"SQL Manager Class to Show Query Plan"}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(n.h3,{id:"domain",children:"DOMAIN"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter DOMAIN = "%Utility";\n'})}),"\n",(0,s.jsx)(n.p,{children:"Default Localization Domain"}),"\n",(0,s.jsx)(n.h3,{id:"securityresource",children:"SECURITYRESOURCE"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter SECURITYRESOURCE = "%Development:USE";\n'})}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"onpage",children:"OnPage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod OnPage() As %Status\n"})}),"\n",(0,s.jsx)(n.h3,{id:"showplan",children:"ShowPlan"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod ShowPlan(querytext, ImportPackage = "", preparse, frozenplan As %Boolean = 0, selectmode = "Runtime", addDeclare = 0, schemaPath = "", stats = "", AltPlan = "", minStats = 0, nofplan = 0, silent = 1, verbose = 0, isbackground = 0, noRTPC = 0) As %String\n'})}),"\n",(0,s.jsx)(n.p,{children:'This method is called from %CSP.UI.SQL.ShowPlanPane to display HTML for show plan. "" is always returned.'}),"\n",(0,s.jsx)(n.h3,{id:"showplansqlerror",children:"ShowPlanSQLError"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod ShowPlanSQLError(sqlError)\n"})}),"\n",(0,s.jsx)(n.p,{children:"This method is called from several locations to process & display SQL Errors with proper formatting: - %SQL.Manager.ShowPlan.CLS - ShowPlan() - %SYS.PTools.SQLUtilities.CLS - PossiblePlansExecute() - PossiblePlansStatsExecute()"}),"\n",(0,s.jsx)(n.h3,{id:"showplanerror",children:"ShowPlanError"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod ShowPlanError(querytext, noPlanReasonTxt = "") As %String\n'})}),"\n",(0,s.jsx)(n.p,{children:'This method is called from %CSP.UI.Portal.Dialog.SQLStatementDetails to display HTML for sql text. "" is always returned. Plan itself cannot be shown because the frozen plan has an error. Or there is another reason the plan cannot be show and that reason is passed in via noPlanReasonTxt argument'}),"\n",(0,s.jsx)(n.h3,{id:"fullerrormsg",children:"fullErrorMsg"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod fullErrorMsg(errorMsg, error) As %String\n"})}),"\n",(0,s.jsx)(n.p,{children:"Process the 'errorMsg' and replace all references to <<<#>>> with $LG(error,#)"})]})}function i(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>t});var s=r(96540);const a={},l=s.createContext(a);function o(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);