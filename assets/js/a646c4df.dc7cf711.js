"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[19151],{20310:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>l,default:()=>d,frontMatter:()=>n,toc:()=>i});var r=s(74848),a=s(28453);const n={pagination_prev:null,pagination_next:null},l="%DeepSee.UI.MDXPDF",i=[{value:"Parameters",id:"parameters",level:2},{value:"DOMAIN",id:"domain",level:3},{value:"DEFAULTMODE",id:"defaultmode",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"ReportDefinition",id:"reportdefinition",level:3},{value:"ReportDisplay",id:"reportdisplay",level:3},{value:"Methods",id:"methods",level:2},{value:"Test",id:"test",level:3},{value:"%GetContext",id:"getcontext",level:3},{value:"GetTableData",id:"gettabledata",level:3},{value:"%WriteXMLForMDX",id:"writexmlformdx",level:3},{value:"%WriteXMLForPivot",id:"writexmlforpivot",level:3},{value:"%WriteXMLForListing",id:"writexmlforlisting",level:3},{value:"%WriteXMLForKPI",id:"writexmlforkpi",level:3},{value:"%ParseStyle",id:"parsestyle",level:3},{value:"%WriteXMLMessage",id:"writexmlmessage",level:3},{value:"%EscapeHTML",id:"escapehtml",level:3},{value:"%FormatNumber",id:"formatnumber",level:3},{value:"OnAfterCreateDisplay",id:"onaftercreatedisplay",level:3},{value:"%DrawCell",id:"drawcell",level:3},{value:"%DrawHeader",id:"drawheader",level:3},{value:"%ParseExpr",id:"parseexpr",level:3},{value:"%OnPreHTTP",id:"onprehttp",level:3},{value:"GetFilterText",id:"getfiltertext",level:3},{value:"OnPage",id:"onpage",level:3},{value:"%LoadFilePDFToStream",id:"loadfilepdftostream",level:3},{value:"%FetchNoncedParmData",id:"fetchnoncedparmdata",level:3}];function c(e){const t={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"deepseeuimdxpdf",children:"%DeepSee.UI.MDXPDF"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Class %DeepSee.UI.MDXPDF Extends %ZEN.Report.reportPage [ System = 4 ]\n"})}),"\n",(0,r.jsx)(t.p,{children:"Execute an MDX query and render it to PDF by using the Zen reports infrastructure. The encrypted query to process is passed in via the URL parameter MDX."}),"\n",(0,r.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(t.h3,{id:"domain",children:"DOMAIN"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter DOMAIN = "%DeepSee";\n'})}),"\n",(0,r.jsx)(t.h3,{id:"defaultmode",children:"DEFAULTMODE"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter DEFAULTMODE = "pdf";\n'})}),"\n",(0,r.jsx)(t.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,r.jsx)(t.h3,{id:"reportdefinition",children:"ReportDefinition"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'XData ReportDefinition [ XMLNamespace = "http://www.intersystems.com/zen/report/definition" ]\n'})}),"\n",(0,r.jsx)(t.p,{children:"XML that defines the contents of this report."}),"\n",(0,r.jsx)(t.h3,{id:"reportdisplay",children:"ReportDisplay"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'XData ReportDisplay [ XMLNamespace = "http://www.intersystems.com/zen/report/display" ]\n'})}),"\n",(0,r.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(t.h3,{id:"test",children:"Test"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Test(pMDX As %String) [ Internal ]\n"})}),"\n",(0,r.jsx)(t.h3,{id:"getcontext",children:"%GetContext"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetContext(Output pContext, Output pParms)\n"})}),"\n",(0,r.jsx)(t.p,{children:"Fill in the context array from the current URL parameters. Also fill in the parameter array used to resolve expression references in %ParseExpr."}),"\n",(0,r.jsx)(t.h3,{id:"gettabledata",children:"GetTableData"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetTableData()\n"})}),"\n",(0,r.jsx)(t.p,{children:"Get the data, as xml, for the current query."}),"\n",(0,r.jsx)(t.h3,{id:"writexmlformdx",children:"%WriteXMLForMDX"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %WriteXMLForMDX(ByRef pContext, ByRef pParms, pMDX As %String) As %Status\n"})}),"\n",(0,r.jsx)(t.p,{children:"Write out the contents of an MDX query in a way that can be consumed by a Zen report. pMDX is the query."}),"\n",(0,r.jsx)(t.h3,{id:"writexmlforpivot",children:"%WriteXMLForPivot"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %WriteXMLForPivot(ByRef pContext, ByRef pParms, pRS As %DeepSee.ResultSet, pCaption As %String = "") As %Status\n'})}),"\n",(0,r.jsx)(t.p,{children:"Write out result set as XML for PDF."}),"\n",(0,r.jsx)(t.h3,{id:"writexmlforlisting",children:"%WriteXMLForListing"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %WriteXMLForListing(ByRef pContext, ByRef pParms, pRS As %SQL.StatementResult, pCaption As %String = "", pListingFields As %List = "") As %Status\n'})}),"\n",(0,r.jsx)(t.p,{children:"Write out listing results as XML for PDF"}),"\n",(0,r.jsx)(t.h3,{id:"writexmlforkpi",children:"%WriteXMLForKPI"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %WriteXMLForKPI(ByRef pContext, ByRef pParms, pKPI As %String) As %Status\n"})}),"\n",(0,r.jsx)(t.p,{children:"Write out KPI results as XML for PDF."}),"\n",(0,r.jsx)(t.h3,{id:"parsestyle",children:"%ParseStyle"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %ParseStyle(pStyle As %String, Output pCSS As %String)\n"})}),"\n",(0,r.jsx)(t.p,{children:"Parse a CSS style directive."}),"\n",(0,r.jsx)(t.h3,{id:"writexmlmessage",children:"%WriteXMLMessage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %WriteXMLMessage(pTitle As %String, pMessage As %String)\n"})}),"\n",(0,r.jsx)(t.p,{children:"Create a simplified XML report for displaying an error message."}),"\n",(0,r.jsx)(t.h3,{id:"escapehtml",children:"%EscapeHTML"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %EscapeHTML(pValue As %String) As %String\n"})}),"\n",(0,r.jsx)(t.p,{children:"Format a string value for HTML output. This means escaping UNICODE characters."}),"\n",(0,r.jsx)(t.h3,{id:"formatnumber",children:"%FormatNumber"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %FormatNumber(pValue As %String, pFormat As %String = "") As %String [ CodeMode = expression ]\n'})}),"\n",(0,r.jsx)(t.p,{children:"Format a value for output."}),"\n",(0,r.jsx)(t.h3,{id:"onaftercreatedisplay",children:"OnAfterCreateDisplay"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod OnAfterCreateDisplay()\n"})}),"\n",(0,r.jsx)(t.p,{children:"Update the Report Display"}),"\n",(0,r.jsx)(t.h3,{id:"drawcell",children:"%DrawCell"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %DrawCell(pValue As %String, ByRef pAttrs) [ Internal ]\n"})}),"\n",(0,r.jsx)(t.p,{children:"Draw one cell within a table."}),"\n",(0,r.jsx)(t.h3,{id:"drawheader",children:"%DrawHeader"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %DrawHeader(pValue As %String, ByRef pAttrs) [ Internal ]\n"})}),"\n",(0,r.jsx)(t.p,{children:"Draw one header within a table."}),"\n",(0,r.jsx)(t.h3,{id:"parseexpr",children:"%ParseExpr"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %ParseExpr(pText As %String, ByRef pParms) As %String [ Internal ]\n"})}),"\n",(0,r.jsxs)(t.p,{children:['Take a string containing {@PROP.PARM} expressions and return a new string with the expressions replaced. E.g.: turns "hello {@date.7} into',(0,r.jsx)(t.br,{}),'\n"hello January 1, 2011"']}),"\n",(0,r.jsx)(t.h3,{id:"onprehttp",children:"%OnPreHTTP"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %OnPreHTTP() As %Boolean [ ServerOnly = 1 ]\n"})}),"\n",(0,r.jsx)(t.p,{children:"Test for additional resources."}),"\n",(0,r.jsx)(t.h3,{id:"getfiltertext",children:"GetFilterText"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetFilterText(ByRef pContainer As %ZEN.Report.Display.div, ByRef pParms As %String, ByRef pContext As %String, pIncludeFilterText As %Boolean = 0)\n"})}),"\n",(0,r.jsx)(t.h3,{id:"onpage",children:"OnPage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod OnPage() As %Status\n"})}),"\n",(0,r.jsx)(t.p,{children:"Render the contents of this ZEN report."}),"\n",(0,r.jsx)(t.h3,{id:"loadfilepdftostream",children:"%LoadFilePDFToStream"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'Method %LoadFilePDFToStream(pFileRoot = "", ByRef pTempFiles) As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(t.p,{children:"Directly load a pdf file from the OS and stream it into the content of this window."}),"\n",(0,r.jsx)(t.h3,{id:"fetchnoncedparmdata",children:"%FetchNoncedParmData"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %FetchNoncedParmData(pDataLabel As %String, pDefault As %String = "", Output pStatus As %Status) As %String\n'})}),"\n",(0,r.jsx)(t.p,{children:"This provides a means of fetching a nonced value from the key provided in an incoming request parameter. The pDataLabel is the named reference to the URL parameter which is expectd to be available in the available %request data. Once fetched from the nonce global, the value is cached locally for continued availability via this method using the same nonce key in the %request data."})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>i});var r=s(96540);const a={},n=r.createContext(a);function l(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);