"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[81617],{96257:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>l,default:()=>o,frontMatter:()=>r,toc:()=>a});var n=t(74848),i=t(28453);const r={pagination_prev:null,pagination_next:null},l="%XML.Exchange",a=[{value:"Methods",id:"methods",level:2},{value:"ExportAllDir",id:"exportalldir",level:3},{value:"ExportTableDir",id:"exporttabledir",level:3},{value:"ExportDir",id:"exportdir",level:3},{value:"Export",id:"export",level:3},{value:"LoadDir",id:"loaddir",level:3},{value:"Load",id:"load",level:3},{value:"GetContentGUIDs",id:"getcontentguids",level:3},{value:"GetReferences",id:"getreferences",level:3},{value:"normalizeItems",id:"normalizeitems",level:3},{value:"exportItems",id:"exportitems",level:3},{value:"GetPath",id:"getpath",level:3},{value:"GetName",id:"getname",level:3},{value:"GetDescription",id:"getdescription",level:3},{value:"AssignGUIDs",id:"assignguids",level:3},{value:"CheckGUIDs",id:"checkguids",level:3},{value:"initQualifier",id:"initqualifier",level:3},{value:"ShowQualifiers",id:"showqualifiers",level:3},{value:"qualifierParse",id:"qualifierparse",level:3}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"xmlexchange",children:"%XML.Exchange"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class %XML.Exchange Extends %RegisteredObject [ Abstract, System = 4 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"The %XML.Exchange class provides an interface for managing XML representations of objects."}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"exportalldir",children:"ExportAllDir"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ExportAllDir(dir As %String = "", qspec As %String = "", ByRef errorlog As %String, Charset As %String = "", ByRef exported As %GlobalCharacterStream = {##class(%GlobalCharacterStream).%New()}) As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Export all Exchange Items from the system to a directory."}),"\n",(0,n.jsx)(s.h3,{id:"exporttabledir",children:"ExportTableDir"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ExportTableDir(class As %String = "", dir As %String = "", qspec As %String = "", ByRef errorlog As %String, Charset As %String = "", ByRef exported As %GlobalCharacterStream = {##class(%GlobalCharacterStream).%New()}) As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Export all Exchange Items from a given table to a directory."}),"\n",(0,n.jsx)(s.h3,{id:"exportdir",children:"ExportDir"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ExportDir(items As %String = "", dir As %String = "", qspec As %String = "", ByRef errorlog As %String, Charset As %String = "", ByRef exported As %GlobalCharacterStream = {##class(%GlobalCharacterStream).%New()}, header As %Boolean = 1) As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Export Exchange Items to a directory."}),"\n",(0,n.jsx)(s.p,{children:"The directory structure created is based on the type of Exchange Items being exported. The file names used can be controlled by the /name qualifier."}),"\n",(0,n.jsx)(s.p,{children:'Each of the items must be of a type that extends the %XML.Exchange.Adaptor class. If exporting multiple Exchange Items pass the items("oid")="" as an array.'}),"\n",(0,n.jsx)(s.h3,{id:"export",children:"Export"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Export(items As %String = "", ByRef filename As %String = "", qspec As %String = "", ByRef errorlog As %String, Charset As %String = "") As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Export Exchange Items to an XML file"}),"\n",(0,n.jsx)(s.p,{children:'Each of the items must be of a type that extends the %XML.Exchange.Adaptor class: If exporting multiple Exchange Items pass the items("oid")="" as an array.'}),"\n",(0,n.jsx)(s.p,{children:"If the output filename is empty, matching Exchange Items will be exported to the current device."}),"\n",(0,n.jsx)(s.h3,{id:"loaddir",children:"LoadDir"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod LoadDir(dir As %String = "", qspec As %String = "", ByRef errorlog As %String, recurse As %Boolean = 1, ByRef loaded As %GlobalCharacterStream = {##class(%GlobalCharacterStream).%New()}, listonly As %Boolean = 0, ByRef selectedlist As %String, header As %Boolean = 1) As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Load all Exchange Items from XML files in a directory."}),"\n",(0,n.jsx)(s.h3,{id:"load",children:"Load"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Load(ByRef filename As %String = "", qspec As %String = "", ByRef errorlog As %String, ByRef loaded As %GlobalCharacterStream = {##class(%GlobalCharacterStream).%New()}, listonly As %Boolean, ByRef selecteditems As %String, displayname As %String, header As %Boolean = 1, charset As %String = "") As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Load a file from disk."}),"\n",(0,n.jsxs)(s.p,{children:["Load Exchange Items from the file file. Returns an stream of Exchange Items it loaded in loaded, You may give it a list of files to load via a single subscripted array. If you pass listonly as true then it will not load anything but just list the Exchange Items that exist in the files that you supply it.",(0,n.jsx)(s.br,{}),"\nIf selecteditems is defined then this will contain a single subscripted array of items to load. It will only load items that are in this list from the file/s provided, so this provides a way to limit which items get loaded.",(0,n.jsx)(s.br,{}),"\nqspec is a list of qualifiers which can be displayed with 'Do ##class(%XML.Exchange).ShowQualifiers()'"]}),"\n",(0,n.jsx)(s.h3,{id:"getcontentguids",children:"GetContentGUIDs"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetContentGUIDs(file As %String, obj As %RegisteredObject) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Remove contents from the list of unknown GUIDs."}),"\n",(0,n.jsx)(s.h3,{id:"getreferences",children:"GetReferences"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetReferences(Obj As %RegisteredObject, ByRef references As %String, qstruct As %String, ReferenceDepth As %Numeric, ByRef ReferencesLimited As %Boolean = 0) As %Status [ Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Takes an object referece so that it can support serial objects."}),"\n",(0,n.jsx)(s.h3,{id:"normalizeitems",children:"normalizeItems"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod normalizeItems(list As %String, ByRef items As %String) As %Status [ Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Oids potentially contain any character. Therefore no delimited strings are supported."}),"\n",(0,n.jsx)(s.h3,{id:"exportitems",children:"exportItems"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod exportItems(filename As %String, ByRef qspec As %String, ByRef items As %String, Charset As %String) As %Status [ Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:'Internal method to export a list of items to a file. Items to be exported may be preloaded into the "selected" list.'}),"\n",(0,n.jsx)(s.h3,{id:"getpath",children:"GetPath"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GetPath(Root As %String, Oid As %List, qspec As %String = "") As %String\n'})}),"\n",(0,n.jsx)(s.p,{children:"Get full normalised path to the external file that would be exported to given a root directory. Qualifiers can be used to indicate the naming convention to be used."}),"\n",(0,n.jsx)(s.h3,{id:"getname",children:"GetName"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GetName(Oid As %List = "", Guid As %String = "", ByRef qstruct) As %String [ Private ]\n'})}),"\n",(0,n.jsx)(s.p,{children:"Returns the filename to be used for an item based on the selected qualifiers."}),"\n",(0,n.jsx)(s.h3,{id:"getdescription",children:"GetDescription"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetDescription(Oid As %String) As %String\n"})}),"\n",(0,n.jsx)(s.p,{children:"Returns a description to be used for the element. This value is based on the objects XMLExchangeName method."}),"\n",(0,n.jsx)(s.h3,{id:"assignguids",children:"AssignGUIDs"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AssignGUIDs() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"This method will assign GUIDs to all Exchange Items of the system without a GUID."}),"\n",(0,n.jsx)(s.h3,{id:"checkguids",children:"CheckGUIDs"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CheckGUIDs(ApplyChange As %Boolean = 0) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["This method looks for inconsistencies in the GUID allocation. It may optionally correct problems if possible.",(0,n.jsx)(s.br,{}),"\nThe identifiable issues and their resolutions are:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["GUID entry missing OID cross reference\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"If the object exists then add the OID cross reference"}),"\n",(0,n.jsx)(s.li,{children:"If the object does not exist then remove the GUID entry"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["GUID entry conflicts with OID cross reference\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Manual intervention required"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["GUID entry for missing object\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Remove both the GUID entry and the OID cross reference"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["GUID entry for missing class\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Remove both the GUID entry and the OID cross reference"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["OID cross reference missing GUID entry\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"If the object exists add the GUID entry"}),"\n",(0,n.jsx)(s.li,{children:"If the object does not exist remove the OID cross reference"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["OID cross reference conflicts with GUID entry\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Manual intervention required"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"The method will output results as the check proceeds and show a tally when the check is complete."}),"\n",(0,n.jsx)(s.h3,{id:"initqualifier",children:"initQualifier"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod initQualifier(group As %String, ByRef qtable As %String) [ Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Initialise Qualifier details"}),"\n",(0,n.jsx)(s.h3,{id:"showqualifiers",children:"ShowQualifiers"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ShowQualifiers(group As %String = "XML.Exchange")\n'})}),"\n",(0,n.jsx)(s.p,{children:"Display the list of qualifiers defined in the system."}),"\n",(0,n.jsx)(s.h3,{id:"qualifierparse",children:"qualifierParse"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod qualifierParse(group As %String, qspec As %String = "", ByRef qstruct As %String) [ Private ]\n'})}),"\n",(0,n.jsx)(s.p,{children:"Parse Qualifier details"})]})}function o(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>a});var n=t(96540);const i={},r=n.createContext(i);function l(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);