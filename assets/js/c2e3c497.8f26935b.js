"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[93201],{9865:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>o,default:()=>h,frontMatter:()=>a,toc:()=>c});var t=n(74848),r=n(28453);const a={pagination_prev:null,pagination_next:null},o="%OAuth2.Server.Generate",c=[{value:"Methods",id:"methods",level:2},{value:"IsJWT",id:"isjwt",level:3},{value:"GenerateAccessToken",id:"generateaccesstoken",level:3},{value:"OnRefreshAccessToken",id:"onrefreshaccesstoken",level:3}];function i(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"oauth2servergenerate",children:"%OAuth2.Server.Generate"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class %OAuth2.Server.Generate Extends %RegisteredObject [ System = 4 ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The %OAuth2.Server.Generate is the default GenerateTokenClass which is included with the server. The default class will generate a random string as the opaque access token.",(0,t.jsx)(s.br,{}),"\nThe GenerateTokenClass is specified in the Authorization Server Configuration. It must contain a GenerateAccessToken method will be used to generate an access token based on the array of properties that is returned by the ValidateUser method."]}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"isjwt",children:"IsJWT"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsJWT() As %Boolean\n"})}),"\n",(0,t.jsx)(s.p,{children:"The IsJWT method returns true if the GenerateAccessToken method returns a JWT. IsJWT is used to determine inclusion of algorithms for access token in server metadata."}),"\n",(0,t.jsx)(s.h3,{id:"generateaccesstoken",children:"GenerateAccessToken"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GenerateAccessToken(properties As %OAuth2.Server.Properties, Output sc As %Status) As %String\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The GenerateAccessToken method returns an access token. The access token may be based on the properties argument. In addition values for claims to be added to the JSON response object may be returned in the properties.ResponseProperties array.",(0,t.jsx)(s.br,{}),"\nHowever the method in this default class just returns an opaque random string."]}),"\n",(0,t.jsx)(s.h3,{id:"onrefreshaccesstoken",children:"OnRefreshAccessToken"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnRefreshAccessToken(properties As %OAuth2.Server.Properties) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"The OnRefreshAccessToken method will be called when a new access token is granted based on a refresh token. If this method returns an error status, the refresh token request will fail."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>c});var t=n(96540);const r={},a=t.createContext(r);function o(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);