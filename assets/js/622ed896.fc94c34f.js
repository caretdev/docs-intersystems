"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[34573],{85598:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>a,default:()=>o,frontMatter:()=>i,toc:()=>c});var t=s(74848),r=s(28453);const i={pagination_prev:null,pagination_next:null},a="%DeepSee.SQL.Parser",c=[{value:"Properties",id:"properties",level:2},{value:"%Input",id:"input",level:3},{value:"%TokenList",id:"tokenlist",level:3},{value:"%Position",id:"position",level:3},{value:"%InputPart",id:"inputpart",level:3},{value:"%CurrentToken",id:"currenttoken",level:3},{value:"%LastToken",id:"lasttoken",level:3},{value:"state",id:"state",level:3},{value:"stack",id:"stack",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnNew",id:"onnew",level:3},{value:"%InitializeState",id:"initializestate",level:3},{value:"%SetInput",id:"setinput",level:3},{value:"%Tokenize",id:"tokenize",level:3},{value:"%CheckDollar",id:"checkdollar",level:3},{value:"%IsWhiteSpace",id:"iswhitespace",level:3},{value:"%IsSeparatorChar",id:"isseparatorchar",level:3},{value:"%IsOperatorChar",id:"isoperatorchar",level:3},{value:"%IsOperatorToken",id:"isoperatortoken",level:3},{value:"%IsFunction",id:"isfunction",level:3},{value:"%IsScalarFunction",id:"isscalarfunction",level:3},{value:"%IsAggFunction",id:"isaggfunction",level:3},{value:"%IsCastType",id:"iscasttype",level:3},{value:"%IsDSMacro",id:"isdsmacro",level:3},{value:"%IsUserFunction",id:"isuserfunction",level:3},{value:"%PushCurrentToken",id:"pushcurrenttoken",level:3},{value:"%PushState",id:"pushstate",level:3},{value:"%PopState",id:"popstate",level:3},{value:"%ParseSelect",id:"parseselect",level:3},{value:"%GetTokenList",id:"gettokenlist",level:3},{value:"%PrintInput",id:"printinput",level:3},{value:"%PrintTokenList",id:"printtokenlist",level:3},{value:"%ProcessSelectItem",id:"processselectitem",level:3},{value:"%ProcessDsTEXT",id:"processdstext",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deepseesqlparser",children:"%DeepSee.SQL.Parser"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Class %DeepSee.SQL.Parser Extends %RegisteredObject\n"})}),"\n",(0,t.jsx)(n.p,{children:"Include %qaqplex"}),"\n",(0,t.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(n.h3,{id:"input",children:"%Input"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property %Input As %String [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(n.h3,{id:"tokenlist",children:"%TokenList"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property %TokenList As %DynamicArray;\n"})}),"\n",(0,t.jsx)(n.p,{children:"The ordered list of complete tokens"}),"\n",(0,t.jsx)(n.h3,{id:"position",children:"%Position"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property %Position As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,t.jsx)(n.p,{children:"Current position in the string"}),"\n",(0,t.jsx)(n.h3,{id:"inputpart",children:"%InputPart"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property %InputPart As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,t.jsx)(n.p,{children:"Current part of the input being processed"}),"\n",(0,t.jsx)(n.h3,{id:"currenttoken",children:"%CurrentToken"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property %CurrentToken As %String;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Accumulator for the current token"}),"\n",(0,t.jsx)(n.h3,{id:"lasttoken",children:"%LastToken"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property %LastToken As %String;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Container for the last complete token. This is used for looking back when there are multiple tokens in a succession."}),"\n",(0,t.jsx)(n.h3,{id:"state",children:"state"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property state As %DynamicObject;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Any state information can be packed into this object, which can be pushed or popped from a stack if needed."}),"\n",(0,t.jsx)(n.h3,{id:"stack",children:"stack"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property stack As %DynamicArray;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Stack for changing state"}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %OnNew(pInput As %String) As %Status\n"})}),"\n",(0,t.jsx)(n.p,{children:"Optionally set the input as the object is created."}),"\n",(0,t.jsx)(n.h3,{id:"initializestate",children:"%InitializeState"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %InitializeState() As %Status\n"})}),"\n",(0,t.jsx)(n.p,{children:"Initialize the state object."}),"\n",(0,t.jsx)(n.h3,{id:"setinput",children:"%SetInput"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %SetInput(pInput) As %Status\n"})}),"\n",(0,t.jsx)(n.p,{children:"Set the current input to be analyzed."}),"\n",(0,t.jsx)(n.h3,{id:"tokenize",children:"%Tokenize"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %Tokenize() As %Status\n"})}),"\n",(0,t.jsx)(n.p,{children:"Walk through the string per character and tokenize."}),"\n",(0,t.jsx)(n.h3,{id:"checkdollar",children:"%CheckDollar"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %CheckDollar(pString As %String = "") As %Integer [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Investigate the current position for $ tokens. Returns the number of consecutive dollar sign characters beginning at the current position"}),"\n",(0,t.jsx)(n.h3,{id:"iswhitespace",children:"%IsWhiteSpace"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsWhiteSpace(pChar As %String = "") As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for white space character"}),"\n",(0,t.jsx)(n.h3,{id:"isseparatorchar",children:"%IsSeparatorChar"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsSeparatorChar(pChar As %String = "", pPosition As %Integer = {..%Position}) As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for a characer separating two different terms."}),"\n",(0,t.jsx)(n.h3,{id:"isoperatorchar",children:"%IsOperatorChar"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsOperatorChar(pChar As %String = "", Output pOpLength) As %Boolean\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for a single-character operator"}),"\n",(0,t.jsx)(n.h3,{id:"isoperatortoken",children:"%IsOperatorToken"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsOperatorToken(pToken As %String = "") As %Boolean\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for an opertor token of arbitrary length"}),"\n",(0,t.jsx)(n.h3,{id:"isfunction",children:"%IsFunction"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsFunction(pToken As %String = "", Output pFunctionArity) As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for a supported function"}),"\n",(0,t.jsx)(n.h3,{id:"isscalarfunction",children:"%IsScalarFunction"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsScalarFunction(pToken As %String = "", Output pFunctionArity) As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for a supported scalar function"}),"\n",(0,t.jsx)(n.h3,{id:"isaggfunction",children:"%IsAggFunction"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsAggFunction(pToken As %String = "", Output pFunctionArity) As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"iscasttype",children:"%IsCastType"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsCastType(pToken As %String = "", pFunctionArity) As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Type arguments in the CAST function can look like"}),"\n",(0,t.jsx)(n.h3,{id:"isdsmacro",children:"%IsDSMacro"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %IsDSMacro(pToken As %String = "", pFunctionArity) As %Boolean [ Private ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Test for one of the DeepSee-specific macro functions"}),"\n",(0,t.jsx)(n.h3,{id:"isuserfunction",children:"%IsUserFunction"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %IsUserFunction(pFunction, pLastToken = {..%LastToken}) As %Boolean\n"})}),"\n",(0,t.jsx)(n.h3,{id:"pushcurrenttoken",children:"%PushCurrentToken"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %PushCurrentToken() As %Status [ Private ]\n"})}),"\n",(0,t.jsx)(n.h3,{id:"pushstate",children:"%PushState"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %PushState() As %Status [ Private ]\n"})}),"\n",(0,t.jsx)(n.p,{children:"Push the current parser state to the stack and initialize a new state object"}),"\n",(0,t.jsx)(n.h3,{id:"popstate",children:"%PopState"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %PopState() As %Status [ Private ]\n"})}),"\n",(0,t.jsx)(n.p,{children:"Restore the last state from the top of the stack."}),"\n",(0,t.jsx)(n.h3,{id:"parseselect",children:"%ParseSelect"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %ParseSelect(pSelectTokens As %DynamicArray, Output pParsedTree, Output pSpecialTokens) As %Status\n"})}),"\n",(0,t.jsx)(n.p,{children:"Parse SELECT list for a DeepSee listing. The output pParsedTree is a %DynamicArray containing the individual select terms."}),"\n",(0,t.jsx)(n.h3,{id:"gettokenlist",children:"%GetTokenList"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %GetTokenList() As %DynamicArray\n"})}),"\n",(0,t.jsx)(n.p,{children:"Returns the current %TokenList array"}),"\n",(0,t.jsx)(n.h3,{id:"printinput",children:"%PrintInput"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %PrintInput(pVerbose = 1) As %String\n"})}),"\n",(0,t.jsx)(n.p,{children:"Print the current inputas set by %SetInput. If pVerbose = 1, print the string to the current device."}),"\n",(0,t.jsx)(n.h3,{id:"printtokenlist",children:"%PrintTokenList"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %PrintTokenList(pVerbose = 1) As %String\n"})}),"\n",(0,t.jsx)(n.h3,{id:"processselectitem",children:"%ProcessSelectItem"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %ProcessSelectItem(pSelectItemTokens As %DynamicArray, pHeaderPos, pDomain As %String = "", Output pSelectItemPair, pLocalize As %Boolean = 0) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"Reassemble the select Item in both the logical and display versions. The parameter pLocalize allows the caller to request translation of the header string to the current locale. A default domain for this translation can be supplied via pDomain. When defined, this default is used if there is no domain explicitly declared as the second argument of $$$TEXT."}),"\n",(0,t.jsx)(n.h3,{id:"processdstext",children:"%ProcessDsTEXT"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method %ProcessDsTEXT(pTextMacroTokens As %DynamicArray, pDomain As %String = "", Output pStatus, pLocalize As %Boolean = 0) As %String\n'})}),"\n",(0,t.jsx)(n.p,{children:"Extract the display header from the $$$TEXT macro. The parameter pLocalize allows the caller to request translation of the header string to the current locale. A default domain for this translation can be supplied via pDomain. When defined, this default is used if there is no domain explicitly declared as the second argument of $$$TEXT."})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var t=s(96540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);