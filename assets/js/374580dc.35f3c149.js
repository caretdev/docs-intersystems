"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[1083],{84334:(e,n,i)=>{i.r(n),i.d(n,{contentTitle:()=>a,default:()=>d,frontMatter:()=>s,toc:()=>o});var t=i(74848),r=i(28453);const s={pagination_prev:null,pagination_next:null},a="%SYS.QRCode",o=[{value:"Parameters",id:"parameters",level:2},{value:"QRMIMETYPE",id:"qrmimetype",level:3},{value:"Methods",id:"methods",level:2},{value:"GenerateFile",id:"generatefile",level:3},{value:"GenerateImage",id:"generateimage",level:3},{value:"Generate",id:"generate",level:3},{value:"Validate",id:"validate",level:3}];function l(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"sysqrcode",children:"%SYS.QRCode"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Class %SYS.QRCode Extends %SYSTEM.Help [ Abstract, System = 4 ]\n"})}),"\n",(0,t.jsx)(n.p,{children:"This class contains methods which will allow you to generate a QR Code, and either store it in a file, or return an image of it. The following QR Code image was created by this class, and then embedded in this web page:"}),"\n",(0,t.jsxs)(n.p,{children:["See the Wikipedia article at ",(0,t.jsx)(n.a,{href:"http://en.wikipedia.org/wiki/QR%5C_code",children:"http://en.wikipedia.org/wiki/QR\\_code"})," for more information about QR Codes."]}),"\n",(0,t.jsxs)(n.p,{children:["See also the Wikipedia article at ",(0,t.jsx)(n.a,{href:"http://en.wikipedia.org/wiki/URI%5C_scheme",children:"http://en.wikipedia.org/wiki/URI\\_scheme"})," for more information about URI QR encoding schemes."]}),"\n",(0,t.jsx)(n.p,{children:"This method is not supported on VMS platforms and will return an error if called."}),"\n",(0,t.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(n.h3,{id:"qrmimetype",children:"QRMIMETYPE"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter QRMIMETYPE = "data:image/png";\n'})}),"\n",(0,t.jsx)(n.p,{children:"Describes the mime type of the file the .dll/.so returns. f.e. data:image/png"}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"generatefile",children:"GenerateFile"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod GenerateFile(QRString As %String, ByRef Filename As %SysPath = "", Dimension As %Integer = 200, CorrectionLevel As %String = "H") As %Status\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Generate a QR Code image in a file.",(0,t.jsx)(n.br,{}),"\nGiven a string, this method will generate a QR Code from the string, and write the image of it to the passed in file name in PNG format."]}),"\n",(0,t.jsx)(n.p,{children:"Parameters:"}),"\n",(0,t.jsxs)(n.p,{children:["QRString - String from which to generate the QR Code image from.",(0,t.jsx)(n.br,{}),"\nFilename - (by ref) File where the image is written.",(0,t.jsx)(n.br,{}),"\nIf filename is passed as a null string, then a temporary file is created with the QR Code image written to it, and the name of the file is returned in Filename. If a Filename is passed in, and the file already exists, the file will be overwritten.",(0,t.jsx)(n.br,{}),"\nDimension - (default 200) Size in pixels of how large the image should be. If 100 is passed in, an image 100 x 100 pixels is generated. If the image will not fit in the Dimension specified, then the dimension will be increased to an appropriate size.",(0,t.jsx)(n.br,{}),'\nCorrectionLevel - (default "H") One of the following levels of correction (image quality).',(0,t.jsx)(n.br,{}),'\n"L" - Low 7% of codewords can be restored.',(0,t.jsx)(n.br,{}),'\n"M" - Medium 15% of codewords can be restored.',(0,t.jsx)(n.br,{}),'\n"Q" - Quartile 25% of codewords can be restored.',(0,t.jsx)(n.br,{}),'\n"H" - High 30% of codewords can be restored.']}),"\n",(0,t.jsxs)(n.p,{children:["Notes:",(0,t.jsx)(n.br,{}),"\nThis method requires the %System_CallOut:USE resource to run."]}),"\n",(0,t.jsx)(n.p,{children:"The string is encoded in UTF-8 before the image is generated."}),"\n",(0,t.jsxs)(n.p,{children:['The CorrectionLevel specified partially determines the maximum length of the QRString which can be encoded. The second factor is the encoding tier. There are 4 encoding tiers. "A" is part of the alphanumeric tier while "a" is not. The following is a table of the maximum length for the "alphanumeric" encoding tier for each Correction Level:',(0,t.jsx)(n.br,{}),"\nL - 4,296",(0,t.jsx)(n.br,{}),"\nM - 3,391",(0,t.jsx)(n.br,{}),"\nQ - 2,420",(0,t.jsx)(n.br,{}),"\nH - 1,852"]}),"\n",(0,t.jsxs)(n.p,{children:["String size limits for UTF8 encode ",(0,t.jsx)(n.a,{href:"https://www.qrcode.com/en/about/version.html",children:"https://www.qrcode.com/en/about/version.html"}),":",(0,t.jsx)(n.br,{}),"\nH quality: Numeric 3057 Alpha numeric 1852 UTF8 1273 Kanji 784",(0,t.jsx)(n.br,{}),"\nQ quality: Numeric 3993 Alpha numeric 2420 UTF8 1663 Kanji 1024",(0,t.jsx)(n.br,{}),"\nM quality: Numeric 5596 Alpha numeric 3391 UTF8 2331 Kanji 1435",(0,t.jsx)(n.br,{}),"\nL quality: Numeric 7089 Alpha numeric 4296 UTF8 2953 Kanji 1817",(0,t.jsx)(n.br,{}),"\nExamples:"]}),"\n",(0,t.jsx)(n.p,{children:"Generate a QR Code image in a file which when read directs your browser to the InterSystems web site."}),"\n",(0,t.jsxs)(n.p,{children:['Set x=##Class(%SYS.QRCode).GenerateFile("',(0,t.jsx)(n.a,{href:"http://www.intersystems.com%22,%22intersystems.png",children:'http://www.intersystems.com","intersystems.png'}),'")']}),"\n",(0,t.jsx)(n.p,{children:"Generate a QRCode Image in a file which when read generates an e-mail to the InterSystems support team:"}),"\n",(0,t.jsx)(n.p,{children:'Set x=##Class(%SYS.QRCode).GenerateFile("mailto:support@intersystems.com?subject=A%20QR%20Code%20Test&body=This%20is%20a%20QR%20Code%20Test.%20%0A","support.png")'}),"\n",(0,t.jsx)(n.h3,{id:"generateimage",children:"GenerateImage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod GenerateImage(QRString As %String, ByRef QRImage As %Binary, ByRef QRDataURI As %String, Dimension As %Integer = 800, CorrectionLevel As %String = "H") As %Status\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Generate a QR Code image in a binary string.",(0,t.jsx)(n.br,{}),"\nGiven a string, this method will generate a QR Code from the string, and store the binary representation of it in a string."]}),"\n",(0,t.jsx)(n.p,{children:"Parameters:"}),"\n",(0,t.jsxs)(n.p,{children:["QRString - String from which to generate the QR Code image from.",(0,t.jsx)(n.br,{}),"\nQRImage (by ref) - Returned binary representation of the created image in PNG format.",(0,t.jsx)(n.br,{}),"\nQRDataURI (by ref) - Encoded representation of the created image, suitable to be displayed in an HTML Data URI control.",(0,t.jsx)(n.br,{}),"\nDimension - (default 200) Size in pixels of how large the image should be. If 100 is passed in, an image 100 x 100 pixels is generated.",(0,t.jsx)(n.br,{}),'\nCorrectionLevel - (default "H") One of the following levels of correction (image quality).',(0,t.jsx)(n.br,{}),'\n"L" - Low, 7% of codewords can be restored.',(0,t.jsx)(n.br,{}),'\n"M" - Medium, 15% of codewords can be restored.',(0,t.jsx)(n.br,{}),'\n"Q" - Quartile, 25% of codewords can be restored.',(0,t.jsx)(n.br,{}),'\n"H" - High, 30% of codewords can be restored.']}),"\n",(0,t.jsxs)(n.p,{children:["Notes:",(0,t.jsx)(n.br,{}),"\nThis method requires the %System_CallOut:USE resource to run."]}),"\n",(0,t.jsx)(n.p,{children:"The string is encoded in UTF-8 before the image is generated."}),"\n",(0,t.jsxs)(n.p,{children:['The CorrectionLevel specified partially determines the maximum length of the QRString which can be encoded. The second factor is the encoding tier. There are 4 encoding tiers. "A" is part of the alphanumeric tier while "a" is not. The following is a table of the maximum length for the "alphanumeric" encoding tier for each Correction Level:',(0,t.jsx)(n.br,{}),"\nL - 4,296",(0,t.jsx)(n.br,{}),"\nM - 3,391",(0,t.jsx)(n.br,{}),"\nQ - 2,420",(0,t.jsx)(n.br,{}),"\nH - 1,852"]}),"\n",(0,t.jsxs)(n.p,{children:["String size limits for UTF8 encode ",(0,t.jsx)(n.a,{href:"https://www.qrcode.com/en/about/version.html",children:"https://www.qrcode.com/en/about/version.html"}),":",(0,t.jsx)(n.br,{}),"\nH quality: Numeric 3057 Alpha numeric 1852 UTF8 1273 Kanji 784",(0,t.jsx)(n.br,{}),"\nQ quality: Numeric 3993 Alpha numeric 2420 UTF8 1663 Kanji 1024",(0,t.jsx)(n.br,{}),"\nM quality: Numeric 5596 Alpha numeric 3391 UTF8 2331 Kanji 1435",(0,t.jsx)(n.br,{}),"\nL quality: Numeric 7089 Alpha numeric 4296 UTF8 2953 Kanji 1817"]}),"\n",(0,t.jsx)(n.p,{children:"The QRDataURI value returned is in the format:"}),"\n",(0,t.jsx)(n.p,{children:'"data:image/png;base64,"_Base64Encode(QRImage)'}),"\n",(0,t.jsx)(n.p,{children:"It can be displayed as an image in a ZEN page with the following ZEN control:"}),"\n",(0,t.jsx)(n.p,{children:'image id="QRCode" width="200" height="200" src=""'}),"\n",(0,t.jsx)(n.p,{children:"and then setting the src parameter as follows:"}),"\n",(0,t.jsxs)(n.p,{children:["s Status=##Class(%SYS.QRCode).GenerateImage(String,,.DataURI)",(0,t.jsx)(n.br,{}),'\nSet ..%GetComponentById("QRCode").src = DataURI']}),"\n",(0,t.jsx)(n.h3,{id:"generate",children:"Generate"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod Generate(QRString As %String, ByRef Filename As %String = "", Dimension As %Integer, CorrectionLevel As %String) As %Status [ Internal ]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Generate a QR Code image in a file. See the other methods for documentation."}),"\n",(0,t.jsx)(n.h3,{id:"validate",children:"Validate"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod Validate(QRString As %String, Filename As %String, Dimension As %Integer, CorrectionLevel As %String) As %Status [ Internal ]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Validate the parameters being passed to the QR Encoder.",(0,t.jsx)(n.br,{}),"\nWill assume numeric encoding tier and check the limits based on that. Assumes you don't want pixel dimensions of more than 5000. If you are in the byte tier and go over the length, the .dll/.so (and not this function) will return an understandable error code."]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var t=i(96540);const r={},s=t.createContext(r);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);