"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[65191],{3506:(e,n,r)=>{r.r(n),r.d(n,{contentTitle:()=>l,default:()=>d,frontMatter:()=>t,toc:()=>c});var i=r(74848),s=r(28453);const t={pagination_prev:null,pagination_next:null},l="%SOAP.WSSC.DerivedKeyToken",c=[{value:"Parameters",id:"parameters",level:2},{value:"XMLFORMAT",id:"xmlformat",level:3},{value:"NAMESPACE",id:"namespace",level:3},{value:"ELEMENTQUALIFIED",id:"elementqualified",level:3},{value:"XMLPREFIX",id:"xmlprefix",level:3},{value:"Properties",id:"properties",level:2},{value:"SecurityTokenReference",id:"securitytokenreference",level:3},{value:"Properties",id:"properties-1",level:3},{value:"Generation",id:"generation",level:3},{value:"Offset",id:"offset",level:3},{value:"Length",id:"length",level:3},{value:"Label",id:"label",level:3},{value:"Nonce",id:"nonce",level:3},{value:"Algorithm",id:"algorithm",level:3},{value:"Implied",id:"implied",level:3},{value:"ReferenceOption",id:"referenceoption",level:3},{value:"KeyElement",id:"keyelement",level:3},{value:"Key",id:"key",level:3},{value:"Methods",id:"methods",level:2},{value:"Create",id:"create",level:3},{value:"InitializeForService",id:"initializeforservice",level:3},{value:"InitializeKey",id:"initializekey",level:3},{value:"ComputeDerivedKey",id:"computederivedkey",level:3},{value:"PSHA1",id:"psha1",level:3},{value:"ValidateKey",id:"validatekey",level:3},{value:"ValidateElement",id:"validateelement",level:3},{value:"Reset",id:"reset",level:3},{value:"Equals",id:"equals",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"soapwsscderivedkeytoken",children:"%SOAP.WSSC.DerivedKeyToken"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Class %SOAP.WSSC.DerivedKeyToken Extends %SOAP.Security.Element [ System = 4 ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"DerivedKeyToken from WS-SecureConversation 1.4."}),"\n",(0,i.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"xmlformat",children:"XMLFORMAT"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter XMLFORMAT = "literal";\n'})}),"\n",(0,i.jsx)(n.h3,{id:"namespace",children:"NAMESPACE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter NAMESPACE = "http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512";\n'})}),"\n",(0,i.jsx)(n.h3,{id:"elementqualified",children:"ELEMENTQUALIFIED"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Parameter ELEMENTQUALIFIED = 1;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"xmlprefix",children:"XMLPREFIX"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter XMLPREFIX = "wsc";\n'})}),"\n",(0,i.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsx)(n.h3,{id:"securitytokenreference",children:"SecurityTokenReference"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property SecurityTokenReference As %SOAP.Security.SecurityTokenReference(REFELEMENTQUALIFIED = 1, REFNAMESPACE = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", XMLREF = 1);\n'})}),"\n",(0,i.jsx)(n.h3,{id:"properties-1",children:"Properties"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property Properties As %SOAP.WSSC.Properties;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"generation",children:"Generation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property Generation As %xsd.unsignedLong;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"offset",children:"Offset"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property Offset As %xsd.unsignedLong;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"length",children:"Length"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property Length As %xsd.unsignedLong;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"label",children:"Label"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property Label As %String(MAXLEN = "");\n'})}),"\n",(0,i.jsx)(n.h3,{id:"nonce",children:"Nonce"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property Nonce As %xsd.base64Binary;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"algorithm",children:"Algorithm"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property Algorithm As %xsd.anyURI(XMLPROJECTION = "attribute");\n'})}),"\n",(0,i.jsx)(n.h3,{id:"implied",children:"Implied"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property Implied As %Boolean(XMLPROJECTION = "none") [ Internal ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"Set Implied property = 1 to indicate make this an implied DerivedKeyToken. Am implied DerivedKeyToken should not be included in token list of Security header."}),"\n",(0,i.jsx)(n.h3,{id:"referenceoption",children:"ReferenceOption"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property ReferenceOption As %String(XMLPROJECTION = "none") [ Internal ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"ReferenceOption argument from the Create call."}),"\n",(0,i.jsx)(n.h3,{id:"keyelement",children:"KeyElement"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property KeyElement As %SOAP.Security.Element(XMLPROJECTION = "none") [ Internal ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"The key element which contains the key material to use for creating the Key. The type of this property depends on the reference option."}),"\n",(0,i.jsx)(n.h3,{id:"key",children:"Key"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property Key As %Binary(XMLPROJECTION = "none") [ Internal ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"The symmetric derived key."}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"create",children:"Create"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod Create(keyElement As %SOAP.Security.Element = "", referenceOption As %Integer = "") As %SOAP.WSSC.DerivedKeyToken\n'})}),"\n",(0,i.jsx)(n.p,{children:"Create a DerivedKeyToken element that is to be referenced from an EncryptedKey, EncryptedData or Signature element and that is to carry a key derived from a symmetric key specified by its SecurityTokenReference element."}),"\n",(0,i.jsx)(n.p,{children:"The properties of %SOAP.WSSC.DerivedKeyToken instance may be set after the instance is created. The SecurityTokenReference is set by the Create method. The other properties default as specified by WS-SecureConversation. If not otherwise set, the Nonce property defaults to a 16 octet random binary string."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"keyElement is the Security element which will supply the symmetric key: either an EncryptedKey or SecurityContextToken element. The required keyElement type depends on referenceOption specified. See referenceOption for details."}),"\n",(0,i.jsxs)(n.li,{children:["The referenceOption argument specifies the type of reference which will be in the SecurityTokenReference.\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"$$$SOAPWSReferenceEncryptedKey is reference to an EncryptedKey element in this message. The keyElement argument must be specified and is the EncryptedKey element."}),"\n",(0,i.jsx)(n.li,{children:"$$$SOAPWSReferenceEncryptedKeySHA1 is reference by the SHA1 hash of the key contained in the EncryptedKey element specified as the first argument. If the keyElement is not specified, the key from the first EncryptedKey element in the received message is used."}),"\n",(0,i.jsx)(n.li,{children:"$$$SOAPWSReferenceDerivedKey is reference to a DerivedKeyToken element in this message. The keyElement argument must be specified and is the DerivedKeyToken element."}),"\n",(0,i.jsx)(n.li,{children:"$$$SOAPWSReferenceSCT is reference by wsu:Id to a SecurityContextToken element in this message. The keyElement argument must be specified and is the SecurityContextToken element."}),"\n",(0,i.jsx)(n.li,{children:"$$$SOAPWSReferenceSCTIdentifier is reference by Identifier and Instance to a SecurityContextToken element not necessarily in this message. The keyElement argument must be specified and is the SecurityContextToken element."}),"\n",(0,i.jsx)(n.li,{children:'If referenceOption is "" or not specified, no SecurityTokenReference is created.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"initializeforservice",children:"InitializeForService"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method InitializeForService(service As %SOAP.WebBase, header As %SOAP.Security.Header) As %Status [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Initialize"}),"\n",(0,i.jsx)(n.h3,{id:"initializekey",children:"InitializeKey"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method InitializeKey(service As %SOAP.WebBase, algorithm As %String) As %Status [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Initialize the derived key."}),"\n",(0,i.jsx)(n.h3,{id:"computederivedkey",children:"ComputeDerivedKey"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method ComputeDerivedKey(basekey As %Binary, Output error As %String) As %Binary [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Compute DerivedKey based on properties of this class"}),"\n",(0,i.jsx)(n.h3,{id:"psha1",children:"PSHA1"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod PSHA1(secret As %Binary, seed As %Binary, length As %Integer) As %Binary [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Compute P_SHA-1 from RFC 2246. Return computation of function of specified length."}),"\n",(0,i.jsx)(n.h3,{id:"validatekey",children:"ValidateKey"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method ValidateKey(service As %SOAP.WebBase) As %String [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Validate the derived key. If invalid return an error code."}),"\n",(0,i.jsx)(n.h3,{id:"validateelement",children:"ValidateElement"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method ValidateElement(document As %XML.Document, service As %SOAP.WebBase) As %String [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Validate the security header element. If invalid return an error code."}),"\n",(0,i.jsx)(n.h3,{id:"reset",children:"Reset"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method Reset()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Reset the element."}),"\n",(0,i.jsx)(n.h3,{id:"equals",children:"Equals"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method Equals(credentials As %SOAP.WSSC.DerivedKeyToken) As %Boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Return true if the same Key."})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var i=r(96540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);