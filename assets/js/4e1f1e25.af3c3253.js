"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[56694],{77384:(e,s,r)=>{r.r(s),r.d(s,{contentTitle:()=>i,default:()=>d,frontMatter:()=>t,toc:()=>l});var n=r(74848),a=r(28453);const t={pagination_prev:null,pagination_next:null},i="Security.Users",l=[{value:"Parameters",id:"parameters",level:2},{value:"SOURCECONTROL",id:"sourcecontrol",level:3},{value:"EMSSERVICE",id:"emsservice",level:3},{value:"VERSION",id:"version",level:3},{value:"Properties",id:"properties",level:2},{value:"AccountNeverExpires",id:"accountneverexpires",level:3},{value:"Attributes",id:"attributes",level:3},{value:"AutheEnabled",id:"autheenabled",level:3},{value:"ChangePassword",id:"changepassword",level:3},{value:"Comment",id:"comment",level:3},{value:"CreateDateTime",id:"createdatetime",level:3},{value:"CreateUsername",id:"createusername",level:3},{value:"EmailAddress",id:"emailaddress",level:3},{value:"Enabled",id:"enabled",level:3},{value:"ExpirationDate",id:"expirationdate",level:3},{value:"Flags",id:"flags",level:3},{value:"FullName",id:"fullname",level:3},{value:"HOTPKey",id:"hotpkey",level:3},{value:"HOTPKeyGenerate",id:"hotpkeygenerate",level:3},{value:"HOTPKeyDisplay",id:"hotpkeydisplay",level:3},{value:"InvalidLoginAttempts",id:"invalidloginattempts",level:3},{value:"InvalidLoginDateTime",id:"invalidlogindatetime",level:3},{value:"InvalidLoginDevice",id:"invalidlogindevice",level:3},{value:"InvalidLoginStatus",id:"invalidloginstatus",level:3},{value:"InvalidLoginService",id:"invalidloginservice",level:3},{value:"LastModifiedDateTime",id:"lastmodifieddatetime",level:3},{value:"LastModifiedInfo",id:"lastmodifiedinfo",level:3},{value:"LastModifiedUsername",id:"lastmodifiedusername",level:3},{value:"LegacyPassword",id:"legacypassword",level:3},{value:"LoginDateTime",id:"logindatetime",level:3},{value:"LoginDevice",id:"logindevice",level:3},{value:"LoginService",id:"loginservice",level:3},{value:"Name",id:"name",level:3},{value:"NameLowerCase",id:"namelowercase",level:3},{value:"NameSpace",id:"namespace",level:3},{value:"Password",id:"password",level:3},{value:"PasswordExternal",id:"passwordexternal",level:3},{value:"PasswordHash",id:"passwordhash",level:3},{value:"PasswordNeverExpires",id:"passwordneverexpires",level:3},{value:"PasswordUpdated",id:"passwordupdated",level:3},{value:"PasswordChangedDateTime",id:"passwordchangeddatetime",level:3},{value:"PasswordReset",id:"passwordreset",level:3},{value:"PhoneNumber",id:"phonenumber",level:3},{value:"PhoneProvider",id:"phoneprovider",level:3},{value:"Roles",id:"roles",level:3},{value:"RolesAreAdmin",id:"rolesareadmin",level:3},{value:"EscalationRoles",id:"escalationroles",level:3},{value:"Routine",id:"routine",level:3},{value:"Salt",id:"salt",level:3},{value:"SuperUser",id:"superuser",level:3},{value:"TOTPLastValidPasswords",id:"totplastvalidpasswords",level:3},{value:"EMSGroupEnabled",id:"emsgroupenabled",level:3},{value:"PasswordHashAlgorithm",id:"passwordhashalgorithm",level:3},{value:"PasswordHashWorkFactor",id:"passwordhashworkfactor",level:3},{value:"Version",id:"version-1",level:3},{value:"Triggers",id:"triggers",level:2},{value:"BDTrigger",id:"bdtrigger",level:3},{value:"NoSQL",id:"nosql",level:3},{value:"Methods",id:"methods",level:2},{value:"ExpirationDateXSDToLogical",id:"expirationdatexsdtological",level:3},{value:"PasswordSet",id:"passwordset",level:3},{value:"PasswordExternalSet",id:"passwordexternalset",level:3},{value:"SetPasswordHash",id:"setpasswordhash",level:3},{value:"PasswordResetSet",id:"passwordresetset",level:3},{value:"AddRoles",id:"addroles",level:3},{value:"AddEscalationRoles",id:"addescalationroles",level:3},{value:"CacheDirectLogin",id:"cachedirectlogin",level:3},{value:"ChangeDomain",id:"changedomain",level:3},{value:"CheckBindingsAccess",id:"checkbindingsaccess",level:3},{value:"CheckPassword",id:"checkpassword",level:3},{value:"ConvertLegacyCacheDirect",id:"convertlegacycachedirect",level:3},{value:"ConvertLegacyTerminal",id:"convertlegacyterminal",level:3},{value:"ConvertLegacySQL",id:"convertlegacysql",level:3},{value:"Copy",id:"copy",level:3},{value:"Create",id:"create",level:3},{value:"CreateOne",id:"createone",level:3},{value:"CSPServiceLogin",id:"cspservicelogin",level:3},{value:"Delete",id:"delete",level:3},{value:"DeleteOne",id:"deleteone",level:3},{value:"Exists",id:"exists",level:3},{value:"ExpireUserPasswords",id:"expireuserpasswords",level:3},{value:"UnExpireUserPasswords",id:"unexpireuserpasswords",level:3},{value:"Export",id:"export",level:3},{value:"Get",id:"get",level:3},{value:"GetProperties",id:"getproperties",level:3},{value:"GetResourceSet",id:"getresourceset",level:3},{value:"GetRoleSet",id:"getroleset",level:3},{value:"GetTerminalLoginStatus",id:"getterminalloginstatus",level:3},{value:"GetInfo",id:"getinfo",level:3},{value:"GetUsernameAndPassword",id:"getusernameandpassword",level:3},{value:"Import",id:"import",level:3},{value:"Initialize",id:"initialize",level:3},{value:"IsAdministrator",id:"isadministrator",level:3},{value:"IsASuperUser",id:"isasuperuser",level:3},{value:"Modify",id:"modify",level:3},{value:"ModifyOne",id:"modifyone",level:3},{value:"NameToDescription",id:"nametodescription",level:3},{value:"PromptForNewPassword",id:"promptfornewpassword",level:3},{value:"PromptForPassword",id:"promptforpassword",level:3},{value:"PromptForUsername",id:"promptforusername",level:3},{value:"RebuildIndices",id:"rebuildindices",level:3},{value:"RemoveRoles",id:"removeroles",level:3},{value:"RemoveEscalationRoles",id:"removeescalationroles",level:3},{value:"RoleExists",id:"roleexists",level:3},{value:"SQLChangeDomainSYS",id:"sqlchangedomainsys",level:3},{value:"SQLChangeDomainDB",id:"sqlchangedomaindb",level:3},{value:"StartEMS",id:"startems",level:3},{value:"UpdateEMSClient",id:"updateemsclient",level:3},{value:"UpdateOne",id:"updateone",level:3},{value:"UploadOne",id:"uploadone",level:3},{value:"XDBCLogin",id:"xdbclogin",level:3},{value:"%OnAfterSave",id:"onaftersave",level:3},{value:"%OnBeforeSave",id:"onbeforesave",level:3},{value:"%OnDelete",id:"ondelete",level:3},{value:"%OnValidateObject",id:"onvalidateobject",level:3},{value:"ListExecute",id:"listexecute",level:3},{value:"ListFetch",id:"listfetch",level:3},{value:"ListClose",id:"listclose",level:3},{value:"DetailExecute",id:"detailexecute",level:3},{value:"DetailFetch",id:"detailfetch",level:3},{value:"DetailClose",id:"detailclose",level:3},{value:"EMSExclude",id:"emsexclude",level:3},{value:"EMSExtentExecute",id:"emsextentexecute",level:3},{value:"EMSExtentFetch",id:"emsextentfetch",level:3},{value:"EMSExtentClose",id:"emsextentclose",level:3},{value:"TestPopulate",id:"testpopulate",level:3},{value:"TestRemove",id:"testremove",level:3}];function o(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"securityusers",children:"Security.Users"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class Security.Users Extends (%Persistent, %XML.Adaptor, %SYSTEM.Help) [ Inheritance = right, System = 4 ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Define the security User database, and methods which manipulate them.",(0,n.jsx)(s.br,{}),"\nThe system includes a set of pre-defined System users."]}),"\n",(0,n.jsx)(s.p,{children:"User names have the following properties:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"User names are not case sensitive."}),"\n",(0,n.jsx)(s.li,{children:"Maximum length of a user name is 160 characters."}),"\n",(0,n.jsx)(s.li,{children:'A user name cannot contain "*" or "@" 4) A user name cannot be the same as a role name.'}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"All defined users have the following properties:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"A user cannot have duplicate roles defined"}),"\n",(0,n.jsx)(s.li,{children:"At least one user must hold the %All role"}),"\n",(0,n.jsx)(s.li,{children:"All the roles granted to a user must exist in the roles database."}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Note: The speed at which a single process can create several users at a time is limited by the PBKDF2 encryption method which hashes the password."}),"\n",(0,n.jsx)(s.p,{children:"The table for this class should be manipulated only through object access, the published API's or through the System Management Portal. It should not be updated through direct SQL access."}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.h3,{id:"sourcecontrol",children:"SOURCECONTROL"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter SOURCECONTROL [ Internal ] = {"Revision path: $Id: //iris/2024.3.0/databases/sys/cls/Security/Users.xml#1 $"_$c(13,10)_"Last Change:   $DateTime: 2024/10/02 10:58:11 $"_$c(13,10)_"Changelist #:  $Change: 7247250 $"};\n'})}),"\n",(0,n.jsx)(s.h3,{id:"emsservice",children:"EMSSERVICE"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter EMSSERVICE [ Internal ] = "Users";\n'})}),"\n",(0,n.jsx)(s.h3,{id:"version",children:"VERSION"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter VERSION [ Internal ] = 2;\n"})}),"\n",(0,n.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(s.h3,{id:"accountneverexpires",children:"AccountNeverExpires"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AccountNeverExpires As Security.Datatype.BooleanYN [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Account Expiration behavior.",(0,n.jsx)(s.br,{}),"\n0 - Account expires normally.",(0,n.jsx)(s.br,{}),"\n1 - Account will never expire."]}),"\n",(0,n.jsx)(s.h3,{id:"attributes",children:"Attributes"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property Attributes As list Of %Binary(MAXLEN = "");\n'})}),"\n",(0,n.jsx)(s.p,{children:"Attributes to apply to user when they log in."}),"\n",(0,n.jsx)(s.h3,{id:"autheenabled",children:"AutheEnabled"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property AutheEnabled As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Two factor Authentication options which are enabled for this user.",(0,n.jsx)(s.br,{}),"\nOptions are:",(0,n.jsx)(s.br,{}),"\n$$$AutheTwoFactorSMS - SMS Text authentication",(0,n.jsx)(s.br,{}),"\n$$$AutheTwoFactorPW - Time-based One-time Password"]}),"\n",(0,n.jsx)(s.h3,{id:"changepassword",children:"ChangePassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ChangePassword As Security.Datatype.BooleanYN [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Change password on next login.",(0,n.jsx)(s.br,{}),"\n0 - Password change not required.",(0,n.jsx)(s.br,{}),"\n1 - Password change required before next login."]}),"\n",(0,n.jsx)(s.h3,{id:"comment",children:"Comment"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Comment As %String(MAXLEN = 2048);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Comment."}),"\n",(0,n.jsx)(s.h3,{id:"createdatetime",children:"CreateDateTime"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property CreateDateTime As %String [ InitialExpression = {$zts} ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Account creation date and time.",(0,n.jsx)(s.br,{}),"\n$H format in utc."]}),"\n",(0,n.jsx)(s.h3,{id:"createusername",children:"CreateUsername"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property CreateUsername As %Library.Username [ InitialExpression = {$username} ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"$username of user who created the account."}),"\n",(0,n.jsx)(s.h3,{id:"emailaddress",children:"EmailAddress"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property EmailAddress As %String(MAXLEN = 512);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Email address of the user."}),"\n",(0,n.jsx)(s.h3,{id:"enabled",children:"Enabled"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Enabled As Security.Datatype.BooleanYN [ InitialExpression = 1 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Allow user to log in.",(0,n.jsx)(s.br,{}),"\n0 - Disable login.",(0,n.jsx)(s.br,{}),"\n1 - Enable login."]}),"\n",(0,n.jsx)(s.h3,{id:"expirationdate",children:"ExpirationDate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property ExpirationDate As %Date;\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Last date an account can be used.",(0,n.jsx)(s.br,{}),"\n$H date value of when an account becomes disabled."]}),"\n",(0,n.jsx)(s.h3,{id:"flags",children:"Flags"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Flags As %Integer [ InitialExpression = 1 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Flags associated with user.",(0,n.jsx)(s.br,{}),"\nBit 0 - User created via normal security mechanisms (InterSystems IRIS Password User).",(0,n.jsx)(s.br,{}),"\nBit 1 - User created via LDAP.",(0,n.jsx)(s.br,{}),"\nBit 2 - User created via Delegated Authentication."]}),"\n",(0,n.jsx)(s.h3,{id:"fullname",children:"FullName"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property FullName As %String(MAXLEN = 2048);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Full name of the user."}),"\n",(0,n.jsx)(s.h3,{id:"hotpkey",children:"HOTPKey"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property HOTPKey As %Binary(MAXLEN = 20, MINLEN = 20) [ InitialExpression = {$System.Encryption.GenCryptRand(20)} ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Time-based One-time Password key.",(0,n.jsx)(s.br,{}),"\nThis property is automatically generated when the user is created using the $System.Encryption.GenCryptRand() method."]}),"\n",(0,n.jsx)(s.h3,{id:"hotpkeygenerate",children:"HOTPKeyGenerate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property HOTPKeyGenerate As %Boolean [ InitialExpression = 0, Transient ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["0 - Do not generate a new Time-based One-time Password key when user is saved.",(0,n.jsx)(s.br,{}),"\n1 - Generate a new Time-based One-time Password key when user is saved."]}),"\n",(0,n.jsx)(s.h3,{id:"hotpkeydisplay",children:"HOTPKeyDisplay"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property HOTPKeyDisplay As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Display the Time-based One-time Password QR code or key on next login for the user to scan with their authentication device."}),"\n",(0,n.jsx)(s.h3,{id:"invalidloginattempts",children:"InvalidLoginAttempts"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property InvalidLoginAttempts As %Integer(MINVAL = 0, XMLPROJECTION = "NONE") [ InitialExpression = 0 ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"Number of invalid login attempts since last successful one."}),"\n",(0,n.jsx)(s.h3,{id:"invalidlogindatetime",children:"InvalidLoginDateTime"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property InvalidLoginDateTime As %String(XMLPROJECTION = "NONE") [ InitialExpression = 0 ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"Last invalid login date and time"}),"\n",(0,n.jsx)(s.h3,{id:"invalidlogindevice",children:"InvalidLoginDevice"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property InvalidLoginDevice As %String(MAXLEN = 256, XMLPROJECTION = "NONE");\n'})}),"\n",(0,n.jsx)(s.p,{children:"Last invalid login device"}),"\n",(0,n.jsx)(s.h3,{id:"invalidloginstatus",children:"InvalidLoginStatus"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property InvalidLoginStatus As %Status(XMLPROJECTION = "NONE") [ InitialExpression = {$$$OK} ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"Last login error"}),"\n",(0,n.jsx)(s.h3,{id:"invalidloginservice",children:"InvalidLoginService"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property InvalidLoginService As %String(MAXLEN = 64, XMLPROJECTION = "NONE");\n'})}),"\n",(0,n.jsx)(s.p,{children:"Last invalid login Service"}),"\n",(0,n.jsx)(s.h3,{id:"lastmodifieddatetime",children:"LastModifiedDateTime"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property LastModifiedDateTime As %String [ InitialExpression = {$zts} ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Account modified date and time.",(0,n.jsx)(s.br,{}),"\n$H format in utc."]}),"\n",(0,n.jsx)(s.h3,{id:"lastmodifiedinfo",children:"LastModifiedInfo"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property LastModifiedInfo As %String(MAXLEN = 1024);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Information describing last modification of the user."}),"\n",(0,n.jsx)(s.h3,{id:"lastmodifiedusername",children:"LastModifiedUsername"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property LastModifiedUsername As %Library.Username [ InitialExpression = {$username} ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"$username of the person who last modified it."}),"\n",(0,n.jsx)(s.h3,{id:"legacypassword",children:"LegacyPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property LegacyPassword As %String(MAXLEN = 64) [ Internal ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Legacy password from Windows Telnet or CacheDirect"}),"\n",(0,n.jsx)(s.h3,{id:"logindatetime",children:"LoginDateTime"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property LoginDateTime As %String(XMLPROJECTION = "NONE") [ InitialExpression = 0 ];\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Last Successful login date and time.",(0,n.jsx)(s.br,{}),"\n$H format in utc."]}),"\n",(0,n.jsx)(s.h3,{id:"logindevice",children:"LoginDevice"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property LoginDevice As %String(MAXLEN = 256, XMLPROJECTION = "NONE");\n'})}),"\n",(0,n.jsx)(s.p,{children:"Last Successful login device"}),"\n",(0,n.jsx)(s.h3,{id:"loginservice",children:"LoginService"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property LoginService As %String(MAXLEN = 64, XMLPROJECTION = "NONE");\n'})}),"\n",(0,n.jsx)(s.p,{children:"Last Successful login Service."}),"\n",(0,n.jsx)(s.h3,{id:"name",children:"Name"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Name As %Library.Username [ Required ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["User Name.",(0,n.jsx)(s.br,{}),"\nIncludes domain if multiple domains are enabled in the format username@domain."]}),"\n",(0,n.jsx)(s.h3,{id:"namelowercase",children:"NameLowerCase"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property NameLowerCase As %Library.Username(XMLPROJECTION = "NONE") [ Internal, ReadOnly, Required ];\n'})}),"\n",(0,n.jsxs)(s.p,{children:["User Name Lowercased.",(0,n.jsx)(s.br,{}),"\nIncludes domain if multiple domains are enabled, in the format username@domain."]}),"\n",(0,n.jsx)(s.h3,{id:"namespace",children:"NameSpace"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property NameSpace As %String(MAXLEN = 64);\n"})}),"\n",(0,n.jsx)(s.p,{children:"NameSpace to run in only if a terminal session."}),"\n",(0,n.jsx)(s.h3,{id:"password",children:"Password"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Password As Security.Datatype.Password(MAXLEN = 64);\n"})}),"\n",(0,n.jsxs)(s.p,{children:["PBKDF2 hashed password for InterSystems IRIS Authentication.",(0,n.jsx)(s.br,{}),"\nThis is used with a salt function obtained from $System.Encryption.GenCryptRand. This property is set by the class when the PasswordExternal property is modified. Do not set this property directly.",(0,n.jsx)(s.br,{}),"\nTo modify the password for a user using objects, get an instance of the object and modify the PasswordExternal property:",(0,n.jsx)(s.br,{}),"\ni '..Exists(Username,.User,.Status) q Status",(0,n.jsx)(s.br,{}),"\ns User.PasswordExternal=Password",(0,n.jsx)(s.br,{}),"\ns Status=User.%Save()",(0,n.jsx)(s.br,{}),'\nWhen using the Modify() class method to change a user\'s password, you can either set Properties("Password")=NewPassword, or Properties("ExternalPassword")=NewPassword.']}),"\n",(0,n.jsx)(s.h3,{id:"passwordexternal",children:"PasswordExternal"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property PasswordExternal As %String(MAXLEN = 129, XMLPROJECTION = "NONE") [ InitialExpression = {$c(0)}, Transient ];\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Clear text password.",(0,n.jsx)(s.br,{}),"\nThis property is not stored in permanent storage. It is initially set to the value of $c(0). When it is modified, the Password property is updated to the PBKDF2 salted hashed value. MAXLEN is set to 129 which includes space for a $c(0) plus a 128 byte password, used during installation. ( $c(0)_Password )"]}),"\n",(0,n.jsx)(s.h3,{id:"passwordhash",children:"PasswordHash"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordHash As %String(MAXLEN = 10000) [ Transient ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Used to securely set user password using a cryptographic hash. This is used by declarative user creation via CPF. For full definition, see property PasswordHash in class Config.Startup."}),"\n",(0,n.jsx)(s.h3,{id:"passwordneverexpires",children:"PasswordNeverExpires"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordNeverExpires As Security.Datatype.BooleanYN [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Password expires behavior.",(0,n.jsx)(s.br,{}),"\n0 - Password expires normally.",(0,n.jsx)(s.br,{}),"\n1 - Password never expires."]}),"\n",(0,n.jsx)(s.h3,{id:"passwordupdated",children:"PasswordUpdated"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordUpdated As %Boolean [ Internal, Private, Transient ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"For internal use only"}),"\n",(0,n.jsx)(s.h3,{id:"passwordchangeddatetime",children:"PasswordChangedDateTime"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordChangedDateTime As %String [ InitialExpression = {$zts} ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Last password change date and time.",(0,n.jsx)(s.br,{}),"\n$H format in utc."]}),"\n",(0,n.jsx)(s.h3,{id:"passwordreset",children:"PasswordReset"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordReset As %Boolean [ InitialExpression = 0, Internal, Transient ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Setting this to 1 will allow you to change an unchangeable password. Used during the Copy() operation when we copy a user who has an unchangeable password, and a new password is passed in."}),"\n",(0,n.jsx)(s.h3,{id:"phonenumber",children:"PhoneNumber"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PhoneNumber As %String(MAXLEN = 256);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Phone number for two-factor authentication"}),"\n",(0,n.jsx)(s.h3,{id:"phoneprovider",children:"PhoneProvider"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PhoneProvider As %String(MAXLEN = 256);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Mobile phone service provider for two-factor authentication"}),"\n",(0,n.jsx)(s.h3,{id:"roles",children:"Roles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Roles As list Of %String(MAXLEN = 64);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Roles assigned to the user."}),"\n",(0,n.jsx)(s.h3,{id:"rolesareadmin",children:"RolesAreAdmin"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property RolesAreAdmin As %Boolean [ InitialExpression = 0, Transient ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["When adding a role to the user during Create, allows the user to be able to GRANT the role to another user. Only applicable in SQL.",(0,n.jsx)(s.br,{}),"\n0 - Don't allow grant (default)",(0,n.jsx)(s.br,{}),"\n1 - Allow grant"]}),"\n",(0,n.jsx)(s.h3,{id:"escalationroles",children:"EscalationRoles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property EscalationRoles As list Of %String(MAXLEN = 64);\n"})}),"\n",(0,n.jsx)(s.h3,{id:"routine",children:"Routine"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Routine As %String(MAXLEN = 64);\n"})}),"\n",(0,n.jsx)(s.p,{children:'Routine to run only if terminal session, ""=Programmer mode.'}),"\n",(0,n.jsx)(s.h3,{id:"salt",children:"Salt"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Salt As %Binary(MAXLEN = 64);\n"})}),"\n",(0,n.jsx)(s.p,{children:"Salt value for Hashed password from $System.Encryption.GenCryptRand."}),"\n",(0,n.jsx)(s.h3,{id:"superuser",children:"SuperUser"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property SuperUser As Security.Datatype.BooleanYN(XMLPROJECTION = "NONE") [ InitialExpression = 0, ReadOnly ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"User holds the %All role."}),"\n",(0,n.jsx)(s.h3,{id:"totplastvalidpasswords",children:"TOTPLastValidPasswords"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property TOTPLastValidPasswords As %String(XMLPROJECTION = "NONE") [ Internal, ReadOnly ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"Comma delimited list of last TimeStepLimit valid TOTP passwords entered ."}),"\n",(0,n.jsx)(s.h3,{id:"emsgroupenabled",children:"EMSGroupEnabled"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Property EMSGroupEnabled As %String(VALUELIST = ",Y,N") [ Internal ];\n'})}),"\n",(0,n.jsx)(s.p,{children:"EMS 'forced' enable/disabled for all Instances. Override of Enabled property."}),"\n",(0,n.jsx)(s.h3,{id:"passwordhashalgorithm",children:"PasswordHashAlgorithm"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordHashAlgorithm As Security.Datatype.PBKDF2Alg [ Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Algorithm used to calculate user's current PBKDF2 password hash. Irrelevant for users without passwords."}),"\n",(0,n.jsx)(s.h3,{id:"passwordhashworkfactor",children:"PasswordHashWorkFactor"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property PasswordHashWorkFactor As %Integer(MINVAL = 1024) [ Required ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Work Factor used to calculate user's current PBKDF2 password hash. Irrelevant for users without passwords."}),"\n",(0,n.jsx)(s.h3,{id:"version-1",children:"Version"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Version As %Decimal(SCALE = 1) [ Internal ];\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Version number of the record.",(0,n.jsx)(s.br,{}),"\nUsed for Export/Import."]}),"\n",(0,n.jsx)(s.h2,{id:"triggers",children:"Triggers"}),"\n",(0,n.jsx)(s.h3,{id:"bdtrigger",children:"BDTrigger"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Trigger BDTrigger [ Event = DELETE ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Before Delete trigger, call %OnDelete method and if error, don't allow the DELETE"}),"\n",(0,n.jsx)(s.h3,{id:"nosql",children:"NoSQL"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Trigger NoSQL [ Event = INSERT/UPDATE/DELETE, Final, Foreach = row, Language = objectscript, Order = 1 ]\n"})}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"expirationdatexsdtological",children:"ExpirationDateXSDToLogical"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExpirationDateXSDToLogical(%val) As %Library.Date [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"In 2015.1, we change the date from type %Integer to %Date so that SQL would format it correctly for an ad-hoc query. However, we must support the older style date when we try to import an XML output file of users. So first call the %Date translation, then if it fails, the %Integer format."}),"\n",(0,n.jsx)(s.h3,{id:"passwordset",children:"PasswordSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method PasswordSet(Arg As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"passwordexternalset",children:"PasswordExternalSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method PasswordExternalSet(Arg As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Method to set the password.",(0,n.jsx)(s.br,{}),"\nInput is a clear text string that is hashed into the Password property. If the input argument is prefixed with $c(0), don't validate the password pattern. PasswordExternal begins as $c(0). If it changes, the password pattern will be validated."]}),"\n",(0,n.jsx)(s.h3,{id:"setpasswordhash",children:"SetPasswordHash"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method SetPasswordHash(pPlaintext As %String) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Calculates and sets this objects Password, and Salt. Caller is responsible for input validation."}),"\n",(0,n.jsx)(s.h3,{id:"passwordresetset",children:"PasswordResetSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method PasswordResetSet(Reset As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"addroles",children:"AddRoles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddRoles(Username As %String, ByRef Roles As %String, Admin As %Boolean = 0) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Add role(s) to the User's definition.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to add roles to",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles",(0,n.jsx)(s.br,{}),"\nAdmin - SQL ADMIN OPTION, TRUE if this user can GRANT the Role to another user/role. Only applicable in SQL."]}),"\n",(0,n.jsx)(s.p,{children:"If you add the user to the %All role, the SuperUser property is set to 1."}),"\n",(0,n.jsx)(s.h3,{id:"addescalationroles",children:"AddEscalationRoles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddEscalationRoles(Username As %String, ByRef Roles As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Add escalation role(s) to the User's definition.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to add roles to",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles"]}),"\n",(0,n.jsx)(s.h3,{id:"cachedirectlogin",children:"CacheDirectLogin"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CacheDirectLogin(ProgName As %String, Signature As %Integer, Username As %String, LegacyPassword As %String, Password As %String) As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Log in a Cache Direct process using InterSystems IRIS Authentication.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nProgName - Name of the executable (e.g. test.exe) Signature - Cache direct calculated hash value of the executable. Username - Username",(0,n.jsx)(s.br,{}),"\nLegacyPassword - Old format Cache Direct hashed password",(0,n.jsx)(s.br,{}),"\nPassword - Plain text new password",(0,n.jsx)(s.br,{}),"\nReturn values: 0 - Username/pw invalid",(0,n.jsx)(s.br,{}),"\n1 - Username/pw is valid"]}),"\n",(0,n.jsx)(s.h3,{id:"changedomain",children:"ChangeDomain"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ChangeDomain(str As %String, old As %String, new As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Given a string, change the old Domain to the New Domain.",(0,n.jsx)(s.br,{}),"\nReturn the str with the new domain"]}),"\n",(0,n.jsx)(s.h3,{id:"checkbindingsaccess",children:"CheckBindingsAccess"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CheckBindingsAccess(ns = "", ExecutableName, ByRef rolesAdded As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,n.jsx)(s.p,{children:"Check access to SQL and Objects."}),"\n",(0,n.jsx)(s.h3,{id:"checkpassword",children:"CheckPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CheckPassword(ByRef User As %ObjectHandle, Password As %String = "") As %Boolean [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Hashes the input clear text password and compares it to the user record's hashed password.",(0,n.jsx)(s.br,{}),"\nReturns 1 if they match, 0 otherwise."]}),"\n",(0,n.jsx)(s.h3,{id:"convertlegacycachedirect",children:"ConvertLegacyCacheDirect"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ConvertLegacyCacheDirect() As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Converts Legacy Cache Direct users into the security database.",(0,n.jsx)(s.br,{}),"\nThis method converts old Cache Direct users into the new security database. It should only be run at installation time. It will also enable the Cache direct service. This only gets called on an upgrade from 5.0."]}),"\n",(0,n.jsx)(s.h3,{id:"convertlegacyterminal",children:"ConvertLegacyTerminal"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ConvertLegacyTerminal() As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Converts Legacy windows telnet users into the security database.",(0,n.jsx)(s.br,{}),"\nThis method converts old windows telnet users users into the new security database.",(0,n.jsx)(s.br,{}),"\nIt should only be run at installation time."]}),"\n",(0,n.jsx)(s.h3,{id:"convertlegacysql",children:"ConvertLegacySQL"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ConvertLegacySQL(ByRef ns As %String, debug As %Library.Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Converts Legacy SQL users into the security database.",(0,n.jsx)(s.br,{}),"\nThis method converts old SQL users into the new security database.",(0,n.jsx)(s.br,{}),"\nIt should only be run at installation time."]}),"\n",(0,n.jsx)(s.h3,{id:"copy",children:"Copy"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Copy(Name As %String, NewName As %String, NewFullName As %String = "", SQLSysPrivs As %Boolean = 1, SQLObjPrivs As %Boolean = 1, NewPassword As %String = "") As %Status\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Copy a User.",(0,n.jsx)(s.br,{}),"\nCopy an existing User in the Security database to a new one.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nName - Name of the User to be copied.",(0,n.jsx)(s.br,{}),"\nNewName - Name of the user to be created.",(0,n.jsx)(s.br,{}),"\nNewFullName - Full name of the new user.",(0,n.jsx)(s.br,{}),"\nSQLSysPrivs - Copy SQL system privileges.",(0,n.jsx)(s.br,{}),"\nSQLObjPrivs - Copy SQL object privileges.",(0,n.jsx)(s.br,{}),"\nNewPassword - Password for the newly reated user."]}),"\n",(0,n.jsx)(s.h3,{id:"create",children:"Create"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Create(Username As %String, UserRoles As %String, Password As %String, FullName As %String, NameSpace As %String, Routine As %String, ExpirationDate As %String, ChangePassword As %Boolean, Enabled As %Boolean, Comment As %String, Flags As %String = 1, PhoneNumber As %String, PhoneProvider As %String, ByRef Attributes As %String, AccountNeverExpires As %Boolean, PasswordNeverExpires As %Boolean, PasswordHashAlgorithm As %String, PasswordHashWorkFactor As %Integer, EscalationRoles As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Create a User.",(0,n.jsx)(s.br,{}),"\nCreate a User in the Security database.",(0,n.jsx)(s.br,{}),"\nThere are 2 ways to call this method and pass the parameters:"]}),"\n",(0,n.jsxs)(s.p,{children:["s x=##Class(Security.Users).Create(User,Roles,Password,FullName,...)",(0,n.jsx)(s.br,{}),"\nor",(0,n.jsx)(s.br,{}),"\ns x=##Class(Security.Users).Create(User,.Properties)"]}),"\n",(0,n.jsxs)(s.p,{children:["Where Properties are contained in an array subscripted by property name, passed by reference. See the Get() method for a description of the Properties array. Valid properties for the Create() method are described below, other values are ignored.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nName - Name of the user to create",(0,n.jsx)(s.br,{}),"\nUserRoles - List format of roles to assign to the user",(0,n.jsx)(s.br,{}),"\nRoles are in the format:",(0,n.jsx)(s.br,{}),'\n"Role1,Role2" For example:',(0,n.jsx)(s.br,{}),'\ns Roles="%Developer,%Operator"',(0,n.jsx)(s.br,{}),'\ns Roles="" would create a user with no roles',(0,n.jsx)(s.br,{}),"\nRolesAreAdmin - 0/1 Roles are created with GRANT privilege",(0,n.jsx)(s.br,{}),"\nPassword - InterSystems IRIS Authentication password for the user in clear text.",(0,n.jsx)(s.br,{}),"\nFullName - Full name of the user",(0,n.jsx)(s.br,{}),"\nNameSpace - Namespace of the user for terminal access",(0,n.jsx)(s.br,{}),'\nRoutine - Routine the user runs for terminal access. Routine="" means programmer mode.',(0,n.jsx)(s.br,{}),'\nExpirationDate - ODBC date format of when the user account expires, or ""=no expiration',(0,n.jsx)(s.br,{}),"\nChangePassword - 0/1, User cannot log in until the password is changed",(0,n.jsx)(s.br,{}),"\nEnabled - 0/1, account is disabled/enabled",(0,n.jsx)(s.br,{}),"\nComment - Comment",(0,n.jsx)(s.br,{}),"\nFlags - Internal use only, pass 1 for this",(0,n.jsx)(s.br,{}),"\nBit 0 - User created normally for InterSystems IRIS Authentication",(0,n.jsx)(s.br,{}),"\nBit 1 - User created by LDAP authentication",(0,n.jsx)(s.br,{}),"\nBit 2 - User created by User Defined authentication",(0,n.jsx)(s.br,{}),"\nPhoneNumber - Phone number for two-factor authentication PhoneProvider - Mobile phone service provider for two-factor authentication EmailAddress - Email address of the user.",(0,n.jsx)(s.br,{}),"\nHOTPKey - HOTP key used for Display Time-Based One-time Password",(0,n.jsx)(s.br,{}),"\nHOTPKeyDisplay - 0/1 - Display QR Code and key on next login",(0,n.jsx)(s.br,{}),"\nAttributes (byref) - Array of attributes to be associated with the user",(0,n.jsx)(s.br,{}),"\nAttribute(Name)=Value",(0,n.jsx)(s.br,{}),"\nAccountNeverExpires - 0/1, Account will never expire",(0,n.jsx)(s.br,{}),"\nPasswordNeverExpires - 0/1, Password will never expire"]}),"\n",(0,n.jsx)(s.h3,{id:"createone",children:"CreateOne"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CreateOne(ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Wrapper around Create() which provides an option for the user to provide a cryptographic hash of the desired password, which will be set before the account is enabled for the first time"}),"\n",(0,n.jsx)(s.h3,{id:"cspservicelogin",children:"CSPServiceLogin"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CSPServiceLogin(Username As %String, Password As %String) As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Log in CSP server process.",(0,n.jsx)(s.br,{}),"\nLog in a CSP server process by validating the username/password. Username - Username",(0,n.jsx)(s.br,{}),"\nPassword - Plain text password",(0,n.jsx)(s.br,{}),"\nReturn values:",(0,n.jsx)(s.br,{}),"\n1 - Success",(0,n.jsx)(s.br,{}),"\nFailure will halt the process"]}),"\n",(0,n.jsx)(s.h3,{id:"delete",children:"Delete"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Delete(Username As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Delete a User.",(0,n.jsx)(s.br,{}),"\nThis method will delete a User from the security database.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Username to delete"]}),"\n",(0,n.jsx)(s.h3,{id:"deleteone",children:"DeleteOne"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DeleteOne(ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"exists",children:"Exists"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Exists(Username As %String, ByRef User As %ObjectHandle, ByRef Status As %Status, Flag As %Integer = 0) As %Boolean\n"})}),"\n",(0,n.jsxs)(s.p,{children:["User exists.",(0,n.jsx)(s.br,{}),"\nThis method checks for the existence of a user in the security database.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to check existence of",(0,n.jsx)(s.br,{}),"\nFlag - Internal use only, must be 0 or not passed",(0,n.jsx)(s.br,{}),"\nRequires the %Admin_Secure:USE privilege to change the $USERNAME value.",(0,n.jsx)(s.br,{}),"\nReturn values:",(0,n.jsx)(s.br,{}),"\nIf Value of the method = 0 (User does not exist, or some error occured)",(0,n.jsx)(s.br,{}),"\nUser = Null",(0,n.jsx)(s.br,{}),'\nStatus = User "x" does not exist, or other error message']}),"\n",(0,n.jsxs)(s.p,{children:["If Value of the method = 1 (User exists)",(0,n.jsx)(s.br,{}),"\nUser = Object handle to user",(0,n.jsx)(s.br,{}),'\nActualUserName = exact-case of user\'s name (used by SQL) Status = User "x" already exists']}),"\n",(0,n.jsx)(s.h3,{id:"expireuserpasswords",children:"ExpireUserPasswords"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExpireUserPasswords(Names As %String, ByRef Count As %Integer) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Set selected users accounts as having to change their password on next login.",(0,n.jsx)(s.br,{}),"\nThis does not affect LDAP or Delegated authentication accounts. It also does not affect users who have the PasswordNeverExpires flag set.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),'\nNames - Comma separated list of user names, "*" = All',(0,n.jsx)(s.br,{}),"\nCount - Return value of number of users expired.",(0,n.jsx)(s.br,{}),"\nThis method requires %Admin_Secure:USE permission to run."]}),"\n",(0,n.jsx)(s.h3,{id:"unexpireuserpasswords",children:"UnExpireUserPasswords"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UnExpireUserPasswords(Names As %String, ByRef Count As %Integer) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Set selected users accounts to not have their password change on next login.",(0,n.jsx)(s.br,{}),"\nThis does not affect LDAP or Delegated authentication accounts. Parameters:",(0,n.jsx)(s.br,{}),'\nNames - Comma separated list of user names, "*" = All',(0,n.jsx)(s.br,{}),"\nCount - Return value of number of users updated.",(0,n.jsx)(s.br,{}),"\nThis method requires %Admin_Secure:USE permission to run."]}),"\n",(0,n.jsx)(s.h3,{id:"export",children:"Export"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Export(FileName As %String = "UsersExport.xml", ByRef NumExported As %Integer = 0, Usernames As %String = "*", Roles As %String = "*", SQLPrivileges As %Boolean = 0, ByRef NumSQLPrivilegesExported As %Integer) As %Status\n'})}),"\n",(0,n.jsxs)(s.p,{children:["This method exports User records to a file in xml format.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nFilename - Output file name",(0,n.jsx)(s.br,{}),"\nNumExported (byref) - Returns number of records exported.",(0,n.jsx)(s.br,{}),'\nUsernames - Comma separated list of Usernames to export, "*" = All',(0,n.jsx)(s.br,{}),'\nRoles - Comma separated list of Roles, "*" = All. Export Users containing only these roles',(0,n.jsx)(s.br,{}),"\nSQLPrivileges - 1/0 flag. If 1, export all SQL Privileges from all namespace on this system that have been directly granted to this Role",(0,n.jsx)(s.br,{}),"\nNumSQLPrivilegesExported *byref) - Returns number of SQL Privileges and SQL Admin Privilege Set records exported"]}),"\n",(0,n.jsx)(s.h3,{id:"get",children:"Get"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Get(Username As %String, ByRef Properties As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Get a User's properties.",(0,n.jsx)(s.br,{}),"\nGets a User's properties from the security database.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to get",(0,n.jsx)(s.br,{}),"\nReturn values:",(0,n.jsx)(s.br,{}),"\nProperties - Array of properties",(0,n.jsx)(s.br,{}),'\nProperties("AccountNeverExpires") - 0=Expires normally, 1=Never expires',(0,n.jsx)(s.br,{}),'\nProperties("Attributes",Name) = $lb(Value1,Value2) - Attributes and values to associate with process',(0,n.jsx)(s.br,{}),'\nProperties("ChangePassword") - 0=Don\'t change, 1=Change before next login Properties("Comment") - Comment',(0,n.jsx)(s.br,{}),'\nProperties("EmailAddress") - Email Address',(0,n.jsx)(s.br,{}),'\nProperties("Enabled") - 0=Disabled, 1=Enabled',(0,n.jsx)(s.br,{}),'\nProperties("ExpirationDate") - Expiration date of account, ODBC date format',(0,n.jsx)(s.br,{}),'\nProperties("Flags") - Flags of the user',(0,n.jsx)(s.br,{}),'\nProperties("FullName") - Full name of the user',(0,n.jsx)(s.br,{}),'\nProperties("InvalidLoginAttempts") - Number of invalid login attempts since last success',(0,n.jsx)(s.br,{}),'\nProperties("InvalidLoginDateTime") - $h value of last invalid login attempt',(0,n.jsx)(s.br,{}),'\nProperties("InvalidLoginDevice") - Last device for invalid login attempt',(0,n.jsx)(s.br,{}),'\nProperties("InvalidLoginStatus") - Last error status for an invalid login attempt',(0,n.jsx)(s.br,{}),'\nProperties("InvalidLoginService") - Last service used for an invalid login attempt',(0,n.jsx)(s.br,{}),'\nProperties("LegacyPassword") - Legacy password for Cache Direct',(0,n.jsx)(s.br,{}),'\nProperties("LoginDateTime") - $h value for last valid login attempt',(0,n.jsx)(s.br,{}),'\nProperties("LoginDevice") - Last valid login device',(0,n.jsx)(s.br,{}),'\nProperties("LoginService") - Last valid login service',(0,n.jsx)(s.br,{}),'\nProperties("NameSpace") - Default Namespace for terminal login',(0,n.jsx)(s.br,{}),'\nproperties("PasswordHashAlgorithm") - SHA algorithm used in PBKDF2 password hash',(0,n.jsx)(s.br,{}),'\nproperties("PasswordHashWorkFactor") - Number of iterations used in PBKDF2 password hash',(0,n.jsx)(s.br,{}),'\nproperties("PasswordNeverExpires") - 0=Expires normally, 1=Never expires',(0,n.jsx)(s.br,{}),'\nProperties("PhoneNumber") - Phone number for two-factor authentication',(0,n.jsx)(s.br,{}),'\nProperties("PhoneProvider") - Mobile phone service provider for two-factor authentication',(0,n.jsx)(s.br,{}),'\nProperties("Roles")- Comma-separated List format of roles',(0,n.jsx)(s.br,{}),"\nRoles are in the format:",(0,n.jsx)(s.br,{}),'\n"Role1,Role2"',(0,n.jsx)(s.br,{}),"\nFor example:",(0,n.jsx)(s.br,{}),'\ns Properties("Roles")="%Developer,%Operator"',(0,n.jsx)(s.br,{}),'\nProperties("Routine") - Routine the user runs for terminal access. Routine="" means programmer mode.',(0,n.jsx)(s.br,{}),'\nProperties("Salt") - Salt used to generate password.',(0,n.jsx)(s.br,{}),'\nProperties("SuperUser") - 0=No, 1=Yes.']}),"\n",(0,n.jsx)(s.h3,{id:"getproperties",children:"GetProperties"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetProperties(User As %ObjectHandle, ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Get a User's properties.",(0,n.jsx)(s.br,{}),"\nGets a User's properties from the security database.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Object handle to a User record",(0,n.jsx)(s.br,{}),"\nReturn values:",(0,n.jsx)(s.br,{}),"\nProperties - See the Get method for more information on properties returned"]}),"\n",(0,n.jsx)(s.h3,{id:"getresourceset",children:"GetResourceSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GetResourceSet(Username As %String = "", Roles As %String = "", ByRef Resources As %String) As %Status\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Get a User's or Roles set of resources.",(0,n.jsx)(s.br,{}),"\nGets a User's set of resource/permission pairs he would be granted if logged in.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to get",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles to return resources for",(0,n.jsx)(s.br,{}),"\nResources - Comma delimited list of resource:permission pairs"]}),"\n",(0,n.jsx)(s.h3,{id:"getroleset",children:"GetRoleSet"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetRoleSet(Username As %String, ByRef Roles As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Get a User's set of roles.",(0,n.jsx)(s.br,{}),"\nGets a User's set of roles he would be granted if logged in.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to get",(0,n.jsx)(s.br,{}),"\nReturn value:",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles a user would be granted if logged in"]}),"\n",(0,n.jsx)(s.h3,{id:"getterminalloginstatus",children:"GetTerminalLoginStatus"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GetTerminalLoginStatus(Username As %String = "", Roles As %String = "", ByRef Enabled As %String) As %Status [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Determines if a user owns a resource which permits terminal login.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles to check for the resource",(0,n.jsx)(s.br,{}),"\nEither Username or Roles can be passed here (but not both). You would pass a list of roles if the current user role info was not saved to disk. Return value:",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles a user would be granted if logged in"]}),"\n",(0,n.jsx)(s.h3,{id:"getinfo",children:"GetInfo"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetInfo(Username As %String, Password As %String, Type As %Integer, ByRef Info As %String) As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Return Information about the server for the specified user",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user",(0,n.jsx)(s.br,{}),"\nPassword - Password of the user",(0,n.jsx)(s.br,{}),"\nType - Type of information to return",(0,n.jsx)(s.br,{}),"\n0 - $list of namespaces the user has some privileges in",(0,n.jsx)(s.br,{}),"\n1 - $list of namespaces the user has some privileges in, including SQL privileges",(0,n.jsx)(s.br,{}),"\n2 - 0/1 of whether the user has %Development:Use permission",(0,n.jsx)(s.br,{}),"\n3 - $list of namespaces the user has Read and Write permission in",(0,n.jsx)(s.br,{}),'\n4 - $list of all namespaces 5 - Returns $list of namespaces the user has some privileges in plus unmounted remote ones Note: If doing kerberos authentication, username and password may be ""',(0,n.jsx)(s.br,{}),"\nReturn values:",(0,n.jsx)(s.br,{}),"\n0 - Call failed for some reason (invalid user/pw, etc.), Real error may be in %objlasterror",(0,n.jsx)(s.br,{}),"\n1 - Call succeded, Info returned",(0,n.jsx)(s.br,{}),"\nInfo - Returned information",(0,n.jsx)(s.br,{}),"\nNote: It is assumed that this method is called by a process holding the %All role"]}),"\n",(0,n.jsx)(s.h3,{id:"getusernameandpassword",children:"GetUsernameAndPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetUsernameAndPassword(ByRef Username As %String, ByRef Password As %String, Flags As %Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Prompt for a Username/PW"}),"\n",(0,n.jsx)(s.h3,{id:"import",children:"Import"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Import(FileName As %String = "UsersExport.xml", ByRef NumImported As %Integer, Flags As %Integer = 0, ByRef NumSQLPrivsImported As %Integer) As %Status\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Import User records from an xml file.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nFileName - Filename to import User records from",(0,n.jsx)(s.br,{}),"\nNumImported (byref) - Returns number of records imported",(0,n.jsx)(s.br,{}),"\nFlags - Control import",(0,n.jsx)(s.br,{}),"\nBit 0 - Do not import records, just return count",(0,n.jsx)(s.br,{}),"\nNote: On failure, no records will be imported"]}),"\n",(0,n.jsx)(s.h3,{id:"initialize",children:"Initialize"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Initialize() As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Initialize the user database at installation time."}),"\n",(0,n.jsx)(s.h3,{id:"isadministrator",children:"IsAdministrator"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsAdministrator() As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Check and see if the user has root access to the O/S."}),"\n",(0,n.jsx)(s.h3,{id:"isasuperuser",children:"IsASuperUser"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsASuperUser(Username As %String, ByRef Status As %Status) As %Boolean [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Returns where a user is a SuperUser or not (has %All Role).",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user",(0,n.jsx)(s.br,{}),"\nStatus - Function's Status Code"]}),"\n",(0,n.jsx)(s.h3,{id:"modify",children:"Modify"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Modify(Username As %String, ByRef Properties As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Modify a User's properties.",(0,n.jsx)(s.br,{}),"\nModifies a User's properties from the security database.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to modify",(0,n.jsx)(s.br,{}),"\nProperties - Array of properties to modify.",(0,n.jsx)(s.br,{}),"\nSee the Get() method for a description of the Properties parameter.",(0,n.jsx)(s.br,{}),'\nTo change a user\'s password, you can either set Properties("Password")=NewPassword, or Properties("ExternalPassword")=NewPassword.']}),"\n",(0,n.jsx)(s.p,{children:"If a specific property is not passed in the properties array, the value is not modified, except that if you add the user to the %All role, the SuperUser property is set to 1 and if you remove the user from the %All role, the SuperUser property is set to 0."}),"\n",(0,n.jsx)(s.p,{children:"If a value is unchanged, it is not set to prevent the property modified state from being set."}),"\n",(0,n.jsx)(s.h3,{id:"modifyone",children:"ModifyOne"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ModifyOne(ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"nametodescription",children:"NameToDescription"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod NameToDescription(Name As %String, Description As %String) As %String [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Given a User name, return its description"}),"\n",(0,n.jsx)(s.h3,{id:"promptfornewpassword",children:"PromptForNewPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod PromptForNewPassword(ByRef Password As %String = "", Username As %String = "", Flags = 1) As %Status [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Prompts for a new password.",(0,n.jsx)(s.br,{}),"\nThis method prompts for and confirms a new password on the current device (terminal)",(0,n.jsx)(s.br,{}),"\nNote that this method will validate the new password against any defined system password pattern.",(0,n.jsx)(s.br,{}),"\nPassword - If the old password is passed in, then the new password must be different than the old one.",(0,n.jsx)(s.br,{}),"\nFlags - Validate entered password against system patterns Return Values:",(0,n.jsx)(s.br,{}),"\nPassword - New password"]}),"\n",(0,n.jsx)(s.h3,{id:"promptforpassword",children:"PromptForPassword"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod PromptForPassword(Flags As %Boolean, ByRef Password As %String, Username As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Prompts for a Password",(0,n.jsx)(s.br,{}),"\nThis method will prompt for and return a password",(0,n.jsx)(s.br,{}),"\nFlags - Flags for prompting",(0,n.jsx)(s.br,{}),"\nBit 0 - Validate against system password pattern",(0,n.jsx)(s.br,{}),"\nBit 1 - Passed in when the system is hung so we don't reference a process private global and hang ourselves.",(0,n.jsx)(s.br,{}),"\nReturn Values:",(0,n.jsx)(s.br,{}),"\nPassword - Password"]}),"\n",(0,n.jsx)(s.h3,{id:"promptforusername",children:"PromptForUsername"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod PromptForUsername(ByRef Username As %String, Flags As %Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Prompts for a username",(0,n.jsx)(s.br,{}),"\nThis method will prompt for and return a username",(0,n.jsx)(s.br,{}),"\nFlags - Flags for prompting",(0,n.jsx)(s.br,{}),"\nBit 1 - Passed in when the system is hung so we don't reference a process private global and hang ourselves.",(0,n.jsx)(s.br,{}),"\nReturn Values:",(0,n.jsx)(s.br,{}),"\nUsername - Username"]}),"\n",(0,n.jsx)(s.h3,{id:"rebuildindices",children:"RebuildIndices"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RebuildIndices() As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:'Rebuild ^%SYS("Security","SQL","user-role") and ^SYS("Security","SQL","role-user") globals.'}),"\n",(0,n.jsx)(s.h3,{id:"removeroles",children:"RemoveRoles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RemoveRoles(Username As %String, ByRef Roles As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Remove role(s) from the User's definition.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to remove roles from",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles."]}),"\n",(0,n.jsx)(s.h3,{id:"removeescalationroles",children:"RemoveEscalationRoles"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RemoveEscalationRoles(Username As %String, ByRef Roles As %String) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Remove escalation role(s) from the User's definition.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nUsername - Name of the user to remove roles from",(0,n.jsx)(s.br,{}),"\nRoles - Comma delimited list of roles."]}),"\n",(0,n.jsx)(s.h3,{id:"roleexists",children:"RoleExists"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RoleExists(Name As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Take a Username, and see if a role by the same name exists.",(0,n.jsx)(s.br,{}),"\nReturns $$$OK if the role does not exist."]}),"\n",(0,n.jsx)(s.h3,{id:"sqlchangedomainsys",children:"SQLChangeDomainSYS"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SQLChangeDomainSYS(OldDomain As %String, NewDomain As %String) As %Status [ Internal, ProcedureBlock = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:'Given a convert the old Domain name to the New Domain name in the ^%SYS("sql") structures'}),"\n",(0,n.jsx)(s.h3,{id:"sqlchangedomaindb",children:"SQLChangeDomainDB"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SQLChangeDomainDB(db As %String = "", OldDomain As %String, NewDomain As %String) As %Status [ Internal, ProcedureBlock = 1 ]\n'})}),"\n",(0,n.jsx)(s.p,{children:"Given a database name (db), convert the old Domain name to the New Domain name"}),"\n",(0,n.jsx)(s.h3,{id:"startems",children:"StartEMS"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StartEMS() As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"updateemsclient",children:"UpdateEMSClient"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UpdateEMSClient(Username As %String, Action As %Integer) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Update Security.Users class data on the EMS Server to reflect changes made on the client. Action - 1=Modification made on EMS"}),"\n",(0,n.jsx)(s.h3,{id:"updateone",children:"UpdateOne"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UpdateOne(GUID As %String, Username As %String, ClientUserRecord As %List) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Update Security.Users class data on the EMS Server to reflect changes made on the client."}),"\n",(0,n.jsx)(s.h3,{id:"uploadone",children:"UploadOne"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UploadOne(GUID As %String, Username As %String, ByRef UserRecord As %List) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Upload Security.Users class data (a single global node) to the requesting client."}),"\n",(0,n.jsx)(s.h3,{id:"xdbclogin",children:"XDBCLogin"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod XDBCLogin(Namespace As %String = "", Username As %String, Password As %String, ByRef UserRecord As %String) As %Boolean [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Log in an ODBC process using InterSystems IRIS Authentication",(0,n.jsx)(s.br,{}),"\nLog in an ODBC process by validating the username/password against InterSystems IRIS Authentication. If validated, set $username to the user along the with user's security context.",(0,n.jsx)(s.br,{}),"\nParameters:",(0,n.jsx)(s.br,{}),"\nNamespace - Namespace we are trying to connect to",(0,n.jsx)(s.br,{}),"\nUsername - Username",(0,n.jsx)(s.br,{}),"\nPassword - Plain text password",(0,n.jsx)(s.br,{}),"\nReturn values:",(0,n.jsx)(s.br,{}),"\n0 - Failure",(0,n.jsx)(s.br,{}),"\n1 - Success NOTE: All errors must go through tag LoginError"]}),"\n",(0,n.jsx)(s.h3,{id:"onaftersave",children:"%OnAfterSave"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnAfterSave(insert As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called after the object's data has been successfully written to disk."}),"\n",(0,n.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail."}),"\n",(0,n.jsx)(s.h3,{id:"onbeforesave",children:"%OnBeforeSave"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnBeforeSave(insert As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called before any data is written to disk."}),"\n",(0,n.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail."}),"\n",(0,n.jsx)(s.h3,{id:"ondelete",children:"%OnDelete"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %OnDelete(oid As %ObjectIdentity) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked by the %Delete method to provide notification that the object specified by oid is being deleted."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error then the object will not be deleted. [Previously private]"}),"\n",(0,n.jsx)(s.h3,{id:"onvalidateobject",children:"%OnValidateObject"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnValidateObject() As %Status [ Internal, Private, ProcedureBlock = 1 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This callback method is invoked by the %ValidateObject method to provide notification that the current object is being validated."}),"\n",(0,n.jsx)(s.p,{children:"If this method returns an error then %ValidateObject will fail."}),"\n",(0,n.jsx)(s.h3,{id:"listexecute",children:"ListExecute"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ListExecute(ByRef %qHandle As %Binary, Names As %String = "*", Roles As %String = "*", LastLoginOlderThan As %Integer = 0, Flag As %Integer = 0) As %Status [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["List all user records, brief display.",(0,n.jsx)(s.br,{}),'\nNames - Comma separated list of user names, "*" = All',(0,n.jsx)(s.br,{}),'\nRoles - Comma separated list of Role names, "*"=ALL',(0,n.jsx)(s.br,{}),'\nLastLoginOlderThan - Select users who haven\'t logged in in more than x days, "*"=ALL Flag - 0 - Use "Startswith" as the selection on the name.',(0,n.jsx)(s.br,{}),'\nFlag - 1 - Use "Contains" as the selection on the name.',(0,n.jsx)(s.br,{}),"\nNote: This query may change in future versions"]}),"\n",(0,n.jsx)(s.h3,{id:"listfetch",children:"ListFetch"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ListFetch(ByRef %qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = ListExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"listclose",children:"ListClose"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ListClose(ByRef %qHandle As %Binary) As %Status [ Internal, PlaceAfter = ListExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"detailexecute",children:"DetailExecute"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod DetailExecute(ByRef %qHandle As %Binary, Names As %String = "*", Roles As %String = "*", LastLoginOlderThan As %Integer = "*", Flag As %Integer = 0) As %Status [ Internal ]\n'})}),"\n",(0,n.jsxs)(s.p,{children:["List all user records, brief display.",(0,n.jsx)(s.br,{}),'\nNames - Comma separated list of user names, "*" = All',(0,n.jsx)(s.br,{}),'\nRoles - Comma separated list of Role names, "*"=ALL',(0,n.jsx)(s.br,{}),'\nLastLoginOlderThan - Select users who haven\'t logged in in more than x days, "*"=ALL Flag - 0 - Use "Startswith" as the selection on the name.',(0,n.jsx)(s.br,{}),'\nFlag - 1 - Use "Contains" as the selection on the name.',(0,n.jsx)(s.br,{}),"\nNote: This query may change in future versions"]}),"\n",(0,n.jsx)(s.h3,{id:"detailfetch",children:"DetailFetch"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DetailFetch(ByRef %qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = DetailExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"detailclose",children:"DetailClose"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DetailClose(ByRef %qHandle As %Binary) As %Status [ Internal, PlaceAfter = DetailExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"emsexclude",children:"EMSExclude"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EMSExclude() As %List [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"A list of system Users to exclude from EMS management. The actual User names are converted to lower case so they match the internal IdKey of the record."}),"\n",(0,n.jsx)(s.h3,{id:"emsextentexecute",children:"EMSExtentExecute"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EMSExtentExecute(ByRef qHandle As %Binary) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Used for download of all Users to EMS. Exclude Users which should not be managed by EMS."}),"\n",(0,n.jsx)(s.h3,{id:"emsextentfetch",children:"EMSExtentFetch"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EMSExtentFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = EMSExtentExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"emsextentclose",children:"EMSExtentClose"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EMSExtentClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = EMSExtentExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"testpopulate",children:"TestPopulate"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod TestPopulate(Count As %Integer, User As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Test populate a Users database 'Count' indicates how many Users records to create 'User' is a User.Name to use as a base for most of the Properties Create this User first with Roles, Namespace, Privs , etc. Names are generated from %PopulateUtils, and Password is always set to \"Password0123456789\""}),"\n",(0,n.jsx)(s.h3,{id:"testremove",children:"TestRemove"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod TestRemove() As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Remove all Users created by TestPopulate()."})]})}function d(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>l});var n=r(96540);const a={},t=n.createContext(a);function i(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);