"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[90880],{48799:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>l,default:()=>i,frontMatter:()=>t,toc:()=>o});var r=n(74848),a=n(28453);const t={pagination_prev:null,pagination_next:null},l="%SYSTEM.Config.SharedMemoryHeap",o=[{value:"Parameters",id:"parameters",level:2},{value:"DOMAIN",id:"domain",level:3},{value:"Methods",id:"methods",level:2},{value:"DisplayUsage",id:"displayusage",level:3},{value:"FreeCount",id:"freecount",level:3},{value:"GetConfigSize",id:"getconfigsize",level:3},{value:"GetDescription",id:"getdescription",level:3},{value:"GetFreePage",id:"getfreepage",level:3},{value:"GetMaxConsumerID",id:"getmaxconsumerid",level:3},{value:"GetMaxPage",id:"getmaxpage",level:3},{value:"GetPageSize",id:"getpagesize",level:3},{value:"GetStageThreshold",id:"getstagethreshold",level:3},{value:"GetSurrenderStage",id:"getsurrenderstage",level:3},{value:"JobCoalesceThreshold",id:"jobcoalescethreshold",level:3},{value:"DaemonLogThreshold",id:"daemonlogthreshold",level:3},{value:"GetUsage",id:"getusage",level:3},{value:"GetUsageSummary",id:"getusagesummary",level:3},{value:"MaxCount",id:"maxcount",level:3},{value:"RecommendedSize",id:"recommendedsize",level:3},{value:"SetStageThreshold",id:"setstagethreshold",level:3},{value:"Surrender",id:"surrender",level:3},{value:"UsageQueryExecute",id:"usagequeryexecute",level:3},{value:"UsageQueryClose",id:"usagequeryclose",level:3},{value:"UsageQueryFetch",id:"usagequeryfetch",level:3},{value:"WebListExecute",id:"weblistexecute",level:3},{value:"WebListClose",id:"weblistclose",level:3},{value:"WebListFetch",id:"weblistfetch",level:3}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"systemconfigsharedmemoryheap",children:"%SYSTEM.Config.SharedMemoryHeap"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Class %SYSTEM.Config.SharedMemoryHeap Extends %SYSTEM.Help [ System = 4 ]\n"})}),"\n",(0,r.jsxs)(s.p,{children:["The %SYSTEM.Config.SharedMemoryHeap class provides an interface to return amount of shared memory heap used by InterSystems IRIS instance.",(0,r.jsx)(s.br,{}),"\nIt also provides API to get available shared memory heap and recommended shared nemory heap parameter for configuration."]}),"\n",(0,r.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(s.h3,{id:"domain",children:"DOMAIN"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter DOMAIN = "%Utility";\n'})}),"\n",(0,r.jsx)(s.p,{children:"Default Localization Domain"}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"displayusage",children:"DisplayUsage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DisplayUsage() As %Status [ Final, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Print out the shared memory heap usage in InterSystems IRIS instance."}),"\n",(0,r.jsx)(s.h3,{id:"freecount",children:"FreeCount"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod FreeCount() As %String [ CodeMode = expression ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return available shared memory heap in bytes"}),"\n",(0,r.jsxs)(s.p,{children:["This returns a string in ",(0,r.jsx)(s.strong,{children:"total,pages,smt,genstrtab"})," format.",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.strong,{children:"total"})," - total shared memory heap available including ",(0,r.jsx)(s.strong,{children:"pages,smt,genstrtab"}),".",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.strong,{children:"pages"})," - total available shared memory heap pages(in bytes).",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.strong,{children:"smt"})," - total available memory in SMT table.",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.strong,{children:"genstrtab"})," - total available memory in General String Table."]}),"\n",(0,r.jsx)(s.h3,{id:"getconfigsize",children:"GetConfigSize"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetConfigSize(ConsumerID As %Integer = 0, NumProcess As %Integer = 0) As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return recommended configuration size for specific consumer. The NumProcess argument is for CIDPIDTable consumer to esitmate the memory required for specific maximum number of processes."}),"\n",(0,r.jsx)(s.h3,{id:"getdescription",children:"GetDescription"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetDescription(ConsumerID As %Integer = 0) As %String [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Get description for the specific Consumer."}),"\n",(0,r.jsx)(s.h3,{id:"getfreepage",children:"GetFreePage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetFreePage() As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Get number of current available SMH pages."}),"\n",(0,r.jsx)(s.h3,{id:"getmaxconsumerid",children:"GetMaxConsumerID"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetMaxConsumerID() As %Integer [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return defined MaxConsumerID value."}),"\n",(0,r.jsx)(s.h3,{id:"getmaxpage",children:"GetMaxPage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetMaxPage() As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return number of pages of shared memory heap configured"}),"\n",(0,r.jsx)(s.h3,{id:"getpagesize",children:"GetPageSize"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetPageSize() As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return amount size (in bytes) of each shared memory heap page."}),"\n",(0,r.jsx)(s.h3,{id:"getstagethreshold",children:"GetStageThreshold"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetStageThreshold(Stage As %Integer = 1) As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Get threshold for specific Surrender stage. The threshold is number of SMH pages."}),"\n",(0,r.jsx)(s.h3,{id:"getsurrenderstage",children:"GetSurrenderStage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetSurrenderStage() As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Get current Surrender stage."}),"\n",(0,r.jsx)(s.h3,{id:"jobcoalescethreshold",children:"JobCoalesceThreshold"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod JobCoalesceThreshold(NewValue As %Integer) As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Get/Set threshold for job to coalesce string table. It returns current value before new value is set. If NewValue is not specified threshold is not changed."}),"\n",(0,r.jsx)(s.h3,{id:"daemonlogthreshold",children:"DaemonLogThreshold"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DaemonLogThreshold(NewValue As %Integer) As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Get/Set threshold for clean daemon to log coalescing messages. It returns current value before new value is set. If NewValue is not specified threshold is not changed."}),"\n",(0,r.jsx)(s.h3,{id:"getusage",children:"GetUsage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetUsage(ConsumerID As %Integer = 0) As %String [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return the current amount of used SMH memory for specific consumer. It returns a string with following information, they are separated by ','.: Total SMH pages allocated. Total SMT memory used. Total GST memory used. Total memory used within the allocated SMH pages."}),"\n",(0,r.jsx)(s.h3,{id:"getusagesummary",children:"GetUsageSummary"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetUsageSummary() As %String [ Final ]\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Return the total SMH memory used, SMH pages allocated and configured SMH memory. It returns a string with following information, they are separated by ',' and all the units are in byte.:",(0,r.jsx)(s.br,{}),"\nTotal SMH memory used.",(0,r.jsx)(s.br,{}),"\nTotal SMH pages allocated.",(0,r.jsx)(s.br,{}),"\nTotal SMH memory configured."]}),"\n",(0,r.jsx)(s.h3,{id:"maxcount",children:"MaxCount"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod MaxCount() As %Integer [ CodeMode = expression ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return configured shared memory heap in bytes."}),"\n",(0,r.jsx)(s.h3,{id:"recommendedsize",children:"RecommendedSize"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RecommendedSize(NumberOfProcess As %Integer = 0) As %Integer [ Deprecated, Final ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Returns a recommended amount of shared memory heap to be configured in kilobytes. This is based on the current utilization of shared memory heap but does not accurately predict future needs."}),"\n",(0,r.jsx)(s.h3,{id:"setstagethreshold",children:"SetStageThreshold"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetStageThreshold(Stage As %Integer = 1, NewVal As %Integer) As %Integer [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Set threshold for specific Surrender stage. The threshold is number of SMH pages."}),"\n",(0,r.jsx)(s.h3,{id:"surrender",children:"Surrender"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Surrender(ConsumerID As %Integer = -1, Stage As %Integer = 1) As %Status [ CodeMode = expression, Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"This function start Surrender SMH memory for specific or all consumers. ConsumerID = -1 for all consumers. The stage could be 1 or 2."}),"\n",(0,r.jsx)(s.h3,{id:"usagequeryexecute",children:"UsageQueryExecute"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UsageQueryExecute(ByRef qHandle As %Binary, ConsumerID As %Integer = -1) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return Usage of shared memory heap for each consumer."}),"\n",(0,r.jsx)(s.h3,{id:"usagequeryclose",children:"UsageQueryClose"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UsageQueryClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = UsageQueryExecute ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"usagequeryfetch",children:"UsageQueryFetch"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UsageQueryFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = UsageQueryExecute ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"weblistexecute",children:"WebListExecute"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod WebListExecute(ByRef qHandle As %Binary) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Return Usage of shared memory heap for each consumer."}),"\n",(0,r.jsx)(s.h3,{id:"weblistclose",children:"WebListClose"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod WebListClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = UsageQueryExecute ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"weblistfetch",children:"WebListFetch"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod WebListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = UsageQueryExecute ]\n"})})]})}function i(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>o});var r=n(96540);const a={},t=r.createContext(a);function l(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);