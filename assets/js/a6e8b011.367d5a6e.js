"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[62809],{48293:(e,s,a)=>{a.r(s),a.d(s,{contentTitle:()=>l,default:()=>d,frontMatter:()=>r,toc:()=>i});var t=a(74848),n=a(28453);const r={pagination_prev:null,pagination_next:null},l="%XML.XPATH.Document",i=[{value:"Properties",id:"properties",level:2},{value:"ParsedSourceHandle",id:"parsedsourcehandle",level:3},{value:"PrefixMappings",id:"prefixmappings",level:3},{value:"ResultHandler",id:"resulthandler",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"ExampleXML",id:"examplexml",level:3},{value:"Methods",id:"methods",level:2},{value:"PrefixMappingsSet",id:"prefixmappingsset",level:3},{value:"GetPrefix",id:"getprefix",level:3},{value:"CreateFromFile",id:"createfromfile",level:3},{value:"CreateFromString",id:"createfromstring",level:3},{value:"CreateFromStream",id:"createfromstream",level:3},{value:"EvaluateExpression",id:"evaluateexpression",level:3},{value:"Evaluate",id:"evaluate",level:3},{value:"%OnNew",id:"onnew",level:3},{value:"%OnClose",id:"onclose",level:3},{value:"NormalizeFileName",id:"normalizefilename",level:3},{value:"Example1",id:"example1",level:3},{value:"Example2",id:"example2",level:3},{value:"Example3",id:"example3",level:3},{value:"ExampleDisplayResults",id:"exampledisplayresults",level:3}];function c(e){const s={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"xmlxpathdocument",children:"%XML.XPATH.Document"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class %XML.XPATH.Document Extends %RegisteredObject [ System = 3 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Implements an interface to the XPATH Document. XML contained in a file or binary stream may be selected and navigated. %XML.XPATH.Document should never be created directly with %New(), but via the CreateFromFile() or CreateFromStream() factory methods"}),"\n",(0,t.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(s.h3,{id:"parsedsourcehandle",children:"ParsedSourceHandle"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ParsedSourceHandle As %Integer [ Private ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"This property holds a handle to the parsed source"}),"\n",(0,t.jsx)(s.h3,{id:"prefixmappings",children:"PrefixMappings"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property PrefixMappings As %String;\n"})}),"\n",(0,t.jsxs)(s.p,{children:['This holds a string specifying prefix mappings for the document. This is a comma delimited list of prefix to namespace mappings. Each mapping is defined as a prefix, a space and then the uri to which that prefix maps. This is especially useful if the document defines a default namespace with the xmlns="',(0,t.jsx)(s.a,{href:"http://somenamespaceuri",children:"http://somenamespaceuri"}),'" syntax but does not supply an explicit prefix mapping. For example, this PrefixMappings string would map the myprefix prefix to the ',(0,t.jsx)(s.a,{href:"http://somenamespaceuri",children:"http://somenamespaceuri"}),' uri. "myprefix ',(0,t.jsx)(s.a,{href:"http://somenamespaceuri",children:"http://somenamespaceuri"})]}),"\n",(0,t.jsx)(s.h3,{id:"resulthandler",children:"ResultHandler"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ResultHandler As %XML.XPATH.ResultHandler;\n"})}),"\n",(0,t.jsx)(s.p,{children:"This holds the default ResultHandler"}),"\n",(0,t.jsx)(s.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,t.jsx)(s.h3,{id:"examplexml",children:"ExampleXML"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"XData ExampleXML\n"})}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"prefixmappingsset",children:"PrefixMappingsSet"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method PrefixMappingsSet(pValue As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"This is the setter for the PrefixMappings, it parses the mappings into an array which can be queried by the GetPrefix() method"}),"\n",(0,t.jsx)(s.h3,{id:"getprefix",children:"GetPrefix"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method GetPrefix(pUrl = "") As %String\n'})}),"\n",(0,t.jsx)(s.p,{children:"May be called to determine the prefix defined for a particular url in the Prefix Mappings passed to the CreateFromXXX() calls"}),"\n",(0,t.jsx)(s.h3,{id:"createfromfile",children:"CreateFromFile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CreateFromFile(pSource As %String, Output pDocument As %XML.XPATH.Document, pResolver As %XML.SAX.EntityResolver = {$$$NULLOREF}, pErrorHandler As %XML.XSLT.ErrorHandler = {$$$NULLOREF}, pFlags As %Integer = 0, pSchemaSpec As %String = "", pPrefixMappings As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Use this method a create an instance of an %XML.XPATH.Document from a file path name."}),"\n",(0,t.jsx)(s.h3,{id:"createfromstring",children:"CreateFromString"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CreateFromString(pString As %String, Output pDocument As %XML.XPATH.Document, pResolver As %XML.SAX.EntityResolver = {$$$NULLOREF}, pErrorHandler As %XML.XSLT.ErrorHandler = {$$$NULLOREF}, pFlags As %Integer = 0, pSchemaSpec As %String = "", pPrefixMappings As %String = "") As %Status\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Use this method to create an instance of a %XML.XPATH.Document from a string.",(0,t.jsx)(s.br,{}),"\nThe input string is expected to be UTF-8 encoded."]}),"\n",(0,t.jsx)(s.h3,{id:"createfromstream",children:"CreateFromStream"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CreateFromStream(pStream As %AbstractStream, Output pDocument As %XML.XPATH.Document, pResolver As %XML.SAX.EntityResolver = {$$$NULLOREF}, pErrorHandler As %XML.XSLT.ErrorHandler = {$$$NULLOREF}, pFlags As %Integer = 0, pSchemaSpec As %String = "", pPrefixMappings As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Use this method to create an instance of an %XML.XPATH.Document from a binary stream. It's important to use a binary stream because if a character stream is used then (for a unicode cache) the characters will be automatically converted to unicode (utf-16). This can cause a problem if the XML stream has a header declaring a different coding as it introduces an inconsistency between the declared encoding and the actual encoding. This will cause the XML Parser to issue an error message and fail."}),"\n",(0,t.jsx)(s.h3,{id:"evaluateexpression",children:"EvaluateExpression"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method EvaluateExpression(pContext As %String, pExpression As %String, Output pResults As %ListOfObjects(CLASSNAME="%XML.XPATH.RESULT")) As %Status\n'})}),"\n",(0,t.jsxs)(s.p,{children:["This method evaluates an XPATH context and expression. The context selects the intial nodeset from the document and the expression further filters the node set. See ",(0,t.jsx)(s.a,{href:"http://www.w3.org/TR/xpath",children:"http://www.w3.org/TR/xpath"})," for full details of XPATH syntax and usage If the method succeeds it returns a list of Results which can be queried for their types and values."]}),"\n",(0,t.jsx)(s.h3,{id:"evaluate",children:"Evaluate"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method Evaluate(pContext As %String, pExpression As %String, pResultHandler As %XML.XPATH.ResultHandler) As %Status [ Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This method is called internally by the framework and should not be called directly by the user"}),"\n",(0,t.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnNew(initvalue As %RawString) As %Status [ Private, ProcedureBlock = 1 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This callback method is invoked by the %New method to provide notification that a new instance of an object is being created. For this class, client code should NOT call this method directly via %New() but should use the 'CreateFromFile()' or 'CreateFromStream()' factory methods"}),"\n",(0,t.jsx)(s.h3,{id:"onclose",children:"%OnClose"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnClose() As %Status [ Private, ProcedureBlock = 1 ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"normalizefilename",children:"NormalizeFileName"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod NormalizeFileName(pFilename As %String) As %String\n"})}),"\n",(0,t.jsx)(s.h3,{id:"example1",children:"Example1"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Example1()\n"})}),"\n",(0,t.jsx)(s.p,{children:"Evaluates an XPATH expression which returns a DOM Result"}),"\n",(0,t.jsx)(s.h3,{id:"example2",children:"Example2"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Example2()\n"})}),"\n",(0,t.jsx)(s.p,{children:"Evaluates an XPATH expression which returns a VALUE Result"}),"\n",(0,t.jsx)(s.h3,{id:"example3",children:"Example3"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Example3()\n"})}),"\n",(0,t.jsx)(s.p,{children:"Evaluates an XPATH expression which returns a VALUE Result ( demonstrates use of CreateFromString() )"}),"\n",(0,t.jsx)(s.h3,{id:"exampledisplayresults",children:"ExampleDisplayResults"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ExampleDisplayResults(pResults As %ListOfObjects(CLASSNAME="%XML.XPATH.Result"))\n'})})]})}function d(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,s,a)=>{a.d(s,{R:()=>l,x:()=>i});var t=a(96540);const n={},r=t.createContext(n);function l(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);