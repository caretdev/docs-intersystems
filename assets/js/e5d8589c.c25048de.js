"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[79214],{96942:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>i,default:()=>d,frontMatter:()=>n,toc:()=>l});var s=a(74848),r=a(28453);const n={pagination_prev:null,pagination_next:null},i="%Library.TextStreamInterface",l=[{value:"Parameters",id:"parameters",level:2},{value:"LANGUAGECLASS",id:"languageclass",level:3},{value:"SIMILARITYINDEX;",id:"similarityindex",level:3},{value:"Methods",id:"methods",level:2},{value:"BuildValueArray",id:"buildvaluearray",level:3},{value:"Similarity",id:"similarity",level:3},{value:"SimilarityIdx",id:"similarityidx",level:3},{value:"ChooseSearchKey",id:"choosesearchkey",level:3},{value:"Standardize",id:"standardize",level:3},{value:"CreateQList",id:"createqlist",level:3},{value:"MakeSearchTerms",id:"makesearchterms",level:3}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"librarytextstreaminterface",children:"%Library.TextStreamInterface"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Class %Library.TextStreamInterface Extends %Compiler.Type.StreamEmbedded [ System = 2 ]\n"})}),"\n",(0,s.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(t.h3,{id:"languageclass",children:"LANGUAGECLASS"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter LANGUAGECLASS = "%Text.English";\n'})}),"\n",(0,s.jsx)(t.p,{children:"The LANGUAGECLASS parameter specifies the fully qualified name of the language implementation class. Optionally, he LANGUAGECLASS may be set to the name of a global that indirectly defines the language class name. If a global name is specified, then the global must be defined and available at index build time and at SQL query execution time."}),"\n",(0,s.jsx)(t.h3,{id:"similarityindex",children:"SIMILARITYINDEX;"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter SIMILARITYINDEX;\n"})}),"\n",(0,s.jsx)(t.p,{children:"Specify the SIMILARITYINDEX parameter when you intend to use the %SIMILARITY SQL operator to rank query results by relevance."}),"\n",(0,s.jsx)(t.p,{children:"The SIMILARITYINDEX parameter specifies the name of an index on the current property that has the structure expected by the SimilarityIdx class method of the class specified in the LANGUAGECLASS parameter. The SimilarityIdx class method in the %Text.Text class requires the index global to have the structure: ^textIndexGlobal([constantSubscripts,]key,ID) = value. An index with this structure can be created by compiling an index specification such as:"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:'PROPERTY myDocument As User.TextStream (LANGUAGECLASS = "%Text.English", SIMILARITYINDEX = "myIndex"); INDEX myIndex ON myDocument(KEYS) DATA [ myDocument(VALUES) ];'})," The SimilarityIdx method of the %Text.Text class requires the index specified in the SIMILARITYINDEX parameter to have exactly this structure. The index may not be a bitmap index, additional subscripts or data values may not be added to the Index specification, and the index must inherit the collation of the property."]}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"buildvaluearray",children:"BuildValueArray"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod BuildValueArray(document As %Binary, ByRef valueArray As %Binary) As %Status [ CodeMode = generator, ProcedureBlock = 1, ServerOnly = 1 ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"similarity",children:"Similarity"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Similarity(document As %String, qList As %List) As %Numeric [ CodeMode = generator ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"similarityidx",children:"SimilarityIdx"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod SimilarityIdx(ID As %String, textIndex As %String, qList As %List) As %Numeric [ CodeMode = generator ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"choosesearchkey",children:"ChooseSearchKey"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod ChooseSearchKey(searchString As %String) As %String [ CodeMode = generator ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"standardize",children:"Standardize"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Standardize(document As %String, origtext As %Boolean = 0) As %String [ CodeMode = generator ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"createqlist",children:"CreateQList"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod CreateQList(searchPattern As %String, collationExpr As %String) As %List [ CodeMode = generator ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"makesearchterms",children:"MakeSearchTerms"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod MakeSearchTerms(searchPattern As %String, ngramlen As %Integer = 0) As %List [ CodeMode = generator ]\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>i,x:()=>l});var s=a(96540);const r={},n=s.createContext(r);function i(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);