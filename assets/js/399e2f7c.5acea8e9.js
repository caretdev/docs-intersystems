"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[54383],{9121:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>l,default:()=>o,frontMatter:()=>n,toc:()=>d});var a=s(74848),i=s(28453);const n={pagination_prev:null,pagination_next:null},l="%iKnow.Queries.MetadataWSAPI",d=[{value:"Parameters",id:"parameters",level:2},{value:"NAMESPACE",id:"namespace",level:3},{value:"SERVICENAME",id:"servicename",level:3},{value:"USECLASSNAMESPACES",id:"useclassnamespaces",level:3},{value:"Methods",id:"methods",level:2},{value:"AddField",id:"addfield",level:3},{value:"AddListOfValues",id:"addlistofvalues",level:3},{value:"AddLovValue",id:"addlovvalue",level:3},{value:"CreateFilter",id:"createfilter",level:3},{value:"GetFieldId",id:"getfieldid",level:3},{value:"GetFieldValues",id:"getfieldvalues",level:3},{value:"GetFieldValuesById",id:"getfieldvaluesbyid",level:3},{value:"GetFields",id:"getfields",level:3},{value:"GetLovValues",id:"getlovvalues",level:3},{value:"GetLovs",id:"getlovs",level:3},{value:"GetMetaSpreadByEntities",id:"getmetaspreadbyentities",level:3},{value:"GetMetaSpreadByEntityIds",id:"getmetaspreadbyentityids",level:3},{value:"GetMetaSpreadInternal",id:"getmetaspreadinternal",level:3},{value:"GetUniValue",id:"getunivalue",level:3},{value:"GetUniqueValueCount",id:"getuniquevaluecount",level:3},{value:"GetUniqueValues",id:"getuniquevalues",level:3},{value:"GetUniqueValuesById",id:"getuniquevaluesbyid",level:3},{value:"GetValue",id:"getvalue",level:3},{value:"GetValueById",id:"getvaluebyid",level:3},{value:"GetValues",id:"getvalues",level:3},{value:"GetValuesById",id:"getvaluesbyid",level:3},{value:"RemoveField",id:"removefield",level:3},{value:"RemoveFieldById",id:"removefieldbyid",level:3},{value:"SetValue",id:"setvalue",level:3},{value:"SetValueById",id:"setvaluebyid",level:3},{value:"UpdateField",id:"updatefield",level:3},{value:"UpdateFieldById",id:"updatefieldbyid",level:3}];function r(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"iknowqueriesmetadatawsapi",children:"%iKnow.Queries.MetadataWSAPI"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Class %iKnow.Queries.MetadataWSAPI Extends %iKnow.Queries.AbstractWSAPI [ Deprecated, System = 4 ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"This is an automatically generated class, offering a functionally equivalent set of methods and queries as %iKnow.Queries.MetadataAPI, exposed as WebMethod methods."}),"\n",(0,a.jsx)(t.p,{children:"See the classdocs for %iKnow.Queries.MetadataAPI for more information."}),"\n",(0,a.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(t.h3,{id:"namespace",children:"NAMESPACE"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter NAMESPACE = "http://www.intersystems.com/iKnow/Queries/MetadataWSAPI";\n'})}),"\n",(0,a.jsx)(t.h3,{id:"servicename",children:"SERVICENAME"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter SERVICENAME = "iKnow.Queries.MetadataWSAPI";\n'})}),"\n",(0,a.jsx)(t.h3,{id:"useclassnamespaces",children:"USECLASSNAMESPACES"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter USECLASSNAMESPACES = 1;\n"})}),"\n",(0,a.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(t.h3,{id:"addfield",children:"AddField"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod AddField(domainId As %Integer, fieldName As %String, supportedOperators As %ListOfDataTypes = {$lb($$$MDOPEQUAL)}, dataType As %String = {$$$MDDTSTRING}, storage As %Integer = {$$$MDSTNORMAL}, caseSensitive As %Boolean = 0, lovId As %Integer = -1, validateLov As %Boolean = 1, hidden As %Boolean = 0) As %Library.Integer [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Adds a field definition with the given name and properties."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The supportedOperators parameter specifies which operations (such as $$$MDOPEQUAL) will be available for filtering criteria"}),"\n",(0,a.jsx)(t.li,{children:"For dataType, choose either $$$MDDTSTRING, $$$MDDTNUMBER or $$$MDDTDATE ($horolog format)"}),"\n",(0,a.jsx)(t.li,{children:"Use storage to control how values are stored: $$$MDSTNORMAL for cases where you would use a normal index, $$$MDSTBITMAP where you would use a bitmap index (few different metadata values compared to total # of records)"}),"\n",(0,a.jsx)(t.li,{children:"If dataType is $$$MDDTSTRING, caseSensitive controls whether or not string values should be treated as case-sensitive."}),"\n",(0,a.jsx)(t.li,{children:"The lovId and validateLov parameters define whether a List Of Values is available for this metadata field and whether input values should be verified against this list. See also AddListOfValues."}),"\n",(0,a.jsx)(t.li,{children:"If hidden is set to true, the field will by default not appear in metadata field and value lists."}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"addlistofvalues",children:"AddListOfValues"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod AddListOfValues(domainId As %Integer, lovName As %String, autoExtend As %Boolean = 1) As %Library.Integer [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Adds a List Of Values to the domain, which can then be used as a list of allowable values for one or more metadata fields."}),"\n",(0,a.jsx)(t.h3,{id:"addlovvalue",children:"AddLovValue"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod AddLovValue(domainId As %Integer, lovId As %Integer, value As %String, rank As %Integer = -1) As %Boolean [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Adds a new value to an existing List Of Values"}),"\n",(0,a.jsx)(t.h3,{id:"createfilter",children:"CreateFilter"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod CreateFilter(pDomainId As %Integer, pFieldName As %String, pOperator As %String, pValue As %String) As %iKnow.Filters.Filter [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Create a %iKnow.Filters.Filter instance that filters sources according to the given criteria, using the filter class compatible with this %iKnow.Queries.MetadataI implementation."}),"\n",(0,a.jsx)(t.p,{children:"For the default MetadataAPI, this is a %iKnow.Filters.SimpleMetadataFilter instance."}),"\n",(0,a.jsx)(t.h3,{id:"getfieldid",children:"GetFieldId"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetFieldId(domainId As %Integer, fieldName As %String) As %Library.Integer [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:'Returns the metadata field ID corresponding to the supplied name, or "" if none exists in this domain.'}),"\n",(0,a.jsx)(t.h3,{id:"getfieldvalues",children:"GetFieldValues"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetFieldValues(domainId As %Integer, fieldName As %String, page As %Integer = 1, pageSize As %Integer = 10) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns all the distinct values currently in use for a given metadata field (by name). See also GetUniqueValues for a version returning the number of sources with this metadata value and sorting options."}),"\n",(0,a.jsx)(t.h3,{id:"getfieldvaluesbyid",children:"GetFieldValuesById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetFieldValuesById(domainId As %Integer, mdFieldId As %Integer, page As %Integer = 1, pageSize As %Integer = 10) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns all the distinct values currently in use for a given metadata field (by ID)."}),"\n",(0,a.jsx)(t.h3,{id:"getfields",children:"GetFields"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetFields(domainId As %Integer, includeHidden As %Boolean = 0) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns all field definitions (including their properties) for the given domain."}),"\n",(0,a.jsx)(t.p,{children:"Setting includeHidden to true will also return any metadata fields marked as 'hidden'."}),"\n",(0,a.jsx)(t.h3,{id:"getlovvalues",children:"GetLovValues"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetLovValues(domainId As %Integer, lovId As %Integer) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns all the allowed values for a given metadata LOV."}),"\n",(0,a.jsx)(t.h3,{id:"getlovs",children:"GetLovs"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetLovs(domainId As %Integer, page As %Integer = 1, pageSize As %Integer = 10) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns all LOVs (List of Values) registered for this domain."}),"\n",(0,a.jsx)(t.h3,{id:"getmetaspreadbyentities",children:"GetMetaSpreadByEntities"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetMetaSpreadByEntities(pDomainId As %Integer, pFieldName As %String, pEntityList As %ListOfDataTypes, pFilter As %String(MAXLEN=32767) = "", pSetOp As %Integer = {$$$UNION}) As %Library.Integer [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:'Returns the "spread" of metadata values (number of distinct values) for field pFieldName for the entities in pEntityList, in the sources satisfying pFilter. When specifying multiple entities, sources (and their metadata values) are included based on the value of pSetOp: if pSetOp = $$$UNION, only one entity has to be present (default), if pSetOp = $$$INTERSECT, all of them need to be present.'}),"\n",(0,a.jsx)(t.h3,{id:"getmetaspreadbyentityids",children:"GetMetaSpreadByEntityIds"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetMetaSpreadByEntityIds(pDomainId As %Integer, pFieldName As %String, pEntityIdList As %ListOfDataTypes, pFilter As %String(MAXLEN=32767) = "", pSetOp As %Integer = {$$$UNION}) As %Library.Integer [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:'Returns the "spread" of metadata values (number of distinct values) for field pFieldName for the entities in pEntityIdList, in the sources satisfying pFilter. When specifying multiple entities, sources (and their metadata values) are included based on the value of pSetOp: if pSetOp = $$$UNION, only one entity has to be present (default), if pSetOp = $$$INTERSECT, all of them need to be present.'}),"\n",(0,a.jsx)(t.h3,{id:"getmetaspreadinternal",children:"GetMetaSpreadInternal"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetMetaSpreadInternal(pDomainId As %Integer, pFieldId As %Integer, pType As %String = "ENTITY", pFilter As %String(MAXLEN=32767) = "", pSetOp As %Integer = {$$$UNION}) As %Library.Integer [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.h3,{id:"getunivalue",children:"GetUniValue"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetUniValue(pDomainId As %Integer, pUniValueId As %Integer) As %Library.String [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the unique metadata value corresponding to the supplied pUniValueId."}),"\n",(0,a.jsx)(t.h3,{id:"getuniquevaluecount",children:"GetUniqueValueCount"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetUniqueValueCount(pDomainId As %Integer, pFieldName As %String, pFilter As %String(MAXLEN=32767) = "") As %Library.Integer [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:"Returns the number of unique metadata values for a given field pFieldName in the sources satisfying the supplied filter, after normalization based on the field specifications such as case sensitivity and data type."}),"\n",(0,a.jsx)(t.h3,{id:"getuniquevalues",children:"GetUniqueValues"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetUniqueValues(pDomainId As %Integer, pFieldName As %String, pPage As %Integer = 1, pPageSize As %Integer = 10, pFilter As %String(MAXLEN=32767) = "", pSortType As %String = "") As %XML.DataSet [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:'Returns all the unique metadata values for field pFieldName in sources satisfying the supplied filter, optionally sorted by value (pSortType = "VALUE") or frequency (pSortType = "FREQUENCY"). The returned frequency represents the number of sources with this metadata value (satisfying the filter).'}),"\n",(0,a.jsx)(t.p,{children:"NOTE: sorting by value is only precise up to the 150 first characters"}),"\n",(0,a.jsx)(t.h3,{id:"getuniquevaluesbyid",children:"GetUniqueValuesById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetUniqueValuesById(pDomainId As %Integer, pFieldId As %Integer, pPage As %Integer = 1, pPageSize As %Integer = 10, pFilter As %String(MAXLEN=32767) = "", pSortType As %String = "") As %XML.DataSet [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:'Returns all the unique metadata values for field pFieldId in sources satisfying the supplied filter, optionally sorted by value (pSortType = "VALUE") or frequency (pSortType = "FREQUENCY"). The returned frequency represents the number of sources with this metadata value (satisfying the filter).'}),"\n",(0,a.jsx)(t.p,{children:"NOTE: sorting by value is only precise up to the 150 first characters"}),"\n",(0,a.jsx)(t.h3,{id:"getvalue",children:"GetValue"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetValue(domainId As %Integer, fieldName As %String, externalId As %String) As %Library.String [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the actual value for a given metadata field (by name) and source (by External ID)."}),"\n",(0,a.jsx)(t.h3,{id:"getvaluebyid",children:"GetValueById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetValueById(domainId As %Integer, fieldId As %Integer, srcId As %Integer) As %Library.String [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the actual value for a given metadata field (by ID) and source (by Source ID)."}),"\n",(0,a.jsx)(t.h3,{id:"getvalues",children:"GetValues"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetValues(domainId As %Integer, externalId As %String, includeHidden As %Boolean = 0) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the actual metadata values for the given source (by External ID)."}),"\n",(0,a.jsx)(t.p,{children:"Setting includeHidden to true will also return the values for hidden metadata fields."}),"\n",(0,a.jsx)(t.h3,{id:"getvaluesbyid",children:"GetValuesById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod GetValuesById(domainId As %Integer, srcId As %Integer, includeHidden As %Boolean = 0) As %XML.DataSet [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the actual metadata values for the given source (by Source ID)."}),"\n",(0,a.jsx)(t.p,{children:"Setting includeHidden to true will also return the values for hidden metadata fields."}),"\n",(0,a.jsx)(t.h3,{id:"removefield",children:"RemoveField"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod RemoveField(domainId As %Integer, fieldName As %String) As %Boolean [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Removes a metadata field (by name) from the domain, including all references by existing sources."}),"\n",(0,a.jsx)(t.h3,{id:"removefieldbyid",children:"RemoveFieldById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod RemoveFieldById(domainId As %Integer, fieldId As %Integer) As %Boolean [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Removes a metadata field (by ID) from the domain, including all references by existing sources."}),"\n",(0,a.jsx)(t.h3,{id:"setvalue",children:"SetValue"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod SetValue(domainId As %Integer, fieldName As %String, externalId As %String, value As %String) As %Boolean [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Sets (or replaces if it exists) the value for a given metadata field (by name) for a given source (by External ID)."}),"\n",(0,a.jsx)(t.p,{children:"Values for fields of type $$$MDDTSTRING are normalized and stripped of whitespace and control characters at the beginning and end of the string."}),"\n",(0,a.jsx)(t.h3,{id:"setvaluebyid",children:"SetValueById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod SetValueById(domainId As %Integer, fieldId As %Integer, srcId As %Integer, value As %String) As %Boolean [ WebMethod ]\n"})}),"\n",(0,a.jsx)(t.p,{children:'Sets (or replaces if it exists) the value for a given metadata field (by ID) for a given source (by Source ID). Explicitly setting a value to "" (null/empty string) will erase the current value.'}),"\n",(0,a.jsx)(t.p,{children:"Values for fields of type $$$MDDTSTRING are normalized and stripped of whitespace and control characters at the beginning and end of the string."}),"\n",(0,a.jsx)(t.h3,{id:"updatefield",children:"UpdateField"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod UpdateField(domainId As %Integer, fieldName As %String, supportedOperators As %ListOfDataTypes = "", storage As %Integer = -1, hidden As %Integer = -1, lovId As %Integer = -2, validateLov As %Integer = -1) As %Boolean [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:"Updates the properties for a given metadata field (by name). See also AddField."}),"\n",(0,a.jsx)(t.p,{children:'Specifying a "" for the supportedOperators will leave the current value for that property. Similarly, specifying -1 for storage, hidden and validateLov or -2 for lovId will leave their respective values unmodified. Setting lovId to -1 will unset the LOV for this field.'}),"\n",(0,a.jsx)(t.h3,{id:"updatefieldbyid",children:"UpdateFieldById"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod UpdateFieldById(domainId As %Integer, fieldId As %Integer, supportedOperators As %ListOfDataTypes = "", storage As %Integer = -1, hidden As %Integer = -1, lovId As %Integer = -2, validateLov As %Integer = -1) As %Boolean [ WebMethod ]\n'})}),"\n",(0,a.jsx)(t.p,{children:"Updates the properties for a given metadata field (by ID). See also AddField."}),"\n",(0,a.jsx)(t.p,{children:'Specifying a "" for the supportedOperators will leave the current value for that property. Similarly, specifying -1 for storage, hidden and validateLov or -2 for lovId will leave their respective values unmodified. Setting lovId to -1 will unset the LOV for this field.'})]})}function o(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>d});var a=s(96540);const i={},n=a.createContext(i);function l(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);