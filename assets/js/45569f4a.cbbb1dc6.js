"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[20667],{80038:(e,n,a)=>{a.r(n),a.d(n,{contentTitle:()=>o,default:()=>d,frontMatter:()=>i,toc:()=>r});var s=a(74848),t=a(28453);const i={pagination_prev:null,pagination_next:null},o="%iKnow.DomainDefinition",r=[{value:"XDatas",id:"xdatas",level:2},{value:"Domain",id:"domain",level:3},{value:"Methods",id:"methods",level:2},{value:"%GetModel",id:"getmodel",level:3},{value:"%OnCompileDomain",id:"oncompiledomain",level:3},{value:"%Rename",id:"rename",level:3},{value:"%ApplyDomainParametersInternal",id:"applydomainparametersinternal",level:3},{value:"%ApplyDomainParameters",id:"applydomainparameters",level:3},{value:"%GetDomainName",id:"getdomainname",level:3},{value:"%GetDomainId",id:"getdomainid",level:3},{value:"%CreateDomainClass",id:"createdomainclass",level:3},{value:"%GetParamsAsString",id:"getparamsasstring",level:3},{value:"%Build",id:"build",level:3},{value:"%UpdateDictionaries",id:"updatedictionaries",level:3},{value:"%UpdateMetrics",id:"updatemetrics",level:3},{value:"%OnBeforeBuild",id:"onbeforebuild",level:3},{value:"%OnAfterBuild",id:"onafterbuild",level:3},{value:"%OnBeforeDropData",id:"onbeforedropdata",level:3},{value:"%OnAfterDropData",id:"onafterdropdata",level:3},{value:"%DropData",id:"dropdata",level:3},{value:"%GetExpressionValue",id:"getexpressionvalue",level:3},{value:"%DropDomain",id:"dropdomain",level:3},{value:"%DropManagedConfiguration",id:"dropmanagedconfiguration",level:3},{value:"%DropManagedUserDictionary",id:"dropmanageduserdictionary",level:3},{value:"%CreateStaticElements",id:"createstaticelements",level:3},{value:"%IsProperCode",id:"ispropercode",level:3},{value:"%ParseExpression",id:"parseexpression",level:3},{value:"%GetCustomizations",id:"getcustomizations",level:3}];function l(e){const n={a:"a",code:"code",domain:"domain",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",matching:"matching",p:"p",parameter:"parameter",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"iknowdomaindefinition",children:"%iKnow.DomainDefinition"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Class %iKnow.DomainDefinition Extends %RegisteredObject [ Abstract, CompileAfter = %iKnow.Model.domain, Deprecated, System = 4 ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The InterSystems IRIS NLP iKnow technology is now deprecated. Please see the ",(0,s.jsx)(n.a,{href:"https://docs.intersystems.com/irislatest/csp/docbook/DocBook.UI.Page.cls?KEY=GIKNOW",children:"product documentation"})," for more detail."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For details on using this class"}),", see ",(0,s.jsx)(n.a,{href:"/csp/docbook/Doc.View.cls?FIND=CLASSES+%25iKnow.DomainDefinition",children:"NLP Domains"}),"."]}),"\n",(0,s.jsx)(n.p,{children:'Subclasses of this class declaratively define an iKnow domain and its contents using an XML representation in the Domain XData block. Compiling this class will automatically create the iKnow domain and any static elements or settings within, such as metadata fields, domain parameters and metrics. Using %Build) users can then "build" the contents of the domain, loading any sources from the locations referred to in Domain and populating relevant metadata, matching and metrics.'}),"\n",(0,s.jsx)(n.p,{children:"For a detailed reference of the available elements and attributes of this XData block, consult the class reference for %iKnow.Model.domain and other classes in the %iKnow.Model package."}),"\n",(0,s.jsx)(n.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,s.jsx)(n.h3,{id:"domain",children:"Domain"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'XData Domain [ XMLNamespace = "http://www.intersystems.com/iknow" ]\n'})}),"\n",(0,s.jsx)(n.p,{children:"An XML representation of the domain this class defines."}),"\n",(0,s.jsx)(n.p,{children:"For a detailed reference of the available elements and attributes, consult the class reference for %iKnow.Model.domain and other classes in the %iKnow.Model package."}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"getmodel",children:"%GetModel"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetModel() As %iKnow.Model.domain [ CodeMode = objectgenerator, Final, GenerateAfter = %DropManagedConfiguration, Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Main method to process the contents of Domain at compile-time and return a %iKnow.Model.domain representation of it at runtime, as well as generating a number of other artefacts (code and static iKnow domain entries) for this domain."}),"\n",(0,s.jsx)(n.h3,{id:"oncompiledomain",children:"%OnCompileDomain"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %OnCompileDomain() As %Status [ ForceGenerate, GenerateAfter = %GetCustomizations, Internal ]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rename",children:"%Rename"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %Rename(pFrom, pTo) As %Status [ CodeMode = objectgenerator, ForceGenerate, Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Wrapper method to ensure the managing domain definition class will be executing this privileged action."}),"\n",(0,s.jsx)(n.h3,{id:"applydomainparametersinternal",children:"%ApplyDomainParametersInternal"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %ApplyDomainParametersInternal(pDomain As %iKnow.Model.domain) As %Status [ Internal ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Applies any domain parameters registered as ",(0,s.jsx)(n.parameter,{children:" elements in the pDomain model passed in."})]}),"\n",(0,s.jsx)(n.h3,{id:"applydomainparameters",children:"%ApplyDomainParameters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %ApplyDomainParameters() As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Internal method invoking %ApplyDomainParametersInternal using the runtime result of %GetModel"}),"\n",(0,s.jsx)(n.h3,{id:"getdomainname",children:"%GetDomainName"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetDomainName() As %String [ CodeMode = objectgenerator, GenerateAfter = %GetModel ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the domain name as defined in Domain"}),"\n",(0,s.jsx)(n.h3,{id:"getdomainid",children:"%GetDomainId"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetDomainId() As %Integer [ CodeMode = objectgenerator, GenerateAfter = %GetModel ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the domain ID corresponding to the domain defined in Domain"}),"\n",(0,s.jsx)(n.h3,{id:"createdomainclass",children:"%CreateDomainClass"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %CreateDomainClass(pDomDefClassName As %String, pDomain As %iKnow.Model.domain) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Creates an %iKnow.AbstractDomain class containing utility methods for building the various domain elements described in Domain"}),"\n",(0,s.jsx)(n.h3,{id:"getparamsasstring",children:"%GetParamsAsString"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %GetParamsAsString(pParams As %ListOfObjects, pWrapList As %Boolean = 0, pDomDefClassName As %String = "", Output pSC As %Status) As %String [ Internal, Private ]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"build",children:"%Build"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %Build(pVerbose As %Boolean = 1, ByRef pParams, pAsync As %Boolean = 0) As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %GetModel ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Invoking this method will ",(0,s.jsx)(n.em,{children:"build"})," the domain described in Domain, which includes loading data and dictionaries, matching dictionaries and building metrics, depending on the various settings of the ",(0,s.jsx)(n.domain,{children:" element and its sub-elements."})]}),"\n",(0,s.jsx)(n.p,{children:"The pVerbose argument controls whether status output is provided to stdev (if pAsync=0) or written to a global for GUI pickup (pAsync=1, for internal use only)."}),"\n",(0,s.jsx)(n.h3,{id:"updatedictionaries",children:"%UpdateDictionaries"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %UpdateDictionaries(pDropFirst As %Boolean = 0, pMatch As %Boolean = 1, pVerbose As %Boolean = 1, ByRef pParams, pAsync As %Boolean = 0) As %Status [ CodeMode = objectgenerator, Final, GenerateAfter = %GetModel ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This method will update dictionaries based on the current contents of the ",(0,s.jsx)(n.matching,{children:" element in Domain, without making any changes to the current data (in terms of sources) already stored in the domain. If pMatch is 1, all sources in the domain will be matched after the dictionaries are updated. If pDropFirst is 1, the current dictionaries will first be dropped from the domain, otherwise only new dictionary entries will be added (no updates or deletions of existing entries)."})]}),"\n",(0,s.jsx)(n.p,{children:"Build parameters passed through pParams will be used to override default expression values used in the dictionary definitions in the same way as in %Build."}),"\n",(0,s.jsx)(n.p,{children:"The pVerbose argument controls whether status output is provided to stdev (if pAsync=0) or written to a global for GUI pickup (pAsync=1, for internal use only)."}),"\n",(0,s.jsx)(n.h3,{id:"updatemetrics",children:"%UpdateMetrics"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %UpdateMetrics(pDropFirst As %Boolean = 1, pVerbose As %Boolean = 1) As %Status [ Final ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"This method will explicitly rebuild all metrics in the domain described in Domain, optionally dropping any existing values first if pDropFirst is 1."}),"\n",(0,s.jsx)(n.p,{children:"See also the BuildAll() method in %iKnow.Metrics.MetricBuilder."}),"\n",(0,s.jsx)(n.h3,{id:"onbeforebuild",children:"%OnBeforeBuild"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %OnBeforeBuild(pDomainId As %Integer) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Callback invoked at the start of %Build. Subclasses can implement this method to execute custom code at the start of a domain build operation."}),"\n",(0,s.jsx)(n.h3,{id:"onafterbuild",children:"%OnAfterBuild"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %OnAfterBuild(pDomainId As %Integer) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Callback invoked at the end of %Build. Subclasses can implement this method to execute custom code at the end of a domain build operation."}),"\n",(0,s.jsx)(n.h3,{id:"onbeforedropdata",children:"%OnBeforeDropData"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %OnBeforeDropData(pDomainId As %Integer, pDropDictionaries As %Boolean = 1, pDropSkipLists As %Boolean = 1) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Callback invoked at the start of %DropData. Subclasses can implement this method to execute custom code at the start of a drop data operation."}),"\n",(0,s.jsx)(n.h3,{id:"onafterdropdata",children:"%OnAfterDropData"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %OnAfterDropData(pDomainId As %Integer, pDropDictionaries As %Boolean = 1, pDropSkipLists As %Boolean = 1) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Callback invoked at the end of %DropData. Subclasses can implement this method to execute custom code at the end of a drop data operation."}),"\n",(0,s.jsx)(n.h3,{id:"dropdata",children:"%DropData"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %DropData(pDropDictionaries As %Boolean = 1, pDropSkipLists As %Boolean = 0) As %Status [ Final, ForceGenerate ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Drops all non-static data from the domain defined by this class. Depending on the values of pDropDictionaries and pDropSkipLists, dictionary info and Skiplists are purged as well."}),"\n",(0,s.jsx)(n.h3,{id:"getexpressionvalue",children:"%GetExpressionValue"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetExpressionValue(pName As %String, Output pValue As %String, ByRef pParams) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Evaluates the expression named pName and returns the result by reference."}),"\n",(0,s.jsx)(n.h3,{id:"dropdomain",children:"%DropDomain"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %DropDomain() As %Status [ Final, ForceGenerate, Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"INTERNAL METHOD - DO NOT INVOKE Drops the underlying domain as part of %iKnow.DomainProjection.RemoveProjection()"}),"\n",(0,s.jsx)(n.h3,{id:"dropmanagedconfiguration",children:"%DropManagedConfiguration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %DropManagedConfiguration(pConfigId As %Integer) As %Status [ Final, ForceGenerate, Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"INTERNAL METHOD - DO NOT INVOKE Drops a configuration managed by this domain as part of %iKnow.DomainProjection.RemoveProjection()"}),"\n",(0,s.jsx)(n.h3,{id:"dropmanageduserdictionary",children:"%DropManagedUserDictionary"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %DropManagedUserDictionary(pUserDictId As %Integer) As %Status [ Final, ForceGenerate, Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"INTERNAL METHOD - DO NOT INVOKE Drops a user dictionary managed by this domain as part of %iKnow.DomainProjection.RemoveProjection()"}),"\n",(0,s.jsx)(n.h3,{id:"createstaticelements",children:"%CreateStaticElements"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %CreateStaticElements(pDomain As %iKnow.Model.domain, pDomainId As %Integer) As %Status [ Final, Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"INTERNAL METHOD - DO NOT INVOKE"}),"\n",(0,s.jsx)(n.h3,{id:"ispropercode",children:"%IsProperCode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %IsProperCode(pExpression As %String) As %Boolean [ Internal ]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parseexpression",children:"%ParseExpression"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %ParseExpression(pDomDefClassName As %String, pExpression As %String, Output pCode As %String, Output pDependencies) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Returns the code to populate a variable with a value for pExpression. The code returned can be used as if it were a quoted string"}),"\n",(0,s.jsx)(n.h3,{id:"getcustomizations",children:"%GetCustomizations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetCustomizations(Output pCustomizations, Output pMetadata As %List) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(n.p,{children:'Callback method to define customizations of the generated table structures if objectsPackage\'="" See also CreateDomainTables() in %iKnow.Tables.Utils'})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var s=a(96540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);