"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[53285],{17543:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>a,default:()=>c,frontMatter:()=>i,toc:()=>l});var t=n(74848),r=n(28453);const i={pagination_prev:null,pagination_next:null},a="%Studio.SourceControl.ISC",l=[{value:"Parameters",id:"parameters",level:2},{value:"SrcVer",id:"srcver",level:3},{value:"Version",id:"version",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"Menu",id:"menu",level:3},{value:"Methods",id:"methods",level:2},{value:"Login",id:"login",level:3},{value:"OutputInfo",id:"outputinfo",level:3},{value:"OnBeforeSave",id:"onbeforesave",level:3},{value:"OnBeforeLoad",id:"onbeforeload",level:3},{value:"Load",id:"load",level:3},{value:"OnBeforeTimestamp",id:"onbeforetimestamp",level:3},{value:"OnAfterSave",id:"onaftersave",level:3},{value:"OnAfterCompile",id:"onaftercompile",level:3},{value:"ExportCSPFile",id:"exportcspfile",level:3},{value:"ImportCSPFile",id:"importcspfile",level:3},{value:"GetStatus",id:"getstatus",level:3},{value:"IsInSourceControl",id:"isinsourcecontrol",level:3},{value:"ExternalName",id:"externalname",level:3},{value:"CheckIn",id:"checkin",level:3},{value:"RunCmd",id:"runcmd",level:3},{value:"SecureRunCmd",id:"secureruncmd",level:3},{value:"CheckOut",id:"checkout",level:3},{value:"UndoCheckout",id:"undocheckout",level:3},{value:"Compile",id:"compile",level:3},{value:"GetLatest",id:"getlatest",level:3},{value:"SetFileReadOnly",id:"setfilereadonly",level:3},{value:"SetFileWriteable",id:"setfilewriteable",level:3},{value:"UpdateSources",id:"updatesources",level:3},{value:"JobUpdateSources",id:"jobupdatesources",level:3},{value:"AddToSourceControl",id:"addtosourcecontrol",level:3},{value:"RemoveFromSourceControl",id:"removefromsourcecontrol",level:3},{value:"ExtName",id:"extname",level:3},{value:"BackupName",id:"backupname",level:3},{value:"Name",id:"name",level:3},{value:"InternalNameFromExtName",id:"internalnamefromextname",level:3},{value:"Disconnect",id:"disconnect",level:3},{value:"Reconnect",id:"reconnect",level:3},{value:"UserAction",id:"useraction",level:3},{value:"AfterUserAction",id:"afteruseraction",level:3},{value:"OnMenuItem",id:"onmenuitem",level:3},{value:"P4Cmd",id:"p4cmd",level:3},{value:"SecureP4Cmd",id:"securep4cmd",level:3},{value:"GeneratePerforceTicket",id:"generateperforceticket",level:3},{value:"ValidatePerforceTicket",id:"validateperforceticket",level:3},{value:"StorePerforceTicket",id:"storeperforceticket",level:3},{value:"ClearPerforceTicket",id:"clearperforceticket",level:3},{value:"AddItemsToSourceControl",id:"additemstosourcecontrol",level:3},{value:"AddClassesToSourceControl",id:"addclassestosourcecontrol",level:3},{value:"AddPackagesToSourceControl",id:"addpackagestosourcecontrol",level:3},{value:"Disconnected",id:"disconnected",level:3},{value:"Locked",id:"locked",level:3},{value:"Lock",id:"lock",level:3},{value:"Unlock",id:"unlock",level:3},{value:"GetCredentials",id:"getcredentials",level:3},{value:"SetCredentials",id:"setcredentials",level:3},{value:"DefaultCredentialsDefined",id:"defaultcredentialsdefined",level:3},{value:"GetSharedWorkspace",id:"getsharedworkspace",level:3},{value:"SetSharedWorkspace",id:"setsharedworkspace",level:3},{value:"IsSharedDevInstance",id:"isshareddevinstance",level:3},{value:"DisconnectItem",id:"disconnectitem",level:3},{value:"ReconnectItem",id:"reconnectitem",level:3},{value:"IsGenerated",id:"isgenerated",level:3},{value:"IsMapped",id:"ismapped",level:3},{value:"IsExcluded",id:"isexcluded",level:3},{value:"BaselineExport",id:"baselineexport",level:3},{value:"IsSchemaStandard",id:"isschemastandard",level:3},{value:"BaselineCSPDir",id:"baselinecspdir",level:3},{value:"BaselineExportItem",id:"baselineexportitem",level:3},{value:"BaselineExportEnsembleExclude",id:"baselineexportensembleexclude",level:3},{value:"DSCheckpointExport",id:"dscheckpointexport",level:3},{value:"ExportDefaults",id:"exportdefaults",level:3},{value:"ReadOnly",id:"readonly",level:3},{value:"GetHistoryLink",id:"gethistorylink",level:3},{value:"DisconnectedReconcile",id:"disconnectedreconcile",level:3},{value:"DirectoryInventory",id:"directoryinventory",level:3},{value:"OnToolsCompile",id:"ontoolscompile",level:3},{value:"IsTrakCare",id:"istrakcare",level:3},{value:"InstanceVersion",id:"instanceversion",level:3},{value:"Version",id:"version-1",level:3},{value:"OnAfterStorage",id:"onafterstorage",level:3},{value:"CheckIndexes",id:"checkindexes",level:3}];function o(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"studiosourcecontrolisc",children:"%Studio.SourceControl.ISC"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class %Studio.SourceControl.ISC Extends %Studio.SourceControl.Base [ System = 4 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This class is used internally by InterSystems. You should not make direct use of it within your applications. There is no guarantee made about either the behavior or future operation of this class."}),"\n",(0,t.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(s.h3,{id:"srcver",children:"SrcVer"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter SrcVer = "$Id: //iris/2024.3.0/databases/sys/cls/Studio/SourceControl/ISC.xml#1 $";\n'})}),"\n",(0,t.jsx)(s.p,{children:"This Parameter should be updated when synced from Perforce"}),"\n",(0,t.jsx)(s.h3,{id:"version",children:"Version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter Version = 210;\n"})}),"\n",(0,t.jsx)(s.p,{children:"Revision number of this class when compiled as part of the //custom_ccrs/_common/config/... branch. This version will not be updated (by design) when the class is integrated to other branches. This allows the user to tell what version of the Studio client tools are in use."}),"\n",(0,t.jsx)(s.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,t.jsx)(s.h3,{id:"menu",children:"Menu"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"XData Menu\n"})}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"login",children:"Login"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method Login(Name As %String, Password As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Display connection information in the Output display"}),"\n",(0,t.jsx)(s.h3,{id:"outputinfo",children:"OutputInfo"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OutputInfo()\n"})}),"\n",(0,t.jsx)(s.h3,{id:"onbeforesave",children:"OnBeforeSave"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method OnBeforeSave(InternalName As %String, Location As %String = "", Object As %RegisteredObject = {$$$NULLOREF}) As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Called before the item is saved to the database. It is passed a reference to the current temporary storage of this item so that it can be modified before the save completes. If you quit with an error value then it will abort the save."}),"\n",(0,t.jsx)(s.h3,{id:"onbeforeload",children:"OnBeforeLoad"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnBeforeLoad(InternalName As %String, display As %Boolean = 1) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"load",children:"Load"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Load(InternalName As %String, display As %Boolean = 1) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"onbeforetimestamp",children:"OnBeforeTimestamp"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnBeforeTimestamp(InternalName As %String)\n"})}),"\n",(0,t.jsx)(s.h3,{id:"onaftersave",children:"OnAfterSave"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnAfterSave(InternalName As %String, Object As %RegisteredObject) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"onaftercompile",children:"OnAfterCompile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnAfterCompile(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"exportcspfile",children:"ExportCSPFile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExportCSPFile(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"importcspfile",children:"ImportCSPFile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ImportCSPFile(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"getstatus",children:"GetStatus"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetStatus(InternalName As %String, ByRef IsInSourceControl As %Boolean, ByRef Editable As %Boolean, ByRef IsCheckedOut As %Boolean, ByRef UserCheckedOut As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Return information about this entity."}),"\n",(0,t.jsx)(s.p,{children:"This method checks the current status of the item, seeing whether or not it is in source control (based on an exported copy of the item on disk), and if it is in source control, whether it is currently checked out (based on whether the file is Readonly or not)."}),"\n",(0,t.jsx)(s.p,{children:"If the file is checked out, this method will check to find the value of $USERNAME for whomever performed CheckOut. If the current $USERNAME does not match, then the user will not be permitted to edit the file as it has been checked out by another user."}),"\n",(0,t.jsx)(s.h3,{id:"isinsourcecontrol",children:"IsInSourceControl"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method IsInSourceControl(InternalName As %String) As %Boolean [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"externalname",children:"ExternalName"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method ExternalName(InternalName As %String) As %String [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"checkin",children:"CheckIn"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method CheckIn(InternalName As %String, Description As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check this routine/class/csp file into source control."}),"\n",(0,t.jsx)(s.h3,{id:"runcmd",children:"RunCmd"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RunCmd(cmd As %String, ByRef output As %String, display As %Boolean = 1, stream As %Boolean = 0) As %Status [ Deprecated ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"** DEPRECATED - Use more secure SecureRunCmd instead"}),"\n",(0,t.jsx)(s.p,{children:"Run a shell command and report any error message, return output with lines as subscripts of the array if stream is false (the default) but if stream is true then we will return the output as a stream to be read by the caller."}),"\n",(0,t.jsx)(s.h3,{id:"secureruncmd",children:"SecureRunCmd"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SecureRunCmd(cmd As %String, ByRef args, ByRef output As %String, display As %Boolean = 1, stream As %Boolean = 0, input As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Run a command and report any error message, return output with lines as subscripts of the array if stream is false (the default) but if stream is true then we will return the output as a stream to be read by the caller. Passed the executable name in cmd and the list of arguments as an integer subscripted local array passed in by reference in args."}),"\n",(0,t.jsx)(s.h3,{id:"checkout",children:"CheckOut"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method CheckOut(InternalName As %String, Description As %String, Load As %Boolean = 1) As %Status\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Check this routine/class/csp file out of source control.",(0,t.jsx)(s.br,{}),"\nFollowing successful checkout, the copy of the file on disk is loaded into the Namespace, unless Load is false."]}),"\n",(0,t.jsx)(s.h3,{id:"undocheckout",children:"UndoCheckout"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method UndoCheckout(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"compile",children:"Compile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method Compile(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Compiles InternalName if it still exists. Will skip up-to-date files."}),"\n",(0,t.jsx)(s.h3,{id:"getlatest",children:"GetLatest"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetLatest(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"setfilereadonly",children:"SetFileReadOnly"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetFileReadOnly(pFile As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Wrapper around %File:SetReadOnly to return a %Status"}),"\n",(0,t.jsx)(s.h3,{id:"setfilewriteable",children:"SetFileWriteable"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetFileWriteable(pFile As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Wrapper around %File:SetWriteable to return a %Status"}),"\n",(0,t.jsx)(s.h3,{id:"updatesources",children:"UpdateSources"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UpdateSources() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Update the ^Sources information with the file dates after a build"}),"\n",(0,t.jsx)(s.h3,{id:"jobupdatesources",children:"JobUpdateSources"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod JobUpdateSources() As %String [ ProcedureBlock = 0 ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Job off a background job to update the sources information. It returns -1 if it could not start the job or the $job number if successful."}),"\n",(0,t.jsx)(s.h3,{id:"addtosourcecontrol",children:"AddToSourceControl"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method AddToSourceControl(InternalName As %String, Description As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Called to add this item to source control"}),"\n",(0,t.jsx)(s.h3,{id:"removefromsourcecontrol",children:"RemoveFromSourceControl"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method RemoveFromSourceControl(InternalName As %String, Description As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Called to delete this item from source control"}),"\n",(0,t.jsx)(s.h3,{id:"extname",children:"ExtName"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExtName(InternalName As %String) As %String\n"})}),"\n",(0,t.jsx)(s.p,{children:"Return filename of this item"}),"\n",(0,t.jsx)(s.h3,{id:"backupname",children:"BackupName"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod BackupName(InternalName As %String) As %String\n"})}),"\n",(0,t.jsx)(s.p,{children:"Return filename of backup file of this item."}),"\n",(0,t.jsx)(s.p,{children:"At the time of CheckOut, a local backup of the item in its existing state is written to the file system with a .bak extension. This file will be used on Disconnected systems to restore to the previous state when UndoCheckout is called. It can also be used for diffs from the original file state."}),"\n",(0,t.jsx)(s.h3,{id:"name",children:"Name"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Name(InternalName As %String) As %String\n"})}),"\n",(0,t.jsx)(s.p,{children:"Return the name of this item without the prefix to be added by ExtName"}),"\n",(0,t.jsx)(s.h3,{id:"internalnamefromextname",children:"InternalNameFromExtName"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod InternalNameFromExtName(ExtName, IgnorePercent = 1, IgnoreNonexistent = 1) As %String\n"})}),"\n",(0,t.jsx)(s.p,{children:"Takes a filename within the local Perforce workspace and returns a best guess as to the InternalName. If the file exists then the method will attempt to open it to find the item name. If it does not exist (or if it can't open it) then it will try to determine the item name based on the location in directory tree and the structure of the mappings in ^Sources."}),"\n",(0,t.jsx)(s.p,{children:"If no item in the database can be found to map to the external filename, then if it is a CCR enabled namespace it will return the path translated into the /itemsetsourcelink(_*) import/export format."}),"\n",(0,t.jsx)(s.p,{children:'Unless IgnorePercent argument is set to 0, any %-items will return "".'}),"\n",(0,t.jsx)(s.p,{children:'Unless IgnoreNonexistent argument is set to 0, if the item isn\'t found in the database, then "" will be returned.'}),"\n",(0,t.jsx)(s.p,{children:"Known Limitations (if the physical file doesn't exist):"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Due to this historical act of stripping '%' from the beginning of package names, if there exists both a %-item and a non-%-item which map to the same location, then \"\" will be returned as the result is indeterminate without having access to the source file."}),"\n",(0,t.jsxs)(s.li,{children:["The method currently will not find matches for multi-tier mappings in ^Sources (e.g. ",(0,t.jsx)(s.code,{children:'^Sources("HL7","*")="schema/hl7/"'}),", other than multi-tier mappings under /CSP/"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"disconnect",children:"Disconnect"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Disconnect(Level As %Integer = 1) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Disconnect from Perforce depot."}),"\n",(0,t.jsx)(s.p,{children:"Values for 'Level' parameter are:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"1: Instance is Disconnected but could connect at a future time (default)"}),"\n",(0,t.jsx)(s.li,{children:"2: Instance is Permanently Disconnected (no plans of ever connecting to Perforce)"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"reconnect",children:"Reconnect"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Reconnect() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Reconnect to the Perforce depot and mark all edited as edited."}),"\n",(0,t.jsx)(s.h3,{id:"useraction",children:"UserAction"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method UserAction(Type As %Integer, Name As %String, InternalName As %String, SelectedText As %String, ByRef Action As %String, ByRef Target As %String, ByRef Msg As %String, ByRef Reload As %Boolean) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"afteruseraction",children:"AfterUserAction"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method AfterUserAction(Type As %Integer, Name As %String, InternalName As %String, Answer As %Integer, Msg As %String = "", ByRef Reload As %Boolean) As %Status\n'})}),"\n",(0,t.jsx)(s.h3,{id:"onmenuitem",children:"OnMenuItem"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnMenuItem(MenuName As %String, InternalName As %String, SelectedText As %String, ByRef Enabled As %Boolean, ByRef DisplayName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"p4cmd",children:"P4Cmd"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod P4Cmd(cmd As %String, Output output As %String) As %Status [ Deprecated ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"** DEPRECATED - Use the more secure SecureP4Cmd. Passed a 'p4' command, it runs it with '-ztag' and returns the parsed output"}),"\n",(0,t.jsx)(s.h3,{id:"securep4cmd",children:"SecureP4Cmd"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SecureP4Cmd(ByRef args, Output output As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Passed a 'p4' by reference list of arguments in args, it runs 'p4' with '-ztag' and returns the parsed output"}),"\n",(0,t.jsx)(s.h3,{id:"generateperforceticket",children:"GeneratePerforceTicket"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GeneratePerforceTicket(p4pass As %String = "", ByRef p4ticket As %String) As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"This method will accept a Perforce password and will attempt to generate a Perforce ticket tied to this server for use within the hooks. In the process it will validate a ticket which may already be set, and if it is valid it will keep that ticket."}),"\n",(0,t.jsx)(s.h3,{id:"validateperforceticket",children:"ValidatePerforceTicket"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ValidatePerforceTicket(ByRef timeRemaining As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Validate a ticket and return the amount of time remaining for that ticket. If the ticket is not valid it will clear it from the credential store since it is of no use."}),"\n",(0,t.jsx)(s.h3,{id:"storeperforceticket",children:"StorePerforceTicket"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod StorePerforceTicket(ticket As %String = "") As %Boolean\n'})}),"\n",(0,t.jsx)(s.p,{children:"Stores a Perforce ticket for future use by the current user"}),"\n",(0,t.jsx)(s.h3,{id:"clearperforceticket",children:"ClearPerforceTicket"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ClearPerforceTicket() As %Boolean\n"})}),"\n",(0,t.jsx)(s.p,{children:"Clears out a stored Perforce ticket which may be stored for the current user"}),"\n",(0,t.jsx)(s.h3,{id:"additemstosourcecontrol",children:"AddItemsToSourceControl"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddItemsToSourceControl(ByRef items) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Add the specified items to source control"}),"\n",(0,t.jsx)(s.h3,{id:"addclassestosourcecontrol",children:"AddClassesToSourceControl"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddClassesToSourceControl(classes As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Add the specified classes to source control"}),"\n",(0,t.jsx)(s.h3,{id:"addpackagestosourcecontrol",children:"AddPackagesToSourceControl"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddPackagesToSourceControl(packages As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Add the specified package(s) to source control"}),"\n",(0,t.jsx)(s.h3,{id:"disconnected",children:"Disconnected"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Disconnected() As %Integer [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.p,{children:'Returns value that shows whether or not this instance is "Disconnected" from Perforce.'}),"\n",(0,t.jsx)(s.p,{children:"Return values are:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"0: Instance is Connected"}),"\n",(0,t.jsx)(s.li,{children:"1: Instance is Disconnected but could connect at a future time"}),"\n",(0,t.jsx)(s.li,{children:"2: Instance is Permanently Disconnected (no plans of ever connecting to Perforce)"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"locked",children:"Locked"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Locked() As %String [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.p,{children:'Returns value that shows whether or not this instance is "Locked".'}),"\n",(0,t.jsx)(s.p,{children:"Return values are:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:'"": Instance has never been Locked or Unlocked (default)'}),"\n",(0,t.jsx)(s.li,{children:"0: Instance is Unlocked"}),"\n",(0,t.jsx)(s.li,{children:"1: Instance is Locked"}),"\n",(0,t.jsx)(s.li,{children:"2: Instance is AdminLocked"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"When the instance is Locked or AdminLocked, no changes can be made via Studio. It is possible to change from Locked to NotLocked via different UIs. When an instance is AdminLocked it should only be possible to unlock it via the Unlock method."}),"\n",(0,t.jsx)(s.h3,{id:"lock",children:"Lock"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Lock(Admin As %Boolean = 0) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Lock the source control hooks for this instance."}),"\n",(0,t.jsx)(s.p,{children:"The default setting will be \"Locked\". Passing a '1' for the Admin parameter will set the instance to AdminLocked."}),"\n",(0,t.jsx)(s.p,{children:"See Locked for more details."}),"\n",(0,t.jsx)(s.h3,{id:"unlock",children:"Unlock"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Unlock() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Unlock the source control hooks for this instance."}),"\n",(0,t.jsx)(s.h3,{id:"getcredentials",children:"GetCredentials"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetCredentials(ByRef p4user As %String, ByRef p4passwd As %String, ByRef p4workspace As %String, ByRef p4dir As %String, ByRef p4port As %String) As %Boolean\n"})}),"\n",(0,t.jsx)(s.p,{children:"Accessor method for accessing Perforce Credentials for current $USERNAME; returns false if no credentials were available."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"If there is a user-specific set of credentials defined for the current $USERNAME, these credentials will be returned"}),"\n",(0,t.jsx)(s.li,{children:"If a SharedWorkspace has been defined but there are no credentials for the current $USERSAME, then $USERNAME is returned as p4user assuming it's not a shipped username"}),"\n",(0,t.jsx)(s.li,{children:"If a SharedWorkspace has been defined, then it will be returned in the p4workspace parameter; otherwise the workspace for the credential set will be returned"}),"\n",(0,t.jsx)(s.li,{children:"If credentials exist for this specific $USERNAME, then p4passwd is returned from the the current studio process (the password stored in credentials is ignored)"}),"\n",(0,t.jsx)(s.li,{children:'If there is no data at all in ^%SYS("SourceControl","Credentials"), then the method returns \'true\', assuming the Environment variables are used to store the credentials'}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"setcredentials",children:"SetCredentials"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetCredentials(p4user As %String = "", p4passwd As %String = "", p4workspace As %String = "", p4dir As %String = "", p4port As %String = "") As %Boolean\n'})}),"\n",(0,t.jsx)(s.p,{children:"Accessor method for setting Perforce Credentials, returns false if credentials could not be set."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"If p4user is passed as a string, then it (along with the other arguments) will be the default for this instance"}),"\n",(0,t.jsx)(s.li,{children:"If p4user is of the form $LB(cacheUser, p4user), then p4user only be used when $USERNAME=cacheUser, and all other arguments will be ignored. The workspace details should be set via SetSharedWorkspace(), and the user will be prompted for the p4passwd value at runtime"}),"\n",(0,t.jsx)(s.li,{children:'If p4user is "" , then the default credentials will be cleared'}),"\n",(0,t.jsx)(s.li,{children:'If p4user is of the form $LB(cacheUser,""), then the perforce username for cacheUser will be cleared'}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"defaultcredentialsdefined",children:"DefaultCredentialsDefined"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DefaultCredentialsDefined() As %Boolean [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Method returns true if there are default perforce credentials defined, and false otherwise."}),"\n",(0,t.jsx)(s.p,{children:"NOTE - if there is no credentials data stored at all, the the assumption is made that this is a single-user system that relies on environment variables for Perforce access, and 'true' will be returned so that the user will not be prompted for credentials or told that none are defined. Credentials must be stored entirely in environment variables, or entirely in the DB for a given instance."}),"\n",(0,t.jsx)(s.h3,{id:"getsharedworkspace",children:"GetSharedWorkspace"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetSharedWorkspace(ByRef p4workspace As %String, ByRef p4directory As %String) As %Boolean\n"})}),"\n",(0,t.jsx)(s.p,{children:"Accessor method to get the Perforce Shared Workspace if it is defined; if it is not defined, the method returns false. If this method returns false, then the assumption should be made that this is a single-developer instance (not shared by multiple developers)."}),"\n",(0,t.jsx)(s.p,{children:"The method will check for the existence of a namespace-specific workspace, and will use that if it exists. If a namespace specific workspace is not defined, then it will look for an instance-wide Shared Workspace."}),"\n",(0,t.jsx)(s.p,{children:"This also allows a user to retrieve the stored alternate workspace directory root (-d flag in P4)"}),"\n",(0,t.jsx)(s.h3,{id:"setsharedworkspace",children:"SetSharedWorkspace"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSharedWorkspace(p4workspace As %String = "", p4directory As %String = "", namespace As %String = "") As %Boolean\n'})}),"\n",(0,t.jsx)(s.p,{children:"Accessor method for setting Perforce Shared Workspace; returns false if credentials could not be set."}),"\n",(0,t.jsx)(s.p,{children:"If the namespace argument is not passed, then the values will be set for the entire instance. If it is passed, then the workspace and alternate workspaace directory root will be used just for that specified workspace."}),"\n",(0,t.jsx)(s.p,{children:"This also allows a user to set the alternate workspace directory root (-d flag in P4)."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Important Note:"}),' Passing p4workspace as "" will clear out all of the shared worspace settings, and will merge them into ',(0,t.jsx)(s.code,{children:'^%SYS("SourceControl","PriorSharedWorkspace")'})," for future reference."]}),"\n",(0,t.jsx)(s.h3,{id:"isshareddevinstance",children:"IsSharedDevInstance"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsSharedDevInstance() As %Boolean [ CodeMode = expression ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Indicates whether or not this instance is configured to accomodate multiple concurrent developers",(0,t.jsx)(s.br,{}),"\nIt is considered a Shared development instance if one of the following is true:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"This is a Connected instance and there is a Shared Workspace defined for this instance or namespace"}),"\n",(0,t.jsx)(s.li,{children:"This is a Permanently Disconnected Namespace (Permantently Disconnected means it is outside the InterSystems network and we always assume Shared)"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"disconnectitem",children:"DisconnectItem"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DisconnectItem(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Disconnect this document from source control"}),"\n",(0,t.jsx)(s.h3,{id:"reconnectitem",children:"ReconnectItem"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ReconnectItem(InternalName As %String) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Reconnect this document from source control"}),"\n",(0,t.jsx)(s.h3,{id:"isgenerated",children:"IsGenerated"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsGenerated(InternalName As %String) As %String\n"})}),"\n",(0,t.jsx)(s.h3,{id:"ismapped",children:"IsMapped"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsMapped(name As %String, ByRef sourcedb As %String)\n"})}),"\n",(0,t.jsx)(s.p,{children:"Return true if this item is mapped from a database other than the default routine database. Also return the source database in sourcedb."}),"\n",(0,t.jsx)(s.p,{children:"NOTE: This is available as %RoutineMgr::IsMapped() in 2013.1 and later; it is included in this class to support the source hooks working on earlier versions."}),"\n",(0,t.jsx)(s.h3,{id:"isexcluded",children:"IsExcluded"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsExcluded(InternalName As %String) As %Boolean\n"})}),"\n",(0,t.jsx)(s.p,{children:"Returns 1 if InternalName is excluded from source control"}),"\n",(0,t.jsx)(s.h3,{id:"baselineexport",children:"BaselineExport"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod BaselineExport(classesOnly As %Boolean = 0, interactive = 1, targetDirectory = {$get(^Sources)}, changeToReadonly As %Boolean = 1, includeMapped As %Boolean = {\'$get(^SYS("SourceControl","Misc","LockMapped"))}) As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"This method exports all Classes, Routines, Include files, CSP Application files, and Projects files from a namespace into a file structure that can then be added to Source Control."}),"\n",(0,t.jsx)(s.p,{children:"This should be run from the terminal, and the user will be prompted as to whether they want to export to the current ^Sources location or an alternate location (alternate is recommended)."}),"\n",(0,t.jsx)(s.p,{children:"The method will then iterate through all Classes, Routines, Include files, CSP Application files and Projects and will export them to ^Sources based on the mappings in the ^Sources global."}),"\n",(0,t.jsx)(s.p,{children:'NOTE - this does not export "Generated" classes.'}),"\n",(0,t.jsx)(s.p,{children:"Passing classesOnly as '1' will export only the baseline of the classes. This is useful for exporting all updated XML after changing to a new class compiler version."}),"\n",(0,t.jsx)(s.p,{children:"Pass interactive as 0 in order to call this programmatically."}),"\n",(0,t.jsx)(s.p,{children:"Pass targetDirectory to specify the directory for export (NOTE - this cannot equal ^Sources for TrakCare exports)."}),"\n",(0,t.jsx)(s.p,{children:"Pass boolean changeToReadOnly to control whether the files should be changed to read-only after export (defaults to true)."}),"\n",(0,t.jsx)(s.p,{children:"Pass boolean includeMapped to control whether items mapped from other databases should be included in the export (defaults to true). The default value for this argument will be the inverse of the source hooks LockMapped setting for this namespace (so if nothing is set, then Mapped will be included by default)."}),"\n",(0,t.jsx)(s.h3,{id:"isschemastandard",children:"IsSchemaStandard"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod IsSchemaStandard(pName As %String = "") As %Boolean [ Internal ]\n'})}),"\n",(0,t.jsx)(s.h3,{id:"baselinecspdir",children:"BaselineCSPDir"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method BaselineCSPDir(dir As %String, appDir As %String, app As %String, ToReadOnly As %Boolean = 0, useEnsembleExclusionlist As %Boolean = 0)\n"})}),"\n",(0,t.jsx)(s.p,{children:"Export the contents of a CSP directory"}),"\n",(0,t.jsx)(s.h3,{id:"baselineexportitem",children:"BaselineExportItem"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method BaselineExportItem(InternalName As %String, ToReadOnly As %Boolean = 0, CheckOut As %Boolean = 0, includeMapped As %Boolean = {\'$get(^SYS("SourceControl","Misc","LockMapped"))}) As %Status\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Exports a specific item.",(0,t.jsx)(s.br,{}),"\nIf ToReadOnly is true, then the files will be manually changed to ReadOnly afterwards (for use when exporting from LIVE and leaving items uneditable afterwards).",(0,t.jsx)(s.br,{}),"\nIf CheckOut is true, then the Source Control CheckOut/AddToSourceControl logic is used.",(0,t.jsx)(s.br,{}),"\nIf includeMapped is true, then items mapped from other DBs will be exported, otherwise they will be skipped. The default value for this argument will be the inverse of the source hooks LockMapped setting for this namespace (so if nothing is set, then Mapped will be included by default)."]}),"\n",(0,t.jsx)(s.h3,{id:"baselineexportensembleexclude",children:"BaselineExportEnsembleExclude"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method BaselineExportEnsembleExclude() As %String [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Earlier versions of Ensemble physically copied files into newly created csp applications; these need to be enumerated so they can be skipped by BaselineExport()"}),"\n",(0,t.jsx)(s.h3,{id:"dscheckpointexport",children:"DSCheckpointExport"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DSCheckpointExport(ListOnly As %Boolean = 0, AddNew As %Boolean = 1, ExportAll As %Boolean = 0, Interactive As %Boolean = 1) As %Status\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The initial implementation of DS II did not include source control hooks in the UI, so it is necessary to do check-out / export DSII classes and Folder Items just prior to submitting the changes to Perforce.",(0,t.jsx)(s.br,{}),"\nDSCheckpointExport() will check for the last time that DSCheckpointExport() was run, and will check out and export all changes DS II items since that timestamp. This should work for both Connected and Disconnected instances. If ListOnly is true, then a list will be displayed but nothing will actually be checked out.",(0,t.jsx)(s.br,{}),"\nIf AddNew is true, then all items which are not yet on disk in the local workspace will be marked for 'add' and exported, otherwise, only those already on disk will be exported.",(0,t.jsx)(s.br,{}),"\nIf ExportAll is true, then the timestamp from the previous export will be ignored and all DeepSee work that is in Source Control will be checked out.",(0,t.jsx)(s.br,{}),"\nIf Interactive is true, then the user will be prompted for their Perforce password if it is a Connected instance."]}),"\n",(0,t.jsx)(s.h3,{id:"exportdefaults",children:"ExportDefaults"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExportDefaults(productionName As %String, ByRef filename) As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Export System Default Settings and Add to Source Control or Check Out"}),"\n",(0,t.jsx)(s.h3,{id:"readonly",children:"ReadOnly"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ReadOnly(filename) As %Boolean\n"})}),"\n",(0,t.jsx)(s.p,{children:"Readonly method which will show files marked for User Readonly as readonly even if process is running as root"}),"\n",(0,t.jsx)(s.h3,{id:"gethistorylink",children:"GetHistoryLink"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetHistoryLink(InternalName) As %String\n"})}),"\n",(0,t.jsx)(s.h3,{id:"disconnectedreconcile",children:"DisconnectedReconcile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod DisconnectedReconcile(SourceDir As %String = "", TargetDir As %String = "", IgnoreExtension As %String = "bak", CCR As %String = "", Initialize As %Boolean = 0) As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Takes a Source directory and reconciles it with a Target directory which is under source control:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Files in Source which do not exist in Target will be copied into the Target and AddToSourceControl() will be called"}),"\n",(0,t.jsx)(s.li,{children:"Files in Source which exist as Writeable in Target will be skipped"}),"\n",(0,t.jsx)(s.li,{children:"Files in Source which exist as ReadWrite in Target will call Checkout() and then copied from Source to Target"}),"\n",(0,t.jsx)(s.li,{children:"After all processing, files in Target which are Readonly will call RemoveFromSourceControl()"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"This will only run if the Namespace is in Permanently Disconnected Mode; for Connected clients, use the p4 reconcile feature in p4V"}),"\n",(0,t.jsx)(s.p,{children:"If IgnoreExtension is set then anything with that extension is excluded from reconciliation (e.g. .bak files left over from former local check-outs which didn't get cleaned up for some reason)"}),"\n",(0,t.jsx)(s.p,{children:"If the CCR is set then that value is set in the CCR column of the %Studio.SourceControl.Change table for this uncommitted change"}),"\n",(0,t.jsx)(s.h3,{id:"directoryinventory",children:"DirectoryInventory"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod DirectoryInventory(TopDir As %String = "", ByRef Files, CurrentDir As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Utility Method to walk directory tree and find all files; returned array is keyed by the file minus the top directory and has a value of the full file"}),"\n",(0,t.jsx)(s.h3,{id:"ontoolscompile",children:"OnToolsCompile"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnToolsCompile() [ CodeMode = objectgenerator, Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Handles all compile-time logic for this class"}),"\n",(0,t.jsx)(s.h3,{id:"istrakcare",children:"IsTrakCare"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsTrakCare() As %Boolean [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Returns true if this namespace is a TrakCare namespace (note - this will also catch a HealthShare VIEWERLIB, but we shouldn't be changing any data in there anyway)"}),"\n",(0,t.jsx)(s.h3,{id:"instanceversion",children:"InstanceVersion"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod InstanceVersion() As %Numeric [ CodeMode = expression ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Returns the Major.Minor version for this instance, so it can be used in comparison code which makes sure certain features are used in appropriate versions."}),"\n",(0,t.jsx)(s.h3,{id:"version-1",children:"Version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Version() As %Numeric [ CodeMode = call, Deprecated, Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"Deprecated, do not use; use ..InstanceVersion() instead"}),"\n",(0,t.jsx)(s.h3,{id:"onafterstorage",children:"OnAfterStorage"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Method OnAfterStorage(InternalName As %String, Location As %String = "") As %Status\n'})}),"\n",(0,t.jsx)(s.p,{children:"Called if compilation of the class has modified the storage (or another part of the class) so we need to write out the new version and if the file is not already checked out we need to check it out automatically."}),"\n",(0,t.jsx)(s.h3,{id:"checkindexes",children:"CheckIndexes"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CheckIndexes()\n"})})]})}function c(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>l});var t=n(96540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);