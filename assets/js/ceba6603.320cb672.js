"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[88691],{16860:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>a,default:()=>d,frontMatter:()=>i,toc:()=>r});var s=t(74848),l=t(28453);const i={pagination_prev:null,pagination_next:null},a="%DeepSee.PlugIn.PMML",r=[{value:"Parameters",id:"parameters",level:2},{value:"BASECUBE",id:"basecube",level:3},{value:"LISTINGSOURCE",id:"listingsource",level:3},{value:"PLUGINTYPE",id:"plugintype",level:3},{value:"LISTINGFIELDS",id:"listingfields",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"KPI",id:"kpi",level:3},{value:"Methods",id:"methods",level:2},{value:"GetCubeName",id:"getcubename",level:3},{value:"%OnGetMDX",id:"ongetmdx",level:3},{value:"%OnCompute",id:"oncompute",level:3}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",outputfield:"outputfield",p:"p",pre:"pre",strong:"strong",ul:"ul","x-deepseedatasource":"x-deepseedatasource",...(0,l.R)(),...e.components},t=n["x-deepseedatasource"];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"deepseepluginpmml",children:"%DeepSee.PlugIn.PMML"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Class %DeepSee.PlugIn.PMML Extends %DeepSee.KPIPlugIn [ System = 4 ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This PlugIn implementation executes a predictive model defined in a %DeepSee.PMML.Definition class for every fact in the cell for which the plugin is calculated, and aggregates the predictions. By default, the plugin returns a PredictedValue property containing the aggregated prediction. Additional properties (not listed in KPI) are provided for all ",(0,s.jsx)(n.outputfield,{children:" elements produced by the PMML model."})]}),"\n",(0,s.jsxs)(n.p,{children:["Note: The plugin expects an ",(0,s.jsx)(t,{children:" extension element mapping the DeepSee fact to the PMML's data fields in order to be able to execute the model."})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Filters (configurable)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"%cube"}),": The cube this KPI is executed on"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"aggregate"}),' (default = "average"): How to aggregate the predicted values over different facts.',(0,s.jsx)(n.br,{}),"\nAvailable values are sum, average, max, min, maxFreqValue, maxProbValue, minFreqValue and minProbValue."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PMML"}),": Full class name of the %DeepSee.PMML.Definition containing the model to be executed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ModelName"}),": Name of the model in the class specified through PMML that needs to be executed. If left blank, the first model in the PMML definition will be executed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NullValues"}),' (default = "ignore"): Whether or not to include null predictions when aggregating results. Available values are ignore and count.']}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(n.h3,{id:"basecube",children:"BASECUBE"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter BASECUBE = "*";\n'})}),"\n",(0,s.jsx)(n.h3,{id:"listingsource",children:"LISTINGSOURCE"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter LISTINGSOURCE = "FactTable";\n'})}),"\n",(0,s.jsx)(n.h3,{id:"plugintype",children:"PLUGINTYPE"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter PLUGINTYPE = "Aggregate";\n'})}),"\n",(0,s.jsx)(n.h3,{id:"listingfields",children:"LISTINGFIELDS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter LISTINGFIELDS = "ID";\n'})}),"\n",(0,s.jsx)(n.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,s.jsx)(n.h3,{id:"kpi",children:"KPI"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:'XData KPI [ XMLNamespace = "http://www.intersystems.com/deepsee/kpi" ]\n'})}),"\n",(0,s.jsx)(n.p,{children:"This XData definition defines the KPI."}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"getcubename",children:"GetCubeName"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Method GetCubeName() As %String [ Internal ]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ongetmdx",children:"%OnGetMDX"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Method %OnGetMDX(ByRef pMDX As %String) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Get the base query for this plug-in."}),"\n",(0,s.jsx)(n.h3,{id:"oncompute",children:"%OnCompute"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-objectscript-class",children:"Method %OnCompute(pSQLRS As %SQL.StatementResult, pFactCount As %Integer) As %Status\n"})}),"\n",(0,s.jsx)(n.p,{children:"Compute the median of values within the result set."})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(96540);const l={},i=s.createContext(l);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);