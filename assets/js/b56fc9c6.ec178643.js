"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[60579],{53513:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>r,default:()=>c,frontMatter:()=>i,toc:()=>o});var n=s(74848),a=s(28453);const i={pagination_prev:null,pagination_next:null},r="SYS.DataCheck.RunParameters",o=[{value:"Properties",id:"properties",level:2},{value:"SystemName",id:"systemname",level:3},{value:"MinimumQuerySize",id:"minimumquerysize",level:3},{value:"UseGlobalSelectionMask",id:"useglobalselectionmask",level:3},{value:"UseGlobalSelectionRangeLists",id:"useglobalselectionrangelists",level:3},{value:"GlobalSelectionMask",id:"globalselectionmask",level:3},{value:"DefaultGlobalSelectionMask",id:"defaultglobalselectionmask",level:3},{value:"Throttle",id:"throttle",level:3},{value:"Throttle8Jobs",id:"throttle8jobs",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnValidateObject",id:"onvalidateobject",level:3}];function l(e){const t={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"sysdatacheckrunparameters",children:"SYS.DataCheck.RunParameters"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Class SYS.DataCheck.RunParameters Extends %Persistent\n"})}),"\n",(0,n.jsx)(t.p,{children:"Dynamic parameters for the running system. An instance of this class is referenced by each Destination and affects the behavior of both systems involved in the check. The RunParameters object defines the performance characteristics and what to check. Changes that are saved while the system is running will take immediate effect unless otherwise specified."}),"\n",(0,n.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(t.h3,{id:"systemname",children:"SystemName"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property SystemName As SystemName [ Required ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Name of the DataCheck Destination system that uses this object. Set upon creating the destination object and should not be changed."}),"\n",(0,n.jsx)(t.h3,{id:"minimumquerysize",children:"MinimumQuerySize"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property MinimumQuerySize As %Integer(MINVAL = 1) [ InitialExpression = 32 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"The minimum number of nodes to traverse in a query. This is the granularity, in number of global nodes, with which the system will isolate discrepant global ranges. A value of 1 means that the system will isolate discrepancies down to a single node. Higher values give vastly better performance through unmatched sections."}),"\n",(0,n.jsx)(t.h3,{id:"useglobalselectionmask",children:"UseGlobalSelectionMask"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property UseGlobalSelectionMask As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If true use the per-database selection mask defined in the GlobalSelectionMask array to choose which globals to check. If false, check all globals in all directories."}),"\n",(0,n.jsx)(t.p,{children:"Changes take effect next time a new check is begun (ie on entering the 'Check' phase)."}),"\n",(0,n.jsx)(t.h3,{id:"useglobalselectionrangelists",children:"UseGlobalSelectionRangeLists"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property UseGlobalSelectionRangeLists As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If true use the RangeList objects from the set of Global Selection RangeLists to define additional subscript ranges to include/exclude. If false ignore the Global Selection RangeLists"}),"\n",(0,n.jsx)(t.p,{children:"Changes take effect next time a new check is begun (ie on entering the 'Check' phase)."}),"\n",(0,n.jsx)(t.h3,{id:"globalselectionmask",children:"GlobalSelectionMask"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property GlobalSelectionMask As array Of %String(MAXLEN = 32767);\n"})}),"\n",(0,n.jsx)(t.p,{children:"An array of strings used to determine the set of global names to check in each database. It is keyed by LocalDatabase, which is the local database path for non-mirror DataCheck configurations and the mirror database name for mirrored DataCheck configurations. Keys should be normalized using ##class(SYS.DataCheck.LocalDatabase).Normalize() before being inserted. The value is a mask, or comma-separated list of masks, to select globals. If the value is not defined for a database, it defaults to select all globals."}),"\n",(0,n.jsx)(t.p,{children:"IMPORTANT: Callers that modify this array are responsible for ensuring that the database is specified correctly, and for non-mirror DataCheck configurations, that it has a mapping specified in the DataCheck configuration."}),"\n",(0,n.jsxs)(t.p,{children:["Example masks are as follows:",(0,n.jsx)(t.br,{}),"\nABC* - All strings starting with ABC",(0,n.jsx)(t.br,{}),"\nA:D - All strings between A and D",(0,n.jsx)(t.br,{}),"\nA:D,Y* - All strings between A and D, and all strings starting with Y",(0,n.jsx)(t.br,{}),"\nA:D,'C* - All strings between A and D, except those starting with C"]}),"\n",(0,n.jsx)(t.p,{children:"Changes take effect next time a new check is begun (ie on entering the 'Check' phase)."}),"\n",(0,n.jsx)(t.h3,{id:"defaultglobalselectionmask",children:"DefaultGlobalSelectionMask"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Property DefaultGlobalSelectionMask As %String(MAXLEN = 32767) [ InitialExpression = "*" ];\n'})}),"\n",(0,n.jsx)(t.p,{children:"Default value for GlobalSelectionMask for databases not defined in that array. Applies only when UseGlobalSelectionMask is true."}),"\n",(0,n.jsx)(t.p,{children:"Changes take effect next time a new check is begun (ie on entering the 'Check' phase)."}),"\n",(0,n.jsx)(t.h3,{id:"throttle",children:"Throttle"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Throttle As %Integer(MAXVAL = 10, MINVAL = 1) [ InitialExpression = 2 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"An integer between 1 and 10 to control how much of the system resources (CPU, disk I/O, database cache) the DataCheck system may use. The implementation may differ over time as software and hardware characteristics evolve. The setting can be changed dynamically to tune DataCheck activity up or down. The characteristics of every system are different, but the following general meanings apply:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"A throttle setting of 1 uses no more resources than one process for performing DataCheck queries. In other words, it uses at most one CPU and does only one disk I/O at a time. Whether the resources used are primary CPU or primarily disk I/O depends on whether the data is in buffers already and can vary as the check progresses."}),"\n",(0,n.jsx)(t.li,{children:"As the throttle is raised up to 8, more system resources are consumed at each step. For systems with large amounts of resources (many CPUs, etc), each interval is scaled to increase resource consumption by, very roughly, the same multiplicative factor, such that at a throttle setting of 8, DataCheck uses a large portion of system resources. This takes into account the number of CPUs and other factors. At a throttle setting of 8 the system is still expected to be responsive to a light load of application activity, and settings of 6, 7, or 8 may be an appropriate on a typical system at off-peak hours (weekends or overnights for example)."}),"\n",(0,n.jsx)(t.li,{children:"A throttle setting of 9 is like 8, but allows DataCheck jobs to use the entire buffer pool (unsets the batch flag)."}),"\n",(0,n.jsx)(t.li,{children:"A throttle setting of 10 attempts to utilize nearly all system resources for completing the check."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"throttle8jobs",children:"Throttle8Jobs"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Throttle8Jobs As %Integer [ Internal ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Defaults to 0 and is not typically modified; it can be adjusted for fine-tuning the throttle. This parameter is specific to the details of the throttle implementation. It may change or become defunct in the future if the throttle implementation changes."}),"\n",(0,n.jsx)(t.p,{children:"When set to a non-zero number, overrides the heuristic for determining the number of worker jobs to use. It is the number of jobs to run at throttle setting of 8, which represents the highest number of DataCheck jobs that can run while still allowing the system to be responsive to a light load of application activity. When Throttle8Jobs is zero, its value is implicitly taken as the number of CPUs (on the smaller of the two systems being checked, if their CPU counts are not the same)."}),"\n",(0,n.jsx)(t.p,{children:"The number of jobs used for throttle settings 1-8 is calculated based on this parameter as Throttle8Jobs^((Throttle-1)/7) rounded to the nearest integer, or throttle itself, whichever is greater, but not to exceed Throttle8Jobs. A throttle setting of 9 uses the same number of jobs as 8, but is allowed to use the entire buffer pool. A throttle setting of 10 will not user fewer jobs than Throttle8Jobs, but may use more depending on the number of CPUs."}),"\n",(0,n.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(t.h3,{id:"onvalidateobject",children:"%OnValidateObject"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnValidateObject() As %Status [ Internal, Private, ProcedureBlock = 1, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"This callback method is invoked by the %ValidateObject method to provide notification that the current object is being validated."}),"\n",(0,n.jsx)(t.p,{children:"If this method returns an error then %ValidateObject will fail."})]})}function c(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var n=s(96540);const a={},i=n.createContext(a);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);