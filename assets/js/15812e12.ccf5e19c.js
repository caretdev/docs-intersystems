"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[39730],{15123:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>l,default:()=>d,frontMatter:()=>t,toc:()=>a});var i=s(74848),r=s(28453);const t={pagination_prev:null,pagination_next:null},l="%DeepSee.CubeManager.RegistryMapGroup",a=[{value:"Properties",id:"properties",level:2},{value:"Map",id:"map",level:3},{value:"Cubes",id:"cubes",level:3},{value:"GroupName",id:"groupname",level:3},{value:"IsRegistered",id:"isregistered",level:3},{value:"IsValid",id:"isvalid",level:3},{value:"UpdatePlan",id:"updateplan",level:3},{value:"Disabled",id:"disabled",level:3},{value:"BuildFrequency",id:"buildfrequency",level:3},{value:"BuildTimeUnit",id:"buildtimeunit",level:3},{value:"BuildDayOfWeek",id:"builddayofweek",level:3},{value:"BuildDayOfMonth",id:"builddayofmonth",level:3},{value:"SynchFrequency",id:"synchfrequency",level:3},{value:"SynchTimeUnit",id:"synchtimeunit",level:3},{value:"BuildAsynch",id:"buildasynch",level:3},{value:"UserUpdatesLocked",id:"userupdateslocked",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnNew",id:"onnew",level:3},{value:"BuildGroup",id:"buildgroup",level:3},{value:"SynchronizeGroup",id:"synchronizegroup",level:3},{value:"CheckGroupLocks",id:"checkgrouplocks",level:3},{value:"ToArray",id:"toarray",level:3}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"deepseecubemanagerregistrymapgroup",children:"%DeepSee.CubeManager.RegistryMapGroup"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Class %DeepSee.CubeManager.RegistryMapGroup Extends (%RegisteredObject, %XML.Adaptor, %JSON.Adaptor)\n"})}),"\n",(0,i.jsx)(n.p,{children:"A node representing the named cube groupings within the registry"}),"\n",(0,i.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsx)(n.h3,{id:"map",children:"Map"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Relationship Map As %DeepSee.CubeManager.RegistryMap [ Cardinality = one, Inverse = Groups ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"Reference to the parent map"}),"\n",(0,i.jsx)(n.h3,{id:"cubes",children:"Cubes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Relationship Cubes As %DeepSee.CubeManager.RegistryMapCube [ Cardinality = many, Inverse = Group ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"The collection of cubes that are a part of this group"}),"\n",(0,i.jsx)(n.h3,{id:"groupname",children:"GroupName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property GroupName As %ZEN.Datatype.string;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Display Name for the group."}),"\n",(0,i.jsx)(n.h3,{id:"isregistered",children:"IsRegistered"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property IsRegistered As %ZEN.Datatype.boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,i.jsx)(n.h3,{id:"isvalid",children:"IsValid"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property IsValid As %ZEN.Datatype.boolean;\n"})}),"\n",(0,i.jsx)(n.p,{children:"This group is checked for validity and the result is stored in this property."}),"\n",(0,i.jsx)(n.h3,{id:"updateplan",children:"UpdatePlan"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property UpdatePlan As %String(DISPLAYLIST = ",Manual,Build Only,Build and Synch,Synch Only", VALUELIST = ",Manual,Build,BuildSynch,Synch") [ InitialExpression = "BuildSynch" ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Plan for how the cube is to be managed by the build/synch tasks."}),"\n",(0,i.jsx)(n.h3,{id:"disabled",children:"Disabled"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property Disabled As %ZEN.Datatype.boolean [ InitialExpression = 1 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Disabled = 1 will block all automatic updates while leaving the cube visible in the registry."}),"\n",(0,i.jsx)(n.h3,{id:"buildfrequency",children:"BuildFrequency"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property BuildFrequency As %Integer [ InitialExpression = 1 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Indicates how often the cube is to be built, in units of BuidTimeUnit"}),"\n",(0,i.jsx)(n.h3,{id:"buildtimeunit",children:"BuildTimeUnit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property BuildTimeUnit As %String(DISPLAYLIST = ",Day,Week,Month", VALUELIST = ",Day,Week,Month") [ InitialExpression = "Week" ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Base unit of time for cube builds."}),"\n",(0,i.jsx)(n.h3,{id:"builddayofweek",children:"BuildDayOfWeek"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property BuildDayOfWeek As %String(DISPLAYLIST = ",Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday", VALUELIST = ",1,2,3,4,5,6,7") [ InitialExpression = "1" ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"If week is selected for the BuildTimeUnit, this will allow the user to pick which day of the week the build should take place."}),"\n",(0,i.jsx)(n.h3,{id:"builddayofmonth",children:"BuildDayOfMonth"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property BuildDayOfMonth As %Integer(MAXVAL = 31, MINVAL = 1) [ InitialExpression = 1 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"If Month is selected as the BuildTimeUnit, this will allow the user to pick which day of the month this build should take place."}),"\n",(0,i.jsx)(n.h3,{id:"synchfrequency",children:"SynchFrequency"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property SynchFrequency As %Integer [ InitialExpression = 1 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Indicates how often the cube is to be synched, in units of SynchTimeUnit"}),"\n",(0,i.jsx)(n.h3,{id:"synchtimeunit",children:"SynchTimeUnit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Property SynchTimeUnit As %String(DISPLAYLIST = ",Minute,Hour,Day", VALUELIST = ",Minute,Hour,Day") [ InitialExpression = "Day" ];\n'})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Base unit of time for cube synchs."}),"\n",(0,i.jsx)(n.h3,{id:"buildasynch",children:"BuildAsynch"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property BuildAsynch As %ZEN.Datatype.boolean [ InitialExpression = 1 ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"GROUP DEFAULT - Flag which allows the user to select whether the build executes synchronously or asynchronously. Asynchronous build is the default."}),"\n",(0,i.jsx)(n.h3,{id:"userupdateslocked",children:"UserUpdatesLocked"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Property UserUpdatesLocked As %ZEN.Datatype.boolean [ Internal ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"This is a flag that can be set in the stored registry to prevent users from being able to adjust the Disabled setting and prevents builds from this item in the registry."}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Method %OnNew(pRegGroupName = "") As %Status\n'})}),"\n",(0,i.jsx)(n.p,{children:"This callback automatically performs some of the property settings as it is created for the RegistryMap"}),"\n",(0,i.jsx)(n.h3,{id:"buildgroup",children:"BuildGroup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod BuildGroup(pGroupIndex = "", pAsync As %Boolean = 1, pVerbose As %Boolean = 1, pIndexOnly As %Boolean = 0, pMaxFacts As %Integer = 0, pTracking As %Boolean = 0, pUpdateAll = 0, ByRef pBuildStats) As %Status\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This method walks through all cubes contained in the group and checks to see if it should be updated. Prior to running the synchronize, this method will run the cube's Pre-Synch Code if present.",(0,i.jsx)(n.br,{}),"\nThe cube will be built if any of these conditions are met:",(0,i.jsx)(n.br,{}),"\n- The cube has not been built within the scheduled time period",(0,i.jsx)(n.br,{}),"\n- It is the day of the week/month scheduled for the cube build",(0,i.jsx)(n.br,{}),"\n- A cube is dependent on another cube that has been built in this cycle"]}),"\n",(0,i.jsx)(n.p,{children:"- The pUpdateAll flag is set to 1"}),"\n",(0,i.jsx)(n.h3,{id:"synchronizegroup",children:"SynchronizeGroup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod SynchronizeGroup(pGroupIndex = "", pVerbose As %Boolean = 1, Output pFactsUpdated As %Integer, pUpdateAll = 0, ByRef pSynchronizeStats, pReadCommitted As %Boolean = 1, pCheckReferences As %Boolean = 1, pAsync As %Boolean = 0) As %Status\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This method walks through all cubes contained in the group and checks to see if it should be updated.",(0,i.jsx)(n.br,{}),"\nThe cube will be synchronized if either of these conditions are met:",(0,i.jsx)(n.br,{}),"\n- the cube has not been synchronized within the scheduled time period",(0,i.jsx)(n.br,{}),"\n- a cube is dependent on another cube that has been synchronized in this cycle",(0,i.jsx)(n.br,{}),"\n- The pUpdateAll flag is set to 1",(0,i.jsx)(n.br,{}),"\nand the Pre-Synchronization Code has not set the $$$AbortSynch token to 1"]}),"\n",(0,i.jsx)(n.h3,{id:"checkgrouplocks",children:"CheckGroupLocks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod CheckGroupLocks(pGroup As %DeepSee.CubeManager.RegistryMapGroup, pLocked As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"toarray",children:"ToArray"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Method ToArray(ByRef pGroup, ByRef pCubes, ByRef pBuildOrders) As %Status\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Convert this group object to array form. This will match the index arrays returned using the call",(0,i.jsx)(n.br,{}),"\n%DeepSee.CubeManager.Utils.GetCubeGroups(.pGroups,.pCubes,.pBuildOrders)",(0,i.jsx)(n.br,{}),"\ntrimmed to the subset of only the cubes in this group"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);