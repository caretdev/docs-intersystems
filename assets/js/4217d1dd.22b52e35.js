"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[83276],{69449:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>i,default:()=>d,frontMatter:()=>a,toc:()=>o});var t=n(74848),r=n(28453);const a={pagination_prev:null,pagination_next:null},i="Security.Domains",o=[{value:"Parameters",id:"parameters",level:2},{value:"SOURCECONTROL",id:"sourcecontrol",level:3},{value:"EMSSERVICE",id:"emsservice",level:3},{value:"Properties",id:"properties",level:2},{value:"Description",id:"description",level:3},{value:"Name",id:"name",level:3},{value:"NameLowerCase",id:"namelowercase",level:3},{value:"Methods",id:"methods",level:2},{value:"Change",id:"change",level:3},{value:"Create",id:"create",level:3},{value:"Delete",id:"delete",level:3},{value:"Exists",id:"exists",level:3},{value:"Export",id:"export",level:3},{value:"Get",id:"get",level:3},{value:"GetProperties",id:"getproperties",level:3},{value:"Import",id:"import",level:3},{value:"InUse",id:"inuse",level:3},{value:"Modify",id:"modify",level:3},{value:"StartEMS",id:"startems",level:3},{value:"%OnAfterSave",id:"onaftersave",level:3},{value:"%OnBeforeSave",id:"onbeforesave",level:3},{value:"%OnDelete",id:"ondelete",level:3},{value:"%OnValidateObject",id:"onvalidateobject",level:3},{value:"ListExecute",id:"listexecute",level:3},{value:"ListFetch",id:"listfetch",level:3},{value:"ListClose",id:"listclose",level:3}];function l(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"securitydomains",children:"Security.Domains"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class Security.Domains Extends (%Persistent, %XML.Adaptor, %SYSTEM.Help) [ Final, Inheritance = right, System = 4 ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This class defines the security domains for a system.",(0,t.jsx)(s.br,{}),"\nDomain names have the following properties:"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Domain names are case insensitive."}),"\n",(0,t.jsxs)(s.li,{children:["Maximum length of a domain name is 64 characters.",(0,t.jsx)(s.br,{}),"\nThe %Admin Secure:USE permission is required to operate on a domain"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"The table for this class should be manipulated only through object access, the published API's or through the System Management Portal. It should not be updated through direct SQL access."}),"\n",(0,t.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(s.h3,{id:"sourcecontrol",children:"SOURCECONTROL"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter SOURCECONTROL [ Internal ] = {"Revision path: $Id: //iris/2024.3.0/databases/sys/cls/Security/Domains.xml#1 $"_$c(13,10)_"Last Change:   $DateTime: 2024/10/02 10:58:11 $"_$c(13,10)_"Changelist #:  $Change: 7247250 $"};\n'})}),"\n",(0,t.jsx)(s.h3,{id:"emsservice",children:"EMSSERVICE"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter EMSSERVICE [ Internal ] = "Users";\n'})}),"\n",(0,t.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(s.h3,{id:"description",children:"Description"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Description As %String(MAXLEN = 128) [ Deprecated, Internal ];\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Domain description.",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"name",children:"Name"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Name As %String(MAXLEN = 256, MINLEN = 1) [ Deprecated, Internal, Required ];\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Name of the domain.",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"namelowercase",children:"NameLowerCase"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Property NameLowerCase As %String(MAXLEN = 256, MINLEN = 1, XMLPROJECTION = "NONE") [ Deprecated, Internal, ReadOnly, Required ];\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Domain Name in lowercase",(0,t.jsx)(s.br,{}),"\nUsed for indexing, not to be displayed or modified. DEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"change",children:"Change"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Change(OldDomainName As %String, NewDomainName As %String, Flags As %Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Change the domain of users.",(0,t.jsx)(s.br,{}),"\nThis method will change the domain to a new domain for users which match the old domain. Its primary use is if we change the default system domain, we would call this method to change all the users which referenced the old default domain.",(0,t.jsx)(s.br,{}),"\nNote that if a username@domain already exists in the new domain we are changing to, then the old username@domain is just deleted, and the new one is used. If there is any error during the operation, the entire transaction is rolled back.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nOldName - Domain name to change",(0,t.jsx)(s.br,{}),"\nNewDomain - Domain name to change to",(0,t.jsx)(s.br,{}),"\nFlags - Internal use only",(0,t.jsx)(s.br,{}),'\nIf OldName="", then we are changing from using no domains to using domains i.e. the multiple domains parameter is turned on. NewDomain must be a valid domain set up in the domain file. If NewDomain="", then we are changing from using multiple Domains to using no domains. In order for this to succeed, all the users must have the same domain name as the OldDomainName parameter passed in. Note that if we are going from no domains to Multiple domains, or Multiple domains to no domains, the system parameter governing this must be set before this method is called.']}),"\n",(0,t.jsx)(s.h3,{id:"create",children:"Create"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Create(Name As %String, Description As %String) As %Status [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Create a Domain.",(0,t.jsx)(s.br,{}),"\nCreate a Domain in the Security database.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nName - Name of the domain to create",(0,t.jsx)(s.br,{}),"\nDescription - Description of the domain",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"delete",children:"Delete"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Delete(Name As %String) As %Status [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Delete a domain.",(0,t.jsx)(s.br,{}),"\nThis method will delete a domain from the security database. If the domain is in use by a user, the domain will not be deleted.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nName - Name of domain to delete DEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"exists",children:"Exists"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Exists(Name As %String, ByRef Domain As %ObjectHandle, ByRef Status As %Status) As %Boolean [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Domain exists.",(0,t.jsx)(s.br,{}),"\nThis method checks for the existence of a domain in the security database.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nName - Name of the domain to check existence of",(0,t.jsx)(s.br,{}),"\nReturn values:",(0,t.jsx)(s.br,{}),"\nIf Value of the method = 0 (Domain does not exist, or some error occured)",(0,t.jsx)(s.br,{}),"\nDomain = Null",(0,t.jsx)(s.br,{}),'\nStatus = Domain "x" does not exist, or other error message']}),"\n",(0,t.jsxs)(s.p,{children:["If Value of the method = 1 (Domain exists)",(0,t.jsx)(s.br,{}),"\nDomain = Object handle to domain",(0,t.jsx)(s.br,{}),"\nStatus = $$$OK",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"export",children:"Export"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Export(FileName As %String = "DomainsExport.xml", ByRef NumExported As %Integer, Domains As %String = "*") As %Status [ Deprecated, Internal ]\n'})}),"\n",(0,t.jsxs)(s.p,{children:["This method exports Domain records to a file in xml format.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nFilename - Output file name",(0,t.jsx)(s.br,{}),"\nNumExported (byref) - Returns number of records exported.",(0,t.jsx)(s.br,{}),'\nDomains - Comma separated list of Domains to export, "*" = All',(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"get",children:"Get"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Get(Name As %String, ByRef Properties As %String) As %Status [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Get a domain's properties.",(0,t.jsx)(s.br,{}),"\nGets a domain's properties from the security database.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nName - Name of the domain to get",(0,t.jsx)(s.br,{}),"\nReturn values:",(0,t.jsx)(s.br,{}),"\nProperties - Array of properties",(0,t.jsx)(s.br,{}),'\nProperties("Description") - Description of the domain',(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"getproperties",children:"GetProperties"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetProperties(Domain As %ObjectHandle, ByRef Properties As %String) As %Status [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Get a domain's properties.",(0,t.jsx)(s.br,{}),"\nGets a domain's properties from the security database.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nDomain - Object handle to a Domain record",(0,t.jsx)(s.br,{}),"\nReturn values:",(0,t.jsx)(s.br,{}),"\nProperties - See the Get method for more information on properties returned DEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"import",children:"Import"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Import(FileName As %String = "DomainsExport.xml", ByRef NumImported As %Integer, Flags As %Integer = 0) As %Status [ Deprecated, Internal ]\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Import Domain records from an xml file.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nFileName - Filename to import Domain records from",(0,t.jsx)(s.br,{}),"\nNumImported (byref) - Returns number of records imported",(0,t.jsx)(s.br,{}),"\nFlags - Control import",(0,t.jsx)(s.br,{}),"\nBit 0 - Do not import records, just return count",(0,t.jsx)(s.br,{}),"\nNote: On failure, no records will be imported",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"inuse",children:"InUse"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod InUse(Name As %String, ByRef InUse As %Boolean = 0, ByRef Users As %List, ByRef MoreUsers As %Boolean = 0) As %Status\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Checks if the domain is in use.",(0,t.jsx)(s.br,{}),"\nChecks if the domain specified is used by any user.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nName - Name of the domain to check.",(0,t.jsx)(s.br,{}),"\nReturn values:",(0,t.jsx)(s.br,{}),"\nInUse = 0 Not used",(0,t.jsx)(s.br,{}),"\nInUse = 1 Used",(0,t.jsx)(s.br,{}),"\nUsers = $list of users the domain is used by or null if none",(0,t.jsx)(s.br,{}),"\nMoreUsers = 0 - Entire list of users using the domain returned",(0,t.jsx)(s.br,{}),"\nMoreUsers = 1 - Entire list of users using the role Not returned",(0,t.jsx)(s.br,{}),"\nIf MoreUsers=1, and you wish to get the entire list of users using the domain, use the following code:",(0,t.jsx)(s.br,{}),'\ns x=##Class(Security.Domains).InUse("Domain1",.InUse,.Users,.MoreUsers) While (MoreUsers) {',(0,t.jsx)(s.br,{}),"\ns SaveUsers($i(i))=Users",(0,t.jsx)(s.br,{}),'\ns x=##Class(Security.Domains).InUse("Domain1",.InUse,.Users,.MoreUsers)<br? }']}),"\n",(0,t.jsx)(s.h3,{id:"modify",children:"Modify"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Modify(Name As %String, ByRef Properties As %String) As %Status [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Modify a domain.",(0,t.jsx)(s.br,{}),"\nModify an existing domain's properties in the security database.",(0,t.jsx)(s.br,{}),"\nParameters:",(0,t.jsx)(s.br,{}),"\nName - Name of the domain to modify",(0,t.jsx)(s.br,{}),"\nProperties - Array of properties to modify.",(0,t.jsx)(s.br,{}),"\nSee the Get() method for a description of the Properties parameter.",(0,t.jsx)(s.br,{}),"\nIf a specific property is not passed in the properties array, the value is not modified.",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"startems",children:"StartEMS"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StartEMS() As %Status [ Deprecated, Internal ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"DEPRECATED, NO LONGER USED."}),"\n",(0,t.jsx)(s.h3,{id:"onaftersave",children:"%OnAfterSave"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnAfterSave(insert As %Boolean) As %Status [ Deprecated, Internal, Private ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called after the object's data has been successfully written to disk."}),"\n",(0,t.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,t.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail. DEPRECATED, NO LONGER USED."}),"\n",(0,t.jsx)(s.h3,{id:"onbeforesave",children:"%OnBeforeSave"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnBeforeSave(insert As %Boolean) As %Status [ Deprecated, Internal, Private ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called before any data is written to disk."}),"\n",(0,t.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,t.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail. DEPRECATED, NO LONGER USED."}),"\n",(0,t.jsx)(s.h3,{id:"ondelete",children:"%OnDelete"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %OnDelete(oid As %ObjectIdentity) As %Status [ Deprecated, Internal, Private ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This callback method is invoked by the %Delete method to provide notification that the object specified by oid is being deleted."}),"\n",(0,t.jsx)(s.p,{children:"If this method returns an error then the object will not be deleted. DEPRECATED, NO LONGER USED."}),"\n",(0,t.jsx)(s.h3,{id:"onvalidateobject",children:"%OnValidateObject"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnValidateObject() As %Status [ Deprecated, Internal, Private ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"This callback method is invoked by the %ValidateObject method to provide notification that the current object is being validated."}),"\n",(0,t.jsx)(s.p,{children:"If this method returns an error then %ValidateObject will fail. DEPRECATED, NO LONGER USED."}),"\n",(0,t.jsx)(s.h3,{id:"listexecute",children:"ListExecute"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ListExecute(ByRef %qHandle As %Binary, Names As %String = "*", Flags As %Integer = 0) As %Status [ Deprecated, Internal ]\n'})}),"\n",(0,t.jsxs)(s.p,{children:["List of Domains.",(0,t.jsx)(s.br,{}),'\nNames - Comma separated list of Domain names, "*" = All',(0,t.jsx)(s.br,{}),'\nFlags - 0 - Use "Startswith" as the selection on the name.',(0,t.jsx)(s.br,{}),'\nFlags - 1 - Use "Contains" as the selection on the name.',(0,t.jsx)(s.br,{}),"\nNote: This query may change in future versions",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED.",(0,t.jsx)(s.br,{}),"\nDEPRECATED, NO LONGER USED."]}),"\n",(0,t.jsx)(s.h3,{id:"listfetch",children:"ListFetch"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ListFetch(ByRef %qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Deprecated, Internal, PlaceAfter = ListExecute ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"DEPRECATED, NO LONGER USED."}),"\n",(0,t.jsx)(s.h3,{id:"listclose",children:"ListClose"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ListClose(ByRef %qHandle As %Binary) As %Status [ Deprecated, Internal, PlaceAfter = ListExecute ]\n"})}),"\n",(0,t.jsx)(s.p,{children:"DEPRECATED, NO LONGER USED."})]})}function d(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>o});var t=n(96540);const r={},a=t.createContext(r);function i(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);