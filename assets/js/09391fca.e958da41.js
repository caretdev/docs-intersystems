"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[44319],{69477:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>t,default:()=>c,frontMatter:()=>i,toc:()=>l});var a=n(74848),r=n(28453);const i={pagination_prev:null,pagination_next:null},t="%Net.WebSocket.Frame",l=[{value:"Properties",id:"properties",level:2},{value:"Device",id:"device",level:3},{value:"HasMessage",id:"hasmessage",level:3},{value:"Fin",id:"fin",level:3},{value:"RSV1",id:"rsv1",level:3},{value:"RSV2",id:"rsv2",level:3},{value:"RSV3",id:"rsv3",level:3},{value:"Opcode",id:"opcode",level:3},{value:"Masked",id:"masked",level:3},{value:"PayloadLength",id:"payloadlength",level:3},{value:"MaskingKey",id:"maskingkey",level:3},{value:"PayloadData",id:"payloaddata",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnNew",id:"onnew",level:3},{value:"Read",id:"read",level:3},{value:"ReadBytes",id:"readbytes",level:3},{value:"Write",id:"write",level:3},{value:"WriteData",id:"writedata",level:3},{value:"Mask",id:"mask",level:3}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"netwebsocketframe",children:"%Net.WebSocket.Frame"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Class %Net.WebSocket.Frame Extends %RegisteredObject [ Final ]\n"})}),"\n",(0,a.jsx)(s.p,{children:"Represents a sent/received frame in a WebSocket connection. This class is internal to the module and should not be used directly."}),"\n",(0,a.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsx)(s.h3,{id:"device",children:"Device"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property Device As %String [ Private ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Device from which to read (for reads) or write (for writes)"}),"\n",(0,a.jsx)(s.h3,{id:"hasmessage",children:"HasMessage"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property HasMessage As %Boolean [ InitialExpression = 1 ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Set to false if Read times out rather than receiving a message"}),"\n",(0,a.jsx)(s.h3,{id:"fin",children:"Fin"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property Fin As %Boolean [ InitialExpression = 1, Required ];\n"})}),"\n",(0,a.jsx)(s.h3,{id:"rsv1",children:"RSV1"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property RSV1 As %Boolean [ InitialExpression = 0, Required ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Reserved - always 0"}),"\n",(0,a.jsx)(s.h3,{id:"rsv2",children:"RSV2"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property RSV2 As %Boolean [ InitialExpression = 0, Required ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Reserved - always 0"}),"\n",(0,a.jsx)(s.h3,{id:"rsv3",children:"RSV3"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property RSV3 As %Boolean [ InitialExpression = 0, Required ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Reserved - always 0"}),"\n",(0,a.jsx)(s.h3,{id:"opcode",children:"Opcode"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property Opcode As %Integer(MAXVAL = 10, MINVAL = 0) [ Required ];\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Valid values (macros in HSMOD.WebSocket.INC) are: ",(0,a.jsx)(s.code,{children:"$$$WebSocketOpContinuation 0 $$$WebSocketOpTextFrame 1 $$$WebSocketOpBinaryFrame 2 $$$WebSocketOpClose 8 $$$WebSocketOpPing 9 $$$WebSocketOpPong 10"})]}),"\n",(0,a.jsx)(s.h3,{id:"masked",children:"Masked"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property Masked As %Boolean [ InitialExpression = 0, Required ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Set to 1 if the payload was received masked Always set to 1 in send"}),"\n",(0,a.jsx)(s.h3,{id:"payloadlength",children:"PayloadLength"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property PayloadLength As %Integer [ InitialExpression = 0, Required ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"The length of payload data"}),"\n",(0,a.jsx)(s.h3,{id:"maskingkey",children:"MaskingKey"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property MaskingKey As %Binary;\n"})}),"\n",(0,a.jsx)(s.p,{children:"4-byte masking key (if Masked is true) If not provided prior to send, will be generated randomly"}),"\n",(0,a.jsx)(s.h3,{id:"payloaddata",children:"PayloadData"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Property PayloadData As %Stream.TmpBinary [ Required ];\n"})}),"\n",(0,a.jsx)(s.p,{children:"Unmasked binary/character data received or to send - on write, this is masked before sending; on read, it is unmasked automatically."}),"\n",(0,a.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:'Method %OnNew(pDevice As %String = "") As %Status [ Private, ServerOnly = 1 ]\n'})}),"\n",(0,a.jsx)(s.h3,{id:"read",children:"Read"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Method Read(pTimeout As %Integer)\n"})}),"\n",(0,a.jsx)(s.p,{children:"Translates bytes read from the TCP device into a frame"}),"\n",(0,a.jsx)(s.h3,{id:"readbytes",children:"ReadBytes"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Method ReadBytes(pLength As %Integer, pTimeout As %Integer) As %String [ Private ]\n"})}),"\n",(0,a.jsx)(s.p,{children:"Reads in a specified number of bytes from the TCP device"}),"\n",(0,a.jsx)(s.h3,{id:"write",children:"Write"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Method Write()\n"})}),"\n",(0,a.jsx)(s.p,{children:"Translates the frame into the wire format and writes it to the TCP device"}),"\n",(0,a.jsx)(s.h3,{id:"writedata",children:"WriteData"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Method WriteData(pData As %Stream.Object) [ Private ]\n"})}),"\n",(0,a.jsx)(s.p,{children:"Writes a stream out to the TCP device"}),"\n",(0,a.jsx)(s.h3,{id:"mask",children:"Mask"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Method Mask(pString As %String) As %String\n"})}),"\n",(0,a.jsx)(s.p,{children:"Masks the input string by XOR-ing 4-byte chunks with the masking key"})]})}function c(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var a=n(96540);const r={},i=a.createContext(r);function t(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);