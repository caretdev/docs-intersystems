"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[20640],{36642:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>a,default:()=>i,frontMatter:()=>c,toc:()=>o});var r=s(74848),t=s(28453);const c={pagination_prev:null,pagination_next:null},a="%SQL.Agent",o=[{value:"Methods",id:"methods",level:2},{value:"%RunWorkVals2",id:"runworkvals2",level:3},{value:"%EndQuery",id:"endquery",level:3},{value:"ProcessError",id:"processerror",level:3},{value:"%ExecuteQuery",id:"executequery",level:3}];function l(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sqlagent",children:"%SQL.Agent"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"Class %SQL.Agent [ Abstract, System = 4 ]\n"})}),"\n",(0,r.jsx)(n.p,{children:"This is an internal class used for distributed SQL processing. This class contains no user-accessible methods."}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"runworkvals2",children:"%RunWorkVals2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %RunWorkVals2(type As %Integer, ByRef vals As %String, rtnidx As %Binary, function As %String, args As %String, ByRef extable As %String, ByRef groupID As %String = "", ByRef total As %Integer) As %SYSTEM.WorkMgrIPQ [ Internal ]\n'})}),"\n",(0,r.jsx)(n.p,{children:"Given an array of vals and a function to call create the work manager IPQ object and schedule the work for this return the IPQ object. On the event of any errors use standard SQL error handling (ZTrap)."}),"\n",(0,r.jsx)(n.h3,{id:"endquery",children:"%EndQuery"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %EndQuery(pTempIndex As %String, pQueryId As %Integer) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"processerror",children:"ProcessError"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod ProcessError(pSC As %Status, ByRef SQLCODE As %Integer, ByRef %msg As %String) [ Internal ]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Process the Status code error into an SQLCODE and %msg error. %msg is a public variable."}),"\n",(0,r.jsx)(n.h3,{id:"executequery",children:"%ExecuteQuery"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %ExecuteQuery(pSQL As %String, pTempIndex As %String, pSelectMode As %Integer = 0, pReadCommitted As %Integer = 0) As %Status [ Internal ]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This method executes the given query and writes the results to the specified temp global location.",(0,r.jsx)(n.br,{}),"\nThis is called by a background agent."]})]})}function i(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var r=s(96540);const t={},c=r.createContext(t);function a(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);