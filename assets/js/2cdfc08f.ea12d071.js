"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[87763],{40525:(e,l,t)=>{t.r(l),t.d(l,{contentTitle:()=>a,default:()=>c,frontMatter:()=>o,toc:()=>r});var n=t(74848),s=t(28453);const o={pagination_prev:null,pagination_next:null},a="%Net.Cloud.Storage.Client",r=[{value:"Parameters",id:"parameters",level:2},{value:"BUFFERLENGTH",id:"bufferlength",level:3},{value:"Properties",id:"properties",level:2},{value:"gateway",id:"gateway",level:3},{value:"jclient",id:"jclient",level:3},{value:"Methods",id:"methods",level:2},{value:"ToUTF8",id:"toutf8",level:3},{value:"BucketExists",id:"bucketexists",level:3},{value:"GetBucketInfo",id:"getbucketinfo",level:3},{value:"CreateBucket",id:"createbucket",level:3},{value:"ListBuckets",id:"listbuckets",level:3},{value:"DeleteBucket",id:"deletebucket",level:3},{value:"BlobExists",id:"blobexists",level:3},{value:"GetBlobInfo",id:"getblobinfo",level:3},{value:"ListBlobs",id:"listblobs",level:3},{value:"UploadBlobFromString",id:"uploadblobfromstring",level:3},{value:"UploadBlobFromFile",id:"uploadblobfromfile",level:3},{value:"UploadBlobFromStream",id:"uploadblobfromstream",level:3},{value:"UploadBlobWithPresignedUrl",id:"uploadblobwithpresignedurl",level:3},{value:"DownloadBlobToString",id:"downloadblobtostring",level:3},{value:"DownloadBlobToFile",id:"downloadblobtofile",level:3},{value:"DownloadBlobToStream",id:"downloadblobtostream",level:3},{value:"DeleteBlob",id:"deleteblob",level:3},{value:"IsBucketPublicAccessible",id:"isbucketpublicaccessible",level:3},{value:"Close",id:"close",level:3},{value:"CreateGateway",id:"creategateway",level:3},{value:"CreateClient",id:"createclient",level:3},{value:"SingleUploadBlobFromString",id:"singleuploadblobfromstring",level:3},{value:"SingleUploadBlobFromFile",id:"singleuploadblobfromfile",level:3},{value:"SingleUploadBlobFromStream",id:"singleuploadblobfromstream",level:3},{value:"SingleDownloadBlobToString",id:"singledownloadblobtostring",level:3},{value:"SingleDownloadBlobToFile",id:"singledownloadblobtofile",level:3},{value:"SingleDownloadBlobToStream",id:"singledownloadblobtostream",level:3},{value:"CopyBlob",id:"copyblob",level:3},{value:"MoveBlob",id:"moveblob",level:3},{value:"IsBucketWritable",id:"isbucketwritable",level:3}];function i(e){const l={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.header,{children:(0,n.jsx)(l.h1,{id:"netcloudstorageclient",children:"%Net.Cloud.Storage.Client"})}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Class %Net.Cloud.Storage.Client Extends %RegisteredObject [ Language = objectscript ]\n"})}),"\n",(0,n.jsx)(l.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(l.h3,{id:"bufferlength",children:"BUFFERLENGTH"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Parameter BUFFERLENGTH = 32000;\n"})}),"\n",(0,n.jsx)(l.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(l.h3,{id:"gateway",children:"gateway"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Property gateway As %External.JavaGateway;\n"})}),"\n",(0,n.jsx)(l.p,{children:"Connection to a Java Gateway"}),"\n",(0,n.jsx)(l.h3,{id:"jclient",children:"jclient"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Property jclient As %Net.Remote.Object;\n"})}),"\n",(0,n.jsx)(l.p,{children:"Remote Java client object to Azure, Google or S3"}),"\n",(0,n.jsx)(l.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(l.h3,{id:"toutf8",children:"ToUTF8"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod ToUTF8(stream As %Stream.Object) As %Stream.TmpBinary [ Private ]\n"})}),"\n",(0,n.jsx)(l.p,{children:"Convert a stream to binary stream encoded in UTF-8"}),"\n",(0,n.jsx)(l.h3,{id:"bucketexists",children:"BucketExists"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method BucketExists(bucketName As %String) As %Boolean\n"})}),"\n",(0,n.jsx)(l.p,{children:"Test if a bucket exists"}),"\n",(0,n.jsx)(l.h3,{id:"getbucketinfo",children:"GetBucketInfo"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method GetBucketInfo(bucketName As %String) As BucketInfo\n"})}),"\n",(0,n.jsx)(l.p,{children:"Get bucket info"}),"\n",(0,n.jsx)(l.h3,{id:"createbucket",children:"CreateBucket"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method CreateBucket(bucketName As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Create a new bucket"}),"\n",(0,n.jsx)(l.h3,{id:"listbuckets",children:"ListBuckets"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method ListBuckets() As %ListOfObjects\n"})}),"\n",(0,n.jsx)(l.p,{children:"List all buckets"}),"\n",(0,n.jsx)(l.h3,{id:"deletebucket",children:"DeleteBucket"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method DeleteBucket(bucketName As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Delete a bucket from the cloud"}),"\n",(0,n.jsx)(l.h3,{id:"blobexists",children:"BlobExists"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method BlobExists(bucketName As %String, blobName As %String) As %Boolean\n"})}),"\n",(0,n.jsx)(l.p,{children:"Test if a blob exists"}),"\n",(0,n.jsx)(l.h3,{id:"getblobinfo",children:"GetBlobInfo"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method GetBlobInfo(bucketName As %String, blobName As %String) As BlobInfo\n"})}),"\n",(0,n.jsx)(l.p,{children:"Get blob info"}),"\n",(0,n.jsx)(l.h3,{id:"listblobs",children:"ListBlobs"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'Method ListBlobs(bucketName As %String, blobNamePrefix As %String = "", blobNamePattern As %String = "") As %ListOfObjects\n'})}),"\n",(0,n.jsx)(l.p,{children:'List all blobs within a bucket, filtered by blobNamePrefix and blobNamePattern. bucketName: bucket name blobNamePrefix: blob name prefix, used to filter the result on the server. blobNamePattern: blob name pattern, used to filter the result by the client. Support wild cards "?" and "*".'}),"\n",(0,n.jsx)(l.h3,{id:"uploadblobfromstring",children:"UploadBlobFromString"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method UploadBlobFromString(bucketName As %String, blobName As %String, content As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Upload a string blob to the cloud String content will be encoded as UTF-8"}),"\n",(0,n.jsx)(l.h3,{id:"uploadblobfromfile",children:"UploadBlobFromFile"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method UploadBlobFromFile(bucketName As %String, blobName As %String, filePath As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Upload a file blob to the cloud"}),"\n",(0,n.jsx)(l.h3,{id:"uploadblobfromstream",children:"UploadBlobFromStream"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method UploadBlobFromStream(bucketName As %String, blobName As %String, stream As %Stream.Object)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Upload a binary or character stream blob to the cloud For character stream, its content is converted to UTF-8 first, then uploaded as binary stream."}),"\n",(0,n.jsx)(l.h3,{id:"uploadblobwithpresignedurl",children:"UploadBlobWithPresignedUrl"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method UploadBlobWithPresignedUrl(presignedUrl As %String, stream As %Stream.Object)\n"})}),"\n",(0,n.jsx)(l.h3,{id:"downloadblobtostring",children:"DownloadBlobToString"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'Method DownloadBlobToString(bucketName As %String, blobName As %String, blobEncoding As %String = "") As %String\n'})}),"\n",(0,n.jsx)(l.p,{children:'Download a blob from the cloud to a string blobEncoding: Blob content encoding, the name follows Java convention. If blobEncoding = "", treat the blob content as encoded in UTF-8.'}),"\n",(0,n.jsx)(l.h3,{id:"downloadblobtofile",children:"DownloadBlobToFile"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method DownloadBlobToFile(bucketName As %String, blobName As %String, filePath As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Download a blob from the cloud to a file"}),"\n",(0,n.jsx)(l.h3,{id:"downloadblobtostream",children:"DownloadBlobToStream"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'Method DownloadBlobToStream(bucketName As %String, blobName As %String, blobEncoding As %String = "") As %Stream.Object\n'})}),"\n",(0,n.jsx)(l.p,{children:'Download a blob from the cloud to a stream blobEncoding name follows Java convention If blobEncoding = "", the returning stream is %GlobalBinarayStream; otherwise, it is %GlobalCharacterStream.'}),"\n",(0,n.jsx)(l.h3,{id:"deleteblob",children:"DeleteBlob"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method DeleteBlob(bucketName As %String, blobName As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Delete a blob from the cloud"}),"\n",(0,n.jsx)(l.h3,{id:"isbucketpublicaccessible",children:"IsBucketPublicAccessible"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method IsBucketPublicAccessible(bucketName As %String) As %Boolean\n"})}),"\n",(0,n.jsx)(l.p,{children:"Test if a bucket is public accessible"}),"\n",(0,n.jsx)(l.h3,{id:"close",children:"Close"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method Close()\n"})}),"\n",(0,n.jsx)(l.p,{children:"Close storage client and disconnect Java gateway"}),"\n",(0,n.jsx)(l.h3,{id:"creategateway",children:"CreateGateway"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod CreateGateway(javaServer As %RawString) As %External.JavaGateway [ Private ]\n"})}),"\n",(0,n.jsx)(l.p,{children:"Create a Java gateway connection"}),"\n",(0,n.jsx)(l.h3,{id:"createclient",children:"CreateClient"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod CreateClient(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, Output sc As %Status, endPoint As %String = "") As Client\n'})}),"\n",(0,n.jsx)(l.p,{children:"Factory method to create a cloud storage client. javaServer: Java gateway name, default to default Java gateway. storageProvider: Specify storage provider. 0: Amazon S3, 1: Azure Blob, 2: Google Cloud Storage. credentialsFile: File name containing credentials for specific storage provider. region: Cloud storage region for specific storage provider. sc: returning status code. endPoint: Optional PrivateLink endpoint"}),"\n",(0,n.jsx)(l.h3,{id:"singleuploadblobfromstring",children:"SingleUploadBlobFromString"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod SingleUploadBlobFromString(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, endPoint As %String = "", bucketName As %String, blobName As %String, content As %String) As %Status\n'})}),"\n",(0,n.jsx)(l.p,{children:"Single method to upload blob from string"}),"\n",(0,n.jsx)(l.h3,{id:"singleuploadblobfromfile",children:"SingleUploadBlobFromFile"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod SingleUploadBlobFromFile(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, endPoint As %String = "", bucketName As %String, blobName As %String, filePath As %String) As %Status\n'})}),"\n",(0,n.jsx)(l.p,{children:"Single method to upload blob from file"}),"\n",(0,n.jsx)(l.h3,{id:"singleuploadblobfromstream",children:"SingleUploadBlobFromStream"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod SingleUploadBlobFromStream(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, endPoint As %String = "", bucketName As %String, blobName As %String, stream As %Stream.Object) As %Status\n'})}),"\n",(0,n.jsx)(l.p,{children:"Single method to upload blob from stream"}),"\n",(0,n.jsx)(l.h3,{id:"singledownloadblobtostring",children:"SingleDownloadBlobToString"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod SingleDownloadBlobToString(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, endPoint As %String = "", bucketName As %String, blobName As %String, blobEncoding As %String = "", Output toString As %String) As %Status\n'})}),"\n",(0,n.jsx)(l.p,{children:"Single method to download blob to string"}),"\n",(0,n.jsx)(l.h3,{id:"singledownloadblobtofile",children:"SingleDownloadBlobToFile"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod SingleDownloadBlobToFile(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, endPoint As %String = "", bucketName As %String, blobName As %String, filePath As %String) As %Status\n'})}),"\n",(0,n.jsx)(l.p,{children:"Single method to download blob to file"}),"\n",(0,n.jsx)(l.h3,{id:"singledownloadblobtostream",children:"SingleDownloadBlobToStream"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod SingleDownloadBlobToStream(javaServer As %RawString = "", storageProvider As %Integer, credentialsFile As %String = "", region As %String, endPoint As %String = "", bucketName As %String, blobName As %String, blobEncoding As %String = "", Output toStream As %Stream.Object) As %Status\n'})}),"\n",(0,n.jsx)(l.p,{children:"Single method to download blob to stream"}),"\n",(0,n.jsx)(l.h3,{id:"copyblob",children:"CopyBlob"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method CopyBlob(sourceBucketName As %String, sourceBlobName As %String, targetBucketName As %String, targetBlobName As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Copy a blob from source to target"}),"\n",(0,n.jsx)(l.h3,{id:"moveblob",children:"MoveBlob"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method MoveBlob(sourceBucketName As %String, sourceBlobName As %String, targetBucketName As %String, targetBlobName As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Move a blob from source to target"}),"\n",(0,n.jsx)(l.h3,{id:"isbucketwritable",children:"IsBucketWritable"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-objectscript-class",children:"Method IsBucketWritable(bucketName As %String)\n"})}),"\n",(0,n.jsx)(l.p,{children:"Test if a bucket is writable"})]})}function c(e={}){const{wrapper:l}={...(0,s.R)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}},28453:(e,l,t)=>{t.d(l,{R:()=>a,x:()=>r});var n=t(96540);const s={},o=n.createContext(s);function a(e){const l=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function r(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:l},e.children)}}}]);