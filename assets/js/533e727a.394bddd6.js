"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[98868],{58520:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>l,default:()=>d,frontMatter:()=>r,toc:()=>i});var t=n(74848),a=n(28453);const r={pagination_prev:null,pagination_next:null},l="%SYSTEM.Context.SQL",i=[{value:"Properties",id:"properties",level:2},{value:"CQLockTimeout",id:"cqlocktimeout",level:3},{value:"externalGateways",id:"externalgateways",level:3},{value:"ShardIDRange",id:"shardidrange",level:3},{value:"ShardAIRange",id:"shardairange",level:3},{value:"RTC",id:"rtc",level:3},{value:"TSQLAnsiNulls",id:"tsqlansinulls",level:3},{value:"TSQLAnsiPadding",id:"tsqlansipadding",level:3},{value:"TSQLAnsiWarnings",id:"tsqlansiwarnings",level:3},{value:"TSQLCaseInsCompare",id:"tsqlcaseinscompare",level:3},{value:"TSQLNoCount",id:"tsqlnocount",level:3},{value:"TSQLQuotedIdentifier",id:"tsqlquotedidentifier",level:3},{value:"contextStack",id:"contextstack",level:3},{value:"Stats",id:"stats",level:3},{value:"FTKeys",id:"ftkeys",level:3},{value:"PredictModelOref",id:"predictmodeloref",level:3},{value:"PredictTrainedModelOref",id:"predicttrainedmodeloref",level:3},{value:"ShardExecIUDArgs",id:"shardexeciudargs",level:3},{value:"ShardMasterExtRef",id:"shardmasterextref",level:3},{value:"ShardNumber",id:"shardnumber",level:3},{value:"DisableStatCollection",id:"disablestatcollection",level:3},{value:"MLConfiguration",id:"mlconfiguration",level:3},{value:"Version",id:"version",level:3},{value:"Methods",id:"methods",level:2},{value:"DisableStatCollectionSet",id:"disablestatcollectionset",level:3},{value:"pushState",id:"pushstate",level:3},{value:"popState",id:"popstate",level:3},{value:"%OnNew",id:"onnew",level:3},{value:"%OnClose",id:"onclose",level:3},{value:"ClearStats",id:"clearstats",level:3},{value:"SaveStats",id:"savestats",level:3},{value:"getGateway",id:"getgateway",level:3},{value:"getCachedGateway",id:"getcachedgateway",level:3}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"systemcontextsql",children:"%SYSTEM.Context.SQL"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Class %SYSTEM.Context.SQL Extends %SystemBase\n"})}),"\n",(0,t.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(s.h3,{id:"cqlocktimeout",children:"CQLockTimeout"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property CQLockTimeout As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"Cached Query Lock Timeout"}),"\n",(0,t.jsx)(s.h3,{id:"externalgateways",children:"externalGateways"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property externalGateways As %SQL.External.Gateway [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.h3,{id:"shardidrange",children:"ShardIDRange"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ShardIDRange As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"ShardIDRange is an array of extent names used for allocating rowid values for Sharded=2 tables. data is $lb(beginrange,endrange,offset)"}),"\n",(0,t.jsx)(s.h3,{id:"shardairange",children:"ShardAIRange"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ShardAIRange As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"ShardAIRange is an array of extent names used for allocating auto_increment field values for Sharded=2 tables. data is $lb(beginrange,endrange,offset)"}),"\n",(0,t.jsx)(s.h3,{id:"rtc",children:"RTC"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property RTC As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsxs)(s.p,{children:["RTC is an array of trigger names used for statement level recursive trigger call checking.",(0,t.jsx)(s.br,{}),"\nRTC = recursive trigger check"]}),"\n",(0,t.jsx)(s.h3,{id:"tsqlansinulls",children:"TSQLAnsiNulls"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TSQLAnsiNulls As %Integer;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"tsqlansipadding",children:"TSQLAnsiPadding"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TSQLAnsiPadding As %Integer;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"tsqlansiwarnings",children:"TSQLAnsiWarnings"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TSQLAnsiWarnings As %Integer;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"tsqlcaseinscompare",children:"TSQLCaseInsCompare"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TSQLCaseInsCompare As %Integer;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"tsqlnocount",children:"TSQLNoCount"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TSQLNoCount As %Integer;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"tsqlquotedidentifier",children:"TSQLQuotedIdentifier"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property TSQLQuotedIdentifier As %Integer;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"contextstack",children:"contextStack"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:'Property contextStack As %String(MAXLEN = "") [ MultiDimensional ];\n'})}),"\n",(0,t.jsx)(s.h3,{id:"stats",children:"Stats"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Stats As %String [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.h3,{id:"ftkeys",children:"FTKeys"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property FTKeys As %String [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"Feature Tracker Keys for features tracked under the SQL/IntegratedML/xDBC umbrella"}),"\n",(0,t.jsx)(s.h3,{id:"predictmodeloref",children:"PredictModelOref"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property PredictModelOref As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"PredictModelOref holds an oref for the ML Model for each PREDICT function in the statement"}),"\n",(0,t.jsx)(s.h3,{id:"predicttrainedmodeloref",children:"PredictTrainedModelOref"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property PredictTrainedModelOref As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"PredictTrainedModelOref holds an oref for the ML TrainedModel for each PREDICT function in the statement"}),"\n",(0,t.jsx)(s.h3,{id:"shardexeciudargs",children:"ShardExecIUDArgs"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ShardExecIUDArgs As %String [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"ShardExecIUDArgs is used to hold the arguments for the %BigData.ShardedSQL.%ExecIUD method when the SQL Statement has more than 379 parameters."}),"\n",(0,t.jsx)(s.h3,{id:"shardmasterextref",children:"ShardMasterExtRef"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ShardMasterExtRef As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"ShardMasterExtRef is used to hold the extended reference for the constraint lock syntax to use for this namespace. Since subscript is the namespace name."}),"\n",(0,t.jsx)(s.h3,{id:"shardnumber",children:"ShardNumber"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property ShardNumber As %RawString [ MultiDimensional ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"ShardNumber is used to hold the shard number of the current namespace if this is a sharded namespace Subscript is the namespace name."}),"\n",(0,t.jsx)(s.h3,{id:"disablestatcollection",children:"DisableStatCollection"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property DisableStatCollection As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,t.jsx)(s.p,{children:"This can be set to true to disable time based collection of SQL stats"}),"\n",(0,t.jsx)(s.h3,{id:"mlconfiguration",children:"MLConfiguration"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property MLConfiguration As %String(MAXLEN = 256);\n"})}),"\n",(0,t.jsx)(s.p,{children:"This is the default %SYS.ML.Configuration for this process"}),"\n",(0,t.jsx)(s.h3,{id:"version",children:"Version"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Property Version As %Integer;\n"})}),"\n",(0,t.jsx)(s.p,{children:"A version counter used to ensure that this object is loaded/instantiated with the most recent property values."}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"disablestatcollectionset",children:"DisableStatCollectionSet"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method DisableStatCollectionSet(val As %Boolean) As %Status\n"})}),"\n",(0,t.jsx)(s.h3,{id:"pushstate",children:"pushState"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method pushState() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"pushState will push the current state of the Context.SQL singleton onto the contextStack. This method is not normally invoked directly. It is normally called by a utility class method to push a context."}),"\n",(0,t.jsx)(s.h3,{id:"popstate",children:"popState"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method popState() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"popState will restore the state of the Context.SQL singleton from the top of the contextStack and remove the top stack element. This method is not normally invoked directly. It is normally called by a utility class method to pop a context."}),"\n",(0,t.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnNew() As %Status [ Private, ServerOnly = 1 ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"onclose",children:"%OnClose"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnClose() As %Status [ Private ]\n"})}),"\n",(0,t.jsx)(s.h3,{id:"clearstats",children:"ClearStats"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method ClearStats() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Remove any SQL stats we have aggregated so far"}),"\n",(0,t.jsx)(s.h3,{id:"savestats",children:"SaveStats"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method SaveStats() As %Status\n"})}),"\n",(0,t.jsx)(s.p,{children:"Store any SQL stats we have collected so far. Normally done automatically at regular time intervals but can be forced by calling this method."}),"\n",(0,t.jsx)(s.h3,{id:"getgateway",children:"getGateway"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method getGateway(gatewayName As %String, language As %String) As %RawString\n"})}),"\n",(0,t.jsx)(s.p,{children:"language is only used if the gateway is not already defined"}),"\n",(0,t.jsx)(s.h3,{id:"getcachedgateway",children:"getCachedGateway"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-objectscript-class",children:"Method getCachedGateway(serverName As %String) As %RawString\n"})}),"\n",(0,t.jsx)(s.p,{children:"Return a cached gateway connection, null if nothing is cached"})]})}function d(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>i});var t=n(96540);const a={},r=t.createContext(a);function l(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);