"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[82453],{44111:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>a,default:()=>l,frontMatter:()=>t,toc:()=>c});var i=s(74848),r=s(28453);const t={pagination_prev:null,pagination_next:null},a="%DeepSee.CubeVersion.Utils",c=[{value:"Parameters",id:"parameters",level:2},{value:"DEPRECATED",id:"deprecated",level:3},{value:"ACTIVE",id:"active",level:3},{value:"PENDING",id:"pending",level:3},{value:"Methods",id:"methods",level:2},{value:"%GetVersionedCubeName",id:"getversionedcubename",level:3},{value:"%GetGenericCubeName",id:"getgenericcubename",level:3},{value:"%ActivatePendingCubeVersion",id:"activatependingcubeversion",level:3},{value:"%DeprecateCubeVersion",id:"deprecatecubeversion",level:3},{value:"%RemoveCubeVersion",id:"removecubeversion",level:3},{value:"%GetActiveCubeVersion",id:"getactivecubeversion",level:3},{value:"%GetPendingCubeVersion",id:"getpendingcubeversion",level:3},{value:"%GetDeprecatedVersionList",id:"getdeprecatedversionlist",level:3},{value:"%GetCubeVersionStatus",id:"getcubeversionstatus",level:3},{value:"%IsVersion",id:"isversion",level:3},{value:"%IsActiveVersion",id:"isactiveversion",level:3},{value:"%IsPendingVersion",id:"ispendingversion",level:3},{value:"%IsDeprecatedVersion",id:"isdeprecatedversion",level:3},{value:"%SetActiveCubeVersion",id:"setactivecubeversion",level:3},{value:"%SetPendingCubeVersion",id:"setpendingcubeversion",level:3},{value:"%SetCubeVersionStatus",id:"setcubeversionstatus",level:3},{value:"%KillTasksForCube",id:"killtasksforcube",level:3},{value:"%CreateCubeVersionDefinition",id:"createcubeversiondefinition",level:3}];function o(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"deepseecubeversionutils",children:"%DeepSee.CubeVersion.Utils"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"Class %DeepSee.CubeVersion.Utils Extends %RegisteredObject\n"})}),"\n",(0,i.jsx)(n.p,{children:"Utility container for the management of cube versions"}),"\n",(0,i.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"deprecated",children:"DEPRECATED"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter DEPRECATED = "deprecated";\n'})}),"\n",(0,i.jsx)(n.h3,{id:"active",children:"ACTIVE"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter ACTIVE = "active";\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pending",children:"PENDING"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'Parameter PENDING = "pending";\n'})}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"getversionedcubename",children:"%GetVersionedCubeName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %GetVersionedCubeName(pCubeGenericName As %String = "", pVersion As %Integer = "", pSC As %Status) As %String\n'})}),"\n",(0,i.jsx)(n.p,{children:"If a cube has different versions, get the name of the version currently active given the reference name pCubeGenericName. If a cube does not use cube versioning this will return the upper-case cube index."}),"\n",(0,i.jsx)(n.h3,{id:"getgenericcubename",children:"%GetGenericCubeName"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %GetGenericCubeName(pCubeVersionName As %String = "", pSC As %Status) As %String\n'})}),"\n",(0,i.jsx)(n.p,{children:"If a cube has different versions, get the reference name given a version name pCubeName. If the cube was not produced using cube versioning this will return the upper-case cube index."}),"\n",(0,i.jsx)(n.h3,{id:"activatependingcubeversion",children:"%ActivatePendingCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %ActivatePendingCubeVersion(pCubeGenericName As %String, pRemoveDeprecated As %Boolean = 1, pVerbose As %Boolean = 1) As %Status\n"})}),"\n",(0,i.jsx)(n.h3,{id:"deprecatecubeversion",children:"%DeprecateCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %DeprecateCubeVersion(pCubeGenericName As %String = "", pVersion As %Integer) As %Status\n'})}),"\n",(0,i.jsx)(n.p,{children:"Mark a cube version as deprecated. Once deprecated, a version is ready for removal."}),"\n",(0,i.jsx)(n.h3,{id:"removecubeversion",children:"%RemoveCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %RemoveCubeVersion(pCubeGenericName As %String = "", pVersion As %Integer) As %Status\n'})}),"\n",(0,i.jsx)(n.p,{children:'Completely remove all components of a cube version from the system. This cannot be performed on a cube version marked "active".'}),"\n",(0,i.jsx)(n.h3,{id:"getactivecubeversion",children:"%GetActiveCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetActiveCubeVersion(pCubeGenericName As %String) As %Integer\n"})}),"\n",(0,i.jsx)(n.p,{children:"Return the active version number for pCubeGenericName"}),"\n",(0,i.jsx)(n.h3,{id:"getpendingcubeversion",children:"%GetPendingCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %GetPendingCubeVersion(pCubeGenericName As %String = "") As %String\n'})}),"\n",(0,i.jsx)(n.p,{children:"Return the pending version number for pCubeGenericName. An empty string indicates there is no pending version."}),"\n",(0,i.jsx)(n.h3,{id:"getdeprecatedversionlist",children:"%GetDeprecatedVersionList"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %GetDeprecatedVersionList(pCubeGenericName As %String = "", ByRef pList) As %Status\n'})}),"\n",(0,i.jsx)(n.p,{children:"Given the generic name of a versioned cube, collect the list of deprecated versions currently on the system."}),"\n",(0,i.jsx)(n.h3,{id:"getcubeversionstatus",children:"%GetCubeVersionStatus"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %GetCubeVersionStatus(pCubeGenericName As %String, pVersion As %Integer) As %String\n"})}),"\n",(0,i.jsx)(n.p,{children:"Return the current promotion status of version pVersion the cube pCubeGenericName."}),"\n",(0,i.jsx)(n.h3,{id:"isversion",children:"%IsVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %IsVersion(pCubeName As %String, Output pCubeGenericName, Output pVersion) As %Boolean\n"})}),"\n",(0,i.jsxs)(n.p,{children:["It is valid to manually write a cube logical name that can look like a version when it is not. Verify the cube name entered in pCubeName is a true version of a generic cube definition. Optionally return the decomposition of the original cube name into its genericName and version parts. If a non-versioned cube is entered as pCubeName, then:",(0,i.jsx)(n.br,{}),'\npCubeGenericName = pCubeName pVersion = ""']}),"\n",(0,i.jsx)(n.h3,{id:"isactiveversion",children:"%IsActiveVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %IsActiveVersion(pCubeVersionName As %String) As %Boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Test whether the current cube pCubeVersionName is the active version."}),"\n",(0,i.jsx)(n.h3,{id:"ispendingversion",children:"%IsPendingVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %IsPendingVersion(pCubeVersionName As %String) As %Boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Test whether the current cube pCubeVersionName is the pending version."}),"\n",(0,i.jsx)(n.h3,{id:"isdeprecatedversion",children:"%IsDeprecatedVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %IsDeprecatedVersion(pCubeVersionName As %String) As %Boolean\n"})}),"\n",(0,i.jsx)(n.p,{children:"Test whether the current cube pCubeVersionName is deprecated."}),"\n",(0,i.jsx)(n.h3,{id:"setactivecubeversion",children:"%SetActiveCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %SetActiveCubeVersion(pCubeGenericName As %String, pVersion As %Integer) As %Status [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:'Performs the actual work of marking a specific version as the active version that will be used when the generic name pCubeGenericName is used. This will remove the "active" flag from any other version of pCubeGenericName.'}),"\n",(0,i.jsx)(n.h3,{id:"setpendingcubeversion",children:"%SetPendingCubeVersion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %SetPendingCubeVersion(pCubeGenericName As %String, pVersion As %Integer) As %Status [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:'Performs the actual work of marking a specific version as the pending version for the cube pCubeGenericName. This will remove the "pending" flag from any other version of pCubeGenericName.'}),"\n",(0,i.jsx)(n.h3,{id:"setcubeversionstatus",children:"%SetCubeVersionStatus"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %SetCubeVersionStatus(pCubeGenericName As %String, pVersion As %Integer, pNewCubeStatus As %String) As %Status [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:'Performs the actual work of storing the current promotion status of version pVersion for the cube pCubeGenericName. This will only accept valid status strings: "active","pending","deprecated".'}),"\n",(0,i.jsx)(n.h3,{id:"killtasksforcube",children:"%KillTasksForCube"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:"ClassMethod %KillTasksForCube(pCubeName As %String) [ Internal ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Kill all active tasks for a cube. This is used just before activating a pending cube to clear any queries that are running."}),"\n",(0,i.jsx)(n.h3,{id:"createcubeversiondefinition",children:"%CreateCubeVersionDefinition"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %CreateCubeVersionDefinition(pClassName As %String = "", pCube As %DeepSee.Model.cube, Output pNewClassName, Output pNewCubeIndex) As %Status [ Internal ]\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Called by the %GetModel generator - do not call this directly"}),".",(0,i.jsx)(n.br,{}),"\nCreate a new definition class for a cube which contains a copy of the cube definition class currently being compiled. The new class will have the name"]}),"\n",(0,i.jsx)(n.p,{children:"<pClassName>.Version<pCube.version>"}),"\n",(0,i.jsx)(n.p,{children:'The pClassName must be the name of a cube definition class with the parameter USECUBEVERSIONS=1 and the corresponding cube model pCube must be the cube defined in that class. Additionally, pCube must have the "version" attribute set to a valid integer value.'}),"\n",(0,i.jsx)(n.p,{children:"The generated model will have USECUBEVERSIONS and version attributes removed to prevent recursion in the compiler. The pCube object is unchanged after this call."})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(96540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);