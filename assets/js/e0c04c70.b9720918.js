"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[8495],{57974:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>c,default:()=>d,frontMatter:()=>r,toc:()=>l});var t=s(74848),i=s(28453);const r={pagination_prev:null,pagination_next:null},c="%DeepSee.CubeManager.CubeEvent",l=[{value:"Properties",id:"properties",level:2},{value:"CubeKey",id:"cubekey",level:3},{value:"CubeEvent",id:"cubeevent",level:3},{value:"UpdatePlan",id:"updateplan",level:3},{value:"MgmtGroup",id:"mgmtgroup",level:3},{value:"UserName",id:"username",level:3},{value:"StartTime",id:"starttime",level:3},{value:"FinishTime",id:"finishtime",level:3},{value:"TotalTime",id:"totaltime",level:3},{value:"CubeSize",id:"cubesize",level:3},{value:"FactsUpdated",id:"factsupdated",level:3},{value:"EventStatus",id:"eventstatus",level:3},{value:"AsynchUpdate",id:"asynchupdate",level:3},{value:"AgentCount",id:"agentcount",level:3},{value:"BuildFrequency",id:"buildfrequency",level:3},{value:"BuildTimeUnit",id:"buildtimeunit",level:3},{value:"SynchFrequency",id:"synchfrequency",level:3},{value:"SynchTimeUnit",id:"synchtimeunit",level:3},{value:"NCores",id:"ncores",level:3},{value:"ExprTime",id:"exprtime",level:3},{value:"iKnowTime",id:"iknowtime",level:3},{value:"ErrorCount",id:"errorcount",level:3},{value:"MissingRefs",id:"missingrefs",level:3},{value:"DependencyExempt",id:"dependencyexempt",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnBeforeSave",id:"onbeforesave",level:3},{value:"TransferRegistryInfo",id:"transferregistryinfo",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deepseecubemanagercubeevent",children:"%DeepSee.CubeManager.CubeEvent"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Class %DeepSee.CubeManager.CubeEvent Extends %Persistent [ System = 4 ]\n"})}),"\n",(0,t.jsx)(n.p,{children:"Records a single history event for a given cube for analysis of cube management."}),"\n",(0,t.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(n.h3,{id:"cubekey",children:"CubeKey"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property CubeKey As %DeepSee.Datatype.entityName [ Required ];\n"})}),"\n",(0,t.jsx)(n.p,{children:"The cube that is the subject of this event."}),"\n",(0,t.jsx)(n.h3,{id:"cubeevent",children:"CubeEvent"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Property CubeEvent As %DeepSee.Datatype.entityName(DISPLAYLIST = ",PreSynchCode,PostSynchCode,PostBuildCode,Build,Synch,Register,Unregister,Update,Repair", VALUELIST = ",presynch,postsynch,postbuild,build,synch,register,unregister,update,repair");\n'})}),"\n",(0,t.jsx)(n.p,{children:"The event being recorded."}),"\n",(0,t.jsx)(n.h3,{id:"updateplan",children:"UpdatePlan"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property UpdatePlan As %DeepSee.Datatype.entityName;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Plan for how the cube is to be managed by the build/synch tasks."}),"\n",(0,t.jsx)(n.h3,{id:"mgmtgroup",children:"MgmtGroup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property MgmtGroup As %DeepSee.Datatype.entityName;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Management group the cube belongs to."}),"\n",(0,t.jsx)(n.h3,{id:"username",children:"UserName"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property UserName As %Library.Username;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Name of the user that initiated the event."}),"\n",(0,t.jsx)(n.h3,{id:"starttime",children:"StartTime"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property StartTime As %TimeStamp;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Timestamp recorded prior to event execution"}),"\n",(0,t.jsx)(n.h3,{id:"finishtime",children:"FinishTime"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property FinishTime As %TimeStamp;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Timestamp recorded at the completion of the cube event."}),"\n",(0,t.jsx)(n.h3,{id:"totaltime",children:"TotalTime"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property TotalTime As %Numeric;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Total amount of time this event took;"}),"\n",(0,t.jsx)(n.h3,{id:"cubesize",children:"CubeSize"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property CubeSize As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Stores the current cube size of the cube. If the event is constructive (eg Build, Synch), this will be recorded after the event completes. If the event is destructive (eg Unregister) this is recorded prior to execution."}),"\n",(0,t.jsx)(n.h3,{id:"factsupdated",children:"FactsUpdated"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property FactsUpdated As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"The number of facts updated in this event. This will only be set in Build or Synch operations. For builds, it is equal to the final cube size."}),"\n",(0,t.jsx)(n.h3,{id:"eventstatus",children:"EventStatus"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property EventStatus As %Status;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Records the status message, if it exists, of the event after completion."}),"\n",(0,t.jsx)(n.h3,{id:"asynchupdate",children:"AsynchUpdate"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property AsynchUpdate As %Boolean;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Record of whether or not the build was called in asynchronous mode"}),"\n",(0,t.jsx)(n.h3,{id:"agentcount",children:"AgentCount"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property AgentCount As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Number of agents active on the system. This is the value returned by ##class(%DeepSee.Utils).%GetAgentCount()"}),"\n",(0,t.jsx)(n.h3,{id:"buildfrequency",children:"BuildFrequency"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property BuildFrequency As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Indicates how often the cube is scheduled to be built, in units of BuidTimeUnit"}),"\n",(0,t.jsx)(n.h3,{id:"buildtimeunit",children:"BuildTimeUnit"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property BuildTimeUnit As %DeepSee.Datatype.entityName;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Base unit of time for cube builds."}),"\n",(0,t.jsx)(n.h3,{id:"synchfrequency",children:"SynchFrequency"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property SynchFrequency As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Indicates how often the cube is scheduled to be synched, in units of SynchTimeUnit"}),"\n",(0,t.jsx)(n.h3,{id:"synchtimeunit",children:"SynchTimeUnit"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property SynchTimeUnit As %DeepSee.Datatype.entityName;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Base unit of time for cube synchs."}),"\n",(0,t.jsx)(n.h3,{id:"ncores",children:"NCores"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property NCores As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Number of CPU cores"}),"\n",(0,t.jsx)(n.h3,{id:"exprtime",children:"ExprTime"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property ExprTime As %Numeric;\n"})}),"\n",(0,t.jsx)(n.p,{children:"For builds, the build time spent processing expressions"}),"\n",(0,t.jsx)(n.h3,{id:"iknowtime",children:"iKnowTime"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property iKnowTime As %Numeric;\n"})}),"\n",(0,t.jsx)(n.p,{children:"For builds, the build time spent processing iKnow indices"}),"\n",(0,t.jsx)(n.h3,{id:"errorcount",children:"ErrorCount"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property ErrorCount As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"For build and synchronize, the count of errors while processing facts during this update."}),"\n",(0,t.jsx)(n.h3,{id:"missingrefs",children:"MissingRefs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property MissingRefs As %Integer;\n"})}),"\n",(0,t.jsx)(n.p,{children:"For build and synchronize, the count of missing relationship references encountered while processing facts."}),"\n",(0,t.jsx)(n.h3,{id:"dependencyexempt",children:"DependencyExempt"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Property DependencyExempt As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,t.jsx)(n.p,{children:"Log if the synchronize was exempt from the dependency and only updated due to schedule."}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"onbeforesave",children:"%OnBeforeSave"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Method %OnBeforeSave(pInsert As %Boolean) As %Status [ Private, ServerOnly = 1 ]\n"})}),"\n",(0,t.jsx)(n.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called before any data is written to disk."}),"\n",(0,t.jsx)(n.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,t.jsx)(n.p,{children:"If this method returns an error then the call to %Save will fail."}),"\n",(0,t.jsx)(n.h3,{id:"transferregistryinfo",children:"TransferRegistryInfo"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'Method TransferRegistryInfo(pCube As %String = "", pAction = "", pMapCube As %DeepSee.CubeManager.RegistryMapCube = "", pMapGroup As %DeepSee.CubeManager.RegistryMapGroup = "") As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"Retrieves the current cube management settings from the cube registry and writes them to the event."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var t=s(96540);const i={},r=t.createContext(i);function c(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);