"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[78561],{19917:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>l,default:()=>o,frontMatter:()=>i,toc:()=>c});var n=t(74848),a=t(28453);const i={pagination_prev:null,pagination_next:null},l="%Studio.ClassMgr",c=[{value:"Methods",id:"methods",level:2},{value:"Check",id:"check",level:3},{value:"Timestamp",id:"timestamp",level:3},{value:"Lock",id:"lock",level:3},{value:"UnLock",id:"unlock",level:3},{value:"IsClassnameConflict",id:"isclassnameconflict",level:3},{value:"GetDefinition",id:"getdefinition",level:3},{value:"OnOpenClass",id:"onopenclass",level:3},{value:"SaveDefinition",id:"savedefinition",level:3},{value:"Delete",id:"delete",level:3},{value:"GetSchema",id:"getschema",level:3},{value:"GetSpecialListByStream",id:"getspeciallistbystream",level:3},{value:"ClassList",id:"classlist",level:3},{value:"GetMacroInf",id:"getmacroinf",level:3},{value:"MacroListExecute",id:"macrolistexecute",level:3},{value:"MacroListClose",id:"macrolistclose",level:3},{value:"MacroListFetch",id:"macrolistfetch",level:3}];function r(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"studioclassmgr",children:"%Studio.ClassMgr"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class %Studio.ClassMgr [ System = 4 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"This class is used internally by InterSystems IRIS. You should not make direct use of it within your applications. There is no guarantee made about either the behavior or future operation of this class."}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"check",children:"Check"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Check() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Perform basic checks we are allowed to proceed"}),"\n",(0,n.jsx)(s.h3,{id:"timestamp",children:"Timestamp"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Timestamp(class As %String(MAXLEN=256), ByRef timemodified As %TimeStamp, ByRef timecompiled As %TimeStamp) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return the timestamp a class was last modified and last compiled"}),"\n",(0,n.jsx)(s.h3,{id:"lock",children:"Lock"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Lock(class As %String(MAXLEN=256)) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Lock the class for editing"}),"\n",(0,n.jsx)(s.h3,{id:"unlock",children:"UnLock"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UnLock(class As %String(MAXLEN=256)) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Unlock the class"}),"\n",(0,n.jsx)(s.h3,{id:"isclassnameconflict",children:"IsClassnameConflict"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsClassnameConflict(class As %String(MAXLEN=256)) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Check if there is a class name conflict"}),"\n",(0,n.jsx)(s.h3,{id:"getdefinition",children:"GetDefinition"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GetDefinition(class As %String(MAXLEN=256), Output definition As %Stream.GlobalCharacter, Output Hash As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Return the entire class definition in the stream defintion property"}),"\n",(0,n.jsx)(s.h3,{id:"onopenclass",children:"OnOpenClass"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod OnOpenClass(class As %String(MAXLEN=256), Output modified As %Boolean) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Call the OnBeforeLoad/OnAfterLoad source control events for this class return true if the class is modified and false if it is not"}),"\n",(0,n.jsx)(s.h3,{id:"savedefinition",children:"SaveDefinition"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SaveDefinition(ByRef definition As %Stream.GlobalCharacter, Hash As %String(MAXLEN=""), Output List As %Stream.GlobalCharacter, Output Lengths As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,n.jsx)(s.p,{children:"Passed a class definition in stream definition this is saved"}),"\n",(0,n.jsx)(s.h3,{id:"delete",children:"Delete"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Delete(class As %String(MAXLEN=256)) As %Status\n"})}),"\n",(0,n.jsx)(s.h3,{id:"getschema",children:"GetSchema"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetSchema(schemaspec As %String(MAXLEN=256), ByRef definition As %Stream.GlobalBinary) As %Status\n"})}),"\n",(0,n.jsx)(s.h3,{id:"getspeciallistbystream",children:"GetSpecialListByStream"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetSpecialListByStream(kind As %String, param As %String, ByRef result As %Stream.GlobalBinary) As %Status\n"})}),"\n",(0,n.jsx)(s.h3,{id:"classlist",children:"ClassList"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ClassList(Hash As %String(MAXLEN=""), Output List As %Stream.GlobalCharacter, Output Lengths As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Return a list of all classes available in this namespace, it is passed the client hash value in the format $$$SLB(name)_$$$SLB(hash)_$$$SLB(name2)_$$$SLB(hash2). This checks each of the named regions and if they are all identical then it returns with a null stream in List. If any of the regions has changed then we will resend all the classes in this region in the format:",(0,n.jsx)(s.br,{}),'\n$$SLB(name)_$$$SLB(hash)_data_$$$SLB("")_$$$SLB(name2)_$$$SLB(hash2)_data2_$$$SLB("")',(0,n.jsx)(s.br,{}),"\nWhere data is of the form:",(0,n.jsx)(s.br,{}),"\n$$$SLB(row)_$$$SLB(nextrow)_...",(0,n.jsx)(s.br,{}),"\nWhere row is of the form:",(0,n.jsx)(s.br,{}),"\n$$$SLB(classname)_$$$SLB(timestamp)_$$SLB(superclass)_$$$SLB(classtype defined)_$$$SLB(classtype)_$$$SLB(system)_$$$SLB(hidden)_$$$SLB(abstract)_$$$SLB(import)",(0,n.jsx)(s.br,{}),"\nTo tell the client to remove a named block from its cache we will send the hash=-1 for this i.e.",(0,n.jsx)(s.br,{}),'\n$$$SLB(name)_$$$SLB("")_$$$SLB("")_nextblock',(0,n.jsx)(s.br,{}),'\nSo the hash is "" and the block is terminated with $$$SLB("") as per normal. Note that the last block is also terminated with $$$SLB(""). The lengths of the various block is returned in Lengths which is an output argument. This is a comma separated list of length in characters of the stream data. This can be used to quickly divide the stream into pieces on the client.']}),"\n",(0,n.jsx)(s.h3,{id:"getmacroinf",children:"GetMacroInf"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetMacroInf(macroname As %String(MAXLEN=512), arg As %String(MAXLEN=512), arglist As %String(MAXLEN=1024), ByRef signature As %String(MAXLEN=512), ByRef location As %String(MAXLEN=512), ByRef definition As %String(MAXLEN=512), ByRef expansion As %String(MAXLEN=512))\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return information about this macro If arglist is not defined ($d(arglist)=0) then it does not return the expansion"}),"\n",(0,n.jsx)(s.h3,{id:"macrolistexecute",children:"MacroListExecute"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod MacroListExecute(ByRef qHandle As %Binary, arg As %String(MAXLEN=512), ByRef clienthash As %String(MAXLEN=128), Output Reload As %Boolean) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Return list of macros"}),"\n",(0,n.jsx)(s.h3,{id:"macrolistclose",children:"MacroListClose"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod MacroListClose(ByRef qHandle As %Binary) As %Status [ PlaceAfter = MacroListExecute ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"macrolistfetch",children:"MacroListFetch"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod MacroListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ PlaceAfter = MacroListExecute ]\n"})})]})}function o(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(r,{...e})}):r(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>c});var n=t(96540);const a={},i=n.createContext(a);function l(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);