"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[15828],{44783:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>i,default:()=>o,frontMatter:()=>a,toc:()=>l});var r=t(74848),n=t(28453);const a={pagination_prev:null,pagination_next:null},i="Security.DocDBs",l=[{value:"Parameters",id:"parameters",level:2},{value:"SOURCECONTROL",id:"sourcecontrol",level:3},{value:"VERSION",id:"version",level:3},{value:"Properties",id:"properties",level:2},{value:"Description",id:"description",level:3},{value:"Enabled",id:"enabled",level:3},{value:"Name",id:"name",level:3},{value:"NameLowerCase",id:"namelowercase",level:3},{value:"Namespace",id:"namespace",level:3},{value:"NamespaceLowerCase",id:"namespacelowercase",level:3},{value:"Resource",id:"resource",level:3},{value:"Version",id:"version-1",level:3},{value:"Methods",id:"methods",level:2},{value:"Create",id:"create",level:3},{value:"CreateOne",id:"createone",level:3},{value:"Delete",id:"delete",level:3},{value:"DeleteOne",id:"deleteone",level:3},{value:"DeleteAllInNamespace",id:"deleteallinnamespace",level:3},{value:"CheckAdmin",id:"checkadmin",level:3},{value:"Exists",id:"exists",level:3},{value:"Export",id:"export",level:3},{value:"Get",id:"get",level:3},{value:"GetProperties",id:"getproperties",level:3},{value:"Import",id:"import",level:3},{value:"Modify",id:"modify",level:3},{value:"ModifyOne",id:"modifyone",level:3},{value:"%OnAfterSave",id:"onaftersave",level:3},{value:"%OnBeforeSave",id:"onbeforesave",level:3},{value:"%OnDelete",id:"ondelete",level:3},{value:"%OnValidateObject",id:"onvalidateobject",level:3},{value:"ListExecute",id:"listexecute",level:3},{value:"ListFetch",id:"listfetch",level:3},{value:"ListClose",id:"listclose",level:3}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"securitydocdbs",children:"Security.DocDBs"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Class Security.DocDBs Extends (%Persistent, %XML.Adaptor, %SYSTEM.Help) [ Inheritance = right, System = 4 ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"The table for this class should be manipulated only through object access, the published API's or through the System Management Portal. It should not be updated through direct SQL access."}),"\n",(0,r.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(s.h3,{id:"sourcecontrol",children:"SOURCECONTROL"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter SOURCECONTROL [ Internal ] = {"Revision path: $Id: //iris/2024.3.0/databases/sys/cls/Security/DocDBs.xml#1 $"_$c(13,10)_"Last Change:   $DateTime: 2024/10/02 10:58:11 $"_$c(13,10)_"Changelist #:  $Change: 7247250 $"};\n'})}),"\n",(0,r.jsx)(s.h3,{id:"version",children:"VERSION"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter VERSION [ Internal ] = 1;\n"})}),"\n",(0,r.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.h3,{id:"description",children:"Description"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property Description As %String(MAXLEN = 256);\n"})}),"\n",(0,r.jsx)(s.p,{children:"Description of the Doc DB."}),"\n",(0,r.jsx)(s.h3,{id:"enabled",children:"Enabled"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property Enabled As Security.Datatype.BooleanYN [ InitialExpression = 1, Required ];\n"})}),"\n",(0,r.jsx)(s.p,{children:"Doc DB enabled."}),"\n",(0,r.jsx)(s.h3,{id:"name",children:"Name"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property Name As %Dictionary.Classname;\n"})}),"\n",(0,r.jsx)(s.p,{children:"Name of the Doc DB."}),"\n",(0,r.jsx)(s.h3,{id:"namelowercase",children:"NameLowerCase"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Property NameLowerCase As %String(MAXLEN = 255, MINLEN = 1, XMLPROJECTION = "NONE") [ Internal, ReadOnly ];\n'})}),"\n",(0,r.jsx)(s.h3,{id:"namespace",children:"Namespace"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property Namespace As %String(MAXLEN = 64, MINLEN = 1);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"namespacelowercase",children:"NamespaceLowerCase"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Property NamespaceLowerCase As %String(MAXLEN = 64, MINLEN = 1, XMLPROJECTION = "NONE") [ Internal, ReadOnly ];\n'})}),"\n",(0,r.jsx)(s.h3,{id:"resource",children:"Resource"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property Resource As %String(MAXLEN = 64, MINLEN = 0);\n"})}),"\n",(0,r.jsx)(s.h3,{id:"version-1",children:"Version"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property Version As %Decimal(SCALE = 1) [ Internal ];\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Version number of the record.",(0,r.jsx)(s.br,{}),"\nUsed for Export/Import."]}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"create",children:"Create"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Create(Name As %String, Namespace As %String, ByRef Properties As %String) As %Status\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Create a Doc DB.",(0,r.jsx)(s.br,{}),"\nCreate a Doc DB in the Security database.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nName - Name of the Doc DB",(0,r.jsx)(s.br,{}),"\nNamespace - Namespace of location of the Doc DB Description - Description of the Doc DB",(0,r.jsx)(s.br,{}),"\nEnabled - Enabled for auditing - 0/1",(0,r.jsx)(s.br,{}),"\nResource - Resource controlling the Doc DB."]}),"\n",(0,r.jsx)(s.h3,{id:"createone",children:"CreateOne"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CreateOne(ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"delete",children:"Delete"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Delete(Name As %String, Namespace As %String) As %Status\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Delete a Doc DB.",(0,r.jsx)(s.br,{}),"\nThis method will delete an Doc DB from the security database.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nName - Name of the Doc DB",(0,r.jsx)(s.br,{}),"\nNamespace - Namespace of the DOC DB",(0,r.jsx)(s.br,{}),"\nThis method also clears the in memory counters."]}),"\n",(0,r.jsx)(s.h3,{id:"deleteone",children:"DeleteOne"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DeleteOne(ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"deleteallinnamespace",children:"DeleteAllInNamespace"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod DeleteAllInNamespace(Namespace As %String = "", ByRef Deleted As %String) As %Status\n'})}),"\n",(0,r.jsx)(s.h3,{id:"checkadmin",children:"CheckAdmin"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CheckAdmin() As %Status\n"})}),"\n",(0,r.jsx)(s.h3,{id:"exists",children:"Exists"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Exists(Name As %String = "", Namespace As %String = "", ByRef DocDB As %ObjectHandle, ByRef Status As %Status) As %Boolean\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Doc DB exists.",(0,r.jsx)(s.br,{}),"\nThis method checks for the existence of a Doc DB in the security database.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nName - Name of the Doc DB",(0,r.jsx)(s.br,{}),"\nNamespace - Namespace of the Doc DB Return values:",(0,r.jsx)(s.br,{}),"\nIf Value of the method = 0 (Doc DB does not exist, or some error occured)",(0,r.jsx)(s.br,{}),"\nDocDB = Null",(0,r.jsx)(s.br,{}),'\nStatus = Doc DB "x" does not exist, or other error message']}),"\n",(0,r.jsxs)(s.p,{children:["If Value of the method = 1 (Doc DB exists)",(0,r.jsx)(s.br,{}),"\nDoc DB = Object handle to Doc DB",(0,r.jsx)(s.br,{}),"\nStatus = $$$OK"]}),"\n",(0,r.jsx)(s.h3,{id:"export",children:"Export"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Export(FileName As %String = "DocDBsExport.xml", ByRef NumExported As %Integer, Names As %String = "*", Namespaces As %String = "*") As %Status\n'})}),"\n",(0,r.jsxs)(s.p,{children:["This method exports Doc DB records to a file in xml format.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nFilename - Output file name",(0,r.jsx)(s.br,{}),"\nNumExported (byref) - Returns number of records exported.",(0,r.jsx)(s.br,{}),'\nNames - Comma separated list of Doc DBs to export, "*" = All',(0,r.jsx)(s.br,{}),'\nNamespaces - Comma separated list of Namespaces to export, "*" = All']}),"\n",(0,r.jsx)(s.h3,{id:"get",children:"Get"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Get(Name As %String, Namespace As %String, ByRef Properties As %String) As %Status\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Get a Doc DBs properties.",(0,r.jsx)(s.br,{}),"\nGets a Doc DBs properties from the security database.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nName - Name of the Doc DB",(0,r.jsx)(s.br,{}),"\nnamespace - Namespace of the Doc DB",(0,r.jsx)(s.br,{}),"\nReturn values:",(0,r.jsx)(s.br,{}),"\nProperties - Array of properties",(0,r.jsx)(s.br,{}),'\n"Description" - Description of the Doc DB',(0,r.jsx)(s.br,{}),'\n"Enabled" - Doc DB is enabled',(0,r.jsx)(s.br,{}),'\n"Resource" - Resource of the Doc DB']}),"\n",(0,r.jsx)(s.h3,{id:"getproperties",children:"GetProperties"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetProperties(DocDB As %ObjectHandle, ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Get a Doc DBs properties.",(0,r.jsx)(s.br,{}),"\nGets a Doc DBs properties from the security database.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nDocDB - Object handle to an Doc DB record",(0,r.jsx)(s.br,{}),"\nReturn values:",(0,r.jsx)(s.br,{}),"\nProperties - See the Get method for more information on properties returned"]}),"\n",(0,r.jsx)(s.h3,{id:"import",children:"Import"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Import(FileName As %String = "DocDBsExport.xml", ByRef NumImported As %Integer, Flags As %Integer = 0) As %Status\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Import Doc DB records from an xml file.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nFileName - Filename to import Doc DB records from",(0,r.jsx)(s.br,{}),"\nNumImported (byref) - Returns number of records imported",(0,r.jsx)(s.br,{}),"\nFlags - Control import",(0,r.jsx)(s.br,{}),"\nBit 0 - Do not import records, just return count",(0,r.jsx)(s.br,{}),"\nNote: On failure, no records will be imported"]}),"\n",(0,r.jsx)(s.h3,{id:"modify",children:"Modify"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod Modify(Name As %String = "", Namespace As %String = "", ByRef Properties As %String) As %Status\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Modify a Doc DBs properties.",(0,r.jsx)(s.br,{}),"\nModifies a Doc DBs properties from the security database.",(0,r.jsx)(s.br,{}),"\nParameters:",(0,r.jsx)(s.br,{}),"\nName - Name of the Doc DB",(0,r.jsx)(s.br,{}),"\nNamespace - Namespace of the Doc DB",(0,r.jsx)(s.br,{}),"\nSee the Get() method for a description of the Properties parameter.",(0,r.jsx)(s.br,{}),"\nIf a specific property is not passed in the properties array, the value is not modified."]}),"\n",(0,r.jsx)(s.h3,{id:"modifyone",children:"ModifyOne"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ModifyOne(ByRef Properties As %String) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"onaftersave",children:"%OnAfterSave"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnAfterSave(insert As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called after the object's data has been successfully written to disk."}),"\n",(0,r.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,r.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail."}),"\n",(0,r.jsx)(s.h3,{id:"onbeforesave",children:"%OnBeforeSave"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnBeforeSave(insert As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"This callback method is invoked by the %Save method to provide notification that the object is being saved. It is called before any data is written to disk."}),"\n",(0,r.jsx)(s.p,{children:"insert will be set to 1 if this object is being saved for the first time."}),"\n",(0,r.jsx)(s.p,{children:"If this method returns an error then the call to %Save will fail."}),"\n",(0,r.jsx)(s.h3,{id:"ondelete",children:"%OnDelete"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod %OnDelete(oid As %ObjectIdentity) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"This callback method is invoked by the %Delete method to provide notification that the object specified by oid is being deleted."}),"\n",(0,r.jsx)(s.p,{children:"If this method returns an error then the object will not be deleted."}),"\n",(0,r.jsx)(s.h3,{id:"onvalidateobject",children:"%OnValidateObject"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnValidateObject() As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"This callback method is invoked by the %ValidateObject method to provide notification that the current object is being validated."}),"\n",(0,r.jsx)(s.p,{children:"If this method returns an error then %ValidateObject will fail."}),"\n",(0,r.jsx)(s.h3,{id:"listexecute",children:"ListExecute"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ListExecute(ByRef %qHandle As %Binary, Names As %String = "*", Namespaces As %String = "*", Filter As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Return list of Doc DBs.",(0,r.jsx)(s.br,{}),'\nNames - Comma separated list of Doc DB names, "*" = All',(0,r.jsx)(s.br,{}),'\nNamespaces - Comma separated list of Namespaces, "*" = All',(0,r.jsx)(s.br,{}),"\nNote: This query may change in future versions"]}),"\n",(0,r.jsx)(s.h3,{id:"listfetch",children:"ListFetch"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ListFetch(ByRef %qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = ListExecute ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"listclose",children:"ListClose"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ListClose(ByRef %qHandle As %Binary) As %Status [ Internal, PlaceAfter = ListExecute ]\n"})})]})}function o(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>l});var r=t(96540);const n={},a=r.createContext(n);function i(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);