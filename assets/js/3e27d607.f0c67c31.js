"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[9471],{85212:(e,r,t)=>{t.r(r),t.d(r,{contentTitle:()=>a,default:()=>d,frontMatter:()=>n,toc:()=>o});var s=t(74848),i=t(28453);const n={pagination_prev:null,pagination_next:null},a="SYS.Mirror",o=[{value:"Parameters",id:"parameters",level:2},{value:"DOMAIN",id:"domain",level:3},{value:"JrnPurgeDefaultWaitDuration",id:"jrnpurgedefaultwaitduration",level:3},{value:"Methods",id:"methods",level:2},{value:"BecomePrimary",id:"becomeprimary",level:3},{value:"AddDatabase",id:"adddatabase",level:3},{value:"AddDatabaseNonPrimary",id:"adddatabasenonprimary",level:3},{value:"PrimaryPurgeCriteria",id:"primarypurgecriteria",level:3},{value:"PurgeAsyncMemberJournalFiles",id:"purgeasyncmemberjournalfiles",level:3},{value:"PurgeJournalFiles",id:"purgejournalfiles",level:3},{value:"AddVirtualIPAddress",id:"addvirtualipaddress",level:3},{value:"DeleteVirtualIPAddress",id:"deletevirtualipaddress",level:3},{value:"CatchupDB",id:"catchupdb",level:3},{value:"ActivateMirroredDatabase",id:"activatemirroreddatabase",level:3},{value:"RemoveMirroredDatabase",id:"removemirroreddatabase",level:3},{value:"AsyncMemberListExecute",id:"asyncmemberlistexecute",level:3},{value:"AsyncMemberListClose",id:"asyncmemberlistclose",level:3},{value:"AsyncMemberListFetch",id:"asyncmemberlistfetch",level:3},{value:"GetFailoverMemberStatusEMS",id:"getfailovermemberstatusems",level:3},{value:"GetFailoverMemberStatus",id:"getfailovermemberstatus",level:3},{value:"LatencyTimeToDisplay",id:"latencytimetodisplay",level:3},{value:"GetJournalBlockTime",id:"getjournalblocktime",level:3},{value:"GetJournalLatencyFromNodeInfo",id:"getjournallatencyfromnodeinfo",level:3},{value:"GetDatabaseLatencyFromNodeInfo",id:"getdatabaselatencyfromnodeinfo",level:3},{value:"DistanceFromPrimaryJournalFiles",id:"distancefromprimaryjournalfiles",level:3},{value:"DistanceFromPrimaryDatabases",id:"distancefromprimarydatabases",level:3},{value:"JournalFilesLatency",id:"journalfileslatency",level:3},{value:"DatabasesLatency",id:"databaseslatency",level:3},{value:"StartMirror",id:"startmirror",level:3},{value:"StopMirror",id:"stopmirror",level:3},{value:"IsMirrorStarted",id:"ismirrorstarted",level:3},{value:"LocalizeMemberStatus",id:"localizememberstatus",level:3},{value:"LocalizeMemberType",id:"localizemembertype",level:3},{value:"GetDisconnectedText",id:"getdisconnectedtext",level:3},{value:"GetMemberInfo",id:"getmemberinfo",level:3},{value:"MemberStatusListExecute",id:"memberstatuslistexecute",level:3},{value:"MemberStatusListClose",id:"memberstatuslistclose",level:3},{value:"MemberStatusListFetch",id:"memberstatuslistfetch",level:3},{value:"MirrorTrackedByAsyncMemberExecute",id:"mirrortrackedbyasyncmemberexecute",level:3},{value:"MirrorTrackedByAsyncMemberClose",id:"mirrortrackedbyasyncmemberclose",level:3},{value:"MirrorTrackedByAsyncMemberFetch",id:"mirrortrackedbyasyncmemberfetch",level:3},{value:"GetPrimaryJournalPosition",id:"getprimaryjournalposition",level:3},{value:"MirroredDatabaseListExecute",id:"mirroreddatabaselistexecute",level:3},{value:"MirroredDatabaseListClose",id:"mirroreddatabaselistclose",level:3},{value:"MirroredDatabaseListFetch",id:"mirroreddatabaselistfetch",level:3},{value:"JournalListExecute",id:"journallistexecute",level:3},{value:"JournalListClose",id:"journallistclose",level:3},{value:"JournalListFetch",id:"journallistfetch",level:3},{value:"MirroredDatabaseDisplayExecute",id:"mirroreddatabasedisplayexecute",level:3},{value:"MirroredDatabaseDisplayClose",id:"mirroreddatabasedisplayclose",level:3},{value:"MirroredDatabaseDisplayFetch",id:"mirroreddatabasedisplayfetch",level:3},{value:"JrnPurgeDefaultWait",id:"jrnpurgedefaultwait",level:3},{value:"UpdateDNinMirrorSetMember",id:"updatedninmirrorsetmember",level:3},{value:"CheckISCAgent",id:"checkiscagent",level:3},{value:"CreateNewMirrorSet",id:"createnewmirrorset",level:3},{value:"JoinMirrorAsFailoverMember",id:"joinmirrorasfailovermember",level:3},{value:"JoinMirrorAsAsyncMember",id:"joinmirrorasasyncmember",level:3},{value:"AddFailoverMember",id:"addfailovermember",level:3},{value:"UpdateMirrorSSL",id:"updatemirrorssl",level:3},{value:"DefaultSystemName",id:"defaultsystemname",level:3},{value:"BuildJournalLog",id:"buildjournallog",level:3},{value:"BuildJournalLogWithFiles",id:"buildjournallogwithfiles",level:3},{value:"AsyncDejournalStatus",id:"asyncdejournalstatus",level:3},{value:"AsyncDejournalStart",id:"asyncdejournalstart",level:3},{value:"AsyncDejournalStop",id:"asyncdejournalstop",level:3},{value:"DejournalPauseDatabase",id:"dejournalpausedatabase",level:3},{value:"Promote",id:"promote",level:3},{value:"PromoteCheck",id:"promotecheck",level:3},{value:"Demote",id:"demote",level:3},{value:"DemotePartner",id:"demotepartner",level:3},{value:"PromoteWithPartner",id:"promotewithpartner",level:3},{value:"PromoteWithNoPartner",id:"promotewithnopartner",level:3},{value:"PromoteWithSelectedPartner",id:"promotewithselectedpartner",level:3},{value:"PendingNewMembersExecute",id:"pendingnewmembersexecute",level:3},{value:"PendingNewMembersClose",id:"pendingnewmembersclose",level:3},{value:"PendingNewMembersFetch",id:"pendingnewmembersfetch",level:3},{value:"PendingDNUpdatesExecute",id:"pendingdnupdatesexecute",level:3},{value:"PendingDNUpdatesClose",id:"pendingdnupdatesclose",level:3},{value:"PendingDNUpdatesFetch",id:"pendingdnupdatesfetch",level:3},{value:"RemoveFromApprovalList",id:"removefromapprovallist",level:3},{value:"GetDejournalFilterSetting",id:"getdejournalfiltersetting",level:3},{value:"CheckLeftOverJournalFile",id:"checkleftoverjournalfile",level:3},{value:"TCPSendBufferSize",id:"tcpsendbuffersize",level:3},{value:"TCPReceiveBufferSize",id:"tcpreceivebuffersize",level:3},{value:"MissingMirroredDatabasesExecute",id:"missingmirroreddatabasesexecute",level:3},{value:"MissingMirroredDatabasesClose",id:"missingmirroreddatabasesclose",level:3},{value:"MissingMirroredDatabasesFetch",id:"missingmirroreddatabasesfetch",level:3},{value:"IsFailoverReady",id:"isfailoverready",level:3},{value:"VerifyMirrorSSLCertificates",id:"verifymirrorsslcertificates",level:3},{value:"RemoveMirrorConfiguration",id:"removemirrorconfiguration",level:3},{value:"RemoveOneMirrorSet",id:"removeonemirrorset",level:3},{value:"AuthorizePendingMembers",id:"authorizependingmembers",level:3},{value:"ConvertProtocols",id:"convertprotocols",level:3},{value:"GetCurrentState",id:"getcurrentstate",level:3},{value:"ReduceMirrorLogSize",id:"reducemirrorlogsize",level:3},{value:"UpdateMirrorUseSSL",id:"updatemirrorusessl",level:3},{value:"SetNoFailover",id:"setnofailover",level:3},{value:"ClearNoFailover",id:"clearnofailover",level:3}];function l(e){const r={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",reason:"reason",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"sysmirror",children:"SYS.Mirror"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"Class SYS.Mirror Extends %SYSTEM.Help [ System = 4 ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"This class contains the public interface (unless otherwise noted) to the Mirroring subsystem. It contains methods that return information and provide control for customer scripts."}),"\n",(0,s.jsx)(r.p,{children:"This class can only be used by programs running in %SYS. %SYSTEM.Mirror contains public methods which can be called by programs running in any namespace."}),"\n",(0,s.jsx)(r.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(r.h3,{id:"domain",children:"DOMAIN"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'Parameter DOMAIN = "%Utility";\n'})}),"\n",(0,s.jsx)(r.p,{children:"Default Localization Domain"}),"\n",(0,s.jsx)(r.h3,{id:"jrnpurgedefaultwaitduration",children:"JrnPurgeDefaultWaitDuration"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"Parameter JrnPurgeDefaultWaitDuration = 14;\n"})}),"\n",(0,s.jsx)(r.p,{children:"Mirror journal purge wait duration"}),"\n",(0,s.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(r.h3,{id:"becomeprimary",children:"BecomePrimary"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod BecomePrimary() As %Boolean\n"})}),"\n",(0,s.jsx)(r.p,{children:"Turn the local node into the primary mirror member when it is currently the backup."}),"\n",(0,s.jsx)(r.p,{children:'This method does not force the node to become the primary "at all costs", it is designed for normal takeover when some external code has determined that the other node is either down or has failed, or the user simply wants this node to become the primary. This method will override the "cstop nofailover" state which may have been declared when the other node shut down. This method works by forcing the other node down.'}),"\n",(0,s.jsxs)(r.p,{children:["Return Value:",(0,s.jsx)(r.br,{}),"\nTRUE = node is now the primary (could have already been the primary)",(0,s.jsx)(r.br,{}),"\nFALSE = failed to become the primary"]}),"\n",(0,s.jsx)(r.h3,{id:"adddatabase",children:"AddDatabase"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AddDatabase(Directory As %String, MirrorDBName As %String = "", enableJournalOK As %Boolean = 1) As %Status\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Adds a database to the mirror.",(0,s.jsx)(r.br,{}),"\nCan only be run on the primary mirror member."]}),"\n",(0,s.jsx)(r.p,{children:"Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Directory is the path to the database to add to the mirror. This database must be listed in the dataset section of the configuration file or an error is returned."}),"\n",(0,s.jsx)(r.li,{children:"MirrorDBName if specified is the name to assign to the database in the mirror. If omitted this defaults to the database name which points to this database in the [Databases] section of the configuration file. This must be between 1 and 62 characters and must not contain any ':' characters."}),"\n",(0,s.jsx)(r.li,{children:"enableJournalOK if specified as FALSE means that if the target database does not have journaling enabled, the operation will fail. If this parameter is omitted or specified as TRUE, then journaling will be enabled for the target database (if it isn't already) as part of adding it to the mirror."}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"If the operation succeeds, the database will be mounted and journaling will be enabled. If the operation fails, the target database may be mounted and journaling may be enabled (assuming EnableJournalOK is not FALSE) depending on where the error occured."}),"\n",(0,s.jsx)(r.h3,{id:"adddatabasenonprimary",children:"AddDatabaseNonPrimary"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AddDatabaseNonPrimary(Directory As %String, MirrorSetName As %String = "", MirrorDBName As %String = "", JrnPointMirfcnt As %Integer, JrnPointOffset As %Integer, DBInfo As %String = "", RunCatchupDB As %Boolean = 1, enableJournalOK As %Boolean = 1) As %Status [ Internal ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Adds a database to the mirror.",(0,s.jsx)(r.br,{}),"\nCan only be run on the NON-primary mirror member."]}),"\n",(0,s.jsx)(r.p,{children:"Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Directory is the path to the database to add to the mirror. This database must be listed in the dataset section of the configuration file or an error is returned."}),"\n",(0,s.jsx)(r.li,{children:"MirrorSetName The mirror set name of the database to be converted to."}),"\n",(0,s.jsx)(r.li,{children:"MirrorDBName if specified is the name to assign to the database in the mirror. This must be between 1 and 62 characters and must not contain any ':' characters."}),"\n",(0,s.jsx)(r.li,{children:"JrnPointMirfcnt the mirror journal file count to be recorded in the mirrored database for starting restore position."}),"\n",(0,s.jsx)(r.li,{children:"JrnPointOffset the mirror journal file offset to be recorded in the mirrored database for starting restore position."}),"\n",(0,s.jsx)(r.li,{children:"DBInfo The database information (output from $SYSTEM.Mirror.DBGetInfo(0)). If this is not specified or a null string then this method will retrieve the DB information from the primary (or failover member), otherwise this method won't query from the other failover member and use the information passed in. This method saved the Mirror GUID, database GUID of DBInfo into the newly converted mirrored DB."}),"\n",(0,s.jsx)(r.li,{children:"RunCatchupDB if TRUE, it will run CatchupDB() method after successfully converted this database. Otherwise user has to run CatchupDB() method manually to make the converted mirrored database active and up-to-date. The default value is TRUE."}),"\n",(0,s.jsx)(r.li,{children:"enableJournalOK if specified as FALSE means that if the target database does not have journaling enabled, the operation will fail. If this parameter is omitted or specified as TRUE, then journaling will be enabled for the target database (if it isn't already) as part of adding it to the mirror."}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"If the operation succeeds, the database will be mounted and journaling will be enabled. If the operation fails, the target database may be mounted and journaling may be enabled (assuming EnableJournalOK is not FALSE) depending on where the error occured."}),"\n",(0,s.jsx)(r.p,{children:"Warning! You have to use this method with care, you need to make sure the database contained data up to the JrnPointMirfcnt,JrnPointOffset journal position, otherwise it would not have synchronized data with the mirrored database in primary."}),"\n",(0,s.jsx)(r.h3,{id:"primarypurgecriteria",children:"PrimaryPurgeCriteria"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod PrimaryPurgeCriteria(mirrorname As %String, minjrnfile As %BigInt, maxdisconnecttime As %Integer, Type As %String = "0", ByRef ReasonToKeep As %String) As %BigInt [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Function called by primary member in SYS.Mirror.PurgeJournalFiles() or received GetJournalInfo requests from connected backup/DR members to return the minimum mirror journal file count to be restained in mirror journal file purge operation. Type: 0 - requested by Primary's purge, 1 - requested by Backup's purge, 2 - requested by DR's purge (DR's system name appended)."}),"\n",(0,s.jsx)(r.h3,{id:"purgeasyncmemberjournalfiles",children:"PurgeAsyncMemberJournalFiles"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PurgeAsyncMemberJournalFiles(ByRef Status As %Status, CheckOnly As %Boolean = 1, ByRef PurgedCount As %Integer, ByRef PurgedMB As %Integer, ByRef PurgedRange As %List, ByRef PurgedFiles As %String, SystemLimit As %String) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"purgejournalfiles",children:"PurgeJournalFiles"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod PurgeJournalFiles(CheckOnly As %Boolean = 1, StartFile As %String = "", maxdisconnecttime As %String = "", mirrorname As %String = "", ByRef PurgedCount As %Integer, ByRef PurgedMB As %Integer, ByRef PurgedRange As %List, ByRef PurgedFiles As %String) As %Status\n'})}),"\n",(0,s.jsx)(r.p,{children:"Optionally purges and returns information on mirror journal files which were/can be purged because they are no longer required by the mirrored databases on this, or by other mirror members."}),"\n",(0,s.jsx)(r.p,{children:"Called from the purge routine in ^JRNUTIL when journal files are purged to see if we can remove the mirror journal files corresponding to the same criteria (e.g. a date, a backup, a filename, etc). Calling this method directly bypasses the consideration of subsystems outside of mirroring (eg. backups) which may require older journal files than are required to support mirroring."}),"\n",(0,s.jsx)(r.p,{children:"A journal file is eligible to be purged if it is not required on this node for transaction rollback or journal restore and we have sent the journal file to the other failover members or we can determine that they do not require it. For reporting async members we only keep the journal files they require if they have connected within a certain time frame specified by the maxdisconnecttime parameter."}),"\n",(0,s.jsx)(r.p,{children:"Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"CheckOnly TRUE means report on what files would be deleted if they were purged. FALSE means purge the files and report on the files which were deleted."}),"\n",(0,s.jsx)(r.li,{children:"StartFile if specified this is the latest file we want to purge (eg. purge this file and older files). The starting point of the purge can still be moved earlier if this file is required by one or more of the other mirror members."}),"\n",(0,s.jsxs)(r.li,{children:["maxdisconnecttime (0 means infinite)",(0,s.jsx)(r.br,{}),"\nIf a non-failover node has not connected within this period then we do not consider what journal files it hasn't seen when choosing files to purge."]}),"\n",(0,s.jsx)(r.li,{children:"mirrorname Not required on failover members which are only a member of a single mirror. Required on non-failover members to indicate which mirror's journal files should be checked.\nOutput Parameters:"}),"\n",(0,s.jsx)(r.li,{children:"PurgedCount Passed by reference receives the # of journal files deleted."}),"\n",(0,s.jsx)(r.li,{children:"PurgedMB Passed by reference returns the # of MB reclaimed by deleting the journal files."}),"\n",(0,s.jsx)(r.li,{children:"PurgedRange Passed by reference has the value $LB(first,last) where first and last are the mirror journal file #'s of the first and last journal files purged. This value only has meaning when PurgedCount is not 0."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"addvirtualipaddress",children:"AddVirtualIPAddress"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod AddVirtualIPAddress(Interface As %String, IPAddr As %String) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"deletevirtualipaddress",children:"DeleteVirtualIPAddress"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod DeleteVirtualIPAddress(Interface As %String, IPAddr As %String) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"catchupdb",children:"CatchupDB"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod CatchupDB(DBList As %String, JournalLocation As %String = "", ByRef DBErrList As %String) As %Integer [ Final ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:['Invoked when this is a mirror member (backup or primary) and we have one or more mirrored database which needs to be "caught up" and "linked in" to the active system. This generally occurs when a database is dismounted on a backup or or after a mirrored database is restored from backup, copied between systems, etc.',(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["DBList is a ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$list"}),' of sfn\'s we want to "catchup".',(0,s.jsx)(r.br,{}),"\nThis is passed as a list, not an array, because that allows us to job this off (a $Piece list would be fine too)"]}),"\n",(0,s.jsxs)(r.li,{children:["JournalLocation is a ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$list"})," of the locations of the mirror journal files to be restored, it is only used for non-mirror member. The mirror member will ignore this because it will find the journal file through the agent of the mirror system. If this is null it defaults to the current/alternate journal directories of the running system."]}),"\n",(0,s.jsxs)(r.li,{children:["DBErrList is a variable passed by reference which receives a ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$list"})," of sfns which were not caught up."]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Return Value:",(0,s.jsx)(r.br,{}),"\n0 - Failed - no databases were caught up",(0,s.jsx)(r.br,{}),"\n1 - Success, at least one database was caught up - DBErrList contains a ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$LIST"})," of",(0,s.jsx)(r.br,{}),"\nthe sfn's which were not caught up as part of the operation. The list is empty",(0,s.jsx)(r.br,{}),"\nif all of the requested databases have been caught up.",(0,s.jsx)(r.br,{}),"\nAdditional information regarding errors might be found in the console log."]}),"\n",(0,s.jsx)(r.p,{children:"Allocates a block of dejournaling memory and uses the C based dejournaler to apply journal records to the mirrored databases."}),"\n",(0,s.jsx)(r.p,{children:"This can be used by non-mirror members, but they must have a copy of the mirror journal log available so they can build a list of journal files to restore."}),"\n",(0,s.jsx)(r.p,{children:'On active mirror members the databases become "active" at the end of a successful operation. On a backup this means they\'re linked into the active dejournaling system. On the primary this means transaction rollback is performed and then the databases are marked read/write and are available for use.'}),"\n",(0,s.jsx)(r.h3,{id:"activatemirroreddatabase",children:"ActivateMirroredDatabase"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod ActivateMirroredDatabase(Directory As %String) As %Status\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Activate a mirrored database for use on this system",(0,s.jsx)(r.br,{}),'\nUsed when a mirrored database is moved to a home on a system or when it is copied between instances (perhaps restored from a backup) to mark it as "active". A database which is not marked as active is read/only, even on the primary, and it is not kept up to date on a backup. After a database is activated, CatchupDB is used to get it caught up so it can become part of the active mirror.']}),"\n",(0,s.jsx)(r.h3,{id:"removemirroreddatabase",children:"RemoveMirroredDatabase"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod RemoveMirroredDatabase(Directory As %String) As %Status\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Remove a database from the mirror",(0,s.jsx)(r.br,{}),"\nUpdates a database so that it is no longer considered part of a mirror so that it can be mounted read/write on any InterSystems IRIS instance (eg. not just the primary member of the mirror it was a part of)."]}),"\n",(0,s.jsx)(r.p,{children:"Typically used in cases where a mirrored database is moved to a non-mirror member or when a mirror member is removed from the mirror and the former mirrored databases need to be mounted read/write."}),"\n",(0,s.jsx)(r.h3,{id:"asyncmemberlistexecute",children:"AsyncMemberListExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AsyncMemberListExecute(ByRef qHandle As %Binary, Name As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"List all connected Async Mirror Member in the system."}),"\n",(0,s.jsx)(r.h3,{id:"asyncmemberlistclose",children:"AsyncMemberListClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod AsyncMemberListClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = AsyncMemberListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"asyncmemberlistfetch",children:"AsyncMemberListFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod AsyncMemberListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = AsyncMemberListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getfailovermemberstatusems",children:"GetFailoverMemberStatusEMS"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetFailoverMemberStatusEMS(ByRef ThisMember As %String, ByRef OtherMember As %String) As %Status [ Internal, WebMethod ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Wrapper method for GetFailoverMemberStatus so an EMS can receive this data"}),"\n",(0,s.jsx)(r.h3,{id:"getfailovermemberstatus",children:"GetFailoverMemberStatus"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetFailoverMemberStatus(ByRef ThisMember As %String, ByRef OtherMember As %String) As %Status\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Return mirror failover members' status.",(0,s.jsx)(r.br,{}),"\nReturned member information in ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$List"})," format.",(0,s.jsx)(r.br,{}),"\nIt contains $LB(MirrorMemberName,AgentIP,Primary/Backup,Status,MirrorAddress,ECPAddress).",(0,s.jsx)(r.br,{}),"\nThe Status in the list can be:",(0,s.jsx)(r.br,{}),"\n'Active' - This system is actively involved in mirroring as opposed to being in an initialization or 'Catchup' state.",(0,s.jsx)(r.br,{}),"\n'Restart' - This system was a mirror and is still starting up. Set when we load the mirror config data and when a backup resets. Cleared during primary/backup init or explicitly by $SYSTEM.Mirror.ResetBackup().",(0,s.jsx)(r.br,{}),"\n'Trouble' - This backup member is no longer active and won't take over without contacting the other failover system.",(0,s.jsx)(r.br,{}),"\n'Failover' - This is a backup becoming the new primary because the primary failed. Incoming ECP sessions should be put on hold while in 'Failover' state.",(0,s.jsx)(r.br,{}),"\n'Recovery' - This is a backup becoming the new primary because the primary failed and we should accept existing ECP sessions but not new ones.",(0,s.jsx)(r.br,{}),"\n'Deciding' - This system is in the state to decide which failover member can become primary.",(0,s.jsx)(r.br,{}),"\n'Exit' - The mirroring of this system is shutting down.",(0,s.jsx)(r.br,{}),"\n'Inactive' - This failover member is not a primary member nor a backup member. 'Catchup' - This system is catching up all mirrored databases with existing mirror journal files."]}),"\n",(0,s.jsx)(r.h3,{id:"latencytimetodisplay",children:"LatencyTimeToDisplay"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod LatencyTimeToDisplay(Latency As %Integer) As %String [ Internal ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getjournalblocktime",children:"GetJournalBlockTime"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetJournalBlockTime(MirrorName As %String, ByRef JrnCount As %Integer = 0, ByRef JrnOffset As %Integer = 0) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Get the jbcurtim in the journal block of the offset in a journal file. If the JrnCount is zero we get the last mirror journal file in log. If the JrnOffset is zero we get the timestamp in the last block. Return the timestamp in the block if succeed, return zero if failed."}),"\n",(0,s.jsx)(r.h3,{id:"getjournallatencyfromnodeinfo",children:"GetJournalLatencyFromNodeInfo"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetJournalLatencyFromNodeInfo(mirname As %String, latency As %String) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Translate the information from GetNodeInfo^MIRRORCTL() to the journal latency data."}),"\n",(0,s.jsx)(r.h3,{id:"getdatabaselatencyfromnodeinfo",children:"GetDatabaseLatencyFromNodeInfo"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetDatabaseLatencyFromNodeInfo(mirname As %String, latency As %String) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Translate the information from GetNodeInfo^MIRRORCTL() to the database latency data."}),"\n",(0,s.jsx)(r.h3,{id:"distancefromprimaryjournalfiles",children:"DistanceFromPrimaryJournalFiles"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod DistanceFromPrimaryJournalFiles() As %Integer\n"})}),"\n",(0,s.jsx)(r.p,{children:"On a connected backup or async member this returns an indication of how up to date the node is with respect to retrieving journal data from the current primary."}),"\n",(0,s.jsx)(r.p,{children:"Return Value:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"0 = Error, this node is not connected to the primary mirror member (this node could be the primary or it could be disconnected)."}),"\n",(0,s.jsx)(r.li,{children:"1 = This node is caught up to the current end of the journal file on the primary."}),"\n",(0,s.jsx)(r.li,{children:"negative # is the # of journal files behind the primary we are. -1 would mean we're receiving the file prior to the current file, -2 the file prior to that, etc."}),"\n",(0,s.jsx)(r.li,{children:"positive # means we're receiving the current journal file on the primary and this is the # of bytes in the file we're behind."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"distancefromprimarydatabases",children:"DistanceFromPrimaryDatabases"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod DistanceFromPrimaryDatabases() As %Integer\n"})}),"\n",(0,s.jsx)(r.p,{children:"On a connected backup or async member this returns an indication of how up to date the active databases are with respect to the journal data we've received from the primary."}),"\n",(0,s.jsx)(r.p,{children:"Return Value:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"0 = Error, this node is not connected to the primary mirror member (this node could be the primary or it could be disconnected)."}),"\n",(0,s.jsx)(r.li,{children:"1 = The databases are caught up to the current end of the journal data"}),"\n",(0,s.jsx)(r.li,{children:"negative # is the # of journal files behind the last one. -1 would mean the journal file prior to the last file is being restore, -2 the file prior to that, etc."}),"\n",(0,s.jsx)(r.li,{children:"positive # means we're restoring the current journal file and this is the number of bytes remaining in the file to be restored"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"journalfileslatency",children:"JournalFilesLatency"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod JournalFilesLatency(MirrorName As %String = "") As %Integer\n'})}),"\n",(0,s.jsx)(r.p,{children:"On a connected backup or async member this returns an indication of how up to date the node is with respect to retrieving journal data from the current primary in time (seconds)"}),"\n",(0,s.jsx)(r.p,{children:"Return Value:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"-1 = Error, this node is not connected to the primary mirror member (this node could be the primary or it could be disconnected)."}),"\n",(0,s.jsx)(r.li,{children:"0 = This node is caught up to the current end of the journal file on the primary."}),"\n",(0,s.jsx)(r.li,{children:"Positive # is the # of seconds behind the primary we are."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"databaseslatency",children:"DatabasesLatency"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod DatabasesLatency(MirrorName As %String = "") As %Integer\n'})}),"\n",(0,s.jsx)(r.p,{children:"On a connected backup or async member this returns an indication of how up to date (in seconds) the active databases are with respect to the journal data we've received from the primary."}),"\n",(0,s.jsx)(r.p,{children:"Return Value:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"-1,error text = Error, this node is not connected to the primary mirror member (this node could be the primary or it could be disconnected)."}),"\n",(0,s.jsx)(r.li,{children:"0 = The databases are caught up to the current end of the journal data"}),"\n",(0,s.jsx)(r.li,{children:"positive # means we're restoring the current journal file and this is the time remaining for the file to be restored"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"startmirror",children:"StartMirror"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod StartMirror(MirrorName As %String = "") As %Status\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Activate and startup a mirror.",(0,s.jsx)(r.br,{}),"\nWhen MirrorName is null it must be a initial startup. Otherwise it is a restart. Returns $$$ERROR(reason) if we fail to startup the mirror. Otherwise returns $$$OK."]}),"\n",(0,s.jsx)(r.h3,{id:"stopmirror",children:"StopMirror"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod StopMirror(MirrorName As %String = "", Timeout As %Integer = 10) As %Status\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Shutdown a mirror.",(0,s.jsx)(r.br,{}),"\nOnly Backup or Reporting node could be shutdown. Primary node Shutdown is not allowed.",(0,s.jsx)(r.br,{}),"\nWhen MirrorName is null it will shutdown all mirrors for Reporting node. The Timeout is time (in seconds) to wait on the shutdown to be completed. Returns $$$ERROR(reason) if we fail to stop the mirror. Otherwise returns $$$OK."]}),"\n",(0,s.jsx)(r.h3,{id:"ismirrorstarted",children:"IsMirrorStarted"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod IsMirrorStarted(MirrorName As %String) As %Integer\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Whether the specific mirror set is started or not. It checked whether the MIRRORMGR master daemon of the specific mirror set is running or not.",(0,s.jsx)(r.br,{}),"\nMirrorName needs to be specified and it has to be a non null value for this method.",(0,s.jsx)(r.br,{}),"\nReturned 1 if the specific mirror set is started, otherwise returned 0."]}),"\n",(0,s.jsx)(r.h3,{id:"localizememberstatus",children:"LocalizeMemberStatus"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod LocalizeMemberStatus(status As %String) As %String [ Internal ]\n"})}),"\n",(0,s.jsxs)(r.p,{children:["LocalizeMemberStatus(string) takes the mirror member status returned from ##class(%SYSTEM.Mirror).GetMemberStatus returns the localized equivilent. <br",(0,s.jsx)(r.br,{}),"\nThis used by the MemberStatusList and MirrorTrackedByAsyncMember queries."]}),"\n",(0,s.jsx)(r.h3,{id:"localizemembertype",children:"LocalizeMemberType"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod LocalizeMemberType(type As %String) As %String [ Internal ]\n"})}),"\n",(0,s.jsxs)(r.p,{children:["LocalizeGetInfoType(string) takes the mirror member type returned from $SYSTEM.Mirror.GetInfo(4), ##class(%SYSTEM.Mirror).GetMemberType and the AsyncMemberList query and returns the localized equivilent. <br",(0,s.jsx)(r.br,{}),"\nThis is called by the MemberStatusList query."]}),"\n",(0,s.jsx)(r.h3,{id:"getdisconnectedtext",children:"GetDisconnectedText"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetDisconnectedText(mirname As %String, type As %String) As %String [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:'GetDisconnectedText(mirname,type): Find the latest time of ^MIRROR(mirname,"lastdisconnected",...) with matching type in the data value (PRIMARY or BACKUP).'}),"\n",(0,s.jsx)(r.h3,{id:"getmemberinfo",children:"GetMemberInfo"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetMemberInfo(mirname As %String, id As %Integer, Info As %String, ResIdx As %Integer) As %String [ Internal ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"memberstatuslistexecute",children:"MemberStatusListExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod MemberStatusListExecute(ByRef qHandle As %Binary, MirrorName As %String = "", Type As %Integer = 0) As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Get list of Mirror Members and its journal latency status."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"MemberName:"})," The system name of the mirror member."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"CurrentRole:"})," The current role of the mirror member. It could be 'Primary', 'Backup', 'Async' or 'Unknown'. The returned text is localized."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"CurrentStatus:"})," The current status of the mirror member. It could be 'Active', 'Restart', 'Trouble', 'Failover', 'Recovery', 'Deciding', 'Exit', 'Catchup', 'Async', 'Inactive' or 'Down'. The returned text is localized."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"JournalLatency:"}),' On a connected backup or async member this returns an indication of how up to date the node is with respect to retrieving journal data from the current primary. For an active backup, this is "Active" to indicate that it must be in sync with the primary.']}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"DatabaseLatency:"})," On a connected backup or async member this returns an indication of how up to date the active databases are with respect to the journal data we've received from the primary."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"JournalTimeLatency:"}),' On a connected backup or async member this returns an indication of how up to date the node is with respect to retrieving journal data from the current primary in time (seconds). For an active backup, this is "Active" to indicate that it must be in sync with the primary.']}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"DatabaseTimeLatency:"})," On a connected backup or async member this returns an indication of how up to date (in seconds) the active databases are with respect to the journal data we've received from the primary."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"DisplayType:"})," This is similar to CurrentRole but has a slightly different set of values which match the localized values returned from the GetMemberType method in %SYSTEM.Mirror. This is used in the mirror monitor displays."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"DisplayStatus:"})," This is similar to CurrentStatus but has value which match the localized values returned from the GetMemberStatus method in %SYSTEM.Mirror. This is used in the mirror monitor displays."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"memberstatuslistclose",children:"MemberStatusListClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MemberStatusListClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = MemberStatusListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"memberstatuslistfetch",children:"MemberStatusListFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MemberStatusListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = MemberStatusListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"mirrortrackedbyasyncmemberexecute",children:"MirrorTrackedByAsyncMemberExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod MirrorTrackedByAsyncMemberExecute(ByRef qHandle As %Binary, Names As %String = "*") As %Status [ Internal, ProcedureBlock = 1 ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"List of Mirror Sets tracked by the Async Member."}),"\n",(0,s.jsx)(r.h3,{id:"mirrortrackedbyasyncmemberclose",children:"MirrorTrackedByAsyncMemberClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MirrorTrackedByAsyncMemberClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = MirrorSetTrackedByAsyncMemberExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"mirrortrackedbyasyncmemberfetch",children:"MirrorTrackedByAsyncMemberFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MirrorTrackedByAsyncMemberFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = MirrorSetTrackedByAsyncMemberExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"getprimaryjournalposition",children:"GetPrimaryJournalPosition"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod GetPrimaryJournalPosition(MirrorSetName As %String = "", ByRef JournalPosition As %String) As %Status\n'})}),"\n",(0,s.jsx)(r.p,{children:"Get the journal position of the primary member so a mirror member could check the latency of its journal file or database with this position."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"MirrorSetName:"})," The mirror set name of the primary member.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"JournalPosition:"})," Returned journal position of the primary, it will be a null string if it is not success. The returned string conatained MirrorJournalFileCount^JournalOffset^TimeStampOfJournalBlock."]}),"\n",(0,s.jsx)(r.h3,{id:"mirroreddatabaselistexecute",children:"MirroredDatabaseListExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod MirroredDatabaseListExecute(ByRef qHandle As %Binary, DBName As %String = "*", MirrorSetName As %String = "*", CPFFile As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Get the list of mirrored databases for a specific mirror set or all mirror sets."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"DBName:"}),' The database name to be returned, default is "*" for all mirrored databases to be returned .',(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"MirrorSetName:"}),' The mirror set name to be retured, default is "*" for all mirror sets.',(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"Name:"})," The database name returned in the column.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"Directory:"})," The database directory path returned in the column.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"MirrorName:"})," The mirror set name returned in the column.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"MirrorStatus:"}),' The current "mirror state" of the database, it could be one of the following values.',(0,s.jsx)(r.br,{}),"\n'Normal' - (Primary Only) The mirrored database is writable (if not a read-only database) and global updates are being journaled.",(0,s.jsx)(r.br,{}),"\n'Dejournaling' - (Backup and Async) The database has been activated and caught up and mirroring is applying journal data to the database.",(0,s.jsx)(r.br,{}),"\n'Needs Catchup' - The database has been activated but not caught up yet; the Catchup operation is needed.",(0,s.jsx)(r.br,{}),"\n'Needs Activation' - The database has not been activated yet; the Activate and Catchup operations are needed.",(0,s.jsx)(r.br,{}),"\n'Obsolete' - The mirrored database is obsolete and should be removed from the mirror.",(0,s.jsx)(r.br,{}),"\n'Dejournaling Stopped' - Dejournaling has been stopped by an operator or an error.",(0,s.jsx)(r.br,{}),"\n'Database Dismounted' - The database is dismounted.",(0,s.jsx)(r.br,{}),"\n'Catchup Running' - The Catchup operation is running on the database.",(0,s.jsx)(r.br,{}),"\n'Orphaned' - The mirrored database is missing in primary.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"Latency:"})," This is an indication of how up to date the databases are with respect to the journal data we've received from the primary."]}),"\n",(0,s.jsx)(r.h3,{id:"mirroreddatabaselistclose",children:"MirroredDatabaseListClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MirroredDatabaseListClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = MirroredDatabaseListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"mirroreddatabaselistfetch",children:"MirroredDatabaseListFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MirroredDatabaseListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = MirroredDatabaseListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"journallistexecute",children:"JournalListExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod JournalListExecute(ByRef qHandle As %Binary, MirrorName As %String) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Get the list of journal files for a specific mirror set, the latest file first."}),"\n",(0,s.jsx)(r.h3,{id:"journallistclose",children:"JournalListClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod JournalListClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = JournalListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"journallistfetch",children:"JournalListFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod JournalListFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = JournalListExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"mirroreddatabasedisplayexecute",children:"MirroredDatabaseDisplayExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod MirroredDatabaseDisplayExecute(ByRef qHandle As %Binary, DBName As %String = "*", MirrorSetName As %String = "*", CPFFile As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Get the list of mirrored databases for a specific mirror set or all mirror sets for displaying."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"DBName:"}),' The database name to be returned, default is "*" for all mirrored databases to be returned .',(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"MirrorSetName:"}),' The mirror set name to be retured, default is "*" for all mirror sets.',(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"Name:"})," The database name returned in the column.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"Directory:"})," The database directory path returned in the column.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"MirrorName:"})," The mirror set name returned in the column.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"MirrorStatus:"}),' The value of Active, NeedCatchup, Obsolete or NeedActivation which is the current "mirror state" of the database.',(0,s.jsx)(r.br,{}),"\n'Active' - The mirrored database has been activated and caught up, Activate and CatchupDB operations are not needed.",(0,s.jsx)(r.br,{}),"\n'NeedCatchup' - The mirrored database has been activated but not caught up yet, CatchupDB operation is needed.",(0,s.jsx)(r.br,{}),"\n'Obsolete' - The mirrored database's GUID does not match the DB GUID in mirror journal file, it could be an old mirrored DB which was removed from the mirror.",(0,s.jsx)(r.br,{}),"\n'NeedActivation' - The mirrored database has not been activated yet. Activate and CatchupDB operations are needed.",(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"LastDejournalRecord:"})," This is the end offset of last dejournaled journal record applied to this mirrored database."]}),"\n",(0,s.jsx)(r.h3,{id:"mirroreddatabasedisplayclose",children:"MirroredDatabaseDisplayClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MirroredDatabaseDisplayClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = MirroredDatabaseDisplayExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"mirroreddatabasedisplayfetch",children:"MirroredDatabaseDisplayFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MirroredDatabaseDisplayFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = MirroredDatabaseDisplayExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"jrnpurgedefaultwait",children:"JrnPurgeDefaultWait"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod JrnPurgeDefaultWait(JrnPurgeWait As %Integer = "") As %Integer\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Set or get default value for how many days the mirror journal files are kept for non-failover/async nodes to connect and sync with failover members.",(0,s.jsx)(r.br,{}),"\nIf no param specified, the current value is returned."]}),"\n",(0,s.jsx)(r.p,{children:"Note: this parameter applies to failover members only."}),"\n",(0,s.jsx)(r.h3,{id:"updatedninmirrorsetmember",children:"UpdateDNinMirrorSetMember"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod UpdateDNinMirrorSetMember() As %Status [ Final ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"This method will update the local member in MirrorSetMembers section in CPF file, it will update the DN field of the local system."}),"\n",(0,s.jsx)(r.h3,{id:"checkiscagent",children:"CheckISCAgent"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod CheckISCAgent() As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Verify if ISCAgent is running, and the instance's version is less or equal the ISCAgent's version."}),"\n",(0,s.jsx)(r.h3,{id:"createnewmirrorset",children:"CreateNewMirrorSet"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod CreateNewMirrorSet(MirrorSetName As %String, SystemName As %String = "", ByRef MirrorInfo As %String, ByRef SSLInfo As %String) As %Status [ ProcedureBlock = 1 ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Method to create a new mirror set in the system. There should be no mirror set existing in the system before this call. This method will create the very first failover member of the mirror set."}),"\n",(0,s.jsx)(r.p,{children:"Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName is the name of the mirror set to be created. This name is converted to uppercase before storing. Only alphanumeric characters are allowed to be in the mirror set name. This name can not be a null string."}),"\n",(0,s.jsx)(r.li,{children:"SystemName is the mirror system name of the local system to be created. This is the name by which the system is known in the mirror. The name must not contain any colons (:) and is converted to uppercase before storing. Mirror system names must be unique across all mirror members as some mirror members (eg. async members) may participate in multiple mirrors and they will have the same system name in all of the mirrors. If this name is omitted or a null string, the system will create a system name for it. But if the default system name (value of $SYSTEM) is over 32 in length then passing null for SystemName will cause a failure in this call. So it is recommended that caller should call DefaultSystemName to check its return value before passing null to this parameter."}),"\n",(0,s.jsxs)(r.li,{children:["MirrorInfo Array of properties to create the mirror information in [Mirrors], [MapMirrors] sections of configuration file. If the value is not set, system uses the default value to create it. This is a pass-by-reference parameter.\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorInfo(\"ArbiterNode\") property in [Mirrors] section, an address and port for the arbiter node used by this mirror, the format of the value is 'address|port', default value is null string."}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("QOSTimeout") property in [Mirrors] section, default value is 8000.'}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("UseSSL") property in [Mirrors] section, default value is 0.'}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("VirtualAddress") property in [Mirrors] section, default value is null string.'}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("CompressionForFailoverMembers") property in [Mirrors] section controls the compression of data transmitted to the other failover member. Valid values are: 0=System Selected (default), 1=Uncompressed, 2=Compressed.'}),"\n",(0,s.jsx)(r.li,{children:"MirrorInfo(\"CompressionTypeForFailoverMembers\") property in [Mirrors] section, compression engine to use when CompressionForFailoverMembers is set to 'Compressed'. Valid values are: 0 - ZLIB, 1 - ZSTD, 2 - LZ4."}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("CompressionForAsyncMembers") property in [Mirrors] section controls the compression of data transmitted to async members. Valid values are: 0=System Selected (default), 1=Uncompressed, 2=Compressed.'}),"\n",(0,s.jsx)(r.li,{children:"MirrorInfo(\"CompressionTypeForAsyncMembers\") property in [Mirrors] section, compression engine used when CompressionForAsyncMembers is set to 'Compressed'. Valid values are: 0 - ZLIB, 1 - ZSTD, 2 - LZ4."}),"\n",(0,s.jsx)(r.li,{children:"MirrorInfo(\"AllowParallelDejournaling\") property in [Mirrors] section, default value is 0 as 'Failover Members and DR'."}),"\n",(0,s.jsx)(r.li,{children:"MirrorInfo(\"VirtualAddressInterface\") property in [MirrorMember] section, it depends on the value of 'VirtualAddress'. If 'VirtualAddress' is null string then this will be a null string. If 'VirtualAddress' is not a null string then this must be set as an valid network interface name in the system."}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("ECPAddress") property in [MapMirrors] section, this is the Super Server Address, default value is result of $System.INetInfo.LocalHostName().'}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("MirrorAddress") property in [MapMirrors] section, this is the Mirror Private Address, default value is same as ECPAddress.'}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("AgentAddress") property in [MapMirrors] section, this is the Agent Address, default value is same as ECPAddress.'}),"\n",(0,s.jsx)(r.li,{children:'MirrorInfo("AgentPort") property in [MapMirrors] section, this is the Agent port, default value is the port of installed ISCAgent, otherwise it is 2188.'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo Array of properties to create the Mirror SSL configuration. If MirrorInfo("UseSSL") is not set then this parameter is ignored. If the Mirror SSL has been configured then users do not need to specify this parameter. This is a pass-by-reference parameter. Please see detail of the array in UpdateMirrorSSL.'}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"joinmirrorasfailovermember",children:"JoinMirrorAsFailoverMember"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod JoinMirrorAsFailoverMember(MirrorSetName As %String, SystemName As %String = "", InstanceName As %String, AgentAddress As %String, AgentPort As %Integer = 2188, ByRef LocalInfo As %String, ByRef SSLInfo As %String) As %Status [ ProcedureBlock = 1 ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Method to join an existing mirror set as a failover member. The target member should be the only failover member in the mirror set. This method makes the local system as the second failover member in the mirror set.",(0,s.jsx)(r.br,{}),"\nIf UseSSL is not set in the configuration then this method will automatically ask the primary to add this new failover member to its configuration. So users don't need to call AddFailoverMember method in the primary member to add this member in. Input Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName is the name of the mirror set to be joined. This name is converted to uppercase before storing. Only alphanumeric characters are allowed to be in the mirror set name. This name can not be a null string."}),"\n",(0,s.jsx)(r.li,{children:"SystemName is the mirror system name of the local system to be created. This is the name by which the system is known in the mirror. The name must not contain any colons (:) and is converted to uppercase before storing. Mirror system names must be unique across all mirror members as some mirror members (eg. async members) may participate in multiple mirrors and they will have the same system name in all of the mirrors. If this name is omitted or a null string, the system will create a system name for it. But if the default system name (value of $SYSTEM) is over 32 in length then passing null for SystemName will cause a failure in this call. So it is recommended that caller should call DefaultSystemName to check its return value before passing null to this parameter."}),"\n",(0,s.jsx)(r.li,{children:"InstanceName is the instance name of the primary member to join to."}),"\n",(0,s.jsx)(r.li,{children:"AgentAddress is the ISCAgent address of the primary member to join to."}),"\n",(0,s.jsx)(r.li,{children:"AgentPort is the ISCAgent port of the primary member to join to, the default value is 2188 if it is omitted."}),"\n",(0,s.jsxs)(r.li,{children:["LocalInfo Array of properties to create the mirror information in [MirrorMember], [MapMirrors] sections of configuration file of the local system. If the value is not set, system uses the default value to create it.\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"LocalInfo(\"VirtualAddressInterface\") property in [MirrorMember] section, it depends on the value of 'VirtualAddress' retrieved from the primary. If 'VirtualAddress' is null string then this will be a null string. If 'VirtualAddress' is not a null string then this must be set as an valid network interface name in the system."}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("ECPAddress") property in [MapMirrors] section, this is the Super Server Address, default value is result of $System.INetInfo.LocalHostName().'}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("MirrorAddress") property in [MapMirrors] section, this is the Mirror Private Address, default value is same as ECPAddress.'}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("AgentAddress") property in [MapMirrors] section, this is the Agent Address, default value is same as ECPAddress.'}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("AgentPort") property in [MapMirrors] section, this is the Agent port, default value is the port of installed ISCAgent, otherwise it is 2188.'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo Array of properties to create the Mirror SSL configuration. If "UseSSL" of remote system is not set then this parameter is ignored. If the Mirror SSL has been configured then users do not need to specify this parameter. This is a pass-by-reference parameter. Please see detail of the array in UpdateMirrorSSL.'}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"joinmirrorasasyncmember",children:"JoinMirrorAsAsyncMember"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod JoinMirrorAsAsyncMember(MirrorSetName As %String, SystemName As %String = "", InstanceName As %String, AgentAddress As %String, AgentPort As %Integer = 2188, AsyncMemberType As %Integer, ByRef LocalInfo As %String, ByRef SSLInfo As %String) As %Status [ ProcedureBlock = 1 ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Method to join an existing mirror set as an async member. The target member should be a failover member. This method makes the local system as an async member in the mirror set. If this member has been setup as an async member then it could be used to add a mirror set to its tracking list.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName is the name of the mirror set to be tracked. This name is converted to uppercase before storing. Only alphanumeric characters are allowed to be in the mirror set name. This name can not be a null string."}),"\n",(0,s.jsxs)(r.li,{children:["SystemName is the mirror system name of the local system to be created. This is the name by which the system is known in the mirror. The name must not contain any colons (:) and is converted to uppercase before storing. Mirror system names must be unique across all mirror members as some mirror members (eg. async members) may participate in multiple mirrors and they will have the same system name in all of the mirrors. If this name is omitted or a null string, the system will create a system name for it if it has not been created. But if the default system name (value of $SYSTEM) is over 32 in length then passing null for SystemName will cause a failure in this call. So it is recommended that caller should call DefaultSystemName to check its return value before passing null to this parameter.",(0,s.jsx)(r.br,{}),"\nIf it has been created then this parameter will be ignored."]}),"\n",(0,s.jsx)(r.li,{children:"InstanceName is the instance name of the failover member to join to."}),"\n",(0,s.jsx)(r.li,{children:"AgentAddress is the ISCAgent address of the failover member to join to."}),"\n",(0,s.jsx)(r.li,{children:"AgentPort is the ISCAgent port of the failover member to join to, the default value is 2188 if it is omitted."}),"\n",(0,s.jsx)(r.li,{children:"AsyncMemberType is the type of this async member to be created, 0 - Disaster Recovery (DR), 1 - Read-Only Reporting, 2 - Read-Write Reporting. The default value is 0 if it is omitted. This value will be ignored if the async member has been setup, that means this method is used to add new mirror set for tracking."}),"\n",(0,s.jsxs)(r.li,{children:["LocalInfo Array of properties to create the mirror information in [MirrorMember], [MapMirrors] sections of configuration file of the local system. If the value is not set, system uses the default value to create it.\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"LocalInfo(\"VirtualAddressInterface\") property in [MirrorMember] section, it depends on the value of 'VirtualAddress' retrieved from the primary. If 'VirtualAddress' is null string then this will be a null string. If 'VirtualAddress' is not a null string then this must be set as an valid network interface name in the system."}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("ECPAddress") property in [MapMirrors] section, this is the Super Server Address, default value is result of $System.INetInfo.LocalHostName().'}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("MirrorAddress") property in [MapMirrors] section, this is the Mirror Private Address, default value is same as ECPAddress.'}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("AgentAddress") property in [MapMirrors] section, this is the Agent Address, default value is same as ECPAddress.'}),"\n",(0,s.jsx)(r.li,{children:'LocalInfo("EncryptCommunication") property in [MapMirrors] section, this is the outgoing/incoming encryption flag, see description of this property in Config.MapMirrors default value is 0.'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo Array of properties to create the Mirror SSL configuration. If "UseSSL" of remote system is not set then this parameter is ignored. If the Mirror SSL has been configured then users do not need to specify this parameter. This is a pass-by-reference parameter. Please see detail of the array in UpdateMirrorSSL.'}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"addfailovermember",children:"AddFailoverMember"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AddFailoverMember(MirrorSetName As %String = "", InstanceName As %String, AgentAddress As %String, AgentPort As %Integer = 2188) As %Status [ ProcedureBlock = 1 ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Method to add another failover member to the existing mirror set. The target member should have two failover members configured in the mirror set. One of the failover member should be this local system. Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName is the name of the mirror set to be processed. This name is converted to uppercase before being processed. Only alphanumeric characters are allowed to be in the mirror set name. When this name is omitted or a null string system will find the mirror set name configured."}),"\n",(0,s.jsx)(r.li,{children:"InstanceName is the instance name of the failover member to be added."}),"\n",(0,s.jsx)(r.li,{children:"AgentAddress is the ISCAgent address of the failover member to be added."}),"\n",(0,s.jsx)(r.li,{children:"AgentPort is the ISCAgent port of the failover member to be added, the default value is 2188 if it is omitted."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"updatemirrorssl",children:"UpdateMirrorSSL"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod UpdateMirrorSSL(ByRef SSLInfo As %String) As %Status\n"})}),"\n",(0,s.jsx)(r.p,{children:"Method to create or modify Mirror SSL configuration which includes %MirrorServer and %MirrorClient SSL configurations. Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["SSLInfo Array of properties to create the Mirror SSL configurations. For creating the configuration if the property is not specified, a default value will be assigned to the property. For modifying the configuration if the property is not specified, the property won't be changed. This is a pass-by-reference parameter. You could see more detail of each property in Security.SSLConfigs.\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:'SSLInfo("CAFile") File containing X.509 certificate(s) of trusted Certificate Authorities. This must not be a null string.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("CRLFile") File containing X.509 Certificate Revocation List for trusted Certificate Authorities. Default is a null string.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("CertificateFile") File containing this configuration\'s X.509 certificate. Default is a null string. If not null, PrivateKeyFile must also be specified.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("CipherList") Colon-delimited list of enabled ciphersuites for TLSv1.2 and below. Default is "ALL:!aNULL:!eNULL:!SSLv2".'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("CipherSuites") Colon-delimited list of enabled ciphersuitesfor TLSv1.3. Default is "TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256".'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("PrivateKeyFile") File containing this configuration\'s private key. Default is a null string. If not null, CertificateFile must also be specified.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("PrivateKeyPassword") Optional password used to decrypt this configuration\'s private key. Default is a null string. If not null, PrivateKeyFile and CertificateFile must also be specified.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("PrivateKeyType") Private key type. 1 - DSA, 2 - RSA. Default value is 2.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("TLSMinVersion") Minimum TLS protocol version enabled. The value can be 2 - SSLv3, 4 - TLSv1.0, 8 - TLSv1.1, 16 - TLSv1.2, 32 - TLSv1.3. Default value is 8 (TLSv1.1) for OpenSSL 1.0, 16 (TLSv1.2) for OpenSSL 1.1 and later. Note that the TLSv1.3 is not supported in OpenSSL 1.0 and earlier.'}),"\n",(0,s.jsx)(r.li,{children:'SSLInfo("TLSMaxVersion") Maximum TLS protocol version enabled. The value can be 2 - SSLv3, 4 - TLSv1.0, 8 - TLSv1.1, 16 - TLSv1.2, 32 - TLSv1.3. Default value is 16 (TLSv1.2) for OpenSSL 1.0, 32 (TLSv1.3) for OpenSSL 1.1 and later. Note that the TLSv1.3 is not supported in OpenSSL 1.0 and earlier.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"defaultsystemname",children:"DefaultSystemName"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod DefaultSystemName() As %String\n"})}),"\n",(0,s.jsx)(r.p,{children:"Default system name for the local system, it returned the value of $SYSTEM. But if the length is greater than MaxMirrorSYSLen (32) then it returned a null string."}),"\n",(0,s.jsx)(r.h3,{id:"buildjournallog",children:"BuildJournalLog"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod BuildJournalLog(mirname As %String = "", mirjrncnt As %Integer = 0, loc As %String = "", ByRef FileCount As %Integer, SaveOld As %Boolean = 0, FileLocked As %Boolean = 0) As %Status [ Internal ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Create mirror journal log file for a mirror set from the mirror journal files located in a specific set of locations. This is called when the mirror journal log doesn't exist, it appears to be corrupted (can't be read) or the guid in the file doesn't match the local system. Any existing file has been deleted and here we create a new one. mirname is the mirror set name of the mirror journal files. mirjrncnt is the starting journal count for the range, 0 means all. loc is a ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$list"})," of the directory(ies) containing the mirror journal files. Before this is called, make sure this mirror journal log file does not exist. Return error status,error The error could be: The mirror journal log already existed. Failed to access mirror log file. One of the mirror journal file has different mirror set GUID. The journal files are not contiguous with journal count. Problem reading a journal file Return OK, if we built the mirror log file. The log file could be empty if there are no matching journal files. 'FileCount' is the count of the # of files we found"]}),"\n",(0,s.jsx)(r.h3,{id:"buildjournallogwithfiles",children:"BuildJournalLogWithFiles"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod BuildJournalLogWithFiles(mirname As %String = "", LogFile As %SysPath, ByRef JrnFiles As %String, FileLocked As %Boolean = 0) As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.h3,{id:"asyncdejournalstatus",children:"AsyncDejournalStatus"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AsyncDejournalStatus(MirrorName As %String = "") As %String\n'})}),"\n",(0,s.jsx)(r.p,{children:"This method returns the current status of dejournaling on an async member for one of the mirrors that the member is tracking."}),"\n",(0,s.jsx)(r.p,{children:"Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:'MirrorName is required when the async tracks more than one mirror and is the name of the mirror to stop dejournaling. If omitted and the async tracks multiple mirrors, "missing mirror name" is returned.\nReturns:'}),"\n",(0,s.jsx)(r.li,{children:'"" (null string) - system is not an async mirror member'}),"\n",(0,s.jsx)(r.li,{children:"missing - dejournaling hasn't been initialized/member has not established contact with its server"}),"\n",(0,s.jsx)(r.li,{children:"running - dejournaling is up and running"}),"\n",(0,s.jsx)(r.li,{children:"stopped - dejournaling stopped for some reason. More inforrmation is recorded in the console log."}),"\n",(0,s.jsx)(r.li,{children:"shut down - dejournaling shut down by user requst. Must be manually started before it will resume."}),"\n",(0,s.jsx)(r.li,{children:"error - dejournaling has shut down due to an error while applying changes to a database. More information is recorded in the console log and a ^%ET error trap record was generated in %SYS."}),"\n",(0,s.jsx)(r.li,{children:"notmember - not a member of the specified mirror"}),"\n",(0,s.jsx)(r.li,{children:"missing mirror name - the MirrorName parameter was omitted and this async member tracks multiple mirrors."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"asyncdejournalstart",children:"AsyncDejournalStart"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AsyncDejournalStart(MirrorName As %String = "") As %Status\n'})}),"\n",(0,s.jsx)(r.p,{children:"This method is used on an async member to start the dejournaling processs for one mirror that the member is tracking. This is useful after journaling has been stopped with AsyncDejournalStop."}),"\n",(0,s.jsx)(r.p,{children:"Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorName is required when the async tracks more than one mirror and is the name of the mirror to stop dejournaling. If omitted and the async tracks multiple mirrors, an error is returned."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"asyncdejournalstop",children:"AsyncDejournalStop"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod AsyncDejournalStop(MirrorName As %String = "") As %Status\n'})}),"\n",(0,s.jsx)(r.p,{children:"This method is used on an async member to shut down the dejournaling for one mirror that the member is tracking. Dejournaling remains stopped across restarts until it is started again with either AsyncDejournalStart or via the management interface. This is useful in a configuration where it is desirable to update the data at some point of the day and then have it remain static until the next update."}),"\n",(0,s.jsx)(r.h3,{id:"dejournalpausedatabase",children:"DejournalPauseDatabase"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod DejournalPauseDatabase(DatabasePath As %SysPath = "") As %Status\n'})}),"\n",(0,s.jsx)(r.p,{children:"Stop dejournaling a database on a backup or on an async mirror member."}),"\n",(0,s.jsx)(r.p,{children:"Dejournaling is restarted when the system is restarted or when the CatchupDB is used to restore the missing data to the database and link it into the active journaling system. It is not an error to call this on a database which is requires catchup or if the journaling system is shut down."}),"\n",(0,s.jsx)(r.h3,{id:"promote",children:"Promote"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod Promote(ByRef UnavailableMembers As %String) As %Status\n"})}),"\n",(0,s.jsx)(r.p,{children:"Promotes this DR async member to a failover member for use in normal planned cutover scenarios. The current primary is automatically selected as its failover partner. If there is no current primary, then the member that was most recently primary is automatically selected as the failover partner. The other failover member, if any, is automatically demoted to DR async."}),"\n",(0,s.jsx)(r.p,{children:"Returns an error if this member cannot contact the agents of any of the failover members, or if this member is not a DR async member."}),"\n",(0,s.jsx)(r.p,{children:"If this method returns an error ($$$FailoverNoAgent) due to one or more failover members being unavailable, UnavailableMembers will be non-null and contain a comma-delimited list of the member names which could not be contacted."}),"\n",(0,s.jsx)(r.p,{children:'This method returns an error ($$$NeedVIPInterface) if the Virtual IP address is configured for the mirror but this member does not have a network interface defined for it in its configuration. To avoid this error, if using Virtual IP, use Config.MirrorMember to set the VirtualAddressInterface property with the interface name supporting the virtual IP. If there is no network interface supporting the virtual IP, and you wish to promote it anyway, set the VirtualAddressInterface to "NoMatchedSubnet", and this member becomes primary, it will skip acquiring the virtual IP.'}),"\n",(0,s.jsx)(r.h3,{id:"promotecheck",children:"PromoteCheck"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PromoteCheck(ByRef UnavailableMembers As %String, ByRef Partner As %String) As %Status\n"})}),"\n",(0,s.jsx)(r.p,{children:"Similar to Promote, check whether it can successfully promote this DR async member to a failover member for use in normal planned cutover scenarios. It won't actually promote this DR memebr."}),"\n",(0,s.jsx)(r.p,{children:"This method returns $$$OK instead of an error ($$$FailoverNoAgent) due to one or more failover members being unavailable, UnavailableMembers will be non-null and contain a comma-delimited list of the member names which could not be contacted."}),"\n",(0,s.jsx)(r.p,{children:"If all failover members are reachable, the value of Partner will be set with either current primary member or the member that was most recently primary."}),"\n",(0,s.jsx)(r.p,{children:'This method returns an error ($$$NeedVIPInterface) if the Virtual IP address is configured for the mirror but this member does not have a network interface defined for it in its configuration. To avoid this error, if using Virtual IP, use Config.MirrorMember to set the VirtualAddressInterface property with the interface name supporting the virtual IP. If there is no network interface supporting the virtual IP, and you wish to promote it anyway, set the VirtualAddressInterface to "NoMatchedSubnet", and this member becomes primary, it will skip acquiring the virtual IP.'}),"\n",(0,s.jsx)(r.h3,{id:"demote",children:"Demote"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod Demote() As %Status\n"})}),"\n",(0,s.jsx)(r.p,{children:"Demotes this failover member to a DR async member."}),"\n",(0,s.jsx)(r.h3,{id:"demotepartner",children:"DemotePartner"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod DemotePartner() As %Status\n"})}),"\n",(0,s.jsx)(r.p,{children:"Demotes the other failover member to a DR async member. The other failover member does not need to be running, but its agent must be available. This fails if the other failover member is primary."}),"\n",(0,s.jsx)(r.h3,{id:"promotewithpartner",children:"PromoteWithPartner"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PromoteWithPartner(ByRef UnavailableMembers As %String) As %Status\n"})}),"\n",(0,s.jsx)(r.p,{children:"Similar to Promote, promotes this DR async member to a failover member, automatically identifying the correct failover partner and returning error if the partner cannot be identified. The difference is that this method succeeds even if the member to be demoted (the one that is not to be the failover partner) cannot be contacted for demotion. In this case, it will return success with non-null UnavailableMembers."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"IMPORTANT:"})," On success, check the value of UnavailableMembers. If non-null, it contains the name of the failover member that could not be automatically demoted. Before you restart that member, you must manually edit its .cpf configuration file, and in the [MirrorMember] section set ValidatedMember=0. Failure to do so could result in having two primary members running simultaneously."]}),"\n",(0,s.jsx)(r.p,{children:"This method returns an error ($$$FailoverNoAgent) upon failure to contact a failover member's agent that is required for this operation. In that case, UnavailableMembers will be non-null and contain a comma-delimited list of the failover member names which could not be contacted. Unlike the success case, however, no changes were made to the mirror configuration and there is no need to manipulate the configuration file of the unavailable members."}),"\n",(0,s.jsx)(r.p,{children:'This method returns an error ($$$NeedVIPInterface) if the Virtual IP address is configured for the mirror but this member does not have a network interface defined for it in its configuration. To avoid this error, if using Virtual IP, use Config.MirrorMember to set the VirtualAddressInterface property with the interface name supporting the virtual IP. If there is no network interface supporting the virtual IP, and you wish to promote it anyway, set the VirtualAddressInterface to "NoMatchedSubnet", and this member becomes primary, it will skip acquiring the virtual IP.'}),"\n",(0,s.jsx)(r.h3,{id:"promotewithnopartner",children:"PromoteWithNoPartner"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PromoteWithNoPartner(ByRef UnavailableMembers As %String, Flags As %Integer = 0) As %Status\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Promotes this DR async member to a failover member for use in unplanned disaster situations where there are no functioning failover member. This member becomes the only failover member and will become primary without requiring any additional journal data from the former failover members. ",(0,s.jsx)(r.strong,{children:"WARNING"}),": This can result in the loss of some global update operations, and the other mirror members may need to be rebuilt."]}),"\n",(0,s.jsx)(r.p,{children:"If a running primary is found, this method returns error."}),"\n",(0,s.jsxs)(r.p,{children:["This member attempts to automatically demote the other failover member(s) to DR Async. ",(0,s.jsx)(r.strong,{children:"IMPORTANT:"})," On success, UnavailableMembers will contain a comma-delimited list of the failover member names that could not be automatically demoted. Before you restart those unavailable members, you must manually edit their .cpf configuration files, and in the [MirrorMember] section set ValidatedMember=0. Failure to do so could result in having two primary members running simultaneously."]}),"\n",(0,s.jsx)(r.p,{children:'If Flags = 1, then the mirror is set into "no failover" mode and this member will wait for it to be cleared before becoming primary.'}),"\n",(0,s.jsx)(r.p,{children:'This method returns an error ($$$NeedVIPInterface) if the Virtual IP address is configured for the mirror but this member does not have a network interface defined for it in its configuration. To avoid this error, if using Virtual IP, use Config.MirrorMember to set the VirtualAddressInterface property with the interface name supporting the virtual IP. If there is no network interface supporting the virtual IP, and you wish to promote it anyway, set the VirtualAddressInterface to "NoMatchedSubnet", and this member becomes primary, it will skip acquiring the virtual IP.'}),"\n",(0,s.jsx)(r.h3,{id:"promotewithselectedpartner",children:"PromoteWithSelectedPartner"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod PromoteWithSelectedPartner(Partner As %String = "", ByRef UnavailableMembers As %String) As %Status\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Promotes this DR async member to a failover member for use in unplanned disaster situations where there is no functioning primary, but a failover member is available from which this member should retrieve journals before becoming primary. This member becomes a failover member with the member name specified in the Partner as its failover partner. ",(0,s.jsx)(r.strong,{children:"WARNING:"})," If the partner specified does not have the most recent journal data in the mirror (e.g. because it was not the most recent primary), then this can result in the loss of some global update operations, and the other mirror members may need to be rebuilt. The other failover member, if any, is automatically demoted to DR Async."]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"IMPORTANT:"})," On success, UnavailableMembers will contain a comma-delimited list of the failover member names whose configuration could not be automatically updated. Before you restart those unavailable members, you must manually edit their .cpf configuration file, and in the [MirrorMember] section set ValidatedMember=0. Failure to do so could result in having two primary members running simultaneously."]}),"\n",(0,s.jsx)(r.p,{children:'This method returns an error ($$$NeedVIPInterface) if the Virtual IP address is configured for the mirror but this member does not have a network interface defined for it in its configuration. To avoid this error, if using Virtual IP, use Config.MirrorMember to set the VirtualAddressInterface property with the interface name supporting the virtual IP. If there is no network interface supporting the virtual IP, and you wish to promote it anyway, set the VirtualAddressInterface to "NoMatchedSubnet", and this member becomes primary, it will skip acquiring the virtual IP.'}),"\n",(0,s.jsx)(r.h3,{id:"pendingnewmembersexecute",children:"PendingNewMembersExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod PendingNewMembersExecute(ByRef qHandle As %Binary, MirrorSetName As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Get list of pending new members to be authorized. Users can call RemoveFromApprovalList to remove one, or AuthorizePendingMembers to authorize them to add this new member into the specified mirror set.",(0,s.jsx)(r.br,{}),"\nThe SSLComputerName is same as the DN which is used for the input in AuthorizePendingMembers",(0,s.jsx)(r.br,{}),"\nOnly primary member can call this query."]}),"\n",(0,s.jsx)(r.h3,{id:"pendingnewmembersclose",children:"PendingNewMembersClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PendingNewMembersClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = PendingNewMembersExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"pendingnewmembersfetch",children:"PendingNewMembersFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PendingNewMembersFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = PendingNewMembersExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"pendingdnupdatesexecute",children:"PendingDNUpdatesExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod PendingDNUpdatesExecute(ByRef qHandle As %Binary, MirrorSetName As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Get list of pending DN updates to be authorized. Users can call RemoveFromApprovalList to remove one, or AuthorizePendingMembers to authorize them to update the DN of these mirror members.",(0,s.jsx)(r.br,{}),"\nThe SSLComputerName is same as the DN which is used for the input in AuthorizePendingMembers",(0,s.jsx)(r.br,{}),"\nOnly primary member can call this query."]}),"\n",(0,s.jsx)(r.h3,{id:"pendingdnupdatesclose",children:"PendingDNUpdatesClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PendingDNUpdatesClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = PendingDNUpdatesExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"pendingdnupdatesfetch",children:"PendingDNUpdatesFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod PendingDNUpdatesFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = PendingDNUpdatesExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"removefromapprovallist",children:"RemoveFromApprovalList"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod RemoveFromApprovalList(MemberName As %String, GUID As %String, MirrorSetName As %String = "") As %Status [ Final ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Remove an entry from the PendingDNUpdates or PendingNewMembers list.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"MemberName is the mirror member name to be removed in the list."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"GUID is the GUID of the mirror member to be removed in the list."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"MirrorSetName is list in the name of the mirror set to be removed then the buffer size is not changed."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"getdejournalfiltersetting",children:"GetDejournalFilterSetting"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetDejournalFilterSetting(MirrorName As %String, ByRef FilterClass As %String) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"checkleftoverjournalfile",children:"CheckLeftOverJournalFile"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod CheckLeftOverJournalFile(mirname As %String, MirrorGUID As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Check if there is any left over mirror journal file for the specific mirror set. When a system joins mirror there should be no mirror journal file left in the journal directories."}),"\n",(0,s.jsx)(r.h3,{id:"tcpsendbuffersize",children:"TCPSendBufferSize"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod TCPSendBufferSize(MirrorSetName As %String, NewSize As %Integer) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Used to get/set current setting of SO_SNDBUF size of the TCP device for mirror ISCAgent channel.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"MirrorSetName is the name of the mirror set to be updated."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"NewSize is the new buffer size to be set, this is optional, if it is not present then the buffer size is not changed."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Returns:\nCurrent SO_SNFBUF size (in bytes) setting before the new size is set (if applicable)."}),"\n",(0,s.jsx)(r.h3,{id:"tcpreceivebuffersize",children:"TCPReceiveBufferSize"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod TCPReceiveBufferSize(MirrorSetName As %String, NewSize As %Integer) As %Integer [ Internal ]\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Used to get/set current setting of SO_RCVBUF size of the TCP device for mirror ISCAgent channel.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"MirrorSetName is the name of the mirror set to be updated."}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"NewSize is the new buffer size to be set, this is optional, if it is not present then the buffer size is not changed."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Returns:\nCurrent SO_RCVBUF size (in bytes) setting before the new size is set (if applicable)."}),"\n",(0,s.jsx)(r.h3,{id:"missingmirroreddatabasesexecute",children:"MissingMirroredDatabasesExecute"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod MissingMirroredDatabasesExecute(ByRef qHandle As %Binary, MirrorSetName As %String = "", CPFFile As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Compare configured mirrored databases with the mirrored databases listed in last mirror journal file. List the databases in journal file but is not configured locally."}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"MirrorSetName:"}),' The mirror set name to be retured, default is "" for first mirror sets.',(0,s.jsx)(r.br,{}),"\n",(0,s.jsx)(r.strong,{children:"Name:"})," This is the mirrored database alias name missing in local configuration."]}),"\n",(0,s.jsx)(r.h3,{id:"missingmirroreddatabasesclose",children:"MissingMirroredDatabasesClose"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MissingMirroredDatabasesClose(ByRef qHandle As %Binary) As %Status [ Internal, PlaceAfter = MirroredDatabasesValidationExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"missingmirroreddatabasesfetch",children:"MissingMirroredDatabasesFetch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod MissingMirroredDatabasesFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ Internal, PlaceAfter = MirroredDatabasesValidationExecute ]\n"})}),"\n",(0,s.jsx)(r.h3,{id:"isfailoverready",children:"IsFailoverReady"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod IsFailoverReady(numSecOfDBLatency As %Integer = 60) As %List\n"})}),"\n",(0,s.jsx)(r.p,{children:"IsFailoverReady(allowedDejournalLatency) returns success when called from a failover member if the mirror is in a state where the backup should take over if the primary fails, and when dejournaling on the backup is within the specified # of seconds of latency. All of the mirrored databases on the backup which are marked mount required at startup need to be active on the backup and, if the arbiter is configured the mirror must be in arbiter controlled mode. Returns failure otherwise, including if there is only a single failover member configured."}),"\n",(0,s.jsx)(r.p,{children:"This method is designed to be used from a failover member in a Mirror montitor to indicate whether the mirror is functioning in its High Availability role. The method can be executed on either failover member. Executing this on an async member or a non-mirror member, returns failure."}),"\n",(0,s.jsx)(r.p,{children:"If the numSecOfDBLatency parameter is zero or omitted, the default value of 60 seconds is used. The latency parameter is checked last so if this method returns failure due to the latency being out of range, all of the other checks have passed. Note that the latency is calculated between the end of the journal data the backup has received and the current dejournal checkpoint for journal data restored on the backup. The end of the journal file on the primary can be different. However the backup is marked active so during a failover event, it has all of the journal data it needs to become the primary."}),"\n",(0,s.jsxs)(r.p,{children:["Return Value:",(0,s.jsx)(r.br,{}),"\n$LB(1) - success",(0,s.jsx)(r.br,{}),"\n$LB(0,",(0,s.jsx)(r.reason,{text:"",children:") - failure"})]}),"\n",(0,s.jsx)(r.h3,{id:"verifymirrorsslcertificates",children:"VerifyMirrorSSLCertificates"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod VerifyMirrorSSLCertificates(MirrorSetName As %String = "", AllMembers As %Boolean = 0) As %Status [ Final ]\n'})}),"\n",(0,s.jsx)(r.p,{children:"Verifiy mirror SSL certificates against all mirror members or between all members. Input Parameters:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName The name of mirror set to be verified."}),"\n",(0,s.jsx)(r.li,{children:"AllMembers When this is set, it verifies mirror SSL certificates between each mirror members in the mirror set except between async members. When AllMembers is not set, it verifies the mirror SSL certificate of local member against other members. Note that if the local member is an async member then it verifies against all failover members, otherwise it verifies against all other members."}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"This method returns all detected errors if there is any."}),"\n",(0,s.jsx)(r.h3,{id:"removemirrorconfiguration",children:"RemoveMirrorConfiguration"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod RemoveMirrorConfiguration(DeleteDB As %Boolean = 0, CleanJournal As %Boolean = 1, CleanSSL As %Boolean = 0) As %Status\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Remove the whole mirror configuration.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"DeleteDB When this is set, it removes the 'mirror' attribute of all mirrored databases in the configuration, and leave the databases in the configuration. The default value is 'cleared'."}),"\n",(0,s.jsx)(r.li,{children:"CleanJournal When this is set, it removes all mirror journal files in journal directories and mirror journal log file. The default value is 'set'."}),"\n",(0,s.jsx)(r.li,{children:"CleanSSL When this is set, it removes '%MirrorServer' and '%MirrorClient' SSL configuration. The default value is 'cleared'.\nThis method is not allowed to be called when the system is a primary mirror member."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"removeonemirrorset",children:"RemoveOneMirrorSet"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod RemoveOneMirrorSet(MirrorName As %String, DeleteDBs As %Boolean = 0, CleanJournal As %Boolean = 1) As %Status\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Remove the one specific mirror set from configuration.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName The name of mirror set to be removed."}),"\n",(0,s.jsx)(r.li,{children:"DeleteDB When this is set, it removes the 'mirror' attribute of all mirrored databases of the mirror set in the configuration, and leave the databases in the configuration. The default value is 'cleared'."}),"\n",(0,s.jsxs)(r.li,{children:["CleanJournal When this is set, it removes all mirror journal files of the mirror set in journal directories and mirror journal log file of the mirror set. The default value is 'set'.\nThis method is not allowed to be called when the system is a primary mirror member.",(0,s.jsx)(r.br,{}),"\nWhen this method is called in failover member, it worked like RemoveMirrorConfiguration method with 'CleanSSL' cleared.",(0,s.jsx)(r.br,{}),"\nWhen this method is called in async member, the '[MirrorMember]' setion of the configuration won't be changed."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"authorizependingmembers",children:"AuthorizePendingMembers"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod AuthorizePendingMembers(DNList As %String) As %String\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Authorize pending new member or DN updates of existing member.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["DNList A list of Distinguished Names to be authorized. If more than one DN to be authorized they need to be put in ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$LIST"})," formatted list. If there is only one DN then it does not need to be in $LIST format.\nThis method will look through all currently pending list of new member and DN updates of existing member to authorize them."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Return Value:",(0,s.jsx)(r.br,{}),"\nWhen the DNList is in ",(0,s.jsx)(r.a,{href:"/csp/docbook/Doc.View.cls?FIND=OBJECTSCRIPT+$LIST+FUNCTION",children:"$LIST"})," format, the returned status is also in $LIST format, each DN is processed indpenedently so each result of the DN is returned in corresponding $LIST position. If the DNList is single DN and not in $LIST then the result is not in $LIST format.",(0,s.jsx)(r.br,{}),"\nIt returns an error if the input DN is not in pending list."]}),"\n",(0,s.jsx)(r.h3,{id:"convertprotocols",children:"ConvertProtocols"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod ConvertProtocols(ByRef SSLInfo As %String) [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Convert input 'Protocols' value to 'TLSMaxVersion' and 'TLSMinVersion' values in the SSLInfo array."}),"\n",(0,s.jsx)(r.h3,{id:"getcurrentstate",children:"GetCurrentState"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:"ClassMethod GetCurrentState(mirname As %String, lastmirjcnt As %Integer, ByRef OtherFailoverContact As %String) As %String [ Internal ]\n"})}),"\n",(0,s.jsx)(r.p,{children:"Return current mirroing state for CatchupDB to find the limit of the CatchupDB. -1 - Error. 0 - For non-primary failover, the mirroring is stopped or can't contact the oter failover member. The returned value could include the limit position (\"0,limitfcnt,limitfpos\"). 1 - Primary member. There is no limit position. The CatchupDB makes the mirrored DB active at the end. 2 - Data channel is established (DejournalReader daemon is running. There is no limit position. The CatchupDB links the DB for DejournalReader to continue dejournal at the end. 3 - Not a mirror member. There is no limit position. The CatchupDB dejournal records to end of the last journal file even when there is no valid mirror end on the last journal file. 4 - In Synchronizing or Transition state (Retrieving and Dejoualing journal files from primary or the other failover member. There is a limit position ($$GetMaxDBJrnInfo^MIRRORMGR()). The CatchupDB continue running when it reached the limit position. It re-evaluates its state and limit position until the state changed. 5 - Mirroring is stopped or mirroring can't find primary or the other failover to talk to. Possibly in 'Waiting' state. There is a limit position ($$GetMaxDBJrnInfo^MIRRORMGR()). The CatchupDB stopped when it reached the limit position."}),"\n",(0,s.jsx)(r.h3,{id:"reducemirrorlogsize",children:"ReduceMirrorLogSize"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod ReduceMirrorLogSize(mirname As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Reduce the size of mirror journal log file if possible.",(0,s.jsx)(r.br,{}),"\nThis remove the earlier entries in mirror journal file until it reached the first entry in the log file with existing journal file."]}),"\n",(0,s.jsx)(r.h3,{id:"updatemirrorusessl",children:"UpdateMirrorUseSSL"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod UpdateMirrorUseSSL(MirrorSetName As %String = "", Enable As %Boolean = 0) As %Status [ Final ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Modify Mirror UseSSL configuration.",(0,s.jsx)(r.br,{}),"\nInput Parameters:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"MirrorSetName The name of mirror set to be modified."}),"\n",(0,s.jsxs)(r.li,{children:["Enable When this is set, it enables mirror SSL communication, otherwise disables it.\nOnly primary member can call this query.",(0,s.jsx)(r.br,{}),"\nOn non-primary members, users should create mirror SSL configurations before setting UseSSL in primary member.",(0,s.jsx)(r.br,{}),"\nYou can't disbale UseSSL when journal ecnryption is enabled.",(0,s.jsx)(r.br,{}),"\nFor non-primary members, their UseSSL will be updated when they connect to primary member, they will get Config.Mirrors configuration from primary and update local Config.Mirrors. Also before calling this method, users should make sure the %MirrorServer and %MirrorClient SSL configurations were created if 'Enable' is set to 1. To create mirror SSL configurations users can call UpdateMirrorSSL to create new or update existing SSL configurations."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"setnofailover",children:"SetNoFailover"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod SetNoFailover(MirrorSetName As %String = "") As %Status [ Final ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Set 'no failover' state for the mirror set.",(0,s.jsx)(r.br,{}),"\nThis function prevents this mirror set from failover when primary is shutdown or crashed.",(0,s.jsx)(r.br,{}),"\nIt reaches out the other failover member (if exist) to notify it to set 'no failover' state.",(0,s.jsx)(r.br,{}),"\nOnly failover member can call this function.",(0,s.jsx)(r.br,{}),"\nThe 'MirrorSetName' is the name of the mirror set, if can be null for the current mirror set.",(0,s.jsx)(r.br,{}),"\nThis method returns all detected errors if there is any."]}),"\n",(0,s.jsx)(r.h3,{id:"clearnofailover",children:"ClearNoFailover"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-objectscript-class",children:'ClassMethod ClearNoFailover(MirrorSetName As %String = "", AlwaysClearLocal As %Boolean = 0) As %Status [ Final ]\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Clear 'no failover' state for the mirror set.",(0,s.jsx)(r.br,{}),"\nThis function clears 'no failover' state which was set by 'SetNoFailover' function.",(0,s.jsx)(r.br,{}),"\nIt reaches out the other failover member (if exist) to notify it to clear 'no failover' state.",(0,s.jsx)(r.br,{}),"\nIf the other failover member is not reachable, there is an option to clear it locally with 'AlwaysClearLocal' set.",(0,s.jsx)(r.br,{}),"\nOnly failover member can call this function.",(0,s.jsx)(r.br,{}),"\nThe 'MirrorSetName' is the name of the mirror set, if can be null for the current mirror set.",(0,s.jsx)(r.br,{}),"\nThe 'AlwaysClearLocal' is an option for this function, when it is set it ignores the error when the other failover member is not reachable and clear 'no failover' state locally, otherwise it returns error to indicate the other failover member is not reachable. The default value is 'not set'.",(0,s.jsx)(r.br,{}),"\nThis method returns all detected errors if there is any."]})]})}function d(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>o});var s=t(96540);const i={},n=s.createContext(i);function a(e){const r=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(n.Provider,{value:r},e.children)}}}]);