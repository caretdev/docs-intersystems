"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[13111],{64222:(e,l,s)=>{s.r(l),s.d(l,{contentTitle:()=>r,default:()=>c,frontMatter:()=>n,toc:()=>i});var t=s(74848),a=s(28453);const n={pagination_prev:null,pagination_next:null},r="%CSP.Util.CSPLogEvent",i=[{value:"Properties",id:"properties",level:2},{value:"ImportTS",id:"importts",level:3},{value:"EvtTimestamp",id:"evttimestamp",level:3},{value:"EvtDate",id:"evtdate",level:3},{value:"RTBuild",id:"rtbuild",level:3},{value:"LogLevel",id:"loglevel",level:3},{value:"GatewayID",id:"gatewayid",level:3},{value:"GatewayPID",id:"gatewaypid",level:3},{value:"GatewayTID",id:"gatewaytid",level:3},{value:"ConnectionNo",id:"connectionno",level:3},{value:"Server",id:"server",level:3},{value:"CachePID",id:"cachepid",level:3},{value:"RequestID",id:"requestid",level:3},{value:"SessionID",id:"sessionid",level:3},{value:"RemoteAddr",id:"remoteaddr",level:3},{value:"Page",id:"page",level:3},{value:"CallType",id:"calltype",level:3},{value:"Payload",id:"payload",level:3},{value:"CookieName",id:"cookiename",level:3},{value:"CookieSP",id:"cookiesp",level:3},{value:"CookieUP",id:"cookieup",level:3},{value:"CookieValue",id:"cookievalue",level:3},{value:"CookiePath",id:"cookiepath",level:3},{value:"CookieConn",id:"cookieconn",level:3},{value:"CookieServer",id:"cookieserver",level:3},{value:"CookieAppNo",id:"cookieappno",level:3},{value:"CookiePrivateSession",id:"cookieprivatesession",level:3},{value:"Methods",id:"methods",level:2},{value:"GtwImport",id:"gtwimport",level:3},{value:"FileImport",id:"fileimport",level:3},{value:"FileImportNoPrompt",id:"fileimportnoprompt",level:3},{value:"Import",id:"import",level:3},{value:"data",id:"data",level:3},{value:"DumpEvents",id:"dumpevents",level:3},{value:"SqlToFile",id:"sqltofile",level:3},{value:"DateCvt",id:"datecvt",level:3},{value:"CheckTS",id:"checkts",level:3},{value:"OPTION",id:"option",level:3},{value:"GetTS",id:"getts",level:3}];function o(e){const l={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.header,{children:(0,t.jsx)(l.h1,{id:"csputilcsplogevent",children:"%CSP.Util.CSPLogEvent"})}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Class %CSP.Util.CSPLogEvent Extends %Persistent [ System = 4 ]\n"})}),"\n",(0,t.jsx)(l.p,{children:"Class allowing to load CSP.log into %CSP.Util.CSPLogEvent class and search it using SQL."}),"\n",(0,t.jsx)(l.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(l.h3,{id:"importts",children:"ImportTS"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property ImportTS As %TimeStamp;\n"})}),"\n",(0,t.jsx)(l.p,{children:"used to be able to filter/delete a bad dataload"}),"\n",(0,t.jsx)(l.h3,{id:"evttimestamp",children:"EvtTimestamp"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property EvtTimestamp As %TimeStamp [ Required ];\n"})}),"\n",(0,t.jsx)(l.h3,{id:"evtdate",children:"EvtDate"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:'Property EvtDate As %Date [ Calculated, SqlComputeCode = { set {*} = $zdh($p({EvtTimestamp}," ",1),3)}, SqlComputed ];\n'})}),"\n",(0,t.jsx)(l.h3,{id:"rtbuild",children:"RTBuild"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property RTBuild As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"loglevel",children:"LogLevel"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property LogLevel As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"gatewayid",children:"GatewayID"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property GatewayID As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"gatewaypid",children:"GatewayPID"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property GatewayPID As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"gatewaytid",children:"GatewayTID"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property GatewayTID As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"connectionno",children:"ConnectionNo"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property ConnectionNo As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"server",children:"Server"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property Server As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cachepid",children:"CachePID"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CachePID As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"requestid",children:"RequestID"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property RequestID As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"sessionid",children:"SessionID"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property SessionID As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"remoteaddr",children:"RemoteAddr"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property RemoteAddr As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"page",children:"Page"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property Page As %String(MAXLEN = 300);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"calltype",children:"CallType"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CallType As %String;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"payload",children:"Payload"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property Payload As %String(MAXLEN = 32000);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookiename",children:"CookieName"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieName As %String(MAXLEN = 255);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookiesp",children:"CookieSP"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieSP As %Integer(MAXVAL = 65536, MINVAL = 1);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookieup",children:"CookieUP"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieUP As %String(MAXLEN = 255);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookievalue",children:"CookieValue"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieValue As %String(MAXLEN = 100);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookiepath",children:"CookiePath"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookiePath As %String(MAXLEN = 1000);\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookieconn",children:"CookieConn"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieConn As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookieserver",children:"CookieServer"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieServer As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookieappno",children:"CookieAppNo"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookieAppNo As %Integer;\n"})}),"\n",(0,t.jsx)(l.h3,{id:"cookieprivatesession",children:"CookiePrivateSession"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"Property CookiePrivateSession As %Boolean;\n"})}),"\n",(0,t.jsx)(l.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(l.h3,{id:"gtwimport",children:"GtwImport"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod GtwImport() As %String\n"})}),"\n",(0,t.jsxs)(l.p,{children:["Imports CSP.log from CSP Gateway registry",(0,t.jsx)(l.br,{}),"\nDisplays all registered CSP Gateways and allow to select what log to load"]}),"\n",(0,t.jsxs)(l.p,{children:["dateFromTS - timestamp in ODBC format or leave empty to load all data from the beginning of the log",(0,t.jsx)(l.br,{}),"\ndateToTS - timestamp in ODBC format or leave empty to load all data to the end of the log",(0,t.jsx)(l.br,{}),"\nExample: ",(0,t.jsx)(l.code,{children:"Set res=##class(%CSP.Util.CSPLogEvent).GtwImport()"})]}),"\n",(0,t.jsx)(l.h3,{id:"fileimport",children:"FileImport"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod FileImport(pFile) As %String\n"})}),"\n",(0,t.jsxs)(l.p,{children:["Imports CSP.log from from CSP.log file",(0,t.jsx)(l.br,{}),"\nDisplays all registered CSP Gateways and allow to select what log to load"]}),"\n",(0,t.jsxs)(l.p,{children:["dateFromTS - timestamp in ODBC format or leave empty to load all data from the beginning of the log",(0,t.jsx)(l.br,{}),"\ndateToTS - timestamp in ODBC format or leave empty to load all data to the end of the log",(0,t.jsx)(l.br,{}),"\nExample: ",(0,t.jsx)(l.code,{children:"Set res=##class(%CSP.Util.CSPLogEvent).FileImport()"})]}),"\n",(0,t.jsx)(l.h3,{id:"fileimportnoprompt",children:"FileImportNoPrompt"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod FileImportNoPrompt(pFile As %String, dateFromTS As %TimeStamp = "", dateToTS As %TimeStamp = "", pGatewayID = 1, pRunTuneTable = 0, pFilterGZIPErrors = 0, pDeleteExtent = 0, display = 0) As %String\n'})}),"\n",(0,t.jsx)(l.p,{children:"Imports CSP.log from CSP.log file"}),"\n",(0,t.jsxs)(l.p,{children:["dateFromTS - timestamp in ODBC format or leave empty to load all data from the beginning of the log",(0,t.jsx)(l.br,{}),"\ndateToTS - timestamp in ODBC format or leave empty to load all data to the end of the log",(0,t.jsx)(l.br,{}),"\nExample: ",(0,t.jsx)(l.code,{children:"Set res=##class(%CSP.Util.CSPLogEvent).FileImport(pFile,from,to,1,1,0,1,1)"})]}),"\n",(0,t.jsx)(l.h3,{id:"import",children:"Import"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod Import(pStream As %Stream.GlobalCharacter, dateFromTS As %TimeStamp = "", dateToTS As %TimeStamp = "", pGatewayID = 1, pRunTuneTable = 0, pFilterGZIPErrors = 0, pDeleteExtent = 0, display = 0) As %String\n'})}),"\n",(0,t.jsx)(l.p,{children:"Imports CSP.log from stream"}),"\n",(0,t.jsxs)(l.p,{children:["dateFromTS - timestamp in ODBC format or leave empty to load all data from the beginning of the log",(0,t.jsx)(l.br,{}),"\ndateToTS - timestamp in ODBC format or leave empty to load all data to the end of the log"]}),"\n",(0,t.jsx)(l.h3,{id:"data",children:"data"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod data(str, del1, del2) As %String [ Private ]\n"})}),"\n",(0,t.jsx)(l.h3,{id:"dumpevents",children:"DumpEvents"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod DumpEvents(pFile, pLogLevel, pServer, pStartTime, pEndTime, pConnectionNo, pThreadId, pServerPID) As %String\n"})}),"\n",(0,t.jsx)(l.h3,{id:"sqltofile",children:"SqlToFile"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod SqlToFile(pFile, pSQL, display = 1) As %String\n"})}),"\n",(0,t.jsx)(l.h3,{id:"datecvt",children:"DateCvt"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:'ClassMethod DateCvt(pDate = "") As %String\n'})}),"\n",(0,t.jsx)(l.h3,{id:"checkts",children:"CheckTS"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod CheckTS(TS1, TS2) As %String\n"})}),"\n",(0,t.jsx)(l.p,{children:"Returns 1 If TS1<TS2"}),"\n",(0,t.jsx)(l.h3,{id:"option",children:"OPTION"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod OPTION(prompt, default, max) As %String\n"})}),"\n",(0,t.jsx)(l.p,{children:"Returns selected Option"}),"\n",(0,t.jsx)(l.h3,{id:"getts",children:"GetTS"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-objectscript-class",children:"ClassMethod GetTS(pStream As %Stream.GlobalCharacter) As %TimeStamp\n"})})]})}function c(e={}){const{wrapper:l}={...(0,a.R)(),...e.components};return l?(0,t.jsx)(l,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,l,s)=>{s.d(l,{R:()=>r,x:()=>i});var t=s(96540);const a={},n=t.createContext(a);function r(e){const l=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function i(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(n.Provider,{value:l},e.children)}}}]);