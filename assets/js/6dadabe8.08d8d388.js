"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[90196],{53279:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>d,default:()=>l,frontMatter:()=>r,toc:()=>c});var s=n(74848),a=n(28453);const r={pagination_prev:null,pagination_next:null},d="%Api.DocDB.v1",c=[{value:"Http/Rest Calls",id:"httprest-calls",level:4},{value:"Parameters",id:"parameters",level:2},{value:"CHARSET",id:"charset",level:3},{value:"CONVERTINPUTSTREAM",id:"convertinputstream",level:3},{value:"CONTENTTYPE",id:"contenttype",level:3},{value:"HandleCorsRequest",id:"handlecorsrequest",level:3},{value:"UseSession",id:"usesession",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"UrlMap",id:"urlmap",level:3},{value:"Methods",id:"methods",level:2},{value:"httpPostServer",id:"httppostserver",level:3},{value:"httpGetNamespace",id:"httpgetnamespace",level:3},{value:"httpDeleteNamespace",id:"httpdeletenamespace",level:3},{value:"httpDeleteDatabase",id:"httpdeletedatabase",level:3},{value:"httpGetDatabase",id:"httpgetdatabase",level:3},{value:"httpPostDatabase",id:"httppostdatabase",level:3},{value:"httpDeleteProperty",id:"httpdeleteproperty",level:3},{value:"httpGetProperty",id:"httpgetproperty",level:3},{value:"httpPostProperty",id:"httppostproperty",level:3},{value:"httpDeleteDocument",id:"httpdeletedocument",level:3},{value:"httpDeleteDocumentByKey",id:"httpdeletedocumentbykey",level:3},{value:"httpGetDocument",id:"httpgetdocument",level:3},{value:"httpGetDocumentByKey",id:"httpgetdocumentbykey",level:3},{value:"httpPutDocument",id:"httpputdocument",level:3},{value:"httpPutDocumentByKey",id:"httpputdocumentbykey",level:3},{value:"httpPostDocument",id:"httppostdocument",level:3},{value:"httpPostFind",id:"httppostfind",level:3}];function i(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"apidocdbv1",children:"%Api.DocDB.v1"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Class %Api.DocDB.v1 Extends %DocDB.REST\n"})}),"\n",(0,s.jsx)(t.p,{children:"%Api.DocDB.v1 provides version 1 APIs for DocDB"}),"\n",(0,s.jsx)(t.h4,{id:"httprest-calls",children:"Http/Rest Calls"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"API"}),(0,s.jsx)(t.th,{children:"URI"}),(0,s.jsx)(t.th,{children:"HTTP Method"}),(0,s.jsx)(t.th,{children:"Content"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Role/Permission"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"GetAllDatabases"}),(0,s.jsx)(t.td,{children:"/namespaceName"}),(0,s.jsx)(t.td,{children:"GET"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Return the name of each Database defined in the namespaceName Namespace."}),(0,s.jsx)(t.td,{children:"%DocDB_Admin/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"DropAllDatabases"}),(0,s.jsx)(t.td,{children:"/namespaceName"}),(0,s.jsx)(t.td,{children:"DELETE"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Delete all of the databases defined in the namespaceName namespace."}),(0,s.jsx)(t.td,{children:"%DocDB_Admin/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"CreateDatabase"}),(0,s.jsx)(t.td,{children:"/namespaceName/db/databaseName ?type= documentType& resource= databaseResource"}),(0,s.jsx)(t.td,{children:"POST"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Create a new Database in the namespaceName namespace."}),(0,s.jsx)(t.td,{children:"%DocDB_Admin/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"DropDatabase"}),(0,s.jsx)(t.td,{children:"/namespaceName/db/ databaseName"}),(0,s.jsx)(t.td,{children:"DELETE"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Drop the databaseName database from namespaceName namespace."}),(0,s.jsx)(t.td,{children:"%DocDB_Admin/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"GetDatabase"}),(0,s.jsx)(t.td,{children:"/namespaceName/db/ databaseName"}),(0,s.jsx)(t.td,{children:"GET"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Return the databaseName database definition. This function is also sufficient for DatabaseExists."}),(0,s.jsx)(t.td,{children:"defined resource/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"CreateProperty"}),(0,s.jsx)(t.td,{children:"/namespaceName/ prop/databaseName/ propertyName?type= propertyType& path= propertyPath& unique=propertyUnique"}),(0,s.jsx)(t.td,{children:"POST"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Create a new property or replace an existing property in databaseName. The property is defined by URL parameters and not Content. All parameters are optional."}),(0,s.jsx)(t.td,{children:"%DocDB_Admin/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"DropProperty"}),(0,s.jsx)(t.td,{children:"/namespaceName/prop/ databaseName /propertyName"}),(0,s.jsx)(t.td,{children:"DELETE"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Remove a property definition from databaseName."}),(0,s.jsx)(t.td,{children:"%DocDB_Admin/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"GetProperty"}),(0,s.jsx)(t.td,{children:"/namespaceName/prop/ databaseName/ propertyName"}),(0,s.jsx)(t.td,{children:"GET"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Return the property definition from databaseName."}),(0,s.jsx)(t.td,{children:"defined resource/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"SaveDocument"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/databaseName/"}),(0,s.jsx)(t.td,{children:"POST"}),(0,s.jsx)(t.td,{children:"JSON object or array"}),(0,s.jsx)(t.td,{children:"Insert a new document into databaseName."}),(0,s.jsx)(t.td,{children:"defined resource/WRITE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"SaveDocument"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/ databaseName/id"}),(0,s.jsx)(t.td,{children:"PUT"}),(0,s.jsx)(t.td,{children:"JSON object or array"}),(0,s.jsx)(t.td,{children:"Replace an existing document in databaseName."}),(0,s.jsx)(t.td,{children:"defined resource/WRITE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"SaveDocumentByKey"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/ databaseName/keyPropertyName/keyValue"}),(0,s.jsx)(t.td,{children:"PUT"}),(0,s.jsx)(t.td,{children:"JSON object or array"}),(0,s.jsx)(t.td,{children:"Replace an existing document in databaseName."}),(0,s.jsx)(t.td,{children:"defined resource/WRITE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"DeleteDocument"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/ databaseName/id"}),(0,s.jsx)(t.td,{children:"DELETE"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Delete the document from the database."}),(0,s.jsx)(t.td,{children:"defined resource/WRITE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"DeleteDocumentByKey"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/ databaseName/keyPropertyName/keyValue"}),(0,s.jsx)(t.td,{children:"DELETE"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Delete the document from the database."}),(0,s.jsx)(t.td,{children:"defined resource/WRITE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"FindDocuments"}),(0,s.jsx)(t.td,{children:"/namespaceName/ find/databaseName? wrapped=true|false"}),(0,s.jsx)(t.td,{children:"POST"}),(0,s.jsx)(t.td,{children:"JSON object"}),(0,s.jsx)(t.td,{children:"Find all documents in databaseName matching the query specification."}),(0,s.jsx)(t.td,{children:"defined resource/USE"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"GetDocument"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/ databaseName/id? wrapped=true|false"}),(0,s.jsx)(t.td,{children:"GET"}),(0,s.jsx)(t.td,{children:"none"}),(0,s.jsx)(t.td,{children:"Return the requested document."}),(0,s.jsx)(t.td,{children:"defined resource/READ"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"GetDocumentByKey"}),(0,s.jsx)(t.td,{children:"/namespaceName/doc/ databaseName /keyPropertyName /keyValue"}),(0,s.jsx)(t.td,{children:"POST"}),(0,s.jsx)(t.td,{children:"None"}),(0,s.jsx)(t.td,{children:"Retrieve a document by a property defined as a unique key."}),(0,s.jsx)(t.td,{children:"defined resource/READ"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(t.h3,{id:"charset",children:"CHARSET"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter CHARSET = "utf-8";\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Specifies the default character set for the page. This can be overriden using the <CSP:CONTENT CHARSET=> tag, or by setting the ",(0,s.jsx)(t.strong,{children:"%response"}),".CharSet property in the OnPreHTTP method. If this parameter is not specified, then for the default charset is utf-8."]}),"\n",(0,s.jsx)(t.h3,{id:"convertinputstream",children:"CONVERTINPUTSTREAM"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter CONVERTINPUTSTREAM = 1;\n"})}),"\n",(0,s.jsx)(t.p,{children:"Specifies if input %request.Content or %request.MimeData values are converted from their original character set on input. By default (0) we do not modify these and receive them as a binary stream which may need to be converted manually later. If 1 then if there is a 'charset' value in the request Content-Type or mime section we will convert from this charset when the input data is text based. For either json or xml data with no charset this will convert from utf-8 or honor the BOM if one is present."}),"\n",(0,s.jsx)(t.h3,{id:"contenttype",children:"CONTENTTYPE"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter CONTENTTYPE = "application/json";\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Specifies the default content type for the page. This can be overriden using the <CSP:CONTENT TYPE=> tag, or by setting the ",(0,s.jsx)(t.strong,{children:"%response"}),".ContentType property in the OnPreHTTP method. The default value if this parameter is not set is text/html."]}),"\n",(0,s.jsx)(t.h3,{id:"handlecorsrequest",children:"HandleCorsRequest"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter HandleCorsRequest = 1;\n"})}),"\n",(0,s.jsx)(t.p,{children:"This parameter influences the CORS support. The default is an empty string meaning 'not specified'. If set to true (1) then CORS processing is ON. If set to false (0) then CORS processing is OFF. If left unset \"\" then the decision to process CORS is delegated to the setting on the URL map route."}),"\n",(0,s.jsx)(t.h3,{id:"usesession",children:"UseSession"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter UseSession As Integer = 1;\n"})}),"\n",(0,s.jsx)(t.p,{children:"This parameter controls the CSP session support. By default the CSP session will be ended after each request in accordance with the spirit of REST. However this CAN be overridden by the user. To use a session, it's necessary to manage the CSPSESSION cookie. Browsers do this automatically but command line tools such as CURL require the setting of options."}),"\n",(0,s.jsx)(t.p,{children:"Note that if you choose to use a session then this will use a CSP license until the session is ended or expires and the grace period has been satisfied. If you use the default of no session then this will be the same behavior as SOAP requests of holding a license for ten seconds."}),"\n",(0,s.jsx)(t.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,s.jsx)(t.h3,{id:"urlmap",children:"UrlMap"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'XData UrlMap [ XMLNamespace = "http://www.intersystems.com/urlmap" ]\n'})}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"httppostserver",children:"httpPostServer"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod httpPostServer() As %Status\n"})}),"\n",(0,s.jsx)(t.p,{children:"This method returns a list of namespaces for this server HTTP Codes returned:- HTTP 200 if OK HTTP 500 if an error occurs (details will be in status error array) returned content is an array of namespaces"}),"\n",(0,s.jsx)(t.h3,{id:"httpgetnamespace",children:"httpGetNamespace"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpGetNamespace(namespaceName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpdeletenamespace",children:"httpDeleteNamespace"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpDeleteNamespace(namespaceName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpdeletedatabase",children:"httpDeleteDatabase"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpDeleteDatabase(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpgetdatabase",children:"httpGetDatabase"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpGetDatabase(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httppostdatabase",children:"httpPostDatabase"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpPostDatabase(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpdeleteproperty",children:"httpDeleteProperty"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpDeleteProperty(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), propertyName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpgetproperty",children:"httpGetProperty"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpGetProperty(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), propertyName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httppostproperty",children:"httpPostProperty"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpPostProperty(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), propertyName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpdeletedocument",children:"httpDeleteDocument"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpDeleteDocument(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), documentID As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpdeletedocumentbykey",children:"httpDeleteDocumentByKey"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpDeleteDocumentByKey(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), keyName As %String(MAXLEN=""), keyValue As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpgetdocument",children:"httpGetDocument"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpGetDocument(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), documentID As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpgetdocumentbykey",children:"httpGetDocumentByKey"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpGetDocumentByKey(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), keyName As %String(MAXLEN=""), keyValue As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpputdocument",children:"httpPutDocument"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpPutDocument(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), documentID As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httpputdocumentbykey",children:"httpPutDocumentByKey"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpPutDocumentByKey(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN=""), keyName As %String(MAXLEN=""), keyValue As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httppostdocument",children:"httpPostDocument"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpPostDocument(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,s.jsx)(t.h3,{id:"httppostfind",children:"httpPostFind"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod httpPostFind(namespaceName As %String(MAXLEN=""), databaseName As %String(MAXLEN="")) As %Status\n'})})]})}function l(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>c});var s=n(96540);const a={},r=s.createContext(a);function d(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);