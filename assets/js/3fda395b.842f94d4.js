"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[67808],{43898:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>i,default:()=>h,frontMatter:()=>a,toc:()=>o});var n=s(74848),r=s(28453);const a={pagination_prev:null,pagination_next:null},i="%CSP.Response",o=[{value:"Properties",id:"properties",level:2},{value:"HTTPVersion",id:"httpversion",level:3},{value:"Status",id:"status",level:3},{value:"Redirect",id:"redirect",level:3},{value:"UseExactRedirect",id:"useexactredirect",level:3},{value:"ServerSideRedirect",id:"serversideredirect",level:3},{value:"ContentType",id:"contenttype",level:3},{value:"CharSet",id:"charset",level:3},{value:"CookiePath",id:"cookiepath",level:3},{value:"HeaderCharSet",id:"headercharset",level:3},{value:"ContentLength",id:"contentlength",level:3},{value:"NoCharSetConvert",id:"nocharsetconvert",level:3},{value:"Cookies",id:"cookies",level:3},{value:"UseHttpOnly",id:"usehttponly",level:3},{value:"Headers",id:"headers",level:3},{value:"Timers",id:"timers",level:3},{value:"InProgress",id:"inprogress",level:3},{value:"Context",id:"context",level:3},{value:"Expires",id:"expires",level:3},{value:"VaryByParam",id:"varybyparam",level:3},{value:"TraceDump",id:"tracedump",level:3},{value:"OutputSessionToken",id:"outputsessiontoken",level:3},{value:"UseASPredirect",id:"useaspredirect",level:3},{value:"Timeout",id:"timeout",level:3},{value:"Language",id:"language",level:3},{value:"Domain",id:"domain",level:3},{value:"GzipOutput",id:"gzipoutput",level:3},{value:"IgnoreRESTOutput",id:"ignorerestoutput",level:3},{value:"CSPGatewayData",id:"cspgatewaydata",level:3},{value:"AllowOutputFlush",id:"allowoutputflush",level:3},{value:"AvoidPartitionCleanup",id:"avoidpartitioncleanup",level:3},{value:"Methods",id:"methods",level:2},{value:"InProgressSet",id:"inprogressset",level:3},{value:"ExpiresSet",id:"expiresset",level:3},{value:"ExpiresGet",id:"expiresget",level:3},{value:"UseASPredirectSet",id:"useaspredirectset",level:3},{value:"TimeoutSet",id:"timeoutset",level:3},{value:"LanguageSet",id:"languageset",level:3},{value:"GzipOutputSet",id:"gzipoutputset",level:3},{value:"HyperEventBody",id:"hypereventbody",level:3},{value:"MatchLanguage",id:"matchlanguage",level:3},{value:"GetText",id:"gettext",level:3},{value:"CSPGatewayDataSet",id:"cspgatewaydataset",level:3},{value:"OutputCSPGatewayData",id:"outputcspgatewaydata",level:3},{value:"Flush",id:"flush",level:3},{value:"SetCookie",id:"setcookie",level:3},{value:"SetHeader",id:"setheader",level:3},{value:"SetHeaderIfEmpty",id:"setheaderifempty",level:3},{value:"GetHeader",id:"getheader",level:3},{value:"DeleteHeader",id:"deleteheader",level:3},{value:"UpdateHeadersFromSession",id:"updateheadersfromsession",level:3},{value:"WriteHTTPHeader",id:"writehttpheader",level:3},{value:"WriteHeaders",id:"writeheaders",level:3},{value:"WriteHTTPHeaderCookies",id:"writehttpheadercookies",level:3},{value:"WriteCookies",id:"writecookies",level:3},{value:"SetDefaultCharset",id:"setdefaultcharset",level:3},{value:"Reset",id:"reset",level:3},{value:"Abort",id:"abort",level:3},{value:"EndSession",id:"endsession",level:3},{value:"SetPreserve",id:"setpreserve",level:3},{value:"ContentInfo",id:"contentinfo",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"cspresponse",children:"%CSP.Response"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Class %CSP.Response Extends %RegisteredObject [ System = 3 ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"The %CSP.Response class determines what the HTTP headers generated for this page will look like. Note that by default CSP pages are set to never be cached, so the browser will have to get the page each time. If you wish to change this see the Expires property."}),"\n",(0,n.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(t.h3,{id:"httpversion",children:"HTTPVersion"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property HTTPVersion As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:'Version of HTTP support CSP will report. If this is "" (the default), then use the version reported from the client request. If you need another value such as "HTTP/1.0" even for an HTTP/1.1 request, then set this property to the version on you require.'}),"\n",(0,n.jsx)(t.p,{children:'For an HTTP/2 request, version "HTTP/2.0" is always assumed, and setting this property has no effect.'}),"\n",(0,n.jsx)(t.h3,{id:"status",children:"Status"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Property Status As %String [ InitialExpression = "200 OK" ];\n'})}),"\n",(0,n.jsx)(t.p,{children:"The HTTP Status code to be sent back in the response. The HTTP status codes are defined in RFC 2068."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://www.faqs.org/rfcs/rfc2068.html",children:"http://www.faqs.org/rfcs/rfc2068.html"})}),"\n",(0,n.jsx)(t.h3,{id:"redirect",children:"Redirect"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Redirect As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:"Setting this property to a target URL will cause the browser to be redirected to this new page. The result of this is to send a 303 Redirected HTTP header back to the client browser, the browser then requests the new redirected page from the server. This is not as fast as a server side redirect which can be issues using the ServerSideRedirect."}),"\n",(0,n.jsxs)(t.p,{children:["The OnPage() method will ",(0,n.jsx)(t.strong,{children:"not"})," be called if this is set. For example the following CSP page section will redirect to the 'redirect.csp' page. ``"]}),"\n",(0,n.jsx)(t.h3,{id:"useexactredirect",children:"UseExactRedirect"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property UseExactRedirect As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Typically when performing a browser-side redirect using Redirect the target URL will be transformed to an absolute URL before being sent to the client. The system may also add CSPToken and/or CSPCHD URL parameters as appropriate. If UseExactRedirect is 1, then the server will not perform these transformations; the URL specified in Redirect will be used exactly. This only affects the current request, and does not affect redirects using ServerSideRedirect. The default is 0."}),"\n",(0,n.jsx)(t.h3,{id:"serversideredirect",children:"ServerSideRedirect"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property ServerSideRedirect As %String;\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Setting this property to a URL will make the server redirect to this new page and render this instead of the original URL. This redirection is done entirely on the server which makes it much faster than the Redirect which needs to go all the way back to the browser and then back to the server again. You should set this to a URL without the '",(0,n.jsx)(t.a,{href:"http://machine",children:"http://machine"}),"' part such as '/csp/samples/menu.csp' or it will not be able to parse this correctly and will use a browser redirect instead"]}),"\n",(0,n.jsxs)(t.p,{children:["Note that as the browser asked for page 'a.csp' and using a server side redirect you display 'b.csp' the browser still thinks it has displayed page 'a.csp' and so will show this URL in the address bar. The OnPage() method will ",(0,n.jsx)(t.strong,{children:"not"})," be called if this is set. For example the following CSP page section will redirect to the 'redirect.csp' page. ``"]}),"\n",(0,n.jsx)(t.h3,{id:"contenttype",children:"ContentType"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Property ContentType As %String [ InitialExpression = "text/html" ];\n'})}),"\n",(0,n.jsx)(t.p,{children:"Sets the Content-Type header. Since the HTTP headers are sent after the OnPreHTTP() method is complete, setting it after this has no effect."}),"\n",(0,n.jsx)(t.h3,{id:"charset",children:"CharSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property CharSet As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:'Sets the Character Set for the content-type header. If CharSet is \'= "" and NoCharSetConvert=0, then output is translated for any content-type. If not specified for text, then default is utf-8 on Unicode systems and the system default on 8-bit systems.'}),"\n",(0,n.jsx)(t.h3,{id:"cookiepath",children:"CookiePath"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property CookiePath As %String(MAXLEN = 256);\n"})}),"\n",(0,n.jsx)(t.p,{children:"The path we will send the session cookie with"}),"\n",(0,n.jsx)(t.h3,{id:"headercharset",children:"HeaderCharSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property HeaderCharSet As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:'Sets the Character Set to write out the HTTP headers. If not specified it defaults to UTF-8 which appears to be the standard for most browsers. If you do not want to use any translation you can specify "RAW" for this property.'}),"\n",(0,n.jsx)(t.h3,{id:"contentlength",children:"ContentLength"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property ContentLength As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:"Sets the Content-Length header. Since the HTTP headers are sent after the OnPreHTTP() method is complete, setting it after this has no effect."}),"\n",(0,n.jsx)(t.h3,{id:"nocharsetconvert",children:"NoCharSetConvert"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property NoCharSetConvert As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If the ContentType=text/... or the CharSet is specified then CSP will normally convert to the target charset when writing the page out. However sometimes you may wish to turn this off if for example you do not have this charset installed and just wish to use RAW mode. If so set this property to 1."}),"\n",(0,n.jsx)(t.h3,{id:"cookies",children:"Cookies"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Cookies As %String [ MultiDimensional ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Maintains the collection of cookies to be sent out. See SetCookie."}),"\n",(0,n.jsx)(t.h3,{id:"usehttponly",children:"UseHttpOnly"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property UseHttpOnly As %Boolean [ InitialExpression = 1 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Use 'HttpOnly' with Session Cookie"}),"\n",(0,n.jsx)(t.h3,{id:"headers",children:"Headers"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Headers As %String [ MultiDimensional ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Maintains the collection of additional HTTP Headers to be sent out. See SetHeader and GetHeader."}),"\n",(0,n.jsx)(t.h3,{id:"timers",children:"Timers"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Timers As %Float [ MultiDimensional ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Used to keep track of how long various pieces of the CSP pages take to render."}),"\n",(0,n.jsx)(t.h3,{id:"inprogress",children:"InProgress"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property InProgress As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Returns true if the request is already in progress -- that is the HTTP headers have been sent, and false otherwise. A read only property."}),"\n",(0,n.jsx)(t.h3,{id:"context",children:"Context"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Context As %String [ MultiDimensional ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Maintain a list of name-value pairs that will be added to every hyperlink and form on this page. This array should be created in the OnPreHTTP() method before the page is being rendered or some links will have these parameters and some will not. This can be used for example to add a page Id to every link from this page so that if the user bookmarks this page and comes back to it later you will know they clicked on a link from the 'Camera purchase' page of the web site."}),"\n",(0,n.jsxs)(t.p,{children:["The format of this array is just: ",(0,n.jsx)(t.code,{children:'Set %response.Context("Name")="Value"'}),' Note that if the page you link to is encoded then these parameters will be automatically encrypted, if you do not want this behavior then \'Set %response.Context("Name","encrypted")=0\' in addition to setting the value of this property. If you wish to insert the same item name multiple times you can do this.']}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:'Set %response.Context("Name")="Value" Set %response.Context("Name",1)="Value2"'})," This will insert 'Name' twice, first with 'Value' and then with 'Value2'."]}),"\n",(0,n.jsx)(t.h3,{id:"expires",children:"Expires"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Expires As %String [ Calculated ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Used to control the expiration of the CSP page being served. It can be set to one of the following values:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"-1"}),": Expire immediately, this is the default for a CSP page"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"0"}),": Expire immediately, this also sets the 'no-store' option so using the back button will request a new page"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:'""'}),": No HTTP 'Expires', 'Pragma', or 'cache-control' headers are sent."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"nnnnn"}),": Number of seconds from now when the object should expire"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Thu, 29 Oct 1998 17:04:19 GMT"}),": Absolute time at which the object should expire"]}),"\n",(0,n.jsx)(t.li,{children:"One way to 'never expire' is to set a 'forever date':"}),"\n",(0,n.jsx)(t.li,{children:'"Sun, 17-Jan-2038 19:14:07 GMT" is the maximum 32-bit Unix time/date'}),"\n",(0,n.jsx)(t.li,{children:'"Mon, 31 Dec 2035 12:00:00 GMT" is the maximum IIS6 date.'}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"ddddd,sssss"}),": Absolute time the object should expire in $ZTimeStamp format. Note that this must be specified in the GMT timezone\nNote that setting this header also effects the 'Cache-Control' and 'Pragma' headers. If the page is set to expire immediately then it will send a 'Cache-Control: no-cache' and 'Pragma: no-cache' to prevent any caches from storing the page. If the page is set to never expires then it will not send any 'Cache-Control' or 'Pragma' headers. If you set an expires date then it will not modify the 'Cache-Control' or 'Pragma' headers so if they are set they will be sent as specified and if you did not set them then nothing will be sent for these headers."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"varybyparam",children:"VaryByParam"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property VaryByParam As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:"This property controls the CSP Gateway output caching mechanism along with the Expires. Output caching is a mechanism to cache the result of a CSP page on the web server and if another client requests the same page it can be given this cached result directly from the web server without making InterSystems IRIS do any work. This can result in significant scalability improvements if this is used carefully. A typical use of this feature may be to cache the inital page on a web portal which displays some news items, some weather information, etc. as everyone coming into the site sees this page first it gets a lot of hits, but it is reasonable to only ask InterSystems IRIS to recreate the page every five minutes which will save a significant amount of work on the server."}),"\n",(0,n.jsx)(t.p,{children:"The amount of time that the page will sit in the cache on the web server is determined by the Expires (which also determines how long this page sits in the web browsers cache as well. The conditions that must be met to serve up this cached page are determined by the VaryByParam property. Possible values are"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"None"})," - This means that any further request for this page in the period set by Expires will return this cached page, even if the query parameters are different."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"*"})," - Means that a separate cached copy of this page is retained by the web server for every combination of parameters that are requested. So if user A requests page.csp?VAL=1 and then user B request page.csp?VAL=5 they will not get the cached page, however if user C requests page.csp?VAL=1 then they will get the cached page produced in response to user A's request."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"A,B,C"})," - Means that just consider the parameters A, B, C in determining which cached page to return, so if user A requests page.csp?A=1&D=5 and then user B requests page.csp?D=10&A=1 then they will get the same page generated for user A."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"tracedump",children:"TraceDump"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property TraceDump As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Setting this to true will cause a CSP object dump after the page has been written. This can be very useful for debugging pages."}),"\n",(0,n.jsx)(t.h3,{id:"outputsessiontoken",children:"OutputSessionToken"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property OutputSessionToken As %Boolean [ InitialExpression = 1 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If this property is set to 0 then prevent the session cookie and CSPCHD from being output. Can be useful when serving up static content for example from %CSP.StreamServer. Note that if the value has been set by the CSP server to 0 already you should not set it to 1 as when the CSP server determines a request does not need a session it skips various session related logic and does not define a session cookie value so setting this to 1 will have no effect."}),"\n",(0,n.jsx)(t.h3,{id:"useaspredirect",children:"UseASPredirect"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property UseASPredirect As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If true and the CSP web gatway is running on Microsoft Internet Information Server then this will post the output from CSP through the ASP engine on the web server which will output the final HTML. This is done by writing a temporary file on the web server and then asking the ASP engine to render this temporary file. Note you must set this property in the OnPreHTTP() method, i.e. before any message headers have been written out for it to be effective. If you attempt to set this after the header have been written it will generate an error."}),"\n",(0,n.jsx)(t.h3,{id:"timeout",children:"Timeout"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Timeout As %Integer;\n"})}),"\n",(0,n.jsx)(t.p,{children:"Can be set in the OnPreHTTP() method of a page in which case this changes the amount of time the CSP gateway will wait for a response from the server in seconds before it reports the 'Server is not responding' error message. This is useful if you know that this page is doing an expensive SQL query that will take a couple of minutes and you want to set the server response timeout on the CSP gateway to a minute and yet wait three minutes for this page to respond. It will just change the server response timeout for this page only. If not set the the CSP gateway uses its default timeout value specified in the CSP gateway configuration."}),"\n",(0,n.jsx)(t.h3,{id:"language",children:"Language"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Language As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:"The language (RFC 1766 format) in which this page is to be displayed. %response.Language may be set:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"explicitely by the user,"}),"\n",(0,n.jsx)(t.li,{children:"by calling %response.MatchLanguage,"}),"\n",(0,n.jsx)(t.li,{children:'by calling %response.GetText with language of "",'}),"\n",(0,n.jsx)(t.li,{children:"by calling ##class(%CSP.TagLanguage).GetText or one of the tags implemented using ##class(%CSP.TagLanguage).GetText such as csp:text, div, span."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"domain",children:"Domain"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property Domain As %String;\n"})}),"\n",(0,n.jsx)(t.p,{children:"The %response.Domain attribute is used as the default domain for csp:text, span and div tags. The %response.Domain attribute is initialized from the DOMAIN parameter of the CSP and may be changed by the page class at any time."}),"\n",(0,n.jsx)(t.h3,{id:"gzipoutput",children:"GzipOutput"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property GzipOutput As %Boolean;\n"})}),"\n",(0,n.jsx)(t.p,{children:"If true the ask the CSP gateway to gzip the output and add modify the HTTP header to show the data is gzipped. Depending on the version and platform of the CSP gateway component this may not be supported in which case the output will be sent as per normal."}),"\n",(0,n.jsx)(t.h3,{id:"ignorerestoutput",children:"IgnoreRESTOutput"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property IgnoreRESTOutput As %Boolean [ Internal ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If IgnoreRESTOutput is true, then writes during a REST method are ignored."}),"\n",(0,n.jsx)(t.h3,{id:"cspgatewaydata",children:"CSPGatewayData"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property CSPGatewayData As %String [ Internal, Private ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"Holds the string we need to send to the CSP Gateway to tell it what state this session is in. This is for internal use only."}),"\n",(0,n.jsx)(t.h3,{id:"allowoutputflush",children:"AllowOutputFlush"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property AllowOutputFlush As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This flag is intended to be used in conjunction with the Flush() method. The Flush() method will flush the response output buffer from InterSystems IRIS to the CSP Gateway. If this flag is set in the page ",(0,n.jsx)(t.strong,{children:"OnPreHTTP()"})," method, the Gateway will flush each buffer received from InterSystems IRIS to the web server, without attempting to aggregate small buffers into larger ones before final dispatch back to the web server."]}),"\n",(0,n.jsx)(t.p,{children:"Example: ``"}),"\n",(0,n.jsx)(t.h3,{id:"avoidpartitioncleanup",children:"AvoidPartitionCleanup"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Property AvoidPartitionCleanup As %Boolean [ InitialExpression = 0, Internal ];\n"})}),"\n",(0,n.jsx)(t.p,{children:"If true then avoid the partition cleanup at the end of the CSP page request. Only used internally, not for customer use."}),"\n",(0,n.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(t.h3,{id:"inprogressset",children:"InProgressSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method InProgressSet(val As %Boolean) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for InProgress property"}),"\n",(0,n.jsx)(t.h3,{id:"expiresset",children:"ExpiresSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method ExpiresSet(val As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for Expires property"}),"\n",(0,n.jsx)(t.h3,{id:"expiresget",children:"ExpiresGet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method ExpiresGet() As %String [ CodeMode = expression, Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for Expires property"}),"\n",(0,n.jsx)(t.h3,{id:"useaspredirectset",children:"UseASPredirectSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method UseASPredirectSet(val As %Boolean) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for UseASPredirect property"}),"\n",(0,n.jsx)(t.h3,{id:"timeoutset",children:"TimeoutSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method TimeoutSet(val As %Integer) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for Timeout property"}),"\n",(0,n.jsx)(t.h3,{id:"languageset",children:"LanguageSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method LanguageSet(val As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for Language property"}),"\n",(0,n.jsx)(t.h3,{id:"gzipoutputset",children:"GzipOutputSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method GzipOutputSet(val As %Boolean) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set method for GzipOutput property"}),"\n",(0,n.jsx)(t.h3,{id:"hypereventbody",children:"HyperEventBody"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod HyperEventBody() As %String [ Deprecated, Final, ServerOnly = 1 ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"This method is deprecated since Java applet based hyperevents are no longer supported."}),"\n",(0,n.jsx)(t.h3,{id:"matchlanguage",children:"MatchLanguage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method MatchLanguage() As %String\n"})}),"\n",(0,n.jsx)(t.p,{children:"Find and return the language (RFC 1766 format) in which this page is to be displayed. The %response Language attribute is used as the default language for csp:text, span and div tags. If %response.Language is not set by the CSP page, then %response.Language is set to %session.Language. In turn, if %session.Language has not set been already set, then it is set to the best fit from the HTTP_ ACCEPT_LANGUAGE CGI variable using #class(%MessageDictionary).MatchLanguage based on the current %response.Domain. The domain for a specific csp:text, div or span tag does not influence the selection of language."}),"\n",(0,n.jsx)(t.h3,{id:"gettext",children:"GetText"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method GetText(language As %String = "", domain As %String = "", id As %String, default As %String, args...) As %String\n'})}),"\n",(0,n.jsx)(t.p,{children:'Get and format message text for the page being output. Language is optional and %response.Language is used, if language is "" or not specified. Language will be converted to lower case before being used. Domain can be a system domain beginning with % or a application domain. Domain is optional and %response.Domain is used, if domain is "" or not specified. Id is any message id. Arguments of the form %1, %2, etc will be replaced by macro arguments that follow the default argument. Return a the string specified by the default argument, if message text not found. If the default argument is not specified, then string for the default language or English is used as the default.'}),"\n",(0,n.jsx)(t.h3,{id:"cspgatewaydataset",children:"CSPGatewayDataSet"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method CSPGatewayDataSet(val As %String) As %Status [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Add this val to the information to be sent to the CSP Gateway. This is for internal use only."}),"\n",(0,n.jsx)(t.h3,{id:"outputcspgatewaydata",children:"OutputCSPGatewayData"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method OutputCSPGatewayData() [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Output the CSP Gateway session state information. For internal use only."}),"\n",(0,n.jsx)(t.h3,{id:"flush",children:"Flush"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method Flush() As %Status\n"})}),"\n",(0,n.jsx)(t.p,{children:"Flush the contents of the output buffer to the web server. This can be useful in large pages where it can display the first section of the page quickly, but then takes a few seconds to perform some calculation for the second half of the page. If you flush the output buffer after writing the first half of the page then the browser may (this is not always true, it depends on what you are outputting and how the browser parses the HTML) be able to display the first section of the page. This can make the page look more responsive. This should be used sparingly because buffering the output significantly improves the performance of CSP and the output is automatically flushed at the end of a page."}),"\n",(0,n.jsx)(t.h3,{id:"setcookie",children:"SetCookie"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:'Method SetCookie(name As %String, value As %String, expires As %String = "", path As %String = "", domain As %String = "", secure As %Boolean = 0, httpOnlyFlag As %Boolean = 0, sameSite As %String = "")\n'})}),"\n",(0,n.jsx)(t.p,{children:'Sets a cookie into the reply. All cookies must be set before the HTTP headers are written so they need to be created in the OnPreHTTP() method. The sameSite attribute defaults to the session\'s User Cookie Scope setting. If specified, it must be "Strict", "Lax", or "None" (case insensitive). If "None", the Secure flag is required.'}),"\n",(0,n.jsx)(t.h3,{id:"setheader",children:"SetHeader"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method SetHeader(name As %String, value As %String)\n"})}),"\n",(0,n.jsx)(t.p,{children:"Sets a custom HTTP header into the reply. All headers must be set before the HTTP headers are written (after OnPreHTTP() completes). If you set the same header twice it will append the information to the first with a ',' between them. Note that name is not case sensitive, however we will remember the case of the header when sending this to the client."}),"\n",(0,n.jsx)(t.h3,{id:"setheaderifempty",children:"SetHeaderIfEmpty"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method SetHeaderIfEmpty(name As %String, value As %String) As %Boolean\n"})}),"\n",(0,n.jsx)(t.p,{children:"Helper method that sets a header if it is currently empty, if it already has a value it does nothing. Returns true if the header was set and false if it did nothing."}),"\n",(0,n.jsx)(t.h3,{id:"getheader",children:"GetHeader"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method GetHeader(name As %String) As %String [ CodeMode = expression ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Return the value of the name header. Note that name is not case sensitive"}),"\n",(0,n.jsx)(t.h3,{id:"deleteheader",children:"DeleteHeader"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method DeleteHeader(name As %String)\n"})}),"\n",(0,n.jsx)(t.p,{children:"Remove a header from the response. Note that name is not case sensitive"}),"\n",(0,n.jsx)(t.h3,{id:"updateheadersfromsession",children:"UpdateHeadersFromSession"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method UpdateHeadersFromSession(headers As %String) [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Internal method to insert a series of headers from the %CSP.Session object."}),"\n",(0,n.jsx)(t.h3,{id:"writehttpheader",children:"WriteHTTPHeader"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method WriteHTTPHeader(ByRef OutputBody As %Boolean) As %Status [ Final ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Called by the CSP runtime to render the contents of the %response object as HTTP headers."}),"\n",(0,n.jsx)(t.h3,{id:"writeheaders",children:"WriteHeaders"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method WriteHeaders(test As %Boolean) [ Internal ]\n"})}),"\n",(0,n.jsx)(t.h3,{id:"writehttpheadercookies",children:"WriteHTTPHeaderCookies"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method WriteHTTPHeaderCookies()\n"})}),"\n",(0,n.jsx)(t.h3,{id:"writecookies",children:"WriteCookies"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method WriteCookies() [ Internal ]\n"})}),"\n",(0,n.jsx)(t.h3,{id:"setdefaultcharset",children:"SetDefaultCharset"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method SetDefaultCharset() As %String [ Internal, Private ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Set default charset in i%CharSet and return the table name for the default charset."}),"\n",(0,n.jsx)(t.h3,{id:"reset",children:"Reset"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method Reset(redirect As %Boolean = 0) [ CodeMode = generator, Final ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Resets this %CSP.Response object to its initial state"}),"\n",(0,n.jsx)(t.h3,{id:"abort",children:"Abort"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method Abort() [ Final ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Attempt to abort the response written so far. There are three possibilities:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"We may have encountered the error before attempting to send any of the content."}),"\n",(0,n.jsx)(t.li,{children:"Content may have been generated, but we have not flushed the buffer and so can still abort."}),"\n",(0,n.jsx)(t.li,{children:"Content has already been sent to the browser, we cannot abort.\nSo we try to abort the output, and set the InProgress to 0 if it worked."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"endsession",children:"EndSession"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method EndSession(val As %Boolean) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Used internally to send a flag to end the session to the gateway"}),"\n",(0,n.jsx)(t.h3,{id:"setpreserve",children:"SetPreserve"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method SetPreserve(val As %Boolean) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(t.p,{children:"Used internally to tell gateway if this is a persistent connection or not"}),"\n",(0,n.jsx)(t.h3,{id:"contentinfo",children:"ContentInfo"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-objectscript-class",children:"Method ContentInfo(Output contenttype As %String, Output table As %String) As %Status [ Internal ]\n"})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>o});var n=s(96540);const r={},a=n.createContext(r);function i(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);