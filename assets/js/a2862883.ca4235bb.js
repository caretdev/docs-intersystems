"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[73933],{37907:(e,t,i)=>{i.r(t),i.d(t,{contentTitle:()=>c,default:()=>l,frontMatter:()=>n,toc:()=>a});var s=i(74848),r=i(28453);const n={pagination_prev:null,pagination_next:null},c="PKI.CAClient",a=[{value:"Properties",id:"properties",level:2},{value:"Name",id:"name",level:3},{value:"Server",id:"server",level:3},{value:"Port",id:"port",level:3},{value:"Path",id:"path",level:3},{value:"AttributePrompt",id:"attributeprompt",level:3},{value:"AttributeType",id:"attributetype",level:3},{value:"ContactName",id:"contactname",level:3},{value:"ContactPhone",id:"contactphone",level:3},{value:"ContactEmail",id:"contactemail",level:3},{value:"UseTLS",id:"usetls",level:3},{value:"TLSConfiguration",id:"tlsconfiguration",level:3},{value:"Methods",id:"methods",level:2},{value:"BuildSubject",id:"buildsubject",level:3},{value:"SubmitCSR",id:"submitcsr",level:3},{value:"ListCertificates",id:"listcertificates",level:3},{value:"GetCertificate",id:"getcertificate",level:3},{value:"Configure",id:"configure",level:3},{value:"ConfigureData",id:"configuredata",level:3}];function o(e){const t={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"pkicaclient",children:"PKI.CAClient"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Class PKI.CAClient Extends %Persistent [ Deprecated ]\n"})}),"\n",(0,s.jsx)(t.p,{children:"Certificate Authority client. Use with PKI.CAServer."}),"\n",(0,s.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,s.jsx)(t.h3,{id:"name",children:"Name"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Property Name As %String [ InitialExpression = "IRIS CA", Required ];\n'})}),"\n",(0,s.jsx)(t.p,{children:'The default Certificate Authority client has the name "IRIS CA". There is at most one per InterSystems IRIS instance.'}),"\n",(0,s.jsx)(t.h3,{id:"server",children:"Server"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property Server As %String(MAXLEN = 100) [ Required ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"DNS hostname used to access the PKI.CAServer Web service"}),"\n",(0,s.jsx)(t.h3,{id:"port",children:"Port"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property Port As %Integer [ Required ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"TCP port used to access the PKI.CAServer Web service"}),"\n",(0,s.jsx)(t.h3,{id:"path",children:"Path"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Property Path As %String [ InitialExpression = "/isc/pki/PKI.CAServer.cls", Required ];\n'})}),"\n",(0,s.jsx)(t.p,{children:"Path used to access the PKI.CAServer Web service"}),"\n",(0,s.jsx)(t.h3,{id:"attributeprompt",children:"AttributePrompt"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Property AttributePrompt As %String(MAXLEN = 100) [ InitialExpression = "Country,State or Province,Locality,Organization,Organizational Unit,Common Name" ];\n'})}),"\n",(0,s.jsx)(t.p,{children:"Prompts to use when building a %List for constructing a Subject Distinguished Name."}),"\n",(0,s.jsx)(t.h3,{id:"attributetype",children:"AttributeType"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Property AttributeType As %String [ InitialExpression = "C,ST,L,O,OU,CN" ];\n'})}),"\n",(0,s.jsx)(t.p,{children:'Attribute type keywords to use when building the "-subject" argument to the "openssl req" command'}),"\n",(0,s.jsx)(t.h3,{id:"contactname",children:"ContactName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property ContactName As %String [ Required ];\n"})}),"\n",(0,s.jsx)(t.p,{children:"Name of the local technical contact for this Certificate Authority client. This is the person who will be contacted by the Certificate Authority server's administrator to verify the validity of Certificate Signing Requests from this client."}),"\n",(0,s.jsx)(t.h3,{id:"contactphone",children:"ContactPhone"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property ContactPhone As %String;\n"})}),"\n",(0,s.jsx)(t.p,{children:"Phone number of the local technical contact for this Certificate Authority client."}),"\n",(0,s.jsx)(t.h3,{id:"contactemail",children:"ContactEmail"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property ContactEmail As %String;\n"})}),"\n",(0,s.jsx)(t.p,{children:"Email address of the local technical contact for this Certificate Authority client. Email notification will be sent to this address when an X.509 Certificate is issued for a Certificate Signing Request from this Certificate Authority client."}),"\n",(0,s.jsx)(t.h3,{id:"usetls",children:"UseTLS"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property UseTLS As %Boolean;\n"})}),"\n",(0,s.jsx)(t.h3,{id:"tlsconfiguration",children:"TLSConfiguration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Property TLSConfiguration As %String(MAXLEN = 64);\n"})}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"buildsubject",children:"BuildSubject"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method BuildSubject(values As %List) As %String\n"})}),"\n",(0,s.jsx)(t.p,{children:'Build the "-subject" argument to the "openssl req" command or the "-dname" argument to the "keytool -genkeypair" command from a %List'}),"\n",(0,s.jsx)(t.h3,{id:"submitcsr",children:"SubmitCSR"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method SubmitCSR(filename As %String, attrList As %List, password As %String, ByRef st As %Status) As %String\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Generate and submit a Certificate Signing Request to the Certificate Authority server. This method creates Certificate Signing Request (.csr) and Private Key (.key) files, creates a PKI.CSR object, and submits that object to the Certificate Authority server.",(0,s.jsx)(t.br,{}),"\nParameters:",(0,s.jsx)(t.br,{}),"\nfilename - Name to use for created Certificate Signing Request (.csr) and Private Key (.key) files",(0,s.jsx)(t.br,{}),"\nattrList - %List containing attribute values to be used in constructing this Certificate Signing Request's Subject Distinguished Name",(0,s.jsx)(t.br,{}),"\npassword - Password used to protect Private Key file (optional)",(0,s.jsx)(t.br,{}),"\nst - On return, contains a status code or SOAP fault",(0,s.jsx)(t.br,{}),"\nReturn value:",(0,s.jsx)(t.br,{}),"\nString describing successful submission, or error"]}),"\n",(0,s.jsx)(t.h3,{id:"listcertificates",children:"ListCertificates"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Method ListCertificates(hostname As %String = "", instance As %String = "", ByRef st As %Status) As %XML.DataSet\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Get a list of X.509 Certificates issued by the Certificate Authority server.",(0,s.jsx)(t.br,{}),"\nParameters:",(0,s.jsx)(t.br,{}),"\nhostname - Hostname from which signing requests for certificates was received",(0,s.jsx)(t.br,{}),"\ninstance - InterSystems IRIS instance from which signing requests for certificates were received",(0,s.jsx)(t.br,{}),"\nNote: If both hostname and instance are not specified, all issued certificates are listed. st - On return, contains a status code",(0,s.jsx)(t.br,{}),"\nReturn value:",(0,s.jsx)(t.br,{}),"\nAn %XML.DataSet object"]}),"\n",(0,s.jsx)(t.h3,{id:"getcertificate",children:"GetCertificate"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method GetCertificate(number As %String, ByRef st As %Status) As %String\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Get an X.509 Certificate issued by the Certificate Authority server. This method retrieves a PKI.Certificate object and saves the contents in a Certificate (.cer) file.",(0,s.jsx)(t.br,{}),"\nParameter:",(0,s.jsx)(t.br,{}),"\nnumber - serial number of the X.509 Certificate requested, or 0 to request the Certificate Authority server's X.509 Certificate",(0,s.jsx)(t.br,{}),"\nst - On return, contains a status code",(0,s.jsx)(t.br,{}),"\nReturn value:",(0,s.jsx)(t.br,{}),"\nString describing saved Certificate file, or error"]}),"\n",(0,s.jsx)(t.h3,{id:"configure",children:"Configure"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Configure(client As PKI.CAClient, ByRef st As %Status) As %String\n"})}),"\n",(0,s.jsxs)(t.p,{children:['Configure this Certificate Authority client. Must be called before Certificate Signing Requests can be submitted. Creates the OpenSSL configuration file "openssl.cnf" if it does not exist. Parameter:',(0,s.jsx)(t.br,{}),"\nclient - PKI.CAClient object, with all required properties set",(0,s.jsx)(t.br,{}),"\nst - On return, contains a status code",(0,s.jsx)(t.br,{}),"\nReturn value:",(0,s.jsx)(t.br,{}),"\nString describing successful configuration, or error"]}),"\n",(0,s.jsx)(t.h3,{id:"configuredata",children:"ConfigureData"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method ConfigureData() [ ProcedureBlock = 0 ]\n"})})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>c,x:()=>a});var s=i(96540);const r={},n=s.createContext(r);function c(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);