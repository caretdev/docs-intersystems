"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[74857],{98636:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>i,default:()=>l,frontMatter:()=>a,toc:()=>c});var n=t(74848),r=t(28453);const a={pagination_prev:null,pagination_next:null},i="%DeepSee.ComputedDimension.SQL",c=[{value:"Parameters",id:"parameters",level:2},{value:"BEHAVIOR",id:"behavior",level:3},{value:"CACHECOMPUTEDBITSET",id:"cachecomputedbitset",level:3},{value:"Methods",id:"methods",level:2},{value:"%ResolveKey",id:"resolvekey",level:3},{value:"%OnComputeBitset",id:"oncomputebitset",level:3},{value:"%MemberSearch",id:"membersearch",level:3}];function o(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"deepseecomputeddimensionsql",children:"%DeepSee.ComputedDimension.SQL"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class %DeepSee.ComputedDimension.SQL Extends %DeepSee.ComputedDimension.Base [ System = 4 ]\n"})}),"\n",(0,n.jsxs)(s.p,{children:["This class implements a computed dimension that uses SQL statements against the cube fact table to resolve members.",(0,n.jsx)(s.br,{}),"\nFor example:",(0,n.jsx)(s.br,{}),"\n&[SELECT ID FROM $$$TABLE WHERE MxUnitsSold > 4]",(0,n.jsx)(s.br,{}),"\n-- $$$TABLE is replaced with Fact Table name.",(0,n.jsx)(s.br,{}),"\nWHERE %SEARCH.&[MxUnitsSold > 4]",(0,n.jsx)(s.br,{}),"\n-- Expression is used as WHERE clause in query on FactTable WHERE %SEARCH.&[$$$FACT > 4]",(0,n.jsx)(s.br,{}),"\n-- $$$Fact is fact defined for the computed dimension."]}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.h3,{id:"behavior",children:"BEHAVIOR"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter BEHAVIOR = "SQL";\n'})}),"\n",(0,n.jsx)(s.h3,{id:"cachecomputedbitset",children:"CACHECOMPUTEDBITSET"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter CACHECOMPUTEDBITSET As STRING [ Constraint = ",NEVER,CHECK", Flags = ENUM ] = "CHECK";\n'})}),"\n",(0,n.jsx)(s.p,{children:'Controls whether results of %OnComputeBitset can be reused Available values are "NEVER", "CHECK", with NEVER meaning no values are cached and CHECK meaning the timestamp of previous %OnComputeBitset results is compared to the cube\'s latest update timestamp.'}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"resolvekey",children:"%ResolveKey"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %ResolveKey(pSpec As %String, Output pRKey As %String) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Resolve any special tokens or expression in a key value and return the result."}),"\n",(0,n.jsx)(s.h3,{id:"oncomputebitset",children:"%OnComputeBitset"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnComputeBitset(pSpec As %String, pIndexKey As %String) As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:'Build the bitset that corresponds to the given computed dimension "spec".'}),"\n",(0,n.jsx)(s.h3,{id:"membersearch",children:"%MemberSearch"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method %MemberSearch(pSearchKey As %String, Output pList As %List) As %Status\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Execute a search for members.",(0,n.jsx)(s.br,{}),"\nReturn a list of the form:",(0,n.jsx)(s.br,{}),"\npList(n) = $LB(value,key)"]})]})}function l(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>c});var n=t(96540);const r={},a=n.createContext(r);function i(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);