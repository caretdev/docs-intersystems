"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[6996],{45101:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>c,frontMatter:()=>i,toc:()=>r});var a=n(74848),s=n(28453);const i={pagination_prev:null,pagination_next:null},o="%iKnow.TextTransformation.Definition",r=[{value:"Parameters",id:"parameters",level:2},{value:"DEFAULTSECTIONHEADER",id:"defaultsectionheader",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"Transformation",id:"transformation",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnBeforeTransformation",id:"onbeforetransformation",level:3},{value:"%OnAfterTransformation",id:"onaftertransformation",level:3},{value:"%OnCreateSection",id:"oncreatesection",level:3},{value:"%OnCreateKeyValue",id:"oncreatekeyvalue",level:3},{value:"%ApplyStream",id:"applystream",level:3},{value:"%Apply",id:"apply",level:3},{value:"%ApplyBatch",id:"applybatch",level:3},{value:"%ProcessInput",id:"processinput",level:3},{value:"%ProcessOutput",id:"processoutput",level:3},{value:"%ApplyInternal",id:"applyinternal",level:3},{value:"%InitializeSection",id:"initializesection",level:3},{value:"%FinalizeSection",id:"finalizesection",level:3},{value:"%CreateSection",id:"createsection",level:3},{value:"%CreateKeyValue",id:"createkeyvalue",level:3},{value:"%GetOutputClass",id:"getoutputclass",level:3},{value:"%OnNew",id:"onnew",level:3},{value:"%GetDefinition",id:"getdefinition",level:3},{value:"%LoadKeysAndHeaders",id:"loadkeysandheaders",level:3}];function l(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"iknowtexttransformationdefinition",children:"%iKnow.TextTransformation.Definition"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Class %iKnow.TextTransformation.Definition Extends %RegisteredObject [ Abstract, Deprecated, System = 4 ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"This class represents a Text Transformation model, as defined in its Transformation XData block. See the %Apply and %ApplyBatch methods for ways how to invoke this model on input text."}),"\n",(0,a.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(t.h3,{id:"defaultsectionheader",children:"DEFAULTSECTIONHEADER"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter DEFAULTSECTIONHEADER = "no header";\n'})}),"\n",(0,a.jsx)(t.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,a.jsx)(t.h3,{id:"transformation",children:"Transformation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:'XData Transformation [ XMLNamespace = "http://www.intersystems.com/iknow/transformation" ]\n'})}),"\n",(0,a.jsx)(t.p,{children:"The XML definition for this class' Text Transformation. See also %iKnow.TextTransformation.Model.Model."}),"\n",(0,a.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(t.h3,{id:"onbeforetransformation",children:"%OnBeforeTransformation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnBeforeTransformation(ByRef pOutput As Output) As %Status\n"})}),"\n",(0,a.jsx)(t.p,{children:"This callback method is invoked before a record is processed, after the Output object has been instantiated."}),"\n",(0,a.jsx)(t.h3,{id:"onaftertransformation",children:"%OnAfterTransformation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnAfterTransformation(ByRef pOutput As Output) As %Status\n"})}),"\n",(0,a.jsx)(t.p,{children:"This callback method is invoked after a record has been processed, before the Output object is saved."}),"\n",(0,a.jsx)(t.h3,{id:"oncreatesection",children:"%OnCreateSection"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnCreateSection(ByRef pSection As OutputSection, ByRef pOutput As Output) As %Status\n"})}),"\n",(0,a.jsx)(t.p,{children:"Callback method invoked upon the creation of a Section object. Use this callback to customize behavior upon creating sections. Setting pSection to null will remove the section from the output."}),"\n",(0,a.jsx)(t.h3,{id:"oncreatekeyvalue",children:"%OnCreateKeyValue"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnCreateKeyValue(ByRef pKeyValue As OutputKeyValue, ByRef pOutput As Output) As %Status\n"})}),"\n",(0,a.jsx)(t.p,{children:"Callback method invoked upon the creation of a KeyValue object. Use this callback to customize behavior upon creating key-value pairs. Setting pKeyValue to null will prevent the key-value pair from being added to the output."}),"\n",(0,a.jsx)(t.h3,{id:"applystream",children:"%ApplyStream"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %ApplyStream(pStream As %Stream.Object, Output pOutput As %iKnow.TextTransformation.Output) As %Status [ Final ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Invokes the transformation model on a character stream. See also %Apply."}),"\n",(0,a.jsx)(t.h3,{id:"apply",children:"%Apply"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %Apply(ByRef pString As %String, Output pOutput As %iKnow.TextTransformation.Output) As %Status [ Final ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Invokes the model defined in Transformation on the string pString, identifying sections, headers and key-value pairs as specified in the model. These elements are returned through an pOutput object of the output class specified in the model, defaulting to %iKnow.TextTransformation.Output."}),"\n",(0,a.jsx)(t.p,{children:"pString may also be supplied as an array of strings representing consecutive lines of text (by reference). To invoke the model in batch on a bunch of records, use %ApplyBatch."}),"\n",(0,a.jsx)(t.h3,{id:"applybatch",children:"%ApplyBatch"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %ApplyBatch(pResultSet As %ResultSet) As %Status [ CodeMode = objectgenerator, Final, ForceGenerate, GenerateAfter = %GetOutputClass ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Invokes the model specified in Transformation on all records retrieved by pResultSet, populating and saving an output object for each record. The first column of pResultSet is used as an identifier and saved as the Ref property of the output object. The second column is assumed to contain the text to be transformed by this model."}),"\n",(0,a.jsx)(t.p,{children:"Note that the output object used for this batch operation should inherit from %Persistent in order for the output to be effectively persisted."}),"\n",(0,a.jsx)(t.p,{children:"See also %Apply."}),"\n",(0,a.jsx)(t.h3,{id:"processinput",children:"%ProcessInput"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %ProcessInput(ByRef pString As %String, Output pTextArray) As %Status [ Internal, Private ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Transforms input strings into a text array representing actual lines of text"}),"\n",(0,a.jsx)(t.h3,{id:"processoutput",children:"%ProcessOutput"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %ProcessOutput(ByRef pOutputArray, ByRef pOutput As %iKnow.TextTransformation.Output) As %Status [ Internal, Private ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Transforms the pOutputArray produced by a sequence of transformations and annotations into an output object."}),"\n",(0,a.jsx)(t.h3,{id:"applyinternal",children:"%ApplyInternal"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %ApplyInternal(ByRef pString As %String, Output pOutput As %iKnow.TextTransformation.Output) As %Status [ CodeMode = objectgenerator, Final, ForceGenerate, GenerateAfter = %GetDefinition, Internal, Private ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Internal method applying the model to a text array. The code for this method is automatically generated based on the mode definition in Transformation."}),"\n",(0,a.jsx)(t.h3,{id:"initializesection",children:"%InitializeSection"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %InitializeSection(ByRef pOutput As Output, Output pSection As OutputSection, pHeader As %String, pLocation As OutputLocation) As %Status [ Final, Internal ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Initializes a new section object (returned through pSection."}),"\n",(0,a.jsx)(t.h3,{id:"finalizesection",children:"%FinalizeSection"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %FinalizeSection(ByRef pOutput As Output, ByRef pSection As OutputSection, pLocationEnd As OutputLocation) As %Status [ Final, Internal ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Finalizes a section object pSection, ensuring the %OnCreateSection callback is invoked."}),"\n",(0,a.jsx)(t.h3,{id:"createsection",children:"%CreateSection"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %CreateSection(ByRef pOutput As Output, pHeader As %String, pText As %String, pLocation As OutputLocation, ByRef pKeyValues) As %Status [ Final ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Helper method to create a Section object. Custom code in any of the callbacks (such as %OnBeforeTransformation) may invoke this method to add default sections. Note that no further callbacks are invoked for key-value pairs in the pKeyValues array."}),"\n",(0,a.jsx)(t.h3,{id:"createkeyvalue",children:"%CreateKeyValue"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %CreateKeyValue(ByRef pOutput As Output, pHeader As %String, pKey As %String, pValue As %String, pLocation As OutputLocation) As %Status [ Final ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Helper method to create a KeyValue object. Custom code in any of the callbacks (such as %OnBeforeTransformation) may invoke this method to add default key value pairs."}),"\n",(0,a.jsx)(t.h3,{id:"getoutputclass",children:"%GetOutputClass"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetOutputClass() As %String [ CodeMode = objectgenerator, ForceGenerate, GenerateAfter = %LoadKeysAndHeaders, Internal ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the class name of the output class for this TT model, as specified in Transformation."}),"\n",(0,a.jsx)(t.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnNew() As %Status [ Internal, ServerOnly = 1 ]\n"})}),"\n",(0,a.jsx)(t.h3,{id:"getdefinition",children:"%GetDefinition"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetDefinition(pClassName As %String, Output pDefinition As %iKnow.TextTransformation.conf.Model) As %Status [ Internal ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Returns the TT model definition specified in Transformation as a %iKnow.TextTransformation.Model.Model object."}),"\n",(0,a.jsx)(t.h3,{id:"loadkeysandheaders",children:"%LoadKeysAndHeaders"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-objectscript-class",children:"Method %LoadKeysAndHeaders() As %Status [ CodeMode = objectgenerator, ForceGenerate, GenerateAfter = %ApplyInternal, Internal ]\n"})}),"\n",(0,a.jsx)(t.p,{children:"Loads the key and header sets from the locations specified in Transformation."})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var a=n(96540);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);