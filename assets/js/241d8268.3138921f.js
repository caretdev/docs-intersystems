"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[56594],{76605:(e,a,n)=>{n.r(a),n.d(a,{contentTitle:()=>l,default:()=>c,frontMatter:()=>t,toc:()=>i});var r=n(74848),s=n(28453);const t={pagination_prev:null,pagination_next:null},l="%DeepSee.Component.mapView",i=[{value:"Parameters",id:"parameters",level:2},{value:"NAMESPACE",id:"namespace",level:3},{value:"INCLUDEFILES",id:"includefiles",level:3},{value:"Properties",id:"properties",level:2},{value:"latitude",id:"latitude",level:3},{value:"longitude",id:"longitude",level:3},{value:"zoom",id:"zoom",level:3},{value:"mapType",id:"maptype",level:3},{value:"markersDraggable",id:"markersdraggable",level:3},{value:"latitudeProperty",id:"latitudeproperty",level:3},{value:"longitudeProperty",id:"longitudeproperty",level:3},{value:"isListing",id:"islisting",level:3},{value:"onclickmarker",id:"onclickmarker",level:3},{value:"infoProperties",id:"infoproperties",level:3},{value:"Methods",id:"methods",level:2},{value:"renderContents",id:"rendercontents",level:3},{value:"initMap",id:"initmap",level:3},{value:"zoomChangedHandler",id:"zoomchangedhandler",level:3},{value:"dragendHandler",id:"dragendhandler",level:3},{value:"getMapObject",id:"getmapobject",level:3},{value:"getMapTypeId",id:"getmaptypeid",level:3},{value:"adjustContentSize",id:"adjustcontentsize",level:3},{value:"adjustMapBounds",id:"adjustmapbounds",level:3},{value:"setProperty",id:"setproperty",level:3},{value:"notifyViewHandler",id:"notifyviewhandler",level:3},{value:"getDataSet",id:"getdataset",level:3},{value:"addMarker",id:"addmarker",level:3},{value:"getMarker",id:"getmarker",level:3},{value:"markerDragEndHandler",id:"markerdragendhandler",level:3},{value:"markerClickHandler",id:"markerclickhandler",level:3},{value:"createInfoWindow",id:"createinfowindow",level:3},{value:"getInfoPropContent",id:"getinfopropcontent",level:3},{value:"removeMarker",id:"removemarker",level:3},{value:"acquireData",id:"acquiredata",level:3},{value:"syncMarkers",id:"syncmarkers",level:3},{value:"clearMarkers",id:"clearmarkers",level:3},{value:"panToAddress",id:"pantoaddress",level:3},{value:"geocodeAddressHandler",id:"geocodeaddresshandler",level:3},{value:"showGeoMarkers",id:"showgeomarkers",level:3},{value:"%GetUrlAPIKey",id:"geturlapikey",level:3}];function d(e){const a={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"deepseecomponentmapview",children:"%DeepSee.Component.mapView"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Class %DeepSee.Component.mapView Extends (%ZEN.Component.component, %ZEN.Component.dataView) [ System = 4 ]\n"})}),"\n",(0,r.jsxs)(a.p,{children:["A specialized Zen component that displays a google map.",(0,r.jsx)(a.br,{}),"\nUse the height and width attributes to control the size of the map container."]}),"\n",(0,r.jsx)(a.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(a.h3,{id:"namespace",children:"NAMESPACE"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:'Parameter NAMESPACE = "http://www.intersystems.com/deepsee";\n'})}),"\n",(0,r.jsx)(a.h3,{id:"includefiles",children:"INCLUDEFILES"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:'Parameter INCLUDEFILES As COSEXPRESSION = """script:https://maps.googleapis.com/maps/api/js?""_..%GetUrlAPIKey()";\n'})}),"\n",(0,r.jsx)(a.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(a.h3,{id:"latitude",children:"latitude"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Property latitude As %ZEN.Datatype.float [ InitialExpression = 42.36 ];\n"})}),"\n",(0,r.jsx)(a.p,{children:"Initial latitude (as a decimal number)."}),"\n",(0,r.jsx)(a.h3,{id:"longitude",children:"longitude"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Property longitude As %ZEN.Datatype.float [ InitialExpression = 288.92 ];\n"})}),"\n",(0,r.jsx)(a.p,{children:"Initial longitude (as a decimal number)."}),"\n",(0,r.jsx)(a.h3,{id:"zoom",children:"zoom"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Property zoom As %ZEN.Datatype.integer [ InitialExpression = 12 ];\n"})}),"\n",(0,r.jsx)(a.p,{children:"Initial zoom level (0 shows entire globe)."}),"\n",(0,r.jsx)(a.h3,{id:"maptype",children:"mapType"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:'Property mapType As %ZEN.Datatype.string(VALUELIST = ",ROADMAP,SATELLITE,HYBRID,TERRAIN") [ InitialExpression = "ROADMAP" ];\n'})}),"\n",(0,r.jsx)(a.p,{children:"Initial map display."}),"\n",(0,r.jsx)(a.h3,{id:"markersdraggable",children:"markersDraggable"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Property markersDraggable As %ZEN.Datatype.boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,r.jsx)(a.p,{children:"If true, then the markers on this map are draggable."}),"\n",(0,r.jsx)(a.h3,{id:"latitudeproperty",children:"latitudeProperty"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:'Property latitudeProperty As %ZEN.Datatype.string [ InitialExpression = "Latitude" ];\n'})}),"\n",(0,r.jsx)(a.p,{children:"Name of property in data source that provides the latitude value for a marker."}),"\n",(0,r.jsx)(a.h3,{id:"longitudeproperty",children:"longitudeProperty"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:'Property longitudeProperty As %ZEN.Datatype.string [ InitialExpression = "Longitude" ];\n'})}),"\n",(0,r.jsx)(a.p,{children:"Name of property in data source that provides the longitude value for a marker."}),"\n",(0,r.jsx)(a.h3,{id:"islisting",children:"isListing"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Property isListing As %ZEN.Datatype.boolean [ InitialExpression = 0, Internal ];\n"})}),"\n",(0,r.jsx)(a.p,{children:"Optional. Flag used by DeepSee widget to indicate that this map is only used for geolistings."}),"\n",(0,r.jsx)(a.h3,{id:"onclickmarker",children:"onclickmarker"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"Property onclickmarker As %ZEN.Datatype.eventHandler;\n"})}),"\n",(0,r.jsx)(a.p,{children:"onclickmarker event handler: If defined, this event is fired when the user clicks on a marker within the map."}),"\n",(0,r.jsx)(a.h3,{id:"infoproperties",children:"infoProperties"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:'Property infoProperties As list Of %DeepSee.Component.SVG.scoreCardColumn(XMLPROJECTION = "ELEMENT", XMLREF = 1, XMLTYPECONSTRAINT = "CHOICE", ZENSETTING = 0);\n'})}),"\n",(0,r.jsx)(a.p,{children:'Define a set of property value to be displayed within the default "info box" when the user clicks on a map marker. This only uses a relevant subset of the properties in the scoreCardColumn class. Currently only the label, dataValue, style, format, and align properties are used.'}),"\n",(0,r.jsx)(a.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(a.h3,{id:"rendercontents",children:"renderContents"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod renderContents() [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Client-side method to render control."}),"\n",(0,r.jsx)(a.h3,{id:"initmap",children:"initMap"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod initMap(mapDiv) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Initialize the map"}),"\n",(0,r.jsx)(a.h3,{id:"zoomchangedhandler",children:"zoomChangedHandler"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod zoomChangedHandler() [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Callback for zoom-changed event."}),"\n",(0,r.jsx)(a.h3,{id:"dragendhandler",children:"dragendHandler"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod dragendHandler() [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Callback for map dragend event."}),"\n",(0,r.jsx)(a.h3,{id:"getmapobject",children:"getMapObject"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod getMapObject() [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Return the google map API object used by the map view."}),"\n",(0,r.jsx)(a.h3,{id:"getmaptypeid",children:"getMapTypeId"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod getMapTypeId(type) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Given the name of a map type, convert to a map type id."}),"\n",(0,r.jsx)(a.h3,{id:"adjustcontentsize",children:"adjustContentSize"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod adjustContentSize(load, width, height) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Called when page is loaded or widget is resized."}),"\n",(0,r.jsx)(a.h3,{id:"adjustmapbounds",children:"adjustMapBounds"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod adjustMapBounds() [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Adjust the map to show all the current markers"}),"\n",(0,r.jsx)(a.h3,{id:"setproperty",children:"setProperty"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod setProperty(property, value, value2) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Set the value of a named property."}),"\n",(0,r.jsx)(a.h3,{id:"notifyviewhandler",children:"notifyViewHandler"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod notifyViewHandler(reason, data1, data2, data3) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Notification that the dataController associated with this dataView has raised an event."}),"\n",(0,r.jsx)(a.h3,{id:"getdataset",children:"getDataSet"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod getDataSet() [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Return the dataSet object associated with this view."}),"\n",(0,r.jsx)(a.h3,{id:"addmarker",children:"addMarker"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod addMarker(id, latitude, longitude, title) [ Language = javascript ]\n"})}),"\n",(0,r.jsxs)(a.p,{children:["Add a marker to the map at given coordinates.",(0,r.jsx)(a.br,{}),"\nid is a user-defined identifier associated with the marker.",(0,r.jsx)(a.br,{}),"\nReturns the marker object."]}),"\n",(0,r.jsx)(a.h3,{id:"getmarker",children:"getMarker"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod getMarker(index) [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Find marker in marker list by index # (0-based)."}),"\n",(0,r.jsx)(a.h3,{id:"markerdragendhandler",children:"markerDragEndHandler"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod markerDragEndHandler(index) [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Callback for marker dragend event."}),"\n",(0,r.jsx)(a.h3,{id:"markerclickhandler",children:"markerClickHandler"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod markerClickHandler(index) [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Callback for marker click event."}),"\n",(0,r.jsx)(a.h3,{id:"createinfowindow",children:"createInfoWindow"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod createInfoWindow(marker, content) [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Create and show an info window for a given marker."}),"\n",(0,r.jsx)(a.h3,{id:"getinfopropcontent",children:"getInfoPropContent"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod getInfoPropContent(index) [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Using the infoProperties defined for this map, construct and return the HTML to display the properties within an infoBox."}),"\n",(0,r.jsx)(a.h3,{id:"removemarker",children:"removeMarker"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod removeMarker(marker) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Remove a marker from the map. marker is the marker to remove."}),"\n",(0,r.jsx)(a.h3,{id:"acquiredata",children:"acquireData"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod acquireData() [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Internal method: acquire data for this view and store a copy in a local cache."}),"\n",(0,r.jsx)(a.h3,{id:"syncmarkers",children:"syncMarkers"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod syncMarkers() [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Internal method: sync markers to data from controller."}),"\n",(0,r.jsx)(a.h3,{id:"clearmarkers",children:"clearMarkers"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod clearMarkers() [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Internal method: clear markers from map."}),"\n",(0,r.jsx)(a.h3,{id:"pantoaddress",children:"panToAddress"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod panToAddress(address) [ Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Invoke the google geocoder api to lookup an address string and move the map to view it. Applications that call this are responsible for adhering to the google geocoder api terms of use."}),"\n",(0,r.jsx)(a.h3,{id:"geocodeaddresshandler",children:"geocodeAddressHandler"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod geocodeAddressHandler(results, status) [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Callback for geocoder API."}),"\n",(0,r.jsx)(a.h3,{id:"showgeomarkers",children:"showGeoMarkers"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod showGeoMarkers() [ Internal, Language = javascript ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Show set of markers for a geolisting."}),"\n",(0,r.jsx)(a.h3,{id:"geturlapikey",children:"%GetUrlAPIKey"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-objectscript-class",children:"ClassMethod %GetUrlAPIKey() As %String [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(a.p,{children:"Load the GoogleMaps API key stored in the namespace settings."})]})}function c(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>l,x:()=>i});var r=n(96540);const s={},t=r.createContext(s);function l(e){const a=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:a},e.children)}}}]);