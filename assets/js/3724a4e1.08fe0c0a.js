"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[45250],{59393:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>i,default:()=>d,frontMatter:()=>a,toc:()=>l});var r=n(74848),s=n(28453);const a={pagination_prev:null,pagination_next:null},i="INFORMATION.SCHEMA.CURRENTSTATEMENTS",l=[{value:"Parameters",id:"parameters",level:2},{value:"READONLY",id:"readonly",level:3},{value:"Properties",id:"properties",level:2},{value:"AppMetadataStackID",id:"appmetadatastackid",level:3},{value:"ApplicationID",id:"applicationid",level:3},{value:"SQLStatementID",id:"sqlstatementid",level:3},{value:"Server",id:"server",level:3},{value:"ProcessId",id:"processid",level:3},{value:"StatementIndexHash",id:"statementindexhash",level:3},{value:"UserName",id:"username",level:3},{value:"QueryRunType",id:"queryruntype",level:3},{value:"QueryStmtType",id:"querystmttype",level:3},{value:"TPNestingLevel",id:"tpnestinglevel",level:3},{value:"Parameters",id:"parameters-1",level:3},{value:"NameSpace",id:"namespace",level:3},{value:"CachedQuery",id:"cachedquery",level:3},{value:"CallerName",id:"callername",level:3},{value:"StatementOrder",id:"statementorder",level:3},{value:"CurrentWorkerCount",id:"currentworkercount",level:3},{value:"ExecutionStart",id:"executionstart",level:3},{value:"ExecutionStartUTC",id:"executionstartutc",level:3},{value:"ExecutionDuration",id:"executionduration",level:3},{value:"ParentType",id:"parenttype",level:3},{value:"ChildStatements",id:"childstatements",level:3},{value:"Status",id:"status",level:3},{value:"Parent",id:"parent",level:3},{value:"SubStatement",id:"substatement",level:3},{value:"Methods",id:"methods",level:2},{value:"GetSQLStatement",id:"getsqlstatement",level:3}];function c(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"informationschemacurrentstatements",children:"INFORMATION.SCHEMA.CURRENTSTATEMENTS"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Class INFORMATION.SCHEMA.CURRENTSTATEMENTS Extends (%Library.Persistent, %XML.Adaptor) [ ClassType = persistent, Final, Owner = {_PUBLIC}, SqlRowIdPrivate, SqlTableName = CURRENT_STATEMENTS, StorageStrategy = SQLStorage, System = 4 ]\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Returns one row for each metadata string pushed onto the ",(0,r.jsx)(t.em,{children:"Application Metadata Stack"})," (AMS) that belongs to the ",(0,r.jsx)(t.strong,{children:"SQL"}),' application (ApplicationID="%SQL" ',(0,r.jsx)(t.em,{children:'[WHERE "%SQL"=$$$AMSApplicationIDSQL]'}),").  The GetStackInfo method within the %SYS.AppMetadataStack.SQL class returns the data ResultSet for this class/table."]}),"\n",(0,r.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(t.h3,{id:"readonly",children:"READONLY"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter READONLY = 1;\n"})}),"\n",(0,r.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(t.h3,{id:"appmetadatastackid",children:"AppMetadataStackID"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property AppMetadataStackID As %List [ SqlColumnNumber = 2 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"MRP1317"}),"\n",(0,r.jsxs)(t.p,{children:["The first $LIST(...) element of the ",(0,r.jsx)(t.em,{children:"Application Metadata Stack"}),"'s (AMS) metadata string, which is itself a $LIST(...) string that is comprised of two or more elements that can be used to uniquely identify the metadata string of the application that pushed this information onto the AMS"]}),"\n",(0,r.jsx)(t.h3,{id:"applicationid",children:"ApplicationID"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ApplicationID As %String [ InitialExpression = {$$$AMSApplicationIDSQL}, Private, Required, SqlColumnNumber = 3, SqlFieldName = ApplicationID ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"MRP1310 [Major Refactoring]"}),"\n",(0,r.jsxs)(t.p,{children:["The first element of the AppMetadataStackID property, which identifies the application that pushed this information onto the ",(0,r.jsx)(t.em,{children:"Application Metadata Stack"})," (AMS)"]}),"\n",(0,r.jsx)(t.h3,{id:"sqlstatementid",children:"SQLStatementID"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property SQLStatementID As %Integer [ SqlColumnNumber = 4 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"The second element of the AppMetadataStackID property, which is a unique SQL Statement Identifier that can be used to identify a SQL Statement that is stored in the SQL Statement Index (SSI)"}),"\n",(0,r.jsx)(t.h3,{id:"server",children:"Server"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property Server As %String [ Required, SqlColumnNumber = 5 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Identifies the instance on which this SQL Statement is running: :"}),"\n",(0,r.jsx)(t.h3,{id:"processid",children:"ProcessId"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ProcessId As %String [ Required, SqlColumnNumber = 6, SqlFieldName = ProcessID ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Identifies the IRIS process ($JOB) in which this SQL Statement is running"}),"\n",(0,r.jsx)(t.h3,{id:"statementindexhash",children:"StatementIndexHash"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property StatementIndexHash As %String [ Required, SqlColumnNumber = 7 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"SQL StatementIndex hash of this SQL Statement, which is used as a pointer to the internal definition stored in the SQL Statement Index (SSI)"}),"\n",(0,r.jsx)(t.h3,{id:"username",children:"UserName"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property UserName As %String [ Required, SqlColumnNumber = 8 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"$USERNAME of person who created and invoked this SQL Statement"}),"\n",(0,r.jsx)(t.h3,{id:"queryruntype",children:"QueryRunType"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property QueryRunType As %String [ Required, SqlColumnNumber = 9 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"SQL Query Run Type of this SQL Statement: EmbeddedSQL | DynamicSQL | xDBCQuery | ..."}),"\n",(0,r.jsx)(t.h3,{id:"querystmttype",children:"QueryStmtType"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property QueryStmtType As %Integer [ Required, SqlColumnNumber = 10 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"SQL Query Statement Type # of this SQL Statement: 1 = SELECT | 2 = INSERT | 3 = UPDATE | 4 = DELETE | ... | 72 = CANCEL QUERY"}),"\n",(0,r.jsx)(t.h3,{id:"tpnestinglevel",children:"TPNestingLevel"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property TPNestingLevel As %Integer [ Required, SqlColumnNumber = 11, SqlFieldName = TP_NestingLevel ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Current nesting level for Transaction Processing (TP)"}),"\n",(0,r.jsx)(t.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property Parameters As %List [ SqlColumnNumber = 12 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"First 10 SQL Statement parameters (might be truncated)"}),"\n",(0,r.jsx)(t.h3,{id:"namespace",children:"NameSpace"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property NameSpace As %String [ Required, SqlColumnNumber = 13, SqlFieldName = Namespace ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Namespace in which this SQL Statement was built/compiled into a Cached Query and invoked"}),"\n",(0,r.jsx)(t.h3,{id:"cachedquery",children:"CachedQuery"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property CachedQuery As %String [ SqlColumnNumber = 14 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Name of the Cached Query class created for this SQL Statement NOTE: For some Embedded SQL DDL Statements, this will be the name of the Class/Routine in which the Embedded SQL DDL Statement is specified and code generated"}),"\n",(0,r.jsx)(t.h3,{id:"callername",children:"CallerName"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property CallerName As %String [ SqlColumnNumber = 15 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:'Name of the Routine/Class who called this SQL Statement If this is the top-most SQL Statement, then this value will be the empty string ("")'}),"\n",(0,r.jsx)(t.h3,{id:"statementorder",children:"StatementOrder"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property StatementOrder As %Integer [ Required, SqlColumnNumber = 16 ];\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Order in which this SQL Statement is being executed, based on the ",(0,r.jsx)(t.em,{children:'^||oddSQL.CURRENTSTATEMENTS("orderStmts")'})," $LIST(...)"]}),"\n",(0,r.jsx)(t.h3,{id:"currentworkercount",children:"CurrentWorkerCount"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property CurrentWorkerCount As %Integer [ SqlColumnNumber = 17 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Number of workers currently active on behalf of this SQL Statement"}),"\n",(0,r.jsx)(t.h3,{id:"executionstart",children:"ExecutionStart"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ExecutionStart As %TimeStamp [ Required, SqlColumnNumber = 18 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Timestamp when this SQL Query started executing (in local timezone)"}),"\n",(0,r.jsx)(t.h3,{id:"executionstartutc",children:"ExecutionStartUTC"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ExecutionStartUTC As %TimeStamp [ Required, SqlColumnNumber = 19 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"UTC timestamp when this SQL Query started executing"}),"\n",(0,r.jsx)(t.h3,{id:"executionduration",children:"ExecutionDuration"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ExecutionDuration As %Numeric(SCALE = 6) [ Required, SqlColumnNumber = 20 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Amount of time (in seconds) in which this SQL Query has been executing"}),"\n",(0,r.jsx)(t.h3,{id:"parenttype",children:"ParentType"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ParentType As %String [ SqlColumnNumber = 21 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"Parent Type: Parallel, Sharded"}),"\n",(0,r.jsx)(t.h3,{id:"childstatements",children:"ChildStatements"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Property ChildStatements As %List [ SqlColumnNumber = 22 ];\n"})}),"\n",(0,r.jsx)(t.p,{children:"$LIST(...) of {StatementIndexHash} for all Children Queries"}),"\n",(0,r.jsx)(t.h3,{id:"status",children:"Status"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'Property Status As %String [ Calculated, Required, SqlColumnNumber = 23, SqlComputeCode = { set {*}="Executing"}, SqlComputed ];\n'})}),"\n",(0,r.jsx)(t.p,{children:"SQL Query Status: Preparing, Executing (Current Default), Closed, Aborted - or more fine-grained"}),"\n",(0,r.jsx)(t.h3,{id:"parent",children:"Parent"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Relationship Parent As INFORMATION.SCHEMA.CURRENTSTATEMENTS [ Cardinality = one, Inverse = SubStatement ];\n"})}),"\n",(0,r.jsx)(t.h3,{id:"substatement",children:"SubStatement"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:"Relationship SubStatement As INFORMATION.SCHEMA.CURRENTSTATEMENTS [ Cardinality = many, Inverse = Parent ];\n"})}),"\n",(0,r.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(t.h3,{id:"getsqlstatement",children:"GetSQLStatement"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod GetSQLStatement(ns As %String = "", hash As %String = "", Output tSC = "", normalize As %Boolean = 1, upper As %Boolean = 0) As %String [ SqlName = GetSQLStatement, SqlProc ]\n'})}),"\n",(0,r.jsx)(t.p,{children:'Get and return the SQL Statement Text based on the {NameSpace} & {StatementIndexHash} fields NOTE: Users with "USE" permission on the %Development resource can get all SQL Statements'})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var r=n(96540);const s={},a=r.createContext(s);function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);