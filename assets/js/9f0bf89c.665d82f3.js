"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[81942],{42573:(e,a,s)=>{s.r(a),s.d(a,{contentTitle:()=>t,default:()=>o,frontMatter:()=>l,toc:()=>r});var n=s(74848),i=s(28453);const l={pagination_prev:null,pagination_next:null},t="%CSP.UI.Portal.Template",r=[{value:"Parameters",id:"parameters",level:2},{value:"APPLICATION",id:"application",level:3},{value:"EMSSERVICE",id:"emsservice",level:3},{value:"PAGENAME",id:"pagename",level:3},{value:"PARENTPAGE",id:"parentpage",level:3},{value:"HELPADDRESS",id:"helpaddress",level:3},{value:"Properties",id:"properties",level:2},{value:"HelpAddress",id:"helpaddress-1",level:3},{value:"FirstFailed",id:"firstfailed",level:3},{value:"InvalidParam",id:"invalidparam",level:3},{value:"IsEditForm",id:"iseditform",level:3},{value:"IsEMSReadOnly",id:"isemsreadonly",level:3},{value:"OnclickArray",id:"onclickarray",level:3},{value:"ParentURL",id:"parenturl",level:3},{value:"PID",id:"pid",level:3},{value:"ValidationErrorMsg",id:"validationerrormsg",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"Style",id:"style",level:3},{value:"Methods",id:"methods",level:2},{value:"%GetHomePage",id:"gethomepage",level:3},{value:"%GetLocatorLinks",id:"getlocatorlinks",level:3},{value:"OnGetRibbonInfo",id:"ongetribboninfo",level:3},{value:"trimSpace",id:"trimspace",level:3},{value:"afterSave",id:"aftersave",level:3},{value:"afterValidate",id:"aftervalidate",level:3},{value:"doCancel",id:"docancel",level:3},{value:"doModified",id:"domodified",level:3},{value:"isButtonDisabled",id:"isbuttondisabled",level:3},{value:"resetMsg",id:"resetmsg",level:3},{value:"showMsg",id:"showmsg",level:3},{value:"validateRequired",id:"validaterequired",level:3},{value:"%OnGetTitle",id:"ongettitle",level:3},{value:"onloadHandler",id:"onloadhandler",level:3},{value:"%OnAfterCreatePage",id:"onaftercreatepage",level:3}];function d(e){const a={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"cspuiportaltemplate",children:"%CSP.UI.Portal.Template"})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Class %CSP.UI.Portal.Template Extends %CSP.Portal.Template [ Abstract, System = 4 ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"Template for System Management Portal (used by System Operation, System Explorer, System Administration)."}),"\n",(0,n.jsx)(a.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(a.h3,{id:"application",children:"APPLICATION"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:'Parameter APPLICATION = "%CSP.UI.Portal.Application";\n'})}),"\n",(0,n.jsx)(a.p,{children:"Class name of application this page belongs to."}),"\n",(0,n.jsx)(a.h3,{id:"emsservice",children:"EMSSERVICE"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Parameter EMSSERVICE As STRING;\n"})}),"\n",(0,n.jsx)(a.h3,{id:"pagename",children:"PAGENAME"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:'Parameter PAGENAME = "System Management Portal Template";\n'})}),"\n",(0,n.jsx)(a.h3,{id:"parentpage",children:"PARENTPAGE"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:'Parameter PARENTPAGE As STRING = "/csp/sys/%CSP.Portal.Home.zen";\n'})}),"\n",(0,n.jsx)(a.h3,{id:"helpaddress",children:"HELPADDRESS"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Parameter HELPADDRESS As STRING;\n"})}),"\n",(0,n.jsx)(a.p,{children:"Each SMP page should set this link which points to the documentation anchor name."}),"\n",(0,n.jsx)(a.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(a.h3,{id:"helpaddress-1",children:"HelpAddress"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Property HelpAddress As %ZEN.Datatype.string [ InitialExpression = {..#HELPADDRESS} ];\n"})}),"\n",(0,n.jsx)(a.p,{children:"This property overrides %CSP.Portal.Template to use parameter HELPADDRESS that every SMP pages has."}),"\n",(0,n.jsx)(a.h3,{id:"firstfailed",children:"FirstFailed"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Property FirstFailed As %String;\n"})}),"\n",(0,n.jsx)(a.p,{children:"Keeps track of the first form field that failed during validation."}),"\n",(0,n.jsx)(a.h3,{id:"invalidparam",children:"InvalidParam"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Property InvalidParam As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(a.p,{children:"Set to 1 in %OnAfterCreatePage if a URI parameter is invalid. Used to disable command buttons in onloadHandler()."}),"\n",(0,n.jsx)(a.h3,{id:"iseditform",children:"IsEditForm"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Property IsEditForm As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(a.p,{children:"If set to 1 then the generic Save and Cancel button will be shown on the ribbon bar."}),"\n",(0,n.jsx)(a.h3,{id:"isemsreadonly",children:"IsEMSReadOnly"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Property IsEMSReadOnly As %Boolean [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(a.p,{children:"1 if we are on an EMS manager and viewing group data or on a managed instance, 0 otherwise. Property IsEMSReadOnly As %Boolean [ InitialExpression = {##class(%SYS.EMS).IsReadOnly($classname())} ];"}),"\n",(0,n.jsx)(a.h3,{id:"onclickarray",children:"OnclickArray"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Property OnclickArray As %ArrayOfDataTypes;\n"})}),"\n",(0,n.jsx)(a.p,{children:"Keeps track of currently disabled buttons' onclick events."}),"\n",(0,n.jsx)(a.h3,{id:"parenturl",children:"ParentURL"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:'Property ParentURL As %String [ InitialExpression = {..Link($ZCVT(..#PARENTPAGE,"O","URL"))} ];\n'})}),"\n",(0,n.jsx)(a.p,{children:"Parent URL that Cancel and Save should return to"}),"\n",(0,n.jsx)(a.h3,{id:"pid",children:"PID"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:'Property PID As %String(ZENURL = "PID");\n'})}),"\n",(0,n.jsx)(a.p,{children:"ID for edit."}),"\n",(0,n.jsx)(a.h3,{id:"validationerrormsg",children:"ValidationErrorMsg"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:'Property ValidationErrorMsg As %String [ InitialExpression = {$$$Text("There was a problem with the form. See the highlighted fields below.")} ];\n'})}),"\n",(0,n.jsx)(a.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,n.jsx)(a.h3,{id:"style",children:"Style"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"XData Style\n"})}),"\n",(0,n.jsx)(a.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(a.h3,{id:"gethomepage",children:"%GetHomePage"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClassMethod %GetHomePage() As %String\n"})}),"\n",(0,n.jsx)(a.p,{children:"This method is used by SMP to return home page. Set home to %session if not null for later use."}),"\n",(0,n.jsx)(a.h3,{id:"getlocatorlinks",children:"%GetLocatorLinks"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Method %GetLocatorLinks(Output pLink) As %Status\n"})}),"\n",(0,n.jsxs)(a.p,{children:["Return the array of links to show in the locator bar.",(0,n.jsx)(a.br,{}),"\npLink(n)=$LB(caption,link)",(0,n.jsx)(a.br,{}),'\nSubclasses with extra layers of locator links or other than "Configuration" please override.']}),"\n",(0,n.jsx)(a.h3,{id:"ongetribboninfo",children:"OnGetRibbonInfo"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Method OnGetRibbonInfo(Output pDisplay As %Boolean, Output pViewIcons As %List, Output pSortOptions As %List, Output pSearchBox As %Boolean, Output pRibbonTitle As %String, Output pCommands As %List) As %Status\n"})}),"\n",(0,n.jsx)(a.p,{children:"Get information to display in the ribbon bar."}),"\n",(0,n.jsx)(a.h3,{id:"trimspace",children:"trimSpace"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod trimSpace(zenProp) [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"trim space from both outside and inside a string of a passed in zen property and then set back into the zen property"}),"\n",(0,n.jsx)(a.h3,{id:"aftersave",children:"afterSave"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod afterSave(result As %ZEN.proxyObject) [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"This method can be called by the doSave() function to handle what the ZenMethod of server Save returned. The method expects a proxy object to be passed. result.ok = 1 indicates save is successful. result.Message is a message (not an error message) that should be displayed. result.ok = 0 indicates save has failed. result.ErrorMessage should be displayed. If result.ok = 1 and result.Message is null then the edit form is closed and the ParentURL is displayed."}),"\n",(0,n.jsx)(a.h3,{id:"aftervalidate",children:"afterValidate"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod afterValidate() [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"This method can be called after validation (where validateRequired has failed) fails. Display standard error message and set focus to the FirstFailed field."}),"\n",(0,n.jsx)(a.h3,{id:"docancel",children:"doCancel"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod doCancel() [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"This method resets the modified indicator and return user to the parent page."}),"\n",(0,n.jsx)(a.h3,{id:"domodified",children:"doModified"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod doModified() [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"This method is called when a field is modified. setModified(true) will cause the modified indicator (a star) to show next to the page name."}),"\n",(0,n.jsx)(a.h3,{id:"isbuttondisabled",children:"isButtonDisabled"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod isButtonDisabled(buttonName) [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"This method returns true if a ribbon button is disabled; false otherwise."}),"\n",(0,n.jsx)(a.h3,{id:"resetmsg",children:"resetMsg"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod resetMsg() [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"Clear message from idRespond html (usually placed above the editing portion of the page, but could be anywhere)."}),"\n",(0,n.jsx)(a.h3,{id:"showmsg",children:"showMsg"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod showMsg(msg, isErr) [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"Display message in idRespond html (usually placed above the editing portion of the page, but could be anywhere). isErr: if 1 is passed in then the color will be changed to red; If 0 is passed in then the color is changed to #4D3926; If 2 is passed in then the color is changed to green, i.e. success If nothing is passed in, then the color is unchanged. This allows developers to set their own style/class and still be able to use showMsg."}),"\n",(0,n.jsx)(a.h3,{id:"validaterequired",children:"validateRequired"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod validateRequired(ctl, pass, type, checkRange, minVal, maxVal) As %Boolean [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:'Validate the control value. pass is either "true" or "false" indicating if there is already a field that failed validation. Type is "N" for numeric or "S" for string. If numeric, if checkRange is true, we additionally validate that the number is between minVal and maxVal, inclusive.'}),"\n",(0,n.jsx)(a.h3,{id:"ongettitle",children:"%OnGetTitle"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Method %OnGetTitle() As %String\n"})}),"\n",(0,n.jsx)(a.p,{children:"Get the (localized) title string for the page. Subclass can override."}),"\n",(0,n.jsx)(a.h3,{id:"onloadhandler",children:"onloadHandler"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"ClientMethod onloadHandler() [ Language = javascript ]\n"})}),"\n",(0,n.jsx)(a.p,{children:"Disable save button for EMS-managed pages. Be sure to use this.invokeSuper('onloadHandler',arguments); when overriding."}),"\n",(0,n.jsx)(a.h3,{id:"onaftercreatepage",children:"%OnAfterCreatePage"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-objectscript-class",children:"Method %OnAfterCreatePage() As %Status\n"})}),"\n",(0,n.jsx)(a.p,{children:"Be sure to do ##super() when overriding."})]})}function o(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,a,s)=>{s.d(a,{R:()=>t,x:()=>r});var n=s(96540);const i={},l=n.createContext(i);function t(e){const a=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(l.Provider,{value:a},e.children)}}}]);