"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[29990],{36244:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>t,default:()=>o,frontMatter:()=>l,toc:()=>i});var a=n(74848),r=n(28453);const l={pagination_prev:null,pagination_next:null},t="%Api.InteropEditors.Utils",i=[{value:"Parameters",id:"parameters",level:2},{value:"WhenCommentDelimeter",id:"whencommentdelimeter",level:3},{value:"AllRulesRead",id:"allrulesread",level:3},{value:"AllRulesWrite",id:"allruleswrite",level:3},{value:"BusinessRulesRead",id:"businessrulesread",level:3},{value:"BusinessRulesWrite",id:"businessruleswrite",level:3},{value:"RoutingRulesRead",id:"routingrulesread",level:3},{value:"RoutingRulesWrite",id:"routingruleswrite",level:3},{value:"Methods",id:"methods",level:2},{value:"GetInputPlugins",id:"getinputplugins",level:3},{value:"SaveRule",id:"saverule",level:3},{value:"ExpandRuleSet",id:"expandruleset",level:3},{value:"ContractRuleSet",id:"contractruleset",level:3},{value:"IsReadOnly",id:"isreadonly",level:3},{value:"GetRulePerms",id:"getruleperms",level:3},{value:"HasPermsByRuleClass",id:"haspermsbyruleclass",level:3},{value:"HasPermsByAssistClass",id:"haspermsbyassistclass",level:3},{value:"HasPermsByRuleType",id:"haspermsbyruletype",level:3},{value:"IsSubClass",id:"issubclass",level:3},{value:"HasKey",id:"haskey",level:3},{value:"CallSourceControlCallback",id:"callsourcecontrolcallback",level:3},{value:"GetInternalName",id:"getinternalname",level:3},{value:"AddSCInfoToContainer",id:"addscinfotocontainer",level:3},{value:"evaluateRule",id:"evaluaterule",level:3},{value:"ServerGetQueryData",id:"servergetquerydata",level:3},{value:"serializeMessageAsHTML",id:"serializemessageashtml",level:3}];function c(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"apiinteropeditorsutils",children:"%Api.InteropEditors.Utils"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Class %Api.InteropEditors.Utils\n"})}),"\n",(0,a.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(s.h3,{id:"whencommentdelimeter",children:"WhenCommentDelimeter"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter WhenCommentDelimeter = "&sep;";\n'})}),"\n",(0,a.jsx)(s.p,{children:"Comments on 'when's are stored in an attribute rather than an array of elements. This string acts a the delimeter for the comment attribute on each when."}),"\n",(0,a.jsx)(s.h3,{id:"allrulesread",children:"AllRulesRead"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter AllRulesRead = 1;\n"})}),"\n",(0,a.jsx)(s.h3,{id:"allruleswrite",children:"AllRulesWrite"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter AllRulesWrite = 2;\n"})}),"\n",(0,a.jsx)(s.h3,{id:"businessrulesread",children:"BusinessRulesRead"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter BusinessRulesRead = 3;\n"})}),"\n",(0,a.jsx)(s.h3,{id:"businessruleswrite",children:"BusinessRulesWrite"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter BusinessRulesWrite = 4;\n"})}),"\n",(0,a.jsx)(s.h3,{id:"routingrulesread",children:"RoutingRulesRead"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter RoutingRulesRead = 5;\n"})}),"\n",(0,a.jsx)(s.h3,{id:"routingruleswrite",children:"RoutingRulesWrite"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"Parameter RoutingRulesWrite = 6;\n"})}),"\n",(0,a.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,a.jsx)(s.h3,{id:"getinputplugins",children:"GetInputPlugins"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetInputPlugins(contextClassName As %String, ByRef plugins As %DynamicArray) As %Status\n"})}),"\n",(0,a.jsx)(s.p,{children:"Get properties and plugin metadata of an extended context class. The method arguments hold values for: namespace, Namespace to search for extensions in. contextClassName, Context class to get properties and plugin metadata of."}),"\n",(0,a.jsx)(s.h3,{id:"saverule",children:"SaveRule"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SaveRule(ruleClass As %String, ruleDefinition As %DynamicObject) As %Status\n"})}),"\n",(0,a.jsx)(s.p,{children:"Save 'ruleDefinition' into class 'ruleClass'. If a class 'ruleClass' exists it will be overwritten."}),"\n",(0,a.jsx)(s.h3,{id:"expandruleset",children:"ExpandRuleSet"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ExpandRuleSet(actions As %DynamicArray) As %Status\n"})}),"\n",(0,a.jsx)(s.p,{children:"Transform generated rule definition JSON to be more complete and internally consistent. Recursively iterate through the actions array of a ruleSet Rename each when.condition to match action.expression naming style and deserialize when.comment string into when.comments array. Performs inverse of ContractRuleSet."}),"\n",(0,a.jsx)(s.h3,{id:"contractruleset",children:"ContractRuleSet"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod ContractRuleSet(actions As %DynamicArray) As %Status\n"})}),"\n",(0,a.jsx)(s.p,{children:"Transform provided rule definition JSON to match generated rule definition structure. Recursively iterate through the actions array of a ruleSet. Remove each action.expression.valueObject and move each action.expression.value to action.value. Rename each when.expression.value to when.condition and when.expression.valueObject to when.conditionObject and deserialize when.comments array into delimeted when.comment string. Performs inverse of ExpandRuleSet."}),"\n",(0,a.jsx)(s.h3,{id:"isreadonly",children:"IsReadOnly"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsReadOnly(ruleClass As %String) As %Boolean\n"})}),"\n",(0,a.jsx)(s.p,{children:"Check if this 'ruleClass' is read only for this user Class will be considered read only if the database underlying the namespace this rule is in is read only"}),"\n",(0,a.jsx)(s.h3,{id:"getruleperms",children:"GetRulePerms"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetRulePerms() As %Binary\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Get permissions the current user has on rules. Permissions are returned in a bitstring with the following mapping:",(0,a.jsx)(s.br,{}),"\n1: %Ens_Rules Read",(0,a.jsx)(s.br,{}),"\n2: %Ens_Rules Write",(0,a.jsx)(s.br,{}),"\n3: %Ens_BusinessRules Read",(0,a.jsx)(s.br,{}),"\n4: %Ens_BusinessRules Write",(0,a.jsx)(s.br,{}),"\n5: %Ens_RoutingRules Read",(0,a.jsx)(s.br,{}),"\n6: %Ens_RoutingRules Write"]}),"\n",(0,a.jsx)(s.h3,{id:"haspermsbyruleclass",children:"HasPermsByRuleClass"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod HasPermsByRuleClass(ruleClass As %String, permStr As %String, perms As %Binary)\n"})}),"\n",(0,a.jsx)(s.p,{children:'Check if the current user has specified permissions on this rule class. Input \'permString\' defines what permissions to check: valid values are "R", "W", and "RW". Input \'perms\' defines the permissions the current user has on rules: expected format is a bitstring as returned by GetRulePerms.'}),"\n",(0,a.jsx)(s.h3,{id:"haspermsbyassistclass",children:"HasPermsByAssistClass"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod HasPermsByAssistClass(assistClass As %String, permStr As %String, perms As %Binary) As %Boolean\n"})}),"\n",(0,a.jsx)(s.p,{children:'Check if the current user has specified permissions on rules that use this assist class. Input \'permString\' defines what permissions to check: valid values are "R", "W", and "RW". Input \'perms\' defines the permissions the current user has on rules: expected format is a bitstring as returned by GetRulePerms.'}),"\n",(0,a.jsx)(s.h3,{id:"haspermsbyruletype",children:"HasPermsByRuleType"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod HasPermsByRuleType(ruleTypes As %String, permStr As %String, perms As %Binary) As %Boolean [ CodeMode = expression ]\n"})}),"\n",(0,a.jsx)(s.p,{children:'Check if the current user has specified permissions on all rules in \'ruleTypes\' input: valid values are "B" (Business Rules), "R" (Routing Rules), "A" (All Rules), and "*" (Any Rules). Input \'permString\' defines what permissions to check: valid values are "R", "W", and "RW". Input \'perms\' defines the permissions the current user has on rules: expected format is a bitstring as returned by GetRulePerms.'}),"\n",(0,a.jsx)(s.h3,{id:"issubclass",children:"IsSubClass"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsSubClass(class As %String, superClass As %String) As %Integer\n"})}),"\n",(0,a.jsx)(s.p,{children:"Check if the given 'class' is a subclass of 'superClass': if class is guaranteed to be compiled use %Extends instead."}),"\n",(0,a.jsx)(s.h3,{id:"haskey",children:"HasKey"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod HasKey(parent As %DynamicObject, key As %String) As %Integer\n"})}),"\n",(0,a.jsx)(s.p,{children:"Check if 'parent' has key 'key'"}),"\n",(0,a.jsx)(s.h3,{id:"callsourcecontrolcallback",children:"CallSourceControlCallback"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CallSourceControlCallback(className As %String, callback As %String = "", Output serverOutput As %DynamicArray, Output usesSourceControl As %Boolean, Output sourceControlInstance As %Studio.SourceControl.Base, enforceCanEdit As %Boolean = 0, wasNewCode As %Boolean = 0) As %Status [ Internal ]\n'})}),"\n",(0,a.jsx)(s.p,{children:"Invoke request Source Control callback as appropriate"}),"\n",(0,a.jsx)(s.h3,{id:"getinternalname",children:"GetInternalName"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetInternalName(className) As %String [ Internal ]\n"})}),"\n",(0,a.jsx)(s.p,{children:"Return the internal name of the rule."}),"\n",(0,a.jsx)(s.h3,{id:"addscinfotocontainer",children:"AddSCInfoToContainer"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod AddSCInfoToContainer(ByRef container As %DynamicObject, scProperty, msgArrays...) [ Internal ]\n"})}),"\n",(0,a.jsx)(s.h3,{id:"evaluaterule",children:"evaluateRule"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod evaluateRule(pContext As %RegisteredObject, pRuleName As %String, Output pRuleLogData As %String = "", pDebugFlags As %String = "crd", pSelectMode As %Integer = 2) As %Status\n'})}),"\n",(0,a.jsx)(s.p,{children:"Given a context object evaluate the rule and create result output as JSON"}),"\n",(0,a.jsx)(s.h3,{id:"servergetquerydata",children:"ServerGetQueryData"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ServerGetQueryData(pParam As %String = "", assistClassName As %String = "", pValue As %String = "") As %String [ Internal, ZenMethod ]\n'})}),"\n",(0,a.jsx)(s.p,{children:"Internal server side method to retrieve list of Schema categories or structures. This is only called if the context is EnsLib.HL7.Message and hence EnsLib.HL7.MsgRouter.RuleAssist will exist in this namespace."}),"\n",(0,a.jsx)(s.h3,{id:"serializemessageashtml",children:"serializeMessageAsHTML"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod serializeMessageAsHTML(pMessageObject As %RegisteredObject, Output pNeedsHTMLEscaping As %Boolean = 1, Output tXMLStream As %Stream.TmpCharacter) As %Status\n"})}),"\n",(0,a.jsx)(s.p,{children:"Given an object create an HTML serialization of the object."})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>i});var a=n(96540);const r={},l=a.createContext(r);function t(e){const s=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(l.Provider,{value:s},e.children)}}}]);