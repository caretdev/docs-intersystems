"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[75067],{77933:(e,s,n)=>{n.r(s),n.d(s,{contentTitle:()=>l,default:()=>o,frontMatter:()=>t,toc:()=>a});var i=n(74848),r=n(28453);const t={pagination_prev:null,pagination_next:null},l="%SYS.RMSession",a=[{value:"Properties",id:"properties",level:2},{value:"RequestIdentifier",id:"requestidentifier",level:3},{value:"ResponseIdentifier",id:"responseidentifier",level:3},{value:"ExpiresInSeconds",id:"expiresinseconds",level:3},{value:"InactivityTimeout",id:"inactivitytimeout",level:3},{value:"AppliesTo",id:"appliesto",level:3},{value:"RetryInterval",id:"retryinterval",level:3},{value:"MaxRetryCount",id:"maxretrycount",level:3},{value:"InOrder",id:"inorder",level:3},{value:"DeliveryAssurance",id:"deliveryassurance",level:3},{value:"SCTIdentifier",id:"sctidentifier",level:3},{value:"MessageNumber",id:"messagenumber",level:3},{value:"Bits",id:"bits",level:3},{value:"Terminated",id:"terminated",level:3},{value:"DiscardFollowingFirstGap",id:"discardfollowingfirstgap",level:3},{value:"SSLSecurity",id:"sslsecurity",level:3},{value:"Methods",id:"methods",level:2},{value:"Save",id:"save",level:3},{value:"Open",id:"open",level:3},{value:"Load",id:"load",level:3},{value:"Log",id:"log",level:3},{value:"Cleanup",id:"cleanup",level:3},{value:"Remove",id:"remove",level:3},{value:"RemoveAll",id:"removeall",level:3},{value:"GetRange",id:"getrange",level:3},{value:"BitToRange",id:"bittorange",level:3},{value:"SetRange",id:"setrange",level:3},{value:"MessageOK",id:"messageok",level:3},{value:"SetMessageState",id:"setmessagestate",level:3},{value:"GetMessageState",id:"getmessagestate",level:3},{value:"CheckGap",id:"checkgap",level:3},{value:"CheckSCT",id:"checksct",level:3}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"sysrmsession",children:"%SYS.RMSession"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Class %SYS.RMSession Extends %RegisteredObject [ System = 3 ]\n"})}),"\n",(0,i.jsx)(s.p,{children:'Utility class to save and load session information from WS-ReliableMessaging 1.2. A session consists of a request and response sequence. This class is used by %SOAP.RM classes to do the work that must be done by a class in the %SYS package. The persistent operations in this class are used only on the service side. This class is used as a registered object for both the client and the service. This class is used internally by InterSystems IRIS. You should not make direct use of it within your applications. There is no guarantee made about either the behavior or future operation of this class."'}),"\n",(0,i.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsx)(s.h3,{id:"requestidentifier",children:"RequestIdentifier"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property RequestIdentifier As %xsd.anyURI [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Identifier for the request sequence"}),"\n",(0,i.jsx)(s.h3,{id:"responseidentifier",children:"ResponseIdentifier"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property ResponseIdentifier As %xsd.anyURI [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:'Identifier for the response sequence. ResponseIndentifier="" for a one way session.'}),"\n",(0,i.jsx)(s.h3,{id:"expiresinseconds",children:"ExpiresInSeconds"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property ExpiresInSeconds As %Integer [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"UTC expiration time in seconds"}),"\n",(0,i.jsx)(s.h3,{id:"inactivitytimeout",children:"InactivityTimeout"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property InactivityTimeout As %Integer [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Inactivity timeout interval in seconds Defaults to 600 if not specified."}),"\n",(0,i.jsx)(s.h3,{id:"appliesto",children:"AppliesTo"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property AppliesTo As %xsd.anyURI [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"The endpoint of the web service to which this token applies"}),"\n",(0,i.jsx)(s.h3,{id:"retryinterval",children:"RetryInterval"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property RetryInterval As %Float [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"The time in seconds to wait before retry on client. Default is 0."}),"\n",(0,i.jsx)(s.h3,{id:"maxretrycount",children:"MaxRetryCount"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property MaxRetryCount As %Integer [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"The maxiumum number of retries on client. Default is 4."}),"\n",(0,i.jsx)(s.h3,{id:"inorder",children:"InOrder"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property InOrder As %Boolean [ InitialExpression = 1, Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"If InOrder true, deliver in order."}),"\n",(0,i.jsx)(s.h3,{id:"deliveryassurance",children:"DeliveryAssurance"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property DeliveryAssurance As %String [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:'Delivery Assurance: "ExactlyOnce", "AtLeastOnce", "AtMostOnce" or "".'}),"\n",(0,i.jsx)(s.h3,{id:"sctidentifier",children:"SCTIdentifier"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property SCTIdentifier As %String [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Identifier of SecurityContextToken to be used to secure sequence"}),"\n",(0,i.jsx)(s.h3,{id:"messagenumber",children:"MessageNumber"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property MessageNumber As %Integer [ InitialExpression = 0, Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Last message number sent or received"}),"\n",(0,i.jsx)(s.h3,{id:"bits",children:"Bits"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property Bits As %String [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Received messages bit string."}),"\n",(0,i.jsx)(s.h3,{id:"terminated",children:"Terminated"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property Terminated As %Boolean [ InitialExpression = 0, Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Session Terminated boolean"}),"\n",(0,i.jsx)(s.h3,{id:"discardfollowingfirstgap",children:"DiscardFollowingFirstGap"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property DiscardFollowingFirstGap As %Boolean [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"Process no more messages after first gap"}),"\n",(0,i.jsx)(s.h3,{id:"sslsecurity",children:"SSLSecurity"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Property SSLSecurity As %Boolean [ Internal ];\n"})}),"\n",(0,i.jsx)(s.p,{children:"If true the entire Sequence must be protected by the same SSL session. This property is client only."}),"\n",(0,i.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(s.h3,{id:"save",children:"Save"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method Save() As %Status [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:'Save this RMSession in a system wide global. The global format is: ^SYS("SOAPRMSession",RequestIdentifier)=$lb(type,ResponseIdentifier,ExpiresInSeconds,nextExpiresInSeconds,InactivityTimeout,AppliesTo,InOrder,DeliveryAssurance,SCTIdentifier,MessageNumber,Bits,Terminated,DiscardFollowingFirstGap) The index for cleanup is ^SYS("SOAPRMSession",0,NextExpiresInSeconds,RequestIdentifier)="" where NextExpiresInSeconds is the next expiration which is the smaller of ExpireInSeconds and InactivityTimeinSeconds and type is always = 1 for RMSession.'}),"\n",(0,i.jsx)(s.h3,{id:"open",children:"Open"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Open(identifier As %xsd.anyURI) As %SYS.RMSession [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Retrieve the RMSession with this identifier from system wide global. See Save method description for details."}),"\n",(0,i.jsx)(s.h3,{id:"load",children:"Load"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method Load() As %Boolean [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Retrieve the RMSession properties for token with this identifier from system wide global. See Save method description for details."}),"\n",(0,i.jsx)(s.h3,{id:"log",children:"Log"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Log(terminal As %Boolean = 1, test As %Boolean = 0) [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Log list of RMSessions"}),"\n",(0,i.jsx)(s.h3,{id:"cleanup",children:"Cleanup"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method Cleanup() [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Remove expired RMSessions"}),"\n",(0,i.jsx)(s.h3,{id:"remove",children:"Remove"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method Remove() [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Remove this RMSession from session list"}),"\n",(0,i.jsx)(s.h3,{id:"removeall",children:"RemoveAll"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod RemoveAll() [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Remove all RMSessions"}),"\n",(0,i.jsx)(s.h3,{id:"getrange",children:"GetRange"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetRange(ranges As %ListOfObjects) [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Get acknowledgement ranges for this RM session"}),"\n",(0,i.jsx)(s.h3,{id:"bittorange",children:"BitToRange"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod BitToRange(bits As %String, ranges As %ListOfObjects) [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Convert bit string to acknowledgement ranges for this RM session"}),"\n",(0,i.jsx)(s.h3,{id:"setrange",children:"SetRange"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method SetRange(ranges As %ListOfObjects) [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Set bit string from acknowledgement ranges for this RM session"}),"\n",(0,i.jsx)(s.h3,{id:"messageok",children:"MessageOK"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method MessageOK() [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Update range to indicate last message sent successfully"}),"\n",(0,i.jsx)(s.h3,{id:"setmessagestate",children:"SetMessageState"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method SetMessageState(messageNumber As %Integer, acknowledged As %Boolean) [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Set message acknowledged state"}),"\n",(0,i.jsx)(s.h3,{id:"getmessagestate",children:"GetMessageState"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method GetMessageState(messageNumber As %Integer) As %Boolean [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Get message acknowledged state"}),"\n",(0,i.jsx)(s.h3,{id:"checkgap",children:"CheckGap"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method CheckGap() As %Boolean [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Check for gap in received messages"}),"\n",(0,i.jsx)(s.h3,{id:"checksct",children:"CheckSCT"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-objectscript-class",children:"Method CheckSCT(soapClass As %SOAP.WebBase) As %Boolean [ Internal ]\n"})}),"\n",(0,i.jsx)(s.p,{children:"Check correct SCT (or no SCT) for this session"})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var i=n(96540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);