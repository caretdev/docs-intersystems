"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[74646],{47111:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>i,default:()=>c,frontMatter:()=>a,toc:()=>o});var r=t(74848),n=t(28453);const a={pagination_prev:null,pagination_next:null},i="%SYS.Ensemble",o=[{value:"Methods",id:"methods",level:2},{value:"StartProduction",id:"startproduction",level:3},{value:"UpdateProduction",id:"updateproduction",level:3},{value:"StopProduction",id:"stopproduction",level:3},{value:"GetStatusAll",id:"getstatusall",level:3},{value:"GetEnsMetrics",id:"getensmetrics",level:3},{value:"CreateDocumentation",id:"createdocumentation",level:3},{value:"GlobalInMirroredDB",id:"globalinmirroreddb",level:3},{value:"BasicChecks",id:"basicchecks",level:3},{value:"EnsembleUsername",id:"ensembleusername",level:3},{value:"ListAlertingUsers",id:"listalertingusers",level:3},{value:"findAlertMembers",id:"findalertmembers",level:3},{value:"findUserMembers",id:"findusermembers",level:3},{value:"findMembers",id:"findmembers",level:3},{value:"filterUsersOnGlobalAccess",id:"filterusersonglobalaccess",level:3},{value:"SecondaryGet",id:"secondaryget",level:3},{value:"SecondarySet",id:"secondaryset",level:3},{value:"SecondaryDelete",id:"secondarydelete",level:3},{value:"BounceExternalLanguageServer",id:"bounceexternallanguageserver",level:3},{value:"doELSBounce",id:"doelsbounce",level:3},{value:"GetExternalLanguageServers",id:"getexternallanguageservers",level:3},{value:"findExternalLanguageServers",id:"findexternallanguageservers",level:3},{value:"GetMapParent",id:"getmapparent",level:3},{value:"findMapParent",id:"findmapparent",level:3},{value:"GetFirstDeviceIfTCP",id:"getfirstdeviceiftcp",level:3},{value:"SetSAMSensorsForInteropInterfaces",id:"setsamsensorsforinteropinterfaces",level:3},{value:"SetSAMSensorsForInteropCurrentDatabaseImpact",id:"setsamsensorsforinteropcurrentdatabaseimpact",level:3},{value:"SetSAMSensorsForInteropHistoricalDatabaseImpact",id:"setsamsensorsforinterophistoricaldatabaseimpact",level:3},{value:"SetSAMSensorsForInteropHistoricalInterfaces",id:"setsamsensorsforinterophistoricalinterfaces",level:3},{value:"SetSAMSensorsForInteropCurrentVolume",id:"setsamsensorsforinteropcurrentvolume",level:3},{value:"SetSAMSensorsForInteropHistoricalVolume",id:"setsamsensorsforinterophistoricalvolume",level:3},{value:"SetSAMSensorsForInteropCurrentRange",id:"setsamsensorsforinteropcurrentrange",level:3},{value:"SetSAMSensorsForInteropHistoricalRange",id:"setsamsensorsforinterophistoricalrange",level:3},{value:"CreateXMLSchemaGlobal",id:"createxmlschemaglobal",level:3}];function l(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"sysensemble",children:"%SYS.Ensemble"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Class %SYS.Ensemble [ Abstract, Final, System = 4 ]\n"})}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"startproduction",children:"StartProduction"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StartProduction(pProductionName As %String) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Secure wrapper for the StartProduction API in Ens.Director."}),"\n",(0,r.jsx)(s.h3,{id:"updateproduction",children:"UpdateProduction"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod UpdateProduction(pTimeout As %Numeric = 10, pForce As %Boolean = 0, pCalledByScheduleHandler As %Boolean = 0) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Secure wrapper for the UpdateProduction API in Ens.Director."}),"\n",(0,r.jsx)(s.h3,{id:"stopproduction",children:"StopProduction"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod StopProduction(pTimeout As %Numeric = 10, pForce As %Boolean = 0) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Secure wrapper for the StopProduction API in Ens.Director."}),"\n",(0,r.jsx)(s.h3,{id:"getstatusall",children:"GetStatusAll"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetStatusAll(Output nsStatus) As %Status [ Internal ]\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Method to get the status of productions in all known production-enabled namespaces on this system.",(0,r.jsx)(s.br,{}),"\nNote that data is NOT retrieved from remote databases.",(0,r.jsx)(s.br,{}),"\nThis list will not include namespaces if the default global database for the namespace is not mounted.",(0,r.jsx)(s.br,{}),"\nThe output status array is subscripted by namespace and with a value for each namespace that is a $List with 5 components:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Production Name of last used Production if any"}),"\n",(0,r.jsx)(s.li,{children:"Localized Status text"}),"\n",(0,r.jsx)(s.li,{children:"1 if the Production is Running, Stopped or Suspended, 0 otherwise, indicating 'not known to be OK'"}),"\n",(0,r.jsx)(s.li,{children:"'HS' if the namespace is HealthShare enabled, otherwise empty"}),"\n",(0,r.jsx)(s.li,{children:"The numeric state value representing the production's status"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"getensmetrics",children:"GetEnsMetrics"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetEnsMetrics(pID As %String, pCount As %Integer, Output pValues, Output pStatus, Output pMsg, pInterval As %Numeric = 10) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Wrapper around the SYS.EnsMetrics::GetMainMetrics() API to ensure that all users with USE permissions on %Ens_Dashboard can get this information even if they aren't permitted to directly run code in the system database."}),"\n",(0,r.jsx)(s.h3,{id:"createdocumentation",children:"CreateDocumentation"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod CreateDocumentation(pProduction As %String = "", pIntro As %Boolean = 1, pFormat As %String, Output LogFileName As %String, Output URL As %String, Output BookName As %String, PDFFileName As %String, PDFRenderer As %String, ByRef Params As %String, pAllSettings As %Boolean = 0) As %Status\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Wrapper around the Ens.Util.Documentation::CreateDoc() API to ensure that users have sufficient privileges to add the resulting material to the documentation.",(0,r.jsx)(s.br,{}),"\nThe parameter PDFRenderer is deprecated and is ignored.",(0,r.jsx)(s.br,{}),"\nThe parameter pAllSettings defaults to 0 but if set to 1 all settings including default values for a host item will be included."]}),"\n",(0,r.jsx)(s.h3,{id:"globalinmirroreddb",children:"GlobalInMirroredDB"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GlobalInMirroredDB(pGlobal As %String = "", Output pMirrored As %Boolean) As %Status\n'})}),"\n",(0,r.jsx)(s.h3,{id:"basicchecks",children:"BasicChecks"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod BasicChecks(pResources As %String = "", pCheckLicense As %Boolean = 1, pCheckNamespace As %Boolean = 1) As %Status [ Internal, Private ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Common method to ensure that the public methods of this class are correctly invoked."}),"\n",(0,r.jsx)(s.h3,{id:"ensembleusername",children:"EnsembleUsername"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod EnsembleUsername() As %String\n"})}),"\n",(0,r.jsx)(s.p,{children:"Correctly determine the expanded Interoperability manager username (used internallly and not for login) if the system is using multiple domains. If multiple domains are in use, then the Interoperability manager username should be present in the default domain."}),"\n",(0,r.jsx)(s.h3,{id:"listalertingusers",children:"ListAlertingUsers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod ListAlertingUsers(Output pUsers As %String, pLimitToNamespace As %String = "") As %Status\n'})}),"\n",(0,r.jsx)(s.p,{children:"This method is used by the portal page EnsPortal.ManagedAlertViewer"}),"\n",(0,r.jsxs)(s.p,{children:["It returns a list of users who are members of the %EnsRole_AlertManager, %EnsRole_AlertOperator or %EnsRole_Alert roles.",(0,r.jsx)(s.br,{}),"\nIf the role %EnsRole_Administrator has USE privilege on the %Ens_AlertAdministration resource then users of the role %EnsRole_Administrator will also be listed.",(0,r.jsx)(s.br,{}),"\nUsers with %All role will not be listed unless they are explicitly members of one of the roles previously mentioned.",(0,r.jsx)(s.br,{}),"\nThe default is to list all the users in the instance. Pass the namespace in the second parameter to limit the list to the user with write access to the Ens.Alerting.ManagedAlert data in a specific namespace.",(0,r.jsx)(s.br,{}),"\nA user must be permitted to edit alerts to call this API."]}),"\n",(0,r.jsx)(s.h3,{id:"findalertmembers",children:"findAlertMembers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod findAlertMembers(Output pUsers, pLimitToNamespace As %String = "") As %Status [ Internal, Private ]\n'})}),"\n",(0,r.jsx)(s.h3,{id:"findusermembers",children:"findUserMembers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod findUserMembers(ByRef pRoles, Output pUsers) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Internal private method to find all users in ROLE hierarchy for array of roles given by pRoles"}),"\n",(0,r.jsx)(s.h3,{id:"findmembers",children:"findMembers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod findMembers(pRole As %String, ByRef pUsers, ByRef pRolesAleadyExamined, ByRef pNewRolesToExamine) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Find User and Role members for role pRole. Called by findUserMembers"}),"\n",(0,r.jsx)(s.h3,{id:"filterusersonglobalaccess",children:"filterUsersOnGlobalAccess"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod filterUsersOnGlobalAccess(ByRef pUsers As %String, pNamespace As %String = {$NAMESPACE}, pGlobal As %String = "", pSubscript As %String = "", pAccessMode As %String = "READ") As %Boolean [ Internal, Private ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal helper method to identify if user has access to the global Error handling to be trapped by caller."}),"\n",(0,r.jsx)(s.h3,{id:"secondaryget",children:"SecondaryGet"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SecondaryGet(pKey As %String = "", pProperty As %String = "", ByRef pSC As %Status) As %String [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Wrapper for getting secondary data. User needs Read access to the DB for 'Password'. Only support Password."}),"\n",(0,r.jsx)(s.h3,{id:"secondaryset",children:"SecondarySet"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SecondarySet(pValue As %String = "", pKey As %String = "", pProperty As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Secure wrapper for writing secondary data. Only support Password."}),"\n",(0,r.jsx)(s.h3,{id:"secondarydelete",children:"SecondaryDelete"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SecondaryDelete(pKey As %String = "", pProperty As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Secure wrapper for deleting secondary data. Only support Password."}),"\n",(0,r.jsx)(s.h3,{id:"bounceexternallanguageserver",children:"BounceExternalLanguageServer"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod BounceExternalLanguageServer(pServer As %String = "") As %Status\n'})}),"\n",(0,r.jsx)(s.p,{children:"Method used by PEX Components Registration to bounce the server if necessary for ensuring the correct file is used User might not have %Admin_Manage and %DB_IRISSYS privileges Instead require WRITE priv on the %Ens_Code resource in order to gain elevated privileges."}),"\n",(0,r.jsx)(s.h3,{id:"doelsbounce",children:"doELSBounce"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod doELSBounce(pServer As %String = "") As %Status [ Internal, Private ]\n'})}),"\n",(0,r.jsx)(s.h3,{id:"getexternallanguageservers",children:"GetExternalLanguageServers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetExternalLanguageServers(ByRef pServers) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Method used by Context Search to get list of External Language Servers User might not have SQL privs on the Config.Gateways::ListShort query Instead require WRITE priv on the %Ens_ProductionConfig resource in order to gain elevated privileges."}),"\n",(0,r.jsx)(s.h3,{id:"findexternallanguageservers",children:"findExternalLanguageServers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod findExternalLanguageServers(ByRef pServers) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getmapparent",children:"GetMapParent"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetMapParent(pInputClass As %String, pIsBatch As %Boolean = 0, Output pSC As %Status = {$$$OK}) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Method used by DTL Test page that requires de-serialization of the test input data User might not have SQL privs on the %Dictionary.ParameterDefinition table If the User does not have SQL Select privs on %Dictionary.ParameterDefinition table then user requires USE priv on the %Ens_DTLTest resource in order to gain elevated privileges."}),"\n",(0,r.jsx)(s.h3,{id:"findmapparent",children:"findMapParent"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod findMapParent(pInputClass As %String, pIsBatch As %Boolean = 0, pEscalate As %Boolean = 0, Output pSC As %Status = {$$$OK}) As %Status [ Internal, Private ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"getfirstdeviceiftcp",children:"GetFirstDeviceIfTCP"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetFirstDeviceIfTCP(pSC As %Status = {$$$OK}) As %String [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Method used by Ens.Director::CreateBusinessService to aid checking if process originated with a TCP connection so that INTERRUPTs and DISCONNECT detects can be disabled. Checks the current process devices and returns the first one if it is a TCP device. Otherwise it returns empty string."}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinteropinterfaces",children:"SetSAMSensorsForInteropInterfaces"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSAMSensorsForInteropInterfaces(pSAMSensors As SYS.Monitor.SAM.Sensors, pStart As %TimeStamp = "", pEnd As %TimeStamp = "", pNamespace As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Interface metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinteropcurrentdatabaseimpact",children:"SetSAMSensorsForInteropCurrentDatabaseImpact"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSAMSensorsForInteropCurrentDatabaseImpact(pSAMSensors As SYS.Monitor.SAM.Sensors, pStart As %TimeStamp = "", pEnd As %TimeStamp = "", pDatabase As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Database Impact metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinterophistoricaldatabaseimpact",children:"SetSAMSensorsForInteropHistoricalDatabaseImpact"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSAMSensorsForInteropHistoricalDatabaseImpact(pSAMSensors As SYS.Monitor.SAM.Sensors, pStartMonth As %String = "", pEndMonth As %String = "", pDatabase As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Database Impact metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinterophistoricalinterfaces",children:"SetSAMSensorsForInteropHistoricalInterfaces"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSAMSensorsForInteropHistoricalInterfaces(pSAMSensors As SYS.Monitor.SAM.Sensors, pStartMonth As %String = "", pEndMonth As %String = "", pNamespace As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Interfaces metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinteropcurrentvolume",children:"SetSAMSensorsForInteropCurrentVolume"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSAMSensorsForInteropCurrentVolume(pSAMSensors As SYS.Monitor.SAM.Sensors, pStart As %TimeStamp = "", pEnd As %TimeStamp = "", pNamespace As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Volume metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinterophistoricalvolume",children:"SetSAMSensorsForInteropHistoricalVolume"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod SetSAMSensorsForInteropHistoricalVolume(pSAMSensors As SYS.Monitor.SAM.Sensors, pStartMonth As %String = "", pEndMonth As %String = "", pNamespace As %String = "") As %Status [ Internal ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Volume metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinteropcurrentrange",children:"SetSAMSensorsForInteropCurrentRange"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetSAMSensorsForInteropCurrentRange(pSAMSensors As SYS.Monitor.SAM.Sensors) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Range metrics"}),"\n",(0,r.jsx)(s.h3,{id:"setsamsensorsforinterophistoricalrange",children:"SetSAMSensorsForInteropHistoricalRange"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetSAMSensorsForInteropHistoricalRange(pSAMSensors As SYS.Monitor.SAM.Sensors) As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to set SAM Sensors for Interoperability Range metrics"}),"\n",(0,r.jsx)(s.h3,{id:"createxmlschemaglobal",children:"CreateXMLSchemaGlobal"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod CreateXMLSchemaGlobal() As %Status [ Internal ]\n"})}),"\n",(0,r.jsx)(s.p,{children:"Internal method to create XML Schema global for user with appropriate permission"})]})}function c(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>o});var r=t(96540);const n={},a=r.createContext(n);function i(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);