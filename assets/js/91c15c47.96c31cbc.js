"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[71281],{10446:(e,n,s)=>{s.r(n),s.d(n,{contentTitle:()=>i,default:()=>h,frontMatter:()=>c,toc:()=>l});var t=s(74848),r=s(28453);const c={pagination_prev:null,pagination_next:null},i="%DeepSee.TimeSync",l=[{value:"Methods",id:"methods",level:2},{value:"%Synchronize",id:"synchronize",level:3},{value:"%SynchronizeAll",id:"synchronizeall",level:3},{value:"%OnProcessStart",id:"onprocessstart",level:3},{value:"%OnProcessEnd",id:"onprocessend",level:3},{value:"%OnProcessObject",id:"onprocessobject",level:3},{value:"%ResetTime",id:"resettime",level:3}];function d(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deepseetimesync",children:"%DeepSee.TimeSync"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:"Class %DeepSee.TimeSync [ Abstract, System = 3 ]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Subclass this class to implement a class that processes all objects of the specified class that have been modified since the last time the %Synchronize or the %SynchronizeAll was run.",(0,t.jsx)(n.br,{}),"\nAll objects in the extent of the specified class can be processed by invoking the %SynchronizeAll."]}),"\n",(0,t.jsx)(n.p,{children:"The user implements %OnProcessObject. This method is responsible for concurrency and for processing the object. For example, the class might be used to synchronize a objects extent with some external archive. The user can also implement %OnProcessStart that will be called before processing any objects and %OnProcessEnd method that will be called after processing the objects is finished."}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"synchronize",children:"%Synchronize"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %Synchronize(pClassName As %String(MAXLEN=250) = "", pVerbose As %Boolean = 1, Output pObjectsUpdated As %Integer) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"For the specified class invoke %OnProcessObject for all objects that have been updated since the last time this class was processed by either %Synchronize or %SynchronizeAll. %OnProcessStart is called before processing any objects. %OnProcessEnd is called after processing all objects is finished."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameters"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Name"}),(0,t.jsx)(n.td,{children:"Direction"}),(0,t.jsx)(n.td,{children:"Description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pClassName"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"The name of the class to synchronize. This class must be persistent and declare DSTIME as AUTO or MANUAL."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pVerbose"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"If true (a non-zero integer) then status messages will be written to the current device."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pObjectsUpdated"}),(0,t.jsx)(n.td,{children:"Output"}),(0,t.jsx)(n.td,{children:"The number of objects processed by this operation."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Return"}),(0,t.jsx)(n.td,{children:"%Status value indicating success or failure."}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"synchronizeall",children:"%SynchronizeAll"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %SynchronizeAll(pClassName As %String(MAXLEN=250) = "", pVerbose As %Boolean = 1, Output pObjectsUpdated As %Integer) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"For the specified class invoke %OnProcessObject for all objects in the extent of the specified class. %OnProcessStart is called before processing any objects. %OnProcessEnd is called after processing all objects is finished."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameters"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Name"}),(0,t.jsx)(n.td,{children:"Direction"}),(0,t.jsx)(n.td,{children:"Description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pClassName"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"The name of the class to synchronize. This class must be persistent and declare DSTIME as AUTO or MANUAL."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pVerbose"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"If true (a non-zero integer) then status messages will be written to the current device."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pObjectsUpdated"}),(0,t.jsx)(n.td,{children:"Output"}),(0,t.jsx)(n.td,{children:"The number of objects processed by this operation."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Return"}),(0,t.jsx)(n.td,{children:"%Status value indicating success or failure."}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"onprocessstart",children:"%OnProcessStart"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %OnProcessStart(pClassName As %String(MAXLEN=""), pAll As %Integer = 0) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"This method is called by the %Synchronize and %SynchronizeAll methods before processing any objects."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameters"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Name"}),(0,t.jsx)(n.td,{children:"Direction"}),(0,t.jsx)(n.td,{children:"Description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pClassName"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"The name of the class that is being processed."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pAll"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"True (1) if called by %SynchronizeAll."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Return"}),(0,t.jsx)(n.td,{children:"%Status value indicating success or failure. If failure is reported then no further processing by the calling method will be performed."}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"onprocessend",children:"%OnProcessEnd"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %OnProcessEnd(pClassName As %String(MAXLEN=""), pAll As %Integer = 0) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"This method is called by the %Synchronize and %SynchronizeAll methods after processing is completed."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameters"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Name"}),(0,t.jsx)(n.td,{children:"Direction"}),(0,t.jsx)(n.td,{children:"Description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pClassName"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"The name of the class that is being processed."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pAll"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"True (1) if called by %SynchronizeAll."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Return"}),(0,t.jsx)(n.td,{children:"%Status value indicating success or failure. If failure is reported then no further processing by the calling method will be performed."}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"onprocessobject",children:"%OnProcessObject"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %OnProcessObject(pClassName As %String(MAXLEN=""), pID As %String(MAXLEN="") = "", pFileAction As %Integer = 0, pTimeStamp As %Integer) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"This method is called by the %Synchronize and %SynchronizeAll methods for each object to be processed. The user is expected to define this method to implement the desired processing."}),"\n",(0,t.jsx)(n.p,{children:"Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Name"}),"\n",(0,t.jsx)(n.p,{children:"Direction"}),"\n",(0,t.jsx)(n.p,{children:"Description"}),"\n",(0,t.jsx)(n.p,{children:"pClassName"}),"\n",(0,t.jsx)(n.p,{children:"Input"}),"\n",(0,t.jsx)(n.p,{children:"The name of the class to synchronize. This class must be persistent and declare DSTIME as AUTO or MANUAL."}),"\n",(0,t.jsx)(n.p,{children:"pID"}),"\n",(0,t.jsx)(n.p,{children:"Input"}),"\n",(0,t.jsx)(n.p,{children:"The ID of the object to process."}),"\n",(0,t.jsx)(n.p,{children:"pFileAction"}),"\n",(0,t.jsx)(n.p,{children:"Input"}),"\n",(0,t.jsxs)(n.p,{children:["The type of filing event. When synchronizing all objects from a class this value will be 1 (Insert).",(0,t.jsx)(n.br,{}),"\nThe pFileAction values are:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Code"}),(0,t.jsx)(n.th,{children:"Operation"}),(0,t.jsx)(n.th,{children:"0"}),(0,t.jsx)(n.th,{children:"Update"}),(0,t.jsx)(n.th,{children:"1"}),(0,t.jsx)(n.th,{children:"Insert"}),(0,t.jsx)(n.th,{children:"2"}),(0,t.jsx)(n.th,{children:"Delete"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pTimeStamp"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"The timestamp (segment ID) in which this object (identified by pID) was filed. When synchronizing all objects from a class this value will be 0."}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Return"}),(0,t.jsx)(n.td,{children:"%Status value indicating success or failure."}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"resettime",children:"%ResetTime"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-objectscript-class",children:'ClassMethod %ResetTime(pClassName As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,t.jsx)(n.p,{children:"This method can be called by the user at any time to reset the DSTIME stamp of the last synchronization for a given class."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameters"}),(0,t.jsx)(n.th,{}),(0,t.jsx)(n.th,{})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Name"}),(0,t.jsx)(n.td,{children:"Direction"}),(0,t.jsx)(n.td,{children:"Description"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"pClassName"}),(0,t.jsx)(n.td,{children:"Input"}),(0,t.jsx)(n.td,{children:"The name of the class whose timestamp data is to be reset."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Return"}),(0,t.jsx)(n.td,{children:"%Status value indicating success or failure."}),(0,t.jsx)(n.td,{})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var t=s(96540);const r={},c=t.createContext(r);function i(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);