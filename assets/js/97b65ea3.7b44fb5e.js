"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[87393],{25081:(e,s,r)=>{r.r(s),r.d(s,{contentTitle:()=>i,default:()=>o,frontMatter:()=>a,toc:()=>l});var n=r(74848),t=r(28453);const a={pagination_prev:null,pagination_next:null},i="%SYS.Task.IntegrityCheck",l=[{value:"Parameters",id:"parameters",level:2},{value:"TaskName",id:"taskname",level:3},{value:"Properties",id:"properties",level:2},{value:"Directory",id:"directory",level:3},{value:"Filename",id:"filename",level:3},{value:"KeepDays",id:"keepdays",level:3},{value:"Methods",id:"methods",level:2},{value:"DirectoryIsValid",id:"directoryisvalid",level:3},{value:"OnTask",id:"ontask",level:3}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"systaskintegritycheck",children:"%SYS.Task.IntegrityCheck"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Class %SYS.Task.IntegrityCheck Extends %SYS.Task.Definition [ System = 4 ]\n"})}),"\n",(0,n.jsx)(s.p,{children:"Perform an Integrity Check for all databases. The task will create an output log file, parse the log for errors and report failures in messages.log (which will send email if it's configured)."}),"\n",(0,n.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(s.h3,{id:"taskname",children:"TaskName"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter TaskName = "IntegrityCheck";\n'})}),"\n",(0,n.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(s.h3,{id:"directory",children:"Directory"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Directory As %String [ InitialExpression = {$zu(12)} ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"The directory where the Integrity Check logs will be kept. Note that the logs here can be automatically purged using the KeepDays property"}),"\n",(0,n.jsx)(s.h3,{id:"filename",children:"Filename"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property Filename As %String;\n"})}),"\n",(0,n.jsx)(s.p,{children:"The file name to be used for the log. Leaving this blank will cause the file name to be automatically generated in the the format INTEGRIT-YYYYMMDD_sec.LOG. Files which are generated in this format can be automatically purged using the KeepDays property."}),"\n",(0,n.jsx)(s.h3,{id:"keepdays",children:"KeepDays"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Property KeepDays As %Integer [ InitialExpression = 0 ];\n"})}),"\n",(0,n.jsx)(s.p,{children:"Number of days to keep files before puring - 0 means never purge"}),"\n",(0,n.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(s.h3,{id:"directoryisvalid",children:"DirectoryIsValid"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DirectoryIsValid(Directory As %String) As %Status [ Internal ]\n"})}),"\n",(0,n.jsx)(s.h3,{id:"ontask",children:"OnTask"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-objectscript-class",children:"Method OnTask() As %Status\n"})}),"\n",(0,n.jsx)(s.p,{children:"Execute $$CheckList^Integrity() for all databases. Create an output log file, check for errors and report failure in messages.log. Purge old INTEGRIT-*.LOG files if KeepDays is set."})]})}function o(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>l});var n=r(96540);const t={},a=n.createContext(t);function i(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);