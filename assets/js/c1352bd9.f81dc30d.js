"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[39590],{22884:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>d,default:()=>c,frontMatter:()=>l,toc:()=>i});var s=n(74848),a=n(28453);const l={pagination_prev:null,pagination_next:null},d="%DeepSee.PMML.Definition",i=[{value:"Parameters",id:"parameters",level:2},{value:"DOMAIN",id:"domain",level:3},{value:"DISABLETRACING",id:"disabletracing",level:3},{value:"XDatas",id:"xdatas",level:2},{value:"PMML",id:"pmml",level:3},{value:"Contents",id:"contents",level:3},{value:"Methods",id:"methods",level:2},{value:"%GetDefinition",id:"getdefinition",level:3},{value:"%GetModelInstance",id:"getmodelinstance",level:3},{value:"%GetModelClassName",id:"getmodelclassname",level:3},{value:"%GetDataClassName",id:"getdataclassname",level:3},{value:"%CreateDataset",id:"createdataset",level:3},{value:"%GetModels",id:"getmodels",level:3},{value:"OnGetData",id:"ongetdata",level:3},{value:"OnSubmitData",id:"onsubmitdata",level:3},{value:"%OnAfterCreatePage",id:"onaftercreatepage",level:3},{value:"%AddProperties",id:"addproperties",level:3},{value:"GetInputFieldsForModel",id:"getinputfieldsformodel",level:3},{value:"update",id:"update",level:3},{value:"reset",id:"reset",level:3},{value:"disableUnusedFields",id:"disableunusedfields",level:3},{value:"onloadHandler",id:"onloadhandler",level:3},{value:"onChangeModel",id:"onchangemodel",level:3},{value:"GetTestOutput",id:"gettestoutput",level:3},{value:"DrawTrace",id:"drawtrace",level:3},{value:"DrawOutput",id:"drawoutput",level:3}];function r(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"deepseepmmldefinition",children:"%DeepSee.PMML.Definition"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Class %DeepSee.PMML.Definition Extends %ZEN.Component.page [ Abstract, CompileAfter = %DeepSee.PMML.Definition.PMML, System = 4 ]\n"})}),"\n",(0,s.jsxs)(t.p,{children:["This class represents a predictive model described in PMML (Predictive Modelling Markup Language), an XML standard managed by the Data Mining Group (",(0,s.jsx)(t.a,{href:"http://www.dmg.org/",children:"www.dmg.org"}),") for describing Predictive Analytics models."]}),"\n",(0,s.jsx)(t.p,{children:"Subclasses of this class should provide this XML in an XData block named PMML, so it will be validated and interpreted upon compiling the class. Upon compilation, additional helper classes will be automatically generated:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"A single %DeepSee.PMML.Data class representing the data fields required by this model."}),"\n",(0,s.jsx)(t.li,{children:"A class for each model described in this PMML fragment (can be more than one), with dedicated code to execute this model."}),"\n",(0,s.jsx)(t.li,{children:"%DeepSee.PMML.ModelInput and %DeepSee.PMML.ModelOutput classes for each model, which are instantiated and managed automatically by the model class."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"In addition to the generated classes, subclasses of this class are also available as Zen pages so the models they define can be run from a User Interface."}),"\n",(0,s.jsx)(t.p,{children:"Use this class' %GetModelClassName to retrieve the model class for a named model in the PMML definition and then invoke its %Execute* methods as desired. See also the %DeepSee.PMML.Model.AbstractModel class reference for more information about these execution options, or %DeepSee.PMML.Utils for executing the model against a batch of records at once."}),"\n",(0,s.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(t.h3,{id:"domain",children:"DOMAIN"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'Parameter DOMAIN = "PMML";\n'})}),"\n",(0,s.jsx)(t.h3,{id:"disabletracing",children:"DISABLETRACING"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Parameter DISABLETRACING [ Internal ] = 0;\n"})}),"\n",(0,s.jsx)(t.p,{children:"Set to 1 to disable the use of tracing model output altogether"}),"\n",(0,s.jsx)(t.h2,{id:"xdatas",children:"XDatas"}),"\n",(0,s.jsx)(t.h3,{id:"pmml",children:"PMML"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'XData PMML [ XMLNamespace = "http://www.intersystems.com/deepsee/pmml" ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"The XData block containing the actual PMML specification."}),"\n",(0,s.jsx)(t.h3,{id:"contents",children:"Contents"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'XData Contents [ XMLNamespace = "http://www.intersystems.com/zen" ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"XData block defining the contents of the GUI presenting a manual interfacte for running the models described in PMML"}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"getdefinition",children:"%GetDefinition"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetDefinition(Output pPMML As %DeepSee.PMML.Definition.PMML) As %Status [ CodeMode = objectgenerator, Internal ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"getmodelinstance",children:"%GetModelInstance"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetModelInstance(ByRef pModelName As %String = "", ByRef pModel As %DeepSee.PMML.Model.AbstractModel) As %Status\n'})}),"\n",(0,s.jsx)(t.p,{children:"This method returns a %DeepSee.PMML.Model.AbstractModel instance for the model in this definition corresponding to pModelName."}),"\n",(0,s.jsx)(t.h3,{id:"getmodelclassname",children:"%GetModelClassName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %GetModelClassName(ByRef pModelName As %String = "") As %String [ CodeMode = objectgenerator, GenerateAfter = %GetDefinition ]\n'})}),"\n",(0,s.jsx)(t.p,{children:"Returns the class name of the model identified by pModelName in PMML. If left blank, returns the class name of the first model in the model definition, setting pModelName to its logical name at the same time."}),"\n",(0,s.jsx)(t.h3,{id:"getdataclassname",children:"%GetDataClassName"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetDataClassName() As %String\n"})}),"\n",(0,s.jsx)(t.p,{children:"Returns the name of the %DeepSee.PMML.Data class generated upon compiling this PMML definiton."}),"\n",(0,s.jsx)(t.h3,{id:"createdataset",children:"%CreateDataset"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:'ClassMethod %CreateDataset(pDataSource As %String = "", Output pDataset As %DeepSee.PMML.Dataset) As %Status [ Internal ]\n'})}),"\n",(0,s.jsx)(t.h3,{id:"getmodels",children:"%GetModels"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod %GetModels(Output pModels, pIncludeSecondary As %Boolean = 0) As %Status [ CodeMode = objectgenerator, GenerateAfter = %GetModelClassName, Internal ]\n"})}),"\n",(0,s.jsx)(t.p,{children:"Returns pModels(n) = $lb(modelName, class, type)"}),"\n",(0,s.jsx)(t.p,{children:"If pIncludeSecondary=1, models nested within composite models will also be returned. Note that these cannot necessarily be invoked separately."}),"\n",(0,s.jsx)(t.h3,{id:"ongetdata",children:"OnGetData"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method OnGetData(ByRef pParameters, Output pObject As %RegisteredObject) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"onsubmitdata",children:"OnSubmitData"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method OnSubmitData(pCommand As %String, pProvider As %ZEN.Auxiliary.jsonProvider, pObject As %RegisteredObject, Output pResponse As %RegisteredObject) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"onaftercreatepage",children:"%OnAfterCreatePage"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method %OnAfterCreatePage() As %Status\n"})}),"\n",(0,s.jsx)(t.p,{children:"Populates the properties and models on this Zen page according to the contents of PMML"}),"\n",(0,s.jsx)(t.h3,{id:"addproperties",children:"%AddProperties"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method %AddProperties() As %Status [ Internal, Private ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"getinputfieldsformodel",children:"GetInputFieldsForModel"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method GetInputFieldsForModel(pModel As %String, pSeparator As %String) As %String [ Internal, ZenMethod ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"update",children:"update"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClientMethod update(id, value) [ Language = javascript ]\n"})}),"\n",(0,s.jsx)(t.p,{children:"Update test page contents based on user input"}),"\n",(0,s.jsx)(t.h3,{id:"reset",children:"reset"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClientMethod reset() [ Language = javascript ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"disableunusedfields",children:"disableUnusedFields"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClientMethod disableUnusedFields() [ Language = javascript ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"onloadhandler",children:"onloadHandler"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClientMethod onloadHandler() [ Language = javascript ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"onchangemodel",children:"onChangeModel"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClientMethod onChangeModel(model) [ Language = javascript ]\n"})}),"\n",(0,s.jsx)(t.p,{children:"Invoked when selecting a model in the GUI"}),"\n",(0,s.jsx)(t.h3,{id:"gettestoutput",children:"GetTestOutput"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method GetTestOutput(pModelName As %String, Output pModel As %DeepSee.PMML.Model.AbstractModel, Output pOutput As %DeepSee.PMML.ModelOutput, pTrace As %Boolean = 0) As %Status [ Internal, Private ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"drawtrace",children:"DrawTrace"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method DrawTrace(pSeed As %String) As %Status [ Internal ]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"drawoutput",children:"DrawOutput"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Method DrawOutput(pSeed As %String) As %Status [ Internal ]\n"})})]})}function c(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>i});var s=n(96540);const a={},l=s.createContext(a);function d(e){const t=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(l.Provider,{value:t},e.children)}}}]);