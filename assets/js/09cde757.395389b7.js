"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[9263],{43830:(e,s,a)=>{a.r(s),a.d(s,{contentTitle:()=>t,default:()=>o,frontMatter:()=>i,toc:()=>r});var l=a(74848),n=a(28453);const i={pagination_prev:null,pagination_next:null},t="%SYSTEM.CSP",r=[{value:"Parameters",id:"parameters",level:2},{value:"Config",id:"config",level:3},{value:"Methods",id:"methods",level:2},{value:"LoadPage",id:"loadpage",level:3},{value:"LoadPageDir",id:"loadpagedir",level:3},{value:"DeletePage",id:"deletepage",level:3},{value:"Show",id:"show",level:3},{value:"LoadRule",id:"loadrule",level:3},{value:"LoadRuleFile",id:"loadrulefile",level:3},{value:"LoadRuleDir",id:"loadruledir",level:3},{value:"DeleteAllRules",id:"deleteallrules",level:3},{value:"DeleteRuleFile",id:"deleterulefile",level:3},{value:"DeleteRule",id:"deleterule",level:3},{value:"Shell",id:"shell",level:3},{value:"GetClassName",id:"getclassname",level:3},{value:"GetFileName",id:"getfilename",level:3},{value:"GetAppName",id:"getappname",level:3},{value:"GetDefaultApp",id:"getdefaultapp",level:3},{value:"SetConfig",id:"setconfig",level:3},{value:"GetConfig",id:"getconfig",level:3},{value:"DisplayConfig",id:"displayconfig",level:3},{value:"FilenameToUrls",id:"filenametourls",level:3},{value:"GetGatewayRegistry",id:"getgatewayregistry",level:3},{value:"WebPage",id:"webpage",level:3},{value:"GetPortalApp",id:"getportalapp",level:3},{value:"IsUpToDate",id:"isuptodate",level:3}];function c(e){const s={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",namespace:"namespace",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"systemcsp",children:"%SYSTEM.CSP"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"Class %SYSTEM.CSP Extends Help [ Abstract, System = 4 ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"The %SYSTEM.CSP class provides an interface for managing CSP pages."}),"\n",(0,l.jsxs)(s.p,{children:["You can use it via the special ",(0,l.jsx)(s.strong,{children:"$system"})," object: ",(0,l.jsx)(s.code,{children:'Do $SYSTEM.CSP.LoadPage("/user/apps/page.csp","ck")'})]}),"\n",(0,l.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsx)(s.h3,{id:"config",children:"Config"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'Parameter Config = ",8BitLocaleCharset,DebugErrorPage,DefaultErrorPage,ClearSessionsOnRestart,SessionLockTimeout,Expire,DefaultServerName,CSPConfigName,DefaultLoginPage,DefaultPasswordChangePage,OptionalBrokerJS,FileServerPage,UseLegacySessionSharing,ProtectSessionCallback,DisableGatewayCacheClear,GatewayPingHTTPSConfig,GatewayPingHTTPSPort,SessionPersistentHeaders,SQLGatewayTimeout,";\n'})}),"\n",(0,l.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,l.jsx)(s.h3,{id:"loadpage",children:"LoadPage"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod LoadPage(pageURL As %String, flags As %String = "ck") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Load a CSP page from disk and compile it."}),"\n",(0,l.jsxs)(s.p,{children:["Load a CSP page from the file pageURL specified as a URL and create a class representation of them. The class created will be compiled unless you pass the qualifier ",(0,l.jsx)(s.em,{children:"/cspcompileclass=0"}),"."]}),"\n",(0,l.jsx)(s.h3,{id:"loadpagedir",children:"LoadPageDir"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod LoadPageDir(dirURL As %String, flags As %String = "ck") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Load all CSP pages in a directory from disk and compile them."}),"\n",(0,l.jsxs)(s.p,{children:["Load all CSP page from the directory dirURL specified as a URL and create a class representation of them. The classes created will be compiled unless you pass the qualifier ",(0,l.jsx)(s.em,{children:"/cspcompileclass=0"}),"."]}),"\n",(0,l.jsx)(s.h3,{id:"deletepage",children:"DeletePage"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DeletePage(pageURL As %String, qspec As %String) As %Status\n"})}),"\n",(0,l.jsx)(s.p,{children:"Delete a CSP page from the disk file pageURL specified as a URL as well as the associated class representation."}),"\n",(0,l.jsx)(s.h3,{id:"show",children:"Show"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Show(url As %String, showhttp As %Boolean = 1, session As %CSP.Session) As %String\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Display a CSP page on the console. Displays the CSP page with URL url to the primary device (console). If auto-compiling is enabled, it checks the timestamp of the source file to see if a recompilation is required and peforms it if necessary.",(0,l.jsx)(s.br,{}),"\nshowhttp if false will skip the HTTP headers and the OnPreHTTP callback",(0,l.jsx)(s.br,{}),"\nsession if you pass in an existing %CSP.Session object it will use this one rather than making a new one."]}),"\n",(0,l.jsx)(s.h3,{id:"loadrule",children:"LoadRule"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod LoadRule(file As %String, flags As %String = "") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Load a CSP rule file."}),"\n",(0,l.jsxs)(s.p,{children:["Loads the CSP rule file file (",(0,l.jsx)(s.em,{children:".csr"})," file) into the current namespace and compiles it."]}),"\n",(0,l.jsx)(s.h3,{id:"loadrulefile",children:"LoadRuleFile"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod LoadRuleFile(url As %String, flags As %String = "") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Load a CSP rule file specified as a URL."}),"\n",(0,l.jsxs)(s.p,{children:["Loads the CSP rule file url (",(0,l.jsx)(s.em,{children:".csr"})," file) into the current namespace and compiles it."]}),"\n",(0,l.jsx)(s.h3,{id:"loadruledir",children:"LoadRuleDir"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod LoadRuleDir(directory As %String, flags As %String = "") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Load all CSP rule files in a directory specified as a URL."}),"\n",(0,l.jsxs)(s.p,{children:["Loads all the CSP rule files in directory (",(0,l.jsx)(s.em,{children:".csr"})," files) into the current namespace and compiles it."]}),"\n",(0,l.jsx)(s.h3,{id:"deleteallrules",children:"DeleteAllRules"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DeleteAllRules() As %Status [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Delete all the user defined rules in the current namespace."}),"\n",(0,l.jsx)(s.h3,{id:"deleterulefile",children:"DeleteRuleFile"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod DeleteRuleFile(url As %String, flags As %String = "") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Delete the rules that had been loaded by a CSP rule file specified as a URL. DeleteRuleFile allows easy cleanup of previously loaded rules."}),"\n",(0,l.jsx)(s.h3,{id:"deleterule",children:"DeleteRule"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod DeleteRule(rulename As %String, flags As %String = "") As %Status [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Delete a CSP rule."}),"\n",(0,l.jsx)(s.p,{children:"Deletes the CSP rule rulename in the current namespace."}),"\n",(0,l.jsx)(s.h3,{id:"shell",children:"Shell"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod Shell()\n"})}),"\n",(0,l.jsx)(s.p,{children:"Provide a shell to get CSP pages on the command line."}),"\n",(0,l.jsx)(s.p,{children:"Provide a command line interface to display CSP pages. This is useful for debugging."}),"\n",(0,l.jsx)(s.h3,{id:"getclassname",children:"GetClassName"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod GetClassName(url As %String, baseurl As %String = "") As %String [ CodeMode = expression ]\n'})}),"\n",(0,l.jsx)(s.p,{children:"Return the CSP class name for a url."}),"\n",(0,l.jsx)(s.p,{children:"Return the class name of the class that will be generated from url. If you use a relative URL then you should also specify baseurl which is the URL this page is relative to."}),"\n",(0,l.jsx)(s.h3,{id:"getfilename",children:"GetFileName"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetFileName(url As %String) As %String [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return the filename for a url of a CSP page."}),"\n",(0,l.jsx)(s.p,{children:"Return the file name associated with the page url."}),"\n",(0,l.jsx)(s.h3,{id:"getappname",children:"GetAppName"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetAppName(url As %String) As %String\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return the CSP application name from the url of a CSP page."}),"\n",(0,l.jsx)(s.h3,{id:"getdefaultapp",children:"GetDefaultApp"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetDefaultApp(namespace As %String) As %String [ CodeMode = expression ]\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return the default CSP application name for this namespace."}),"\n",(0,l.jsx)(s.p,{children:"The default application may be explicitly defined by going to the desired appliction, setting its namespace, and then checking the Is-Namespace-Default checkbox."}),"\n",(0,l.jsxs)(s.p,{children:["If there is no explicitly defined default, the following rules apply. If /csp/",(0,l.jsx)(s.namespace,{children:" is defined then this will be the default application name, otherwise it will return the first CSP application that maps to this namespace."})]}),"\n",(0,l.jsx)(s.h3,{id:"setconfig",children:"SetConfig"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod SetConfig(param As %String, val As %String)\n"})}),"\n",(0,l.jsx)(s.p,{children:"Set a CSP configuration parameter."}),"\n",(0,l.jsx)(s.p,{children:"Set one of the CSP configuration parameters that effect how CSP runs on this entire machine. Pass in the param name and the val that you wish to set."}),"\n",(0,l.jsx)(s.h3,{id:"getconfig",children:"GetConfig"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetConfig(param As %String) As %String\n"})}),"\n",(0,l.jsx)(s.p,{children:"Get the value of a CSP configuration parameter."}),"\n",(0,l.jsx)(s.p,{children:"Gets the value of one of the CSP configuration parameters that effect how CSP runs on this entire machine. Pass in the param name and it returns the current value."}),"\n",(0,l.jsx)(s.h3,{id:"displayconfig",children:"DisplayConfig"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod DisplayConfig()\n"})}),"\n",(0,l.jsx)(s.p,{children:"Displays the current global CSP configuration parmeters and what they mean."}),"\n",(0,l.jsx)(s.p,{children:"Displays a list of the current CSP configuration parameters, their values and what each of them means."}),"\n",(0,l.jsx)(s.h3,{id:"filenametourls",children:"FilenameToUrls"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod FilenameToUrls(filename As %String) As %List\n"})}),"\n",(0,l.jsx)(s.p,{children:'Take an absolute file name, e.g., "c:\\dir1\\dir2\\myfile.dat". Search the lists of files for the CSP applications to find a match. (There may be more than one.) The matches are returned as a list of urls to the file: {"/csp/app1/myfile.dat","/csp/otherapp/myfile.dat"}'}),"\n",(0,l.jsx)(s.h3,{id:"getgatewayregistry",children:"GetGatewayRegistry"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetGatewayRegistry() As %CSP.Mgr.GatewayRegistry\n"})}),"\n",(0,l.jsx)(s.p,{children:"The gateway registry gives access to the CSP Gateways connected to InterSystems IRIS."}),"\n",(0,l.jsx)(s.h3,{id:"webpage",children:"WebPage"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod WebPage(class As %String) As %Boolean\n"})}),"\n",(0,l.jsx)(s.p,{children:"Pass it a classname, e.g. 'User.Test' and it returns if this is a CSP page or not by looking if it extends %CSP.Page class."}),"\n",(0,l.jsx)(s.h3,{id:"getportalapp",children:"GetPortalApp"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod GetPortalApp(namespace As %String, page As %String) As %String\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return the correct CSP application link for this portal page. Return"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:'"" if we can not link to portal application in this namespace,'}),"\n",(0,l.jsxs)(s.li,{children:["otherwise return either the default application i.e. /csp/",(0,l.jsx)(s.namespace,{children:"/ for this namespace if this is linking to something like ensemble or deepsee portal page which have to run in an application defined in this namespace"})]}),"\n",(0,l.jsx)(s.li,{children:"or return /csp/sys/ if this is a system management portal page which always runs in /csp/sys/ application (or subapplication) and handles namespace switching itself."}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"isuptodate",children:"IsUpToDate"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod IsUpToDate(url As %String) As %Boolean\n"})}),"\n",(0,l.jsx)(s.p,{children:"Return true if this url is up to date and false otherwise"})]})}function o(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,s,a)=>{a.d(s,{R:()=>t,x:()=>r});var l=a(96540);const n={},i=l.createContext(n);function t(e){const s=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),l.createElement(i.Provider,{value:s},e.children)}}}]);