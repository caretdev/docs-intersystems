"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[31343],{44905:(e,s,t)=>{t.r(s),t.d(s,{contentTitle:()=>l,default:()=>i,frontMatter:()=>n,toc:()=>o});var r=t(74848),a=t(28453);const n={pagination_prev:null,pagination_next:null},l="%TSQL.sys.log",o=[{value:"Properties",id:"properties",level:2},{value:"logFile",id:"logfile",level:3},{value:"Methods",id:"methods",level:2},{value:"%OnNew",id:"onnew",level:3},{value:"%OnClose",id:"onclose",level:3},{value:"write",id:"write",level:3},{value:"logError",id:"logerror",level:3},{value:"logStream",id:"logstream",level:3},{value:"logStatus",id:"logstatus",level:3},{value:"logHeader",id:"logheader",level:3},{value:"logResults",id:"logresults",level:3},{value:"startLog",id:"startlog",level:3},{value:"stopLog",id:"stoplog",level:3},{value:"traceMessage",id:"tracemessage",level:3},{value:"traceDeferredStatement",id:"tracedeferredstatement",level:3},{value:"traceEmbeddedStatement",id:"traceembeddedstatement",level:3},{value:"traceContext",id:"tracecontext",level:3},{value:"traceStatus",id:"tracestatus",level:3},{value:"traceError",id:"traceerror",level:3},{value:"traceResult",id:"traceresult",level:3}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"tsqlsyslog",children:"%TSQL.sys.log"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Class %TSQL.sys.log Extends %Library.RegisteredObject [ System = 2 ]\n"})}),"\n",(0,r.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.h3,{id:"logfile",children:"logFile"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Property logFile As %String;\n"})}),"\n",(0,r.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(s.h3,{id:"onnew",children:"%OnNew"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Method %OnNew(logFile As %RawString = "", initialize As %Boolean = 0) As %Status [ Private, ProcedureBlock = 1, ServerOnly = 1 ]\n'})}),"\n",(0,r.jsx)(s.p,{children:"This callback method is invoked by the %New method to provide notification that a new instance of an object is being created."}),"\n",(0,r.jsx)(s.p,{children:"If this method returns an error then the object will not be created."}),"\n",(0,r.jsx)(s.p,{children:"It is passed the arguments provided in the %New call. When customizing this method, override the arguments with whatever variables and types you expect to receive from %New(). For example, if you're going to call %New, passing 2 arguments, %OnNew's signature could be:"}),"\n",(0,r.jsx)(s.p,{children:'Method %OnNew(dob as %Date = "", name as %Name = "") as %Status'}),"\n",(0,r.jsx)(s.h3,{id:"onclose",children:"%OnClose"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method %OnClose() As %Status [ Private ]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"write",children:"write"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Method write(message As %String(MAXLEN=""), linesBefore As %Integer = 0, linesAfter As %Integer = 1) As %Status\n'})}),"\n",(0,r.jsx)(s.p,{children:"write() - write a message to the current log file"}),"\n",(0,r.jsx)(s.h3,{id:"logerror",children:"logError"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method logError(error As %SYSTEM.Error)\n"})}),"\n",(0,r.jsx)(s.p,{children:"Report an error from a %SYSTEM.Error object"}),"\n",(0,r.jsx)(s.p,{children:"error - an instance of %SYSTEM.Error"}),"\n",(0,r.jsx)(s.h3,{id:"logstream",children:"logStream"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method logStream(stream As %Stream.Object, pNumbered As %Integer = 0)\n"})}),"\n",(0,r.jsx)(s.p,{children:"Copy the contents of a stream to the log"}),"\n",(0,r.jsx)(s.p,{children:"stream - stream to copy to the file."}),"\n",(0,r.jsx)(s.h3,{id:"logstatus",children:"logStatus"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method logStatus(StatusCode As %Status, Message As %String, ByRef Outcome)\n"})}),"\n",(0,r.jsx)(s.p,{children:"Report a status message from a trace"}),"\n",(0,r.jsx)(s.p,{children:'sc - pass as status code  message - pass a message to be written both to the current device and to the log (or "") (optional)  outcome - pass an array of stats (optional)'}),"\n",(0,r.jsx)(s.h3,{id:"logheader",children:"logHeader"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"Method logHeader() As %Status\n"})}),"\n",(0,r.jsx)(s.h3,{id:"logresults",children:"logResults"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'Method logResults(context As %Library.ProcedureContext, displyRowCount As %Boolean = 0, timeStart As %String = "", startgloref As %String = "", rowcount As %BigInt = "", dumpresults As %Boolean = 1) As %Status\n'})}),"\n",(0,r.jsx)(s.h3,{id:"startlog",children:"startLog"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod startLog(logFile As %RawString = "", initialize As %Boolean = 0) As %Status\n'})}),"\n",(0,r.jsx)(s.h3,{id:"stoplog",children:"stopLog"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod stopLog() As %Status\n"})}),"\n",(0,r.jsx)(s.h3,{id:"tracemessage",children:"traceMessage"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod traceMessage(message As %String(MAXLEN="")) As %Status\n'})}),"\n",(0,r.jsx)(s.h3,{id:"tracedeferredstatement",children:"traceDeferredStatement"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod traceDeferredStatement(statementType, sql) As %Status\n"})}),"\n",(0,r.jsx)(s.h3,{id:"traceembeddedstatement",children:"traceEmbeddedStatement"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod traceEmbeddedStatement(statementType, sql) As %Status\n"})}),"\n",(0,r.jsx)(s.h3,{id:"tracecontext",children:"traceContext"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod traceContext(context As %Library.ProcedureContext) As %Status\n"})}),"\n",(0,r.jsx)(s.h3,{id:"tracestatus",children:"traceStatus"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod traceStatus(StatusCode As %Status, Message As %String, ByRef Outcome)\n"})}),"\n",(0,r.jsx)(s.p,{children:"Report a status message from a trace"}),"\n",(0,r.jsx)(s.p,{children:'sc - pass as status code  message - pass a message to be written both to the current device and to the log (or "") (optional)  outcome - pass an array of stats (optional)'}),"\n",(0,r.jsx)(s.h3,{id:"traceerror",children:"traceError"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:"ClassMethod traceError(pError As %SYSTEM.Error) As %Status\n"})}),"\n",(0,r.jsx)(s.p,{children:"Report an error from a %SYSTEM.Error object"}),"\n",(0,r.jsx)(s.p,{children:"error - an instance of %SYSTEM.Error"}),"\n",(0,r.jsx)(s.h3,{id:"traceresult",children:"traceResult"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-objectscript-class",children:'ClassMethod traceResult(pContext As %Library.ProcedureContext, displyRowCount As %Boolean = 0, timeStart As %String = "", startgloref As %String = "", rowcount As %BigInt = "", dumpresults As %Boolean = 1) As %Status\n'})})]})}function i(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>o});var r=t(96540);const a={},n=r.createContext(a);function l(e){const s=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(n.Provider,{value:s},e.children)}}}]);