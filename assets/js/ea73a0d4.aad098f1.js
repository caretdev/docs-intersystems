"use strict";(self.webpackChunkdocs_intersystems=self.webpackChunkdocs_intersystems||[]).push([[54028],{78562:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>c,frontMatter:()=>i,toc:()=>a});var s=n(74848),r=n(28453);const i={pagination_prev:null,pagination_next:null},o="%SYSTEM.IS",a=[{value:"Methods",id:"methods",level:2},{value:"Receive",id:"receive",level:3},{value:"ReceiveReply",id:"receivereply",level:3},{value:"Execute",id:"execute",level:3},{value:"DefaultTimeout",id:"defaulttimeout",level:3},{value:"Clear",id:"clear",level:3}];function l(e){const t={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",timeout:"timeout",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"systemis",children:"%SYSTEM.IS"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"Class %SYSTEM.IS Extends %SYSTEM.Help [ System = 4 ]\n"})}),"\n",(0,s.jsx)(t.p,{children:"Input Stream"}),"\n",(0,s.jsx)(t.p,{children:"This class contains methods to receive items framed in $LIST format from a TCP stream. It is part of the InterSystems IRIS Native API. The other endpoint is usually a client written in a language other than ObjectScript. For clients in ObjectScript see %SYSTEM.OS."}),"\n",(0,s.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(t.h3,{id:"receive",children:"Receive"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Receive(to As %Integer) As %String\n"})}),"\n",(0,s.jsx)(t.p,{children:"Read a single $LIST() item from the input stream."}),"\n",(0,s.jsx)(t.p,{children:"Consumes a framed item from the input stream and returns the corresponding ObjectScript data value. If there are not enough bytes to form a complete item, the method will wait until the device driver produces the necessary number of bytes. A timeout argument is optional and if present overrides the default timeout. See the Timeout() method below for details."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Parameter:"}),(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"to"})," - Optional - New timeout in seconds (default = 300)."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Return:"})," the value read from the stream."]}),"\n",(0,s.jsx)(t.h3,{id:"receivereply",children:"ReceiveReply"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod ReceiveReply(to As %Integer) As %String\n"})}),"\n",(0,s.jsx)(t.p,{children:"Read a new message from the input stream and return its header as a $LB(type,msgid,contxt,code)."}),"\n",(0,s.jsx)(t.p,{children:"Retrieve the msgid, the contxt and the code from the input stream. In most situations the msgid and the contxt will be the same as the ones sent with a SendRequest(msgid,...) and the code will be an error code for that operation."}),"\n",(0,s.jsx)(t.p,{children:"Depending on the opcode that was requested, one of more response items can be available in the input stream. These can be read with further calls to Receive(). In less common situations, msgid will be a new identifier sent by the other end as the beginning of a new (reentrant) request. In this case the code will be the corresponding opcode."}),"\n",(0,s.jsx)(t.p,{children:"The type is a small integer that quickly characterizes the header. Strictly speaking this information is not necessary because just by looking at the integer value of the code one can determine the type of the message. But the 'type' field is included as a convenience. Besides, depending on the type, the code field has been changed to be in a more suitable format:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"type:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"= 0 -> Return code (number starting from 0)"}),"\n",(0,s.jsx)(t.li,{children:"= 1 -> Native DB request code (number starting from 0)"}),"\n",(0,s.jsx)(t.li,{children:"= 2 -> DBSRV code (2-character string)\nNormally, following a SendRequest() you will get a header with a return code (type = 0), but the format is more generic and also used by Execute(). A timeout argument is optional and if present overrides the default timeout. See the Timeout section below for details."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Parameter:"}),(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"to"})," - Optional - New timeout in seconds (default = 300)."]}),"\n",(0,s.jsx)(t.p,{children:"**Return:**The header of the message as $LB(type,msgid,contxt,code)"}),"\n",(0,s.jsx)(t.h3,{id:"execute",children:"Execute"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Execute(loop As %Boolean, msgid As %Integer, contxt As %Integer, code As %Integer, to As %Integer) As %Integer\n"})}),"\n",(0,s.jsx)(t.p,{children:"Execute a client request."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Parameters:"}),(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"loop"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"True: execute requests until a STOP command is received"}),"\n",(0,s.jsx)(t.li,{children:"False: execute one request and return"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"msgid"})," - Optional - Message id (val1 in header).",(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"contxt"})," - Optional - Context (val2 in header).",(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"code"})," - Optional - Op code or reply code.",(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"to"})," - to - Optional - Timeout in seconds."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Return:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"0 - Single opcode was executed"}),"\n",(0,s.jsx)(t.li,{children:"-1 - STOP opcode was received"}),"\n",(0,s.jsx)(t.li,{children:"$LB(type, msgid, contxt, code) - this code is not handled by the kernel"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"defaulttimeout",children:"DefaultTimeout"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod DefaultTimeout(to As %Integer) As %Integer\n"})}),"\n",(0,s.jsx)(t.p,{children:"Get and optionally set the default timeout for the input stream methods."}),"\n",(0,s.jsxs)(t.p,{children:["All input methods (IS.Receive(), IS.ReceiveReply() and IS.Execute()) are subject to a timeout. If no data arrives within the established period, the method throws a ",(0,s.jsx)(t.timeout,{children:" error. The timeout value can be passed as the last argument to these methods but, if omitted, a default value is used. Timeouts are expressed in seconds and -1 means infinite timeout (no timeout)."})]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Parameter:"}),(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"to"})," - Optional - New timeout in seconds (default = 300)."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Return:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Current timeout if no argument was passed"}),"\n",(0,s.jsx)(t.li,{children:"Previous timeout if a new value was passed"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"clear",children:"Clear"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-objectscript-class",children:"ClassMethod Clear() As %Integer\n"})}),"\n",(0,s.jsx)(t.p,{children:"Remove any data remaining in the input stream buffer."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Return:"})," 0"]})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(96540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);