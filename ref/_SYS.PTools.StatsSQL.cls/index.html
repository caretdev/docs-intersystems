<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-cls-loader plugin-id-default api-version-2024.1 docs-doc-page" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">item.name | API | InterSystems Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://caretdev.github.io/docs-intersystems/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://caretdev.github.io/docs-intersystems/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://caretdev.github.io/docs-intersystems/ref/_SYS.PTools.StatsSQL.cls"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="item.name | API | InterSystems Documentation"><meta data-rh="true" name="description" content="testMetadata"><meta data-rh="true" property="og:description" content="testMetadata"><link data-rh="true" rel="icon" href="/docs-intersystems/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://caretdev.github.io/docs-intersystems/ref/_SYS.PTools.StatsSQL.cls"><link data-rh="true" rel="alternate" href="https://caretdev.github.io/docs-intersystems/ref/_SYS.PTools.StatsSQL.cls" hreflang="en"><link data-rh="true" rel="alternate" href="https://caretdev.github.io/docs-intersystems/ref/_SYS.PTools.StatsSQL.cls" hreflang="x-default"><link rel="stylesheet" href="/docs-intersystems/assets/css/styles.320638ba.css">
<script src="/docs-intersystems/assets/js/runtime~main.c38cd609.js" defer="defer"></script>
<script src="/docs-intersystems/assets/js/main.b7e62373.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs-intersystems/"><div class="navbar__logo"><img src="/docs-intersystems/img/intersystems-docs.svg" alt="InterSystems Docs Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs-intersystems/img/intersystems-docs.svg" alt="InterSystems Docs Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">InterSystems Documentation</b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs-intersystems/ref">Class Reference</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs-intersystems/ref">2024.1</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/caretdev/docs-intersystems" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="refPage"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_ASQ.Exception.cls">%ASQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Api.Atelier.v1.cls">%Api</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Archive.Content.cls">%Archive</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Atelier.REST.cls">%Atelier</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_CPP.BinList.cls">%CPP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_CPT.COS.Analysis.Test.cls">%CPT</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_CSP.AbstractAtom.cls">%CSP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Calendar.Hijri.cls">%Calendar</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Collection.AbstractArray.cls">%Collection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Compiler.Binding.Java.cls">%Compiler</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_DataModel.Serializer.cls">%DataModel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Debugger.Stack.cls">%Debugger</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_DeepSee.AbstractKPI.cls">%DeepSee</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Dictionary.ClassDefinition.cls">%Dictionary</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_DocDB.Database.cls">%DocDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Document.CollectionDefinition.cls">%Document</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_DotNet.Utils.cls">%DotNet</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Embedding.Config.cls">%Embedding</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Exception.AbstractException.cls">%Exception</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_ExtentMgr.GUID.cls">%ExtentMgr</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_External.Messaging.Client.cls">%External</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_FOI.Server.cls">%FOI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_FileMan.Field.cls">%FileMan</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Harmony.Bridge.cls">%Harmony</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_IO.DeviceStream.cls">%IO</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Installer.AbstractLogger.cls">%Installer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Iterator.AbstractIterator.cls">%Iterator</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_JSON.Adaptor.cls">%JSON</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Library.AbstractArray.cls">%Library</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_MFT.API.cls">%MFT</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_ML.AutoML.Provider.cls">%ML</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_MV.Adaptor.cls">%MV</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Monitor.AbstractType.cls">%Monitor</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Net.Authenticator.cls">%Net</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_OAuth2.Error.cls">%OAuth2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Projection.AbstractProjection.cls">%Projection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_REST.API.cls">%REST</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Regex.Matcher.cls">%Regex</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Report.AuthExternalUser.cls">%Report</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_ResultSet.Custom.cls">%ResultSet</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_SAML.Action.cls">%SAML</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_SOAP.Addressing.Action.cls">%SOAP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_SQL.AbstractFind.cls">%SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_SYNC.Adaptor.cls">%SYNC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs-intersystems/ref/_SYS.Audit.cls">%SYS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Audit.cls">Audit.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.AuditString.cls">AuditString.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.BackgroundTask.cls">BackgroundTask.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.ClusterInfo.cls">ClusterInfo.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.DBSRV.cls">DBSRV.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.DatabaseQuery.cls">DatabaseQuery.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Date.SlidingWindow.cls">Date</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Ensemble.cls">Ensemble.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Execute.cls">Execute.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.GlobalQuery.cls">GlobalQuery.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Journal.BitSetRecord.cls">Journal</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.LDAP.cls">LDAP.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.LockQuery.cls">LockQuery.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.MFT.Connection.Base.cls">MFT</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.ML.AutoML.Configuration.cls">ML</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.MVACTIVELISTS.cls">MVACTIVELISTS.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Maint.Bitmap.cls">Maint</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Monitor.AbstractDashboard.cls">Monitor</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.NLS.Device.cls">NLS</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Namespace.cls">Namespace.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.OAuth2.AccessToken.cls">OAuth2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.OpenAM.IdentityServices.cls">OpenAM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.FileCreation.cls">PTools</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.FileCreation.cls">FileCreation.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.ModuleName.cls">ModuleName.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.SQLBenchMarkQueries.cls">SQLBenchMarkQueries.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.SQLBenchMarkResults.cls">SQLBenchMarkResults.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.SQLQuery.cls">SQLQuery.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.SQLStats.cls">SQLStats.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.SQLUtilResults.cls">SQLUtilResults.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.SQLUtilities.cls">SQLUtilities.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.Stats.cls">Stats.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.StatsSQL.cls">StatsSQL.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.UtilSQLAnalysis.cls">UtilSQLAnalysis.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.UtilSQLAnalysisDB.cls">UtilSQLAnalysisDB.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PTools.UtilSQLStatements.cls">UtilSQLStatements.cls</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.PhoneProviders.cls">PhoneProviders.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Portal.Resources.cls">Portal</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.ProcessQuery.cls">ProcessQuery.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Python.ArrayTraits.cls">Python</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Python.cls">Python.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.QRCode.cls">QRCode.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.REST.cls">REST.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.RMSession.cls">RMSession.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.SecurityContextToken.cls">SecurityContextToken.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Studio.DocumentHistory.cls">Studio</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.System.cls">System.cls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-intersystems/ref/_SYS.Task.BackupAllDatabases.cls">Task</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Task.cls">Task.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.TokenAuth.cls">TokenAuth.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.Trace.cls">Trace.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.WhitelistUtils.cls">WhitelistUtils.cls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-intersystems/ref/_SYS.X509Credentials.cls">X509Credentials.cls</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_SYSTEM.AbstractWorkMgr.cls">%SYSTEM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Storage.Persistent.cls">%Storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Stream.DynamicBinary.cls">%Stream</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Studio.AbstractDocument.cls">%Studio</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_TSQL.Impl.cls">%TSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_Text.English.cls">%Text</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_UnitTest.Manager.cls">%UnitTest</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_WebStress.Calls.cls">%WebStress</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_XDBC.Gateway.DatabaseMetaData.cls">%XDBC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_XGEN.AbstractDocument.cls">%XGEN</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_XML.Adaptor.cls">%XML</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_XSQL.Catalog.Informix.syscolumns.cls">%XSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_ZEN.Auxiliary.ChartContent.cls">%ZEN</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_iFind.Entity.cls">%iFind</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_iKnow.Classification.Builder.cls">%iKnow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/_xsd.anyURI.cls">%xsd</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Backup.General.cls">Backup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Config.Archives.cls">Config</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/DataMove.API.cls">DataMove</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/DeepSee.FeatureGetter.cls">DeepSee</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/INFORMATION.SCHEMA.CHECKCONSTRAINTS.cls">INFORMATION</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Interop.Config.Production.cls">Interop</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Inventory.Component.cls">Inventory</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Journal.Restore.cls">Journal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/MonitorTools.SNMP.cls">MonitorTools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Net.Provision.Installer.cls">Net</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/OAuth2.AccessToken.cls">OAuth2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/PKI.CAClient.cls">PKI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Report.ExternalUser.cls">Report</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/SYS.Agent.cls">SYS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-intersystems/ref/Security.Applications.cls">Security</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col refItemCol"><div class="refItemContainer"><article><div class="theme-doc-markdown markdown"><header><h1></h1></header><section class="tsd-readme"><header><h1>%SYS.PTools.StatsSQL</h1></header>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Class %SYS.PTools.StatsSQL Extends %SYS.PTools.Stats [ System = 4 ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Class: %SYS.PTools.StatsSQL Replaces: %SYS.PTools.SQLStats [DEPRECATED] Purpose: This class contains the Optimal (new) Performance Tools for collecting statistics on SQL Queries. Since this class extends %SYS.PTools.Stats, it uses the properties from this class and its extent class to record these individual performance statistics details for each execution of a SQL Query, since its last compilation. To collect statistical data on SQL Query executions for the entire System, you can invoke different levels of statistics collecting via several different methods described in the next section. One of these methods, SetSQLStats for example, creates the &#x27;SQLStats-flag&#x27; which controls whether or not SQL Statistics are collected for each SQL Query execution by anybody on the system, and which performance statistics details are to be collected. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} The {action-flag} portion of the SQLStats-flag is represented by the 1st colon (:) piece, and can have one of the following values: System Setting 0 - Query Compilation: Don&#x27;t generator SQLStats collection code for any Query Modules Query Execution: Don&#x27;t collect SQLStats for any Query Modules 1 - Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Don&#x27;t collect SQLStats for any Query Modules 2 - Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Collect SQLStats for MAIN Query Module (Start &amp; Stop) 3 - Query Compilation: Generator SQLStats collection code for ALL Query Modules Query Execution: Collect SQLStats for ALL Query Modules Process/Job Setting -1 - Query Compilation: Turn SQLStats Off for this Process/Job Query Execution: Turn SQLStats Off for this Process/Job 0 - Query Compilation: Use the {action-flag} (System) setting Query Execution: Use the {action-flag} (System) setting The {collect-flag} portion of the SQLStats-flag is represented by the 2nd colon (:) piece, and is a numeric value representing which SQL Performance Statistics/Metrics to collect, as specified below: {collect-flag} = SUM(MVal) In general, all of the following performance metrics are collected for each SQL module, along with a cumulative value representing all SQL modules, when the SQLStats-flag is turned on: MVal Metric Name Metric Description ---- ---------------------------- ---------------------------------- 1 Query Execution Time Total number of seconds elapsed 2 Total Global References Total number of global references 4 Total Commands Executed Total number of OS commands executed 8 Total Disk Read Latency Time Total milliseconds spent waiting ==== for Disk Reads 15 ALL Collect all Performance Metrics This flag provides a mechanism by which to choose a combination of which performance metrics to collect, by specifying a SUM of the performance metrics MVal numbers (specified above) that you wish to collect. EXAMPLE #1: The following example represents the collection of 2 performance metrics, &#x27;Query Execution Time&#x27; &amp; &#x27;Total Disk Read Latency Time&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time +8 Total Disk Read Latency Time === 9 Collect both of these performance metrics By passing 9 for the value of the {collect-flag}, the sum of the aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. EXAMPLE #2: The following example represents the collection of 3 performance metrics, &#x27;Query Execution Time&#x27;, &#x27;Total Global References&#x27; &amp; &#x27;Total Commands Executed&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time 2 Total Global References +4 Total Commands Executed === 7 Collect both of these performance metrics By passing 9 for the value of the {collect-flag}, the sum of the aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these three performance metrics whenever an SQL Query is invoked. The {condition-flag} portion of the SQLStats-flag is represented by the 3rd colon (:) piece, and can have one of the following values: 0 - No addition conditions, other than the ones specified by the following two flags: {action-flag} &amp; {collect-flag} [DEFAULT] 1 - Namespace-Condition specified by the &#x27;SetSQLStatsFlagByNS()&#x27; method The {condition-value} portion of the SQLStats-flag is represented by the 4th colon (:) piece, and can have one of the following values: The {condition-value} is based on the {condition-flag} and represents the way in which to further conditionalize/constrain whether SQLStats, by way of the SQLStats-flag, can collect statistical information for SQL Query executions within a given IRIS environment. For example, if the {condition-flag} is set to the value one (1), which is the Namespace-Condition, then the {condition-value} would be set to a Namespace in which SQLStats is authorized to collect statistical information about SQL Queries. (e.g. &quot;USER&quot;) The {terminate-flag} portion of the SQLStats-flag is represented by the 5th colon (:) piece, and can have one of the following values: 0 - No Action n - A termination flag, represented by the number of minutes from the starting $HOROLOG date, to determine when to terminate the SQLStats collection, by turning off the SQLStats-flag (System), or by setting it to a specified reset value. The {flag-type} portion of the SQLStats-flag is represented by the 6th colon (:) piece, and can have one of the following values: &quot;&quot; - Indeterminate (Older version of PTools/SQLStats) 0 - System Flag 1 - Process/Job Flag ------------------------------------------------------------------------------- You can invoke different levels of SQL Statistics collection by setting the SQLStats-flags, either for the entire System, for your current Process/Job, or for a specified Namespace. To collect SQL Statistics for the entire System, invoke the following method: Object Script: ##class(%SYS.PTools.StatsSQL).SetSQLStats(...) $SYSTEM.SQL.SetSQLStats(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStats(...) (...): (actionFlag[,returnActionFlag,collectFlag,terminateCond,ptInfo]) To collect SQL Statistics for the current Process/Job, invoke the following method: Object Script: ##class(%SYS.PTools.StatsSQL).SetSQLStats[Flag]Job(...) $SYSTEM.SQL.SetSQLStats[Flag]Job(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStats[Flag]Job(...) (...): (actionFlag[,returnActionFlag,collectFlag,p4,ptInfo]) To collect SQL Statistics for a specific Process/Job, invoke the following method: Object Script: ##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagByPID(...) $SYSTEM.SQL.SetSQLStatsFlagByPID(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsFlagByPID(...) (...): (pid,actionFlag[,returnActionFlag,collectFlag,p5,ptInfo]) <strong>RESTRICTION: This method invocation requires %Admin_Operate:Use privilege</strong> To collect SQL Statistics within a specific Namespace, invoke the following method: Object Script: ##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagByNS(...) $SYSTEM.SQL.SetSQLStatsFlagByNS(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsFlagByNS(...) (...): (ns,actionFlag[,returnActionFlag,collectFlag,terminateCond,ptInfo]) Returns All of the aforementioned methods return the value of the SQLStats-flag before setting it to the new value; Otherwise, return an error message if an error occurred SQLStats-flag RULES Whether to use the SQLStats-flag (System) or the SQLStats-flag (Process/Job) is determined by the following rules: IF {action-flag} (Process/Job) = 0, then use SQLStats-flag (System) ELSE use SQLStats-flag (Process/Job) NOTE: The &#x27;GetSQLStatsFlag(flagType,...)&#x27; method has the following additional rule when passed the parameter: flagType=&quot;&quot; RULE-G1: If {action-flag}=-1, then return zero (0) for each component-flag of the SQLStats-flag, except for the {flag-type} which is one (1) [indicating a Process/Job Flag setting], as in the following example: write $SYSTEM.SQL.GetSQLStatsFlag(&quot;&quot;) =&gt; &quot;0:0:0::0:1&quot; To retrieve the actual value for each component-flag of the SQLStats-flag in this example, pass a one (1) for the &#x27;flagType&#x27; parameter: write $SYSTEM.SQL.GetSQLStatsFlag(1) =&gt; &quot;-1:0:0::0:1&quot; ------------------------------------------------------------------------------- When the SQLStats-flag is on, statistical data will be collected in the &#x27;%SYS.PTools.StatsSQL&#x27; class, which can be interrogated during the analysis phase to determine a way to achieve optimal query performance. The following simple SQL Query displays all of the properties within the &#x27;%SYS.PTools.StatsSQL&#x27; class: SELECT * FROM %SYS_PTools.StatsSQL ORDER BY Namespace, RoutineName, CursorName, StatsGroup The following properties are important for statistical analysis and are aggregated for a given SQL Query in the row WHERE ModuleName = &#x27;INFO&#x27;: - TotalRowCount - The total number of rows returned in the MAIN Module for the given query - TotalCounter - The total number of times the query has been run since it&#x27;s last compilation - TotalModuleCount - The total number of times we entered a given module for the run of the query - TotalTimeToFirstRow - The total time spent finding the first row in the MAIN Module for the given query - TotalTimeSpent - The total time spent in a given Module for the given query - TotalGlobalRefs - The total number of global references done in a given Module for the given query - TotalCommandsExecuted - The total number of ObjectScript commands executed in a given Module for the given query - TotalDiskWait - The total number of Milliseconds spent waiting for Disk reads in a given Module for the given query - VarianceTimeSpent - The variance of the time spent in a given Module for the given query These properties are initialized to zero (0) for the &#x27;INFO&#x27; row and are only set to their proper value via the invocation of the &#x27;aggregateSQLStats()&#x27; method. Therefore, in order to directly use the data in these properties, the following method must first be invoked: Object Script: set status=##class(%SYS.PTools.StatsSQL).aggregateSQLStats(NameSpace, RoutineName, CursorName) SQL: SELECT %SYS_PTools.PT_aggregateSQLStats(NameSpace, RoutineName, CursorName) NOTE: To aggregate the SQL Statistics for all queries within a &#x27;RoutineName&#x27;, omit passing the &#x27;CursorName&#x27; to the &#x27;aggregateSQLStats&#x27; method. The Mean/Average and Variance for the property {TimeSpent}, {GlobalRefs}, {CommandsExecuted}, and {DiskWait} can be obtained via the following computations: {Mean-expr} = SUM({expr}) / {Counter} {Variance-expr} = (1 / {Counter)) * SUM(({expr} - {Mean-expr})**2) Where &#x27;expr&#x27; is one of either: TimeSpent, GlobalRefs, CommandsExecuted, or DiskWait NOTE: The &#x27;TotalTime&#x27; property is maintained for backward-compatibility and should not be use in this context. Use the &#x27;TimeSpent&#x27; property for the proper value, and the &#x27;TotalTimeSpent&#x27; for the &#x27;INFO&#x27; row. All of the data that is stored in this class can be accessed in a number of predefined ways: - By invoking the exportStatsSQL() method, which creates a file in many formats that contains the data from this method. Example: ObjectScript: set tSC=##class(%SYS.PTools.StatsSQL).exportStatsSQL(...) SQL: CALL %SYS_PTools.PT_exportStatsSQL(...) - By invoking a query against the data within this class: Examples: #1: Raw Class Query SELECT * FROM %SYS_PTools.StatsSQL #2: Aggregated Class View Query SELECT * FROM %SYS_PTools.StatsSQLView #3: General Result-Set Query SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQL([namespace]) #4: Specific Result-Set Query SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQLDetails(cursor,rtn) NOTE: All of these examples use the properties that are aggregated by the &#x27;aggregateSQLStats()&#x27; method. Only example #1 requires this method to be invoked for the &#x27;Total*&#x27; properties to have usable data. The other three examples would benefit by the invocation of this method, but will generate the totals on the fly if this method has not been adequately run. It&#x27;s important to note that whenever you collect statistical data for SQL Query executions via this tool, each collection which performs the last row INSERT into the %SYS.PTools.StatsSQL class will populate the following array reference with the corresponding definition: %SQLStats(&quot;LastRow&quot;) = &quot;||&quot; Pieces: (%ROWID of the last row INSERTed) 1) SQLStats Marker (statsSQLMarker) 2) Namespace (ns) 3) Routine (rtn) 4) Cursor (curs) 5) SQLStats Group (statsGroup) The information contained within this array reference can be used to see the SQLStats Result Set from the last invoked SQL Statement, by invoking one of the following methods: set tSC=##class(%SYS.PTools.StatsSQL).GetLastSQLStats() do %sqlcontext.DumpResults() OR set tSC=##class(%SYS.PTools.StatsSQL).GetLastSQLStats(1) // Automatically invokes DumpResults() NOTE: For additional details about the GetLastSQLStats method, please refer to the actual methods documentation contain herein The PTools/SQLStats data is collected in the following globals: Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S}&quot;) Error Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;Error&quot;[...])=$LIST Info</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties"></a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="statsmarker">StatsMarker<a href="#statsmarker" class="hash-link" aria-label="Direct link to StatsMarker" title="Direct link to StatsMarker"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property StatsMarker As %Boolean [ InitialExpression = 1, Required ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This marker indicates if the statistical data is from a SQL Query, in which case the &#x27;%SYS.PTools.StatsSQL&#x27; class should be use, or if these stats are general purpose stats for non-SQL modules, in which case the %SYS.PTools.Stats class should be use.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="namespace">NameSpace<a href="#namespace" class="hash-link" aria-label="Direct link to NameSpace" title="Direct link to NameSpace"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property NameSpace As %String(MAXLEN = 2000) [ InitialExpression = {$NAMESPACE}, Required ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The NameSpace in which the SQL query resides</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="routinename">RoutineName<a href="#routinename" class="hash-link" aria-label="Direct link to RoutineName" title="Direct link to RoutineName"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property RoutineName As %String(MAXLEN = 2000) [ Required ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The name of the routine in which the SQL query resides</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cursorname">CursorName<a href="#cursorname" class="hash-link" aria-label="Direct link to CursorName" title="Direct link to CursorName"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property CursorName As %String(MAXLEN = 2000) [ Required ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The SQL Cursor name for the given SQL Statement NOTE: For a  statement of the form &#x27;DECLARE cursor-name CURSOR FOR query&#x27; use the specified  For a , use the lettered position (A, B, ..., Z) of the statement within the {RoutineName}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="statsgroup">StatsGroup<a href="#statsgroup" class="hash-link" aria-label="Direct link to StatsGroup" title="Direct link to StatsGroup"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property StatsGroup As %Integer [ Required, SqlComputeCode = { Set {*} = $$$bumpStatsSQLStatsGroup({NameSpace},{RoutineName},{CursorName}) }, SqlComputed ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is a unique number that specifies the Stats Collection Group for each query run The counter comes from bumping the following global: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;StatsZ&quot;,&quot;StatsGroup&quot;,1,{NameSpace},{RoutineName},{CursorName}) USE: $$$bumpStatsSQLStatsGroup({NameSpace},{RoutineName},{CursorName})</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modulename">ModuleName<a href="#modulename" class="hash-link" aria-label="Direct link to ModuleName" title="Direct link to ModuleName"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property ModuleName As %SYS.PTools.ModuleName;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sections of the SQL statement, these should match up the the Module names in the Query Plan output The SQL Module Name stores the internal &#x27;mod&#x27; value with the following external values: int=ext: -1=INFO, 0=MAIN, 1=FIRST, 2=B, ..., 26=Z, 27=27, ..., n=n</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="querytype">QueryType<a href="#querytype" class="hash-link" aria-label="Direct link to QueryType" title="Direct link to QueryType"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property QueryType As %String(MAXLEN = 100);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The type of SQL Query for which stats will be recorded: SQL-Statement=&gt;SQLType -&gt; mt(&quot;t&quot;)=&gt;SQLType SEL=&gt;SELECT | DEC=&gt;SELECT | INS=&gt;INSERT | UPD=&gt;UPDATE | DEL=&gt;DELETE</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="importschema">ImportSchema<a href="#importschema" class="hash-link" aria-label="Direct link to ImportSchema" title="Direct link to ImportSchema"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property ImportSchema As %String(MAXLEN = 2000);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ImportSchema is used in generated code to handle SQL statements that have unqualified table names</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sqltextraw">SQLTextRaw<a href="#sqltextraw" class="hash-link" aria-label="Direct link to SQLTextRaw" title="Direct link to SQLTextRaw"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property SQLTextRaw As list Of %String(MAXLEN = 30000, SQLPROJECTION = &quot;table/column&quot;, TRUNCATE = 1, XMLPROJECTION = &quot;wrapped&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Raw SQL Statement Text stored as a $LIST string **NOTE: If this property changes position/location within the data storage global, ensure that the following MACROS are updated accordingly: - SYSPToolsStatsSQLPropSQLTextRawPos - getSYSPToolsStatsSQLPropSQLTextRawValue(...) - getSYSPToolsStatsSQLPropSQLTextRaw(...)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="querytext">QueryText<a href="#querytext" class="hash-link" aria-label="Direct link to QueryText" title="Direct link to QueryText"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property QueryText As %String(COLLATION = &quot;SQLUPPER(255)&quot;, MAXLEN = 30000, TRUNCATE = 1) [ Calculated, SqlComputeCode = { if {SQLTextRaw}&#x27;=&quot;&quot; { set {*}=$LISTTOSTRING({SQLTextRaw},&quot; &quot;) } else { set {*}=$$$getSYSPToolsStatsSQLPropSQLTextRaw($g({NameSpace},&quot;*&quot;),$g({RoutineName},&quot;*&quot;),$g({CursorName},&quot;*&quot;),$$$StatsGroupInfo,$$$ModuleNameINFOInt),{*}=$s({*}&#x27;=&quot;&quot;:$LISTTOSTRING({*},&quot; &quot;),1:$p($g($$$CQ(&quot;QueryText&quot;,$s({RoutineName}[&quot;.cls&quot;:$e({RoutineName},1,*-2),1:{RoutineName}),1)),&quot;~RUNTIME~&quot;,1)) } }, SqlComputed ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>External SQL Statement as a single string</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hash">Hash<a href="#hash" class="hash-link" aria-label="Direct link to Hash" title="Direct link to Hash"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property Hash As %String(MAXLEN = 500);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>hash the SQL so we can match incoming SQL with already stored Stats [Maintained for Backward-Compatibility]</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sqlindexhash">SQLIndexHash<a href="#sqlindexhash" class="hash-link" aria-label="Direct link to SQLIndexHash" title="Direct link to SQLIndexHash"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property SQLIndexHash As %String(MAXLEN = 32);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Internal unique statement hash used as the ID for the SQL Statement Index (DPV4651): ^rINDEXSQL(&quot;sqlidx&quot;,1,{SQLIndexHash},...) ^rINDEXSQL(&quot;sqlidx&quot;,2,{rtn},{SQLIndexHash}) ^rINDEXSQL(&quot;sqlidx&quot;,3,{table},{SQLIndexHash}) For additional details, refer to the following: <a href="http://twiki.iscinternal.com/twiki/bin/view/ISC/SQL20Statement20Indexing" target="_blank" rel="noopener noreferrer">http://twiki.iscinternal.com/twiki/bin/view/ISC/SQL20Statement20Indexing</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="querycompiletime">QueryCompileTime<a href="#querycompiletime" class="hash-link" aria-label="Direct link to QueryCompileTime" title="Direct link to QueryCompileTime"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property QueryCompileTime As %Float;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Number of Seconds it takes to compile the query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property Parameters As list Of %String(SQLPROJECTION = &quot;table/column&quot;, XMLPROJECTION = &quot;wrapped&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>List of Query Parameters</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sqlstatsflag">SQLStatsFlag<a href="#sqlstatsflag" class="hash-link" aria-label="Direct link to SQLStatsFlag" title="Direct link to SQLStatsFlag"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property SQLStatsFlag As %String(MAXLEN = 1000);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A flag that controls whether or not SQL Statistics are collected for each SQL Query execution (by anybody on the system, by a given Process/Job, or for a given Namespace), and which performance statistics to be collected. The SQLStatsFlag is a colon (:) delimited string comprised of the following individual flags: SQLStatsFlag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} The {action-flag} portion of the SQLStatsFlag is represented by 1st colon piece The {collect-flag} portion of the SQLStatsFlag is represented by 2nd colon piece The {condition-flag} portion of the SQLStatsFlag is represented by 3nd colon piece The {condition-value} portion of the SQLStatsFlag is represented by 4nd colon piece The {terminate-flag} portion of the SQLStatsFlag is represented by 5nd colon piece The {flag-type} portion of the SQLStatsFlag is represented by 6nd colon piece Internal: $$$getSQLStatsFlagForJob | $$$getSQLStatsFlagForSystem</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totalrowcount">TotalRowCount<a href="#totalrowcount" class="hash-link" aria-label="Direct link to TotalRowCount" title="Direct link to TotalRowCount"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalRowCount As %Integer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total number of rows returned in the MAIN Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totalcounter">TotalCounter<a href="#totalcounter" class="hash-link" aria-label="Direct link to TotalCounter" title="Direct link to TotalCounter"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalCounter As %Integer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total number of times the query has been run since it&#x27;s last compilation</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totalmodulecount">TotalModuleCount<a href="#totalmodulecount" class="hash-link" aria-label="Direct link to TotalModuleCount" title="Direct link to TotalModuleCount"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalModuleCount As %Integer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total number of times we entered this module for the run of the query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totaltimetofirstrow">TotalTimeToFirstRow<a href="#totaltimetofirstrow" class="hash-link" aria-label="Direct link to TotalTimeToFirstRow" title="Direct link to TotalTimeToFirstRow"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalTimeToFirstRow As %Float;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total time spent finding the first row in the MAIN Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totaltimespent">TotalTimeSpent<a href="#totaltimespent" class="hash-link" aria-label="Direct link to TotalTimeSpent" title="Direct link to TotalTimeSpent"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalTimeSpent As %Float;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total time spent in this Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totalglobalrefs">TotalGlobalRefs<a href="#totalglobalrefs" class="hash-link" aria-label="Direct link to TotalGlobalRefs" title="Direct link to TotalGlobalRefs"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalGlobalRefs As %Integer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total number of global references done in this Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totalcommandsexecuted">TotalCommandsExecuted<a href="#totalcommandsexecuted" class="hash-link" aria-label="Direct link to TotalCommandsExecuted" title="Direct link to TotalCommandsExecuted"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalCommandsExecuted As %Integer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total number of ObjectScript commands that were executed in this Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totallinesofcode">TotalLinesOfCode<a href="#totallinesofcode" class="hash-link" aria-label="Direct link to TotalLinesOfCode" title="Direct link to TotalLinesOfCode"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalLinesOfCode As %Integer [ Deprecated, ReadOnly, SqlComputeCode = { set {*} = {TotalCommandsExecuted} }, SqlComputed, Transient ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>*** DEPRECATED via MRP1300 as of 05/30/2022 *** The &#x27;TotalLinesOfCode&#x27; property has been deprecated and replaced by the &#x27;TotalCommandsExecuted&#x27; property, but is left here for backwards compatibility and returns the &#x27;TotalCommandsExecuted&#x27; value. At some point in the future this property will be removed from the product, so users should not rely on its availability going forward and should use the &#x27;TotalCommandsExecuted&#x27; property instead.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="totaldiskwait">TotalDiskWait<a href="#totaldiskwait" class="hash-link" aria-label="Direct link to TotalDiskWait" title="Direct link to TotalDiskWait"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property TotalDiskWait As %Integer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The total number of Milliseconds spent waiting for Disk reads in this Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="variancetimespent">VarianceTimeSpent<a href="#variancetimespent" class="hash-link" aria-label="Direct link to VarianceTimeSpent" title="Direct link to VarianceTimeSpent"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property VarianceTimeSpent As %Float;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The variance of the time spent in this Module for the given query</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creationdate">creationDate<a href="#creationdate" class="hash-link" aria-label="Direct link to creationDate" title="Direct link to creationDate"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property creationDate As %Date(FORMAT = 1) [ InitialExpression = {+$h}, Required ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Creation Date: $HOROLOG date format</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creationtime">creationTime<a href="#creationtime" class="hash-link" aria-label="Direct link to creationTime" title="Direct link to creationTime"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property creationTime As %Time [ InitialExpression = {$p($h,&quot;,&quot;,2)}, Required ];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Creation Time: $HOROLOG time format</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="routinenameucqcaller">RoutineNameUCQCaller<a href="#routinenameucqcaller" class="hash-link" aria-label="Direct link to RoutineNameUCQCaller" title="Direct link to RoutineNameUCQCaller"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Property RoutineNameUCQCaller As %String(MAXLEN = 2000);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The name of the Routine/Class in which the Embedded SQL Statement resides, and which ultimately calls/invokes the Universal Cached Query [UCQ] created as the class container to compile and code-generate the Embedded SQL Statement&#x27;s query code. The value stored in this property will have the following format: - routineName.RTN (e.g. MRProutine.RTN) - A routine that contains an Embedded SQL Statement - className.CLS (e.g. MRP.class.CLS) - A class that contains an Embedded SQL Statement NOTE: This property will only have a value if a Routine/Class contains an Embedded SQL Statement within one of its methods which calls/invokes a Universal Cached Query [UCQ]. This property will be stored within the following row of this class/table: WHERE StatsMarker = 1 /* &#x27;%SYS.PTools.StatsSQL&#x27; */ AND StatsGroup = 0 /* &#x27;INFO&#x27; */ AND ModuleName = -1 /* &#x27;INFO&#x27; */ This property will also be stored in the following &#x27;Conditional Index&#x27;, which will be maintained via Triggers: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;StatsI&quot;,&quot;rtnUCQCaller&quot;,{RoutineNameUCQCaller},...)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="triggers">Triggers<a href="#triggers" class="hash-link" aria-label="Direct link to Triggers" title="Direct link to Triggers"></a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oninsertupdate">OnInsertUpdate<a href="#oninsertupdate" class="hash-link" aria-label="Direct link to OnInsertUpdate" title="Direct link to OnInsertUpdate"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Trigger OnInsertUpdate [ Event = INSERT/UPDATE, Time = AFTER ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ondelete">OnDelete<a href="#ondelete" class="hash-link" aria-label="Direct link to OnDelete" title="Direct link to OnDelete"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Trigger OnDelete [ Event = DELETE, Time = AFTER ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods"></a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstats">SetSQLStats<a href="#setsqlstats" class="hash-link" aria-label="Direct link to SetSQLStats" title="Direct link to SetSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStats(actionFlag As %Integer = 0, returnActionFlag As %Integer = 0, collectFlag As %String = &quot;&quot;, terminateCond As %String = 0, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_SetSQLStats, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStats [SQL: StatsSQL_SetSQLStats] Replaces: N/A Status: New Functionality Purpose: This method sets the flag that controls whether or not the System collects SQL Statistics about each run of a query You can invoke different levels of SQL Statistics collection by setting the SQLStats-flag, for the System with this method. The SQLStats-flag controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to collect. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).SetSQLStats(...) $SYSTEM.SQL.SetSQLStats(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStats(...) Examples: The following examples shows the use of this method: #1 Turn PTools ON to collects stats for all SQL modules (System): set oldStats=##class(%SYS.PTools.StatsSQL).SetSQLStats(3) Data Storage: N/A Parameters: actionFlag - The portion of the SQLStats-flag which is represented by the 1st colon (:) piece, and can have one of the following values: 0 = Query Compilation: Don&#x27;t generator SQLStats collection code for any Query Modules Query Execution: Don&#x27;t collect SQLStats for any Query Modules 1 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Don&#x27;t collect SQLStats for any Query Modules 2 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Collect SQLStats for MAIN Query Module (Start &amp; Stop) 3 = Query Compilation: Generator SQLStats collection code for ALL Query Modules Query Execution: Collect SQLStats for ALL Query Modules returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value collectFlag - The portion of the SQLStats-flag which is represented by the 2nd colon (:) piece, and is a numeric value representing which SQL Performance Statistics/Metrics to collect, with one of the following values: &quot;&quot; = Collect All SQL Performance Metrics [DEFAULT] n = Where n=SUM(MVal) [See Below] In general, all of the following performance metrics are collected for each SQL module, along with a cumulative value representing all SQL modules, when the SQLStats-flag is turned on: MVal Metric Name Metric Description ---- ---------------------------- ---------------------------------- 1 Query Execution Time Total number of seconds elapsed 2 Total Global References Total number of global references 4 Total Commands Executed Total number of OS commands executed 8 Total Disk Read Latency Time Total milliseconds spent waiting ==== for Disk Reads 15 ALL Collect all Performance Metrics This parameter provides a mechanism by which to choose a combination of which performance metrics to collect, by specifying a SUM of the performance metrics MVal numbers (specified above) that you wish to collect. EXAMPLE #1: The following example represents the collection of 2 performance metrics, &#x27;Query Execution Time&#x27; &amp; &#x27;Total Disk Read Latency Time&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time +8 Total Disk Read Latency Time === 9 Collect both of these performance metrics By passing 9 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the two aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. EXAMPLE #2: The following example represents the collection of 3 performance metrics, &#x27;Query Execution Time&#x27;, &#x27;Total Global References&#x27; &amp; &#x27;Total Commands Executed&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time 2 Total Global References +4 Total Commands Executed === 7 Collect both of these performance metrics By passing 7 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the three aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. terminateCond - The portion of the SQLStats-flag which is represented by the 5th colon (:) piece, and is determined by this parameter value. An optional condition to determine when to terminate the SQLStats collection, by turning off the SQLStats-flag (System), or by setting it to a specified reset value. This parameter accepts the following values: 0 No Action [DEFAULT] M:: Where =# of minutes from 1..n When specified, this value will terminate the SQLStats collection the number of minutes  after the current $H Where =Reset {action-flag} value from 0..3 When specified, this is the value to which the {action-flag} portion of the SQLStats-flag will be set upon expiration If not specified, default  to zero (0) (e.g. &quot;M:120:1&quot; =&gt; Terminate 120minutes after the current $H and reset SQLStats-flag/{action-flag} to 1) T:: Where =Timestamp with the format: YYYYMMDD HHMM When specified, this value will terminate the SQLStats collection after the timestamp value Where =Reset {action-flag} value from 0..3 When specified, this is the value to which the {action-flag} portion of the SQLStats-flag will be set upon expiration If not specified, default  to zero (0) (e.g. &quot;T:20171018 1330:1&quot; =&gt; Terminate after 10/18/2017 01:30PM and reset SQLStats-flag/{action-flag} to 1) ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value Where category = { &quot;current&quot; | &quot;terminate&quot; | ... } variable = A variable that corresponds to the given &#x27;category&#x27; Example: ptInfo(&quot;current&quot;,&quot;SQLStatsFlag&quot;)=The SQLStats-flag value after method execution RETURN Value: The value of the SQLStats-flag before setting it to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatsflag">SetSQLStatsFlag<a href="#setsqlstatsflag" class="hash-link" aria-label="Direct link to SetSQLStatsFlag" title="Direct link to SetSQLStatsFlag"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsFlag(actionFlag As %Integer = 0, returnActionFlag As %Integer = 0, collectFlag As %String = &quot;&quot;, terminateCond As %String = 0, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_SetSQLStatsFlag, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsFlag [SQL: StatsSQL_SetSQLStatsFlag] Replaces: N/A Status: New Functionality Purpose: See SetSQLStats for details!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatsjob">SetSQLStatsJob<a href="#setsqlstatsjob" class="hash-link" aria-label="Direct link to SetSQLStatsJob" title="Direct link to SetSQLStatsJob"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsJob(actionFlag As %Integer = 0, returnActionFlag As %Integer = 0, collectFlag As %String = &quot;&quot;, p4 As %String = &quot;&quot;, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_SetSQLStatsJob, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsJob [SQL: StatsSQL_SetSQLStatsJob] Replaces: SetSQLStatsJob [SQL: SetSQLStatsJob] (%SYS.PTools.SQLStats) [DEPRECATED] Replaced By: SetSQLStatsFlagJob [SQL: StatsSQL_SetSQLStatsFlagJob] Status: Maintained for Backward-Compatibility Purpose: This method sets the flag that controls whether or not this Process/Job collects SQL Statistics about each run of a query You can invoke different levels of SQL Statistics collection by setting the SQLStats-flag, for your current Process/Job with this method. The SQLStats-flag controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to collect. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).SetSQLStatsJob(...) $SYSTEM.SQL.SetSQLStatsJob(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsJob(...) Examples: The following examples shows the use of this method: #1 Turn PTools ON to collects stats for all SQL modules: set oldStats=##class(%SYS.PTools.StatsSQL).SetSQLStatsJob(3) Data Storage: N/A Parameters: actionFlag - The portion of the SQLStats-flag which is represented by the 1st colon (:) piece, and can have one of the following values: -1 = Query Compilation: Turn SQLStats Off for this Process/Job Query Execution: Turn SQLStats Off for this Process/Job [-1 ONLY when flagType=1] 0 = Query Compilation: Use the {action-flag} (System) setting Query Execution: Use the {action-flag} (System) setting 1 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Don&#x27;t collect SQLStats for any Query Modules 2 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Collect SQLStats for MAIN Query Module (Start &amp; Stop) 3 = Query Compilation: Generator SQLStats collection code for ALL Query Modules Query Execution: Collect SQLStats for ALL Query Modules returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value collectFlag - The portion of the SQLStats-flag which is represented by the 2nd colon (:) piece, and is a numeric value representing which SQL Performance Statistics/Metrics to collect, with one of the following values: &quot;&quot; = Collect All SQL Performance Metrics [DEFAULT] n = Where n=SUM(MVal) [See Below] In general, all of the following performance metrics are collected for each SQL module, along with a cumulative value representing all SQL modules, when the SQLStats-flag is turned on: MVal Metric Name Metric Description ---- ---------------------------- ---------------------------------- 1 Query Execution Time Total number of seconds elapsed 2 Total Global References Total number of global references 4 Total Commands Executed Total number of OS commands executed 8 Total Disk Read Latency Time Total milliseconds spent waiting ==== for Disk Reads 15 ALL Collect all Performance Metrics This parameter provides a mechanism by which to choose a combination of which performance metrics to collect, by specifying a SUM of the performance metrics MVal numbers (specified above) that you wish to collect. EXAMPLE #1: The following example represents the collection of 2 performance metrics, &#x27;Query Execution Time&#x27; &amp; &#x27;Total Disk Read Latency Time&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time +8 Total Disk Read Latency Time === 9 Collect both of these performance metrics By passing 9 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the two aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. EXAMPLE #2: The following example represents the collection of 3 performance metrics, &#x27;Query Execution Time&#x27;, &#x27;Total Global References&#x27; &amp; &#x27;Total Commands Executed&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time 2 Total Global References +4 Total Commands Executed === 7 Collect both of these performance metrics By passing 7 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the three aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. p4 - Placeholder Parameter for future extensibility ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value Where category = { &quot;current&quot; | &quot;terminate&quot; | ... } variable = A variable that corresponds to the given &#x27;category&#x27; Example: ptInfo(&quot;current&quot;,&quot;SQLStatsFlag&quot;)=The SQLStats-flag value after method execution RETURN Value: The value of the SQLStats-flag before setting it to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatsflagjob">SetSQLStatsFlagJob<a href="#setsqlstatsflagjob" class="hash-link" aria-label="Direct link to SetSQLStatsFlagJob" title="Direct link to SetSQLStatsFlagJob"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsFlagJob(actionFlag As %Integer = 0, returnActionFlag As %Integer = 0, collectFlag As %String = &quot;&quot;, p4 As %String = &quot;&quot;, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_SetSQLStatsFlagJob, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsFlagJob [SQL: StatsSQL_SetSQLStatsFlagJob] Replaces: SetSQLStatsJob [SQL: StatsSQL_SetSQLStatsJob] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: This method sets the flag that controls whether or not this Process/Job collects SQL Statistics about each run of a query You can invoke different levels of SQL Statistics collection by setting the SQLStats-flag, for your current Process/Job with this method. The SQLStats-flag controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to collect. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagJob(...) $SYSTEM.SQL.SetSQLStatsFlagJob(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsFlagJob(...) Examples: The following examples shows the use of this method: #1 Turn PTools ON to collects stats for all SQL modules: set oldStats=##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagJob(3) Data Storage: ^%SYS(&quot;sql&quot;,&quot;sys&quot;,&quot;SQLStats&quot;) Parameters: actionFlag - The portion of the SQLStats-flag which is represented by the 1st colon (:) piece, and can have one of the following values: -1 = Query Compilation: Turn SQLStats Off for this Process/Job Query Execution: Turn SQLStats Off for this Process/Job [-1 ONLY when flagType=1] 0 = Query Compilation: Use the {action-flag} (System) setting Query Execution: Use the {action-flag} (System) setting 1 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Don&#x27;t collect SQLStats for any Query Modules 2 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Collect SQLStats for MAIN Query Module (Start &amp; Stop) 3 = Query Compilation: Generator SQLStats collection code for ALL Query Modules Query Execution: Collect SQLStats for ALL Query Modules returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value collectFlag - The portion of the SQLStats-flag which is represented by the 2nd colon (:) piece, and is a numeric value representing which SQL Performance Statistics/Metrics to collect, with one of the following values: &quot;&quot; = Collect All SQL Performance Metrics [DEFAULT] n = Where n=SUM(MVal) [See Below] In general, all of the following performance metrics are collected for each SQL module, along with a cumulative value representing all SQL modules, when the SQLStats-flag is turned on: MVal Metric Name Metric Description ---- ---------------------------- ---------------------------------- 1 Query Execution Time Total number of seconds elapsed 2 Total Global References Total number of global references 4 Total Commands Executed Total number of OS commands executed 8 Total Disk Read Latency Time Total milliseconds spent waiting ==== for Disk Reads 15 ALL Collect all Performance Metrics This parameter provides a mechanism by which to choose a combination of which performance metrics to collect, by specifying a SUM of the performance metrics MVal numbers (specified above) that you wish to collect. EXAMPLE #1: The following example represents the collection of 2 performance metrics, &#x27;Query Execution Time&#x27; &amp; &#x27;Total Disk Read Latency Time&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time +8 Total Disk Read Latency Time === 9 Collect both of these performance metrics By passing 9 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the two aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. EXAMPLE #2: The following example represents the collection of 3 performance metrics, &#x27;Query Execution Time&#x27;, &#x27;Total Global References&#x27; &amp; &#x27;Total Commands Executed&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time 2 Total Global References +4 Total Commands Executed === 7 Collect both of these performance metrics By passing 7 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the three aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. p4 - Placeholder Parameter for future extensibility ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value Where category = { &quot;current&quot; | &quot;terminate&quot; | ... } variable = A variable that corresponds to the given &#x27;category&#x27; Example: ptInfo(&quot;current&quot;,&quot;SQLStatsFlag&quot;)=The SQLStats-flag value after method execution RETURN Value: The value of the SQLStats-flag before setting it to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatsflagbypid">SetSQLStatsFlagByPID<a href="#setsqlstatsflagbypid" class="hash-link" aria-label="Direct link to SetSQLStatsFlagByPID" title="Direct link to SetSQLStatsFlagByPID"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsFlagByPID(pid As %String = &quot;&quot;, actionFlag As %Integer = 0, returnActionFlag As %Integer = 0, collectFlag As %String = &quot;&quot;, p5 As %String = &quot;&quot;, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_SetSQLStatsFlagByPID, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsFlagByPID [SQL: StatsSQL_SetSQLStatsFlagByPID] Replaces: N/A Status: New Functionality Purpose: This method sets the flag that controls whether or not to collect SQL Statistics about each run of a query for the given &#x27;pid&#x27; You can invoke different levels of SQL Statistics collection by setting the SQLStats-flag, for a given &#x27;pid&#x27;. The SQLStats-flag (Process/Job) controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to be collected. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} NOTE: This method ONLY applies to the SQLStats-flag for the given &#x27;pid&#x27; (Process/Job) and NOT the SQLStats-flag for the (System)! <strong>RESTRICTION: This method invocation requires %Admin_Operate:Use privilege</strong> Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagByPID(...) $SYSTEM.SQL.SetSQLStatsFlagByPID(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsFlagByPID(...) Examples: The following examples shows the use of this method: #1 Turn PTools ON to collects stats for all SQL modules for PID# 12345: set oldStats=##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagByPID(12345,3) Data Storage: N/A Parameters: pid - The process ID ($JOB) for which to set the SQLStats-flag [DEFAULT: Current $JOB] actionFlag - The portion of the SQLStats-flag which is represented by the 1st colon (:) piece, and can have one of the following values: -1 = Query Compilation: Turn SQLStats Off for the given &#x27;pid&#x27; Query Execution: Turn SQLStats Off for the given &#x27;pid&#x27; 0 = Query Compilation: Use the {action-flag} (System) setting Query Execution: Use the {action-flag} (System) setting 1 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Don&#x27;t collect SQLStats for any Query Modules 2 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Collect SQLStats for MAIN Query Module (Start &amp; Stop) 3 = Query Compilation: Generator SQLStats collection code for ALL Query Modules Query Execution: Collect SQLStats for ALL Query Modules returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value collectFlag - The portion of the SQLStats-flag which is represented by the 2nd colon (:) piece, and is a numeric value representing which SQL Performance Statistics/Metrics to collect, with one of the following values: &quot;&quot; = Collect All SQL Performance Metrics [DEFAULT] n = Where n=SUM(MVal) [See Below] In general, all of the following performance metrics are collected for each SQL module, along with a cumulative value representing all SQL modules, when the SQLStats-flag is turned on: MVal Metric Name Metric Description ---- ---------------------------- ---------------------------------- 1 Query Execution Time Total number of seconds elapsed 2 Total Global References Total number of global references 4 Total Commands Executed Total number of OS commands executed 8 Total Disk Read Latency Time Total milliseconds spent waiting ==== for Disk Reads 15 ALL Collect all Performance Metrics This parameter provides a mechanism by which to choose a combination of which performance metrics to collect, by specifying a SUM of the performance metrics MVal numbers (specified above) that you wish to collect. EXAMPLE #1: The following example represents the collection of 2 performance metrics, &#x27;Query Execution Time&#x27; &amp; &#x27;Total Disk Read Latency Time&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time +8 Total Disk Read Latency Time === 9 Collect both of these performance metrics By passing 9 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the two aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. EXAMPLE #2: The following example represents the collection of 3 performance metrics, &#x27;Query Execution Time&#x27;, &#x27;Total Global References&#x27; &amp; &#x27;Total Commands Executed&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time 2 Total Global References +4 Total Commands Executed === 7 Collect both of these performance metrics By passing 7 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the three aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. p5 - Placeholder Parameter for future extensibility ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value NOTE: This method currently returns no &#x27;ptInfo&#x27;, but is included for future extensibility RETURN Value: The value of the SQLStats-flag before setting it to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatsflagbyns">SetSQLStatsFlagByNS<a href="#setsqlstatsflagbyns" class="hash-link" aria-label="Direct link to SetSQLStatsFlagByNS" title="Direct link to SetSQLStatsFlagByNS"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsFlagByNS(ns As %String = &quot;&quot;, actionFlag As %Integer = 0, returnActionFlag As %Integer = 0, collectFlag As %String = &quot;&quot;, terminateCond As %String = 0, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_SetSQLStatsFlagByNS, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsFlagByNS [SQL: StatsSQL_SetSQLStatsFlagByNS] Replaces: N/A Status: New Functionality Purpose: This method sets the flag that controls whether or not to collect SQL Statistics about each run of a query within the given &#x27;ns&#x27; (Namespace) You can invoke different levels of SQL Statistics collection by setting the SQLStats-flag, for a given &#x27;ns&#x27;. The SQLStats-flag (System) controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to be collected. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} NOTE: This method ONLY applies to the SQLStats-flag (System) for the given &#x27;ns&#x27; and NOT the SQLStats-flag (Process/Job)! Invocation: This method can be invoked in the following ways: Object Script: ##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagByNS(...) $SYSTEM.SQL.SetSQLStatsFlagByNS(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsFlagByNS(...) Examples: The following examples shows the use of this method: #1 Turn PTools ON to collects stats for all SQL modules within the &quot;USER&quot; Namespace: set oldStats=##class(%SYS.PTools.StatsSQL).SetSQLStatsFlagByNS(&quot;USER&quot;,3) Data Storage: N/A Parameters: ns - The Namespace ($NAMESPACE) for which to set the SQLStats-flag [REQUIRED] actionFlag - The portion of the SQLStats-flag which is represented by the 1st colon (:) piece, and can have one of the following values: 0 = Query Compilation: Don&#x27;t generator SQLStats collection code for any Query Modules Query Execution: Don&#x27;t collect SQLStats for any Query Modules 1 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Don&#x27;t collect SQLStats for any Query Modules 2 = Query Compilation: Generator SQLStats collection code for MAIN Query Module (Start &amp; Stop) Query Execution: Collect SQLStats for MAIN Query Module (Start &amp; Stop) 3 = Query Compilation: Generator SQLStats collection code for ALL Query Modules Query Execution: Collect SQLStats for ALL Query Modules returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value collectFlag - The portion of the SQLStats-flag which is represented by the 2nd colon (:) piece, and is a numeric value representing which SQL Performance Statistics/Metrics to collect, with one of the following values: &quot;&quot; = Collect All SQL Performance Metrics [DEFAULT] n = Where n=SUM(MVal) [See Below] In general, all of the following performance metrics are collected for each SQL module, along with a cumulative value representing all SQL modules, when the SQLStats-flag is turned on: MVal Metric Name Metric Description ---- ---------------------------- ---------------------------------- 1 Query Execution Time Total number of seconds elapsed 2 Total Global References Total number of global references 4 Total Commands Executed Total number of OS commands executed 8 Total Disk Read Latency Time Total milliseconds spent waiting ==== for Disk Reads 15 ALL Collect all Performance Metrics This parameter provides a mechanism by which to choose a combination of which performance metrics to collect, by specifying a SUM of the performance metrics MVal numbers (specified above) that you wish to collect. EXAMPLE #1: The following example represents the collection of 2 performance metrics, &#x27;Query Execution Time&#x27; &amp; &#x27;Total Disk Read Latency Time&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time +8 Total Disk Read Latency Time === 9 Collect both of these performance metrics By passing 9 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the two aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. EXAMPLE #2: The following example represents the collection of 3 performance metrics, &#x27;Query Execution Time&#x27;, &#x27;Total Global References&#x27; &amp; &#x27;Total Commands Executed&#x27;: MVal Metric Name ---- ---------------------------- 1 Query Execution Time 2 Total Global References +4 Total Commands Executed === 7 Collect both of these performance metrics By passing 7 for the value of the &#x27;collectFlag&#x27; parameter, the sum of the three aforementioned performance metrics MVal numbers, the SQLStats PTool application will only collect statistical data for these two performance metrics whenever an SQL Query is invoked. terminateCond - The portion of the SQLStats-flag which is represented by the 5th colon (:) piece, and is determined by this parameter value. An optional condition to determine when to terminate the SQLStats collection, by turning off the SQLStats-flag (System), or by setting it to a specified reset value. This parameter accepts the following values: 0 No Action [DEFAULT] M:: Where =# of minutes from 1..n When specified, this value will terminate the SQLStats collection the number of minutes  after the current $H Where =Reset {action-flag} value from 0..3 When specified, this is the value to which the {action-flag} portion of the SQLStats-flag will be set upon expiration If not specified, default  to zero (0) (e.g. &quot;M:120:1&quot; =&gt; Terminate 120minutes after the current $H and reset SQLStats-flag/{action-flag} to 1) T:: Where =Timestamp with the format: YYYYMMDD HHMM When specified, this value will terminate the SQLStats collection after the timestamp value Where =Reset {action-flag} value from 0..3 When specified, this is the value to which the {action-flag} portion of the SQLStats-flag will be set upon expiration If not specified, default  to zero (0) (e.g. &quot;T:20171018 1330:1&quot; =&gt; Terminate after 10/18/2017 01:30PM and reset SQLStats-flag/{action-flag} to 1) ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value Where category = { &quot;current&quot; | &quot;terminate&quot; | ... } variable = A variable that corresponds to the given &#x27;category&#x27; Example: ptInfo(&quot;current&quot;,&quot;SQLStatsFlag&quot;)=The SQLStats-flag value after method execution RETURN Value: The value of the SQLStats-flag before setting it to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getsqlstatsflag">GetSQLStatsFlag<a href="#getsqlstatsflag" class="hash-link" aria-label="Direct link to GetSQLStatsFlag" title="Direct link to GetSQLStatsFlag"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod GetSQLStatsFlag(flagType As %Integer = &quot;&quot;, returnActionFlag As %Integer = 0, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_GetSQLStatsFlag, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: GetSQLStatsFlag [SQL: StatsSQL_GetSQLStatsFlag] Replaces: N/A Status: New Functionality Purpose: This method gets the flag that controls whether or not we collect SQL Statistics for each SQL Query execution Get the current value of the SQLStats-flag for the given &#x27;flagType&#x27;. The SQLStats-flag (System/Job) controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to be collected. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} RULES: When (flagType=&quot;&quot;), whether to use the SQLStats-flag (System) or the SQLStats-flag (Process/Job) is determined by the following rules: IF {action-flag} (Process/Job) = 0, then use SQLStats-flag (System) ELSE use SQLStats-flag (Process/Job) NOTE: This method has the following additional rule when passed the parameter: flagType=&quot;&quot; RULE-G1: If {action-flag}=-1, then return zero (0) for each component-flag of the SQLStats-flag, except for the {flag-type} which is one (1) [indicating a Process/Job Flag setting], as in the following example: write $SYSTEM.SQL.GetSQLStatsFlag(&quot;&quot;) =&gt; &quot;0:0:0::0:1&quot; To retrieve the actual value for each component-flag of the SQLStats-flag in this example, pass a one (1) for the &#x27;flagType&#x27; parameter: write $SYSTEM.SQL.GetSQLStatsFlag(1) =&gt; &quot;-1:0:0::0:1&quot; Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).GetSQLStatsFlag(...) $SYSTEM.SQL.GetSQLStatsFlag(...) SQL: SELECT %SYS_PTools.StatsSQL_GetSQLStatsFlag(...) Examples: The following examples shows the use of this method: #1 Get the current value of the SQLStats-flag for the Job/System Flag based on SQLStats-flag Rules: set SQLStatsFlag=##class(%SYS.PTools.StatsSQL).GetSQLStatsFlag(&quot;&quot;) Data Storage: ^%SYS(&quot;sql&quot;,&quot;sys&quot;,&quot;SQLStats&quot;) Parameters: flagType - &quot;&quot; = Job/System Flag based on SQLStats-flag Rules [DEFAULT] 0 = System Flag 1 = Process/Job Flag returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value Where category = { &quot;current&quot; | &quot;terminate&quot; | [&quot;expired&quot;] | ... } variable = A variable that corresponds to the given &#x27;category&#x27; Example: ptInfo(&quot;current&quot;,&quot;SQLStatsFlag&quot;)=The SQLStats-flag value after method execution RETURN Value: The current value of the SQLStats-flag; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getsqlstatsflagbypid">GetSQLStatsFlagByPID<a href="#getsqlstatsflagbypid" class="hash-link" aria-label="Direct link to GetSQLStatsFlagByPID" title="Direct link to GetSQLStatsFlagByPID"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod GetSQLStatsFlagByPID(pid As %String = &quot;&quot;, returnActionFlag As %Integer = 0, ByRef ptInfo As %RawString) As %Integer [ SqlName = StatsSQL_GetSQLStatsFlagByPID, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: GetSQLStatsFlagByPID [SQL: StatsSQL_GetSQLStatsFlagByPID] Replaces: N/A Status: New Functionality Purpose: This method gets the flag that controls whether or not we collect SQL Statistics about each SQL Query execution for the given &#x27;pid&#x27; Get the current value of the SQLStats-flag for the given &#x27;pid&#x27;. The SQLStats-flag (Process/Job) controls whether or not SQL Statistics are collected for each SQL Query execution, and which performance statistics to be collected. The SQLStats-flag is a colon (:) delimited string comprised of the following individual components: SQLStats-flag={action-flag}:{collect-flag}:{condition-flag}:{condition-value}:{terminate-flag}:{flag-type} NOTE: This method ONLY applies to the SQLStats-flag for the given &#x27;pid&#x27; (Process/Job) and NOT the SQLStats-flag for the (System)! <strong>RESTRICTION: This method invocation requires %Admin_Operate:Use privilege</strong> Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).GetSQLStatsFlagByPID(...) $SYSTEM.SQL.GetSQLStatsFlagByPID(...) SQL: SELECT %SYS_PTools.StatsSQL_GetSQLStatsFlagByPID(...) Examples: The following examples shows the use of this method: #1 Get the current value of the SQLStats-flag for the Job/System Flag based on SQLStats-flag Rules for PID# 12345: set SQLStatsFlag=##class(%SYS.PTools.StatsSQL).GetSQLStatsFlagByPID(12345) Data Storage: ^%SYS(&quot;sql&quot;,&quot;sys&quot;,&quot;SQLStats&quot;) Parameters: pid - The process ID ($JOB) for which to set the SQLStats-flag [DEFAULT: Current $JOB] returnActionFlag - 0 = Return the entire SQLStats-flag value [DEFAULT] 1 = Return only the {action-flag} value, which is the portion of the SQLStats-flag represented by the 1st colon (:) piece NOTE: This is the backward-compatible value ptInfo - A Pass By Reference information array that returns to the user detailed information in the following format: ptInfo(category,variable)=value NOTE: This method currently returns no &#x27;ptInfo&#x27;, but is included for future extensibility RETURN Value: The current value of the SQLStats-flag; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatssaveflag">SetSQLStatsSaveFlag<a href="#setsqlstatssaveflag" class="hash-link" aria-label="Direct link to SetSQLStatsSaveFlag" title="Direct link to SetSQLStatsSaveFlag"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsSaveFlag(typeFlag As %Integer = 1, methodFlag As %Integer = 0) As %Integer [ SqlName = StatsSQL_SetSQLStatsSaveFlag, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsSaveFlag [SQL: StatsSQL_SetSQLStatsSaveFlag] Replaces: N/A Status: New Functionality Purpose: This method sets the flag that controls what type of SQL Statistics the System collects about each run of a query The SQLStatsSave-flag controls what type of SQL Statistics are saved, either Optimal (new) or Original (backward-compatible). The SQLStatsSave-flag is a colon (:) delimited string comprised of the following individual flags: {type-flag} &amp; {method-flag} Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).SetSQLStatsSaveFlag(...) $SYSTEM.SQL.SetSQLStatsSaveFlag(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsSaveFlag(...) Examples: The following examples shows the use of this method: #1 Set the PTools SQL Stats save flag (System) to &#x27;Optimal&#x27; set oldFlag=##class(%SYS.PTools.StatsSQL).SetSQLStatsSaveFlag(1) Data Storage: ^%SYS(&quot;sql&quot;,&quot;sys&quot;,&quot;SQLStatsSave&quot;) Parameters: typeFlag - 1 = Optimal (new) [DEFAULT] 2 = Original (backward-compatible) [Optional Parameters] methodFlag - 0 = Save the collected SQL Performance [DEFAULT] Statistics via SQL (SQL-Set) 1 = Save the collected SQL Performance Statistics via COS (Direct-Set) NOTE: This parameter is only applicable when &#x27;typeFlag=1&#x27; NOTE: This parameter should only be used when advised by InterSystems Staff! RETURN Value: The value of the SQLStatsSave-flag before setting to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsqlstatssaveflagjob">SetSQLStatsSaveFlagJob<a href="#setsqlstatssaveflagjob" class="hash-link" aria-label="Direct link to SetSQLStatsSaveFlagJob" title="Direct link to SetSQLStatsSaveFlagJob"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod SetSQLStatsSaveFlagJob(typeFlag As %Integer = 1, methodFlag As %Integer = 0) As %Integer [ SqlName = StatsSQL_SetSQLStatsSaveFlagJob, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: SetSQLStatsSaveFlagJob [SQL: StatsSQL_SetSQLStatsSaveFlagJob] Replaces: N/A Status: New Functionality Purpose: This method sets the flag that controls what type of SQL Statistics this Process/Job collects about each run of a query The SQLStatsSave-flag controls what type of SQL Statistics are saved, either Optimal (new) or Original (backward-compatible). The SQLStatsSave-flag is a colon (:) delimited string comprised of the following individual flags: {type-flag} &amp; {method-flag} Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).SetSQLStatsSaveFlagJob(...) $SYSTEM.SQL.SetSQLStatsSaveFlagJob(...) SQL: SELECT %SYS_PTools.StatsSQL_SetSQLStatsSaveFlagJob(...) Examples: The following examples shows the use of this method: #1 Set the PTools SQL Stats save flag (Process/Job) to &#x27;Optimal&#x27; set oldFlag=##class(%SYS.PTools.StatsSQL).SetSQLStatsSaveFlagJob(1) Data Storage: N/A Parameters: typeFlag - 0 = Use the {type-flag} (System) value [DEFAULT] 1 = Optimal (new) 2 = Original (backward-compatible) [Optional Parameters] methodFlag - 0 = Save the collected SQL Performance [DEFAULT] Statistics via SQL (SQL-Set) 1 = Save the collected SQL Performance Statistics via COS (Direct-Set) NOTE: This parameter is only applicable when &#x27;typeFlag=1&#x27; NOTE: This parameter should only be used when advised by InterSystems Staff! RETURN Value: The value of the SQLStatsSave-flag before setting to the new value; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getsqlstatssaveflag">GetSQLStatsSaveFlag<a href="#getsqlstatssaveflag" class="hash-link" aria-label="Direct link to GetSQLStatsSaveFlag" title="Direct link to GetSQLStatsSaveFlag"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod GetSQLStatsSaveFlag(flagType As %Integer = &quot;&quot;) As %Integer [ SqlName = StatsSQL_GetSQLStatsSaveFlag, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: GetSQLStatsSaveFlag [SQL: StatsSQL_GetSQLStatsSaveFlag] Replaces: N/A Status: New Functionality Purpose: This methods gets the flag that controls what type of SQL Statistics to collect about each run of a query Get the current value of the SQLStatsSave-flag for the given &#x27;flagType&#x27;. The SQLStatsSave-flag (System/Job) controls what type of SQL Statistics are saved, either Original (backward-compatible) or Optimal (new). The SQLStatsSave-flag is a colon (:) delimited string comprised of the following individual flags: {type-flag} &amp; {method-flag} RULES: When (flagType=&quot;&quot;), whether to use the SQLStatsSave-flag (System) or the SQLStatsSave-flag (Job) is determined by the following rules: IF {type-flag} (JOB) = 0, then use SQLStatsSave-flag (System) ELSE use SQLStatsSave-flag (Job) Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).GetSQLStatsSaveFlag(...) $SYSTEM.SQL.GetSQLStatsSaveFlag(...) SQL: SELECT %SYS_PTools.StatsSQL_GetSQLStatsSaveFlag(...) Examples: The following examples shows the use of this method: #1 Get the current SQLStatsSave-flag value based on the aforementioned &#x27;flagType&#x27; Rules: set SQLStatsSaveFlag=##class(%SYS.PTools.StatsSQL).GetSQLStatsSaveFlag() Data Storage: ^%SYS(&quot;sql&quot;,&quot;sys&quot;,&quot;SQLStatsSave&quot;) Parameters: flagType - &quot;&quot; = Job/System Flag based on SQLStatsSave-flag Rules [DEFAULT] 0 = System Flag 1 = Job Flag RETURN Value: The current value of the SQLStatsSave-flag; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aggregatesqlstats">aggregateSQLStats<a href="#aggregatesqlstats" class="hash-link" aria-label="Direct link to aggregateSQLStats" title="Direct link to aggregateSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod aggregateSQLStats(ns = &quot;&quot;, rtn = &quot;&quot;, curs = &quot;&quot;) As %Status [ SqlName = PT_aggregateSQLStats, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: aggregateSQLStats [SQL: PT_aggregateSQLStats] Replaces: N/A Status: New Functionality Purpose: This function aggregates all of the statistical properties for each SQL Query where data was collected Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).aggregateSQLStats(...) SQL: CALL %SYS_PTools.PT_aggregateSQLStats(...) SELECT %SYS_PTools.PT_aggregateSQLStats(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Aggregate all of the statistical properties for the &#x27;SAMPLES&#x27; namespace: set status=##class(%SYS.PTools.StatsSQL).aggregateSQLStats(&quot;SAMPLES&quot;) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: ns - The namespace in which to aggregate SQL Statistics If none provided, spin through all namespaces where SQL Stats collected rtn - The routine in which to aggregate SQL Statistics If none provided, spin through all routines where SQL Stats collected curs - The cursor in which to aggregate SQL Statistics If none provided, spin through all cursor where SQL Stats collected Return: Error Status</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="useaggregateddata">useAggregatedData<a href="#useaggregateddata" class="hash-link" aria-label="Direct link to useAggregatedData" title="Direct link to useAggregatedData"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod useAggregatedData(ns = &quot;&quot;, rtn = &quot;&quot;, curs = &quot;&quot;) As %Integer [ SqlName = PT_useAggregatedData, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If Aggregated Data can be used for the given &#x27;ns&#x27;, &#x27;rtn&#x27;, and &#x27;curs&#x27;, then return 1; Otherwise, return 0</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exportall">ExportAll<a href="#exportall" class="hash-link" aria-label="Direct link to ExportAll" title="Direct link to ExportAll"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod ExportAll(filePrefix = &quot;&quot;, delim = &quot;&quot;, exportPlan = 0, silent = 0, rtnName = &quot;&quot;, modName = &quot;&quot;, ByRef conds As %RawString, ByRef ptInfo As %RawString) As %String [ SqlName = StatsSQL_ExportAll, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: ExportAll [SQL: StatsSQL_ExportAll] Replaces: ExportAll [SQL: SQLStats_ExportAll] (%SYS.PTools.SQLStats) [DEPRECATED] Status: Maintained for Backward-Compatibility. See exportStatsSQL(...) Purpose: This method generates two Performance Tool files containing the data from the &#x27;%SYS.PTools.StatsSQL&#x27; class and return a $LIST of the output locations Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).ExportAll(...) SQL: CALL %SYS_PTools.StatsSQL_ExportAll(...) SELECT %SYS_PTools.StatsSQL_ExportAll(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Display this export file to the screen via a InterSystems IRIS Terminal: set io=##class(%SYS.PTools.StatsSQL).ExportAll($IO) #2 Display this export file via the SQL Query Page of the Management Portal: CALL %SYS_PTools.StatsSQL_ExportAll(&#x27;$IO&#x27;) Where: &#x27;$IO&#x27; = Output to the current device NOTE: &#x27;$IO&#x27; can be omitted, as it is the default &#x27;file&#x27; when invoked via the CALL interface Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: filePrefix - The path in which to create and store the data from the &#x27;%SYS.PTools.StatsSQL&#x27; class (e.g. C:\) NOTE: $IO = Outputs the data to the screen &#x27;$IO&#x27; = Output the data to the current device when invoked from the CALL/SELECT-interface &#x27;$DEF&#x27; = Ouput the data to the DEFAULT file when invoked from the CALL/SELECT-interface [DEFAULT: {Current-Directory}\SQLQuery.{ext} &amp; {Current-Directory}\StatsSQL.{ext}] WHERE {Current-Directory} = The directory of the Namespace in which this method is invoked (e.g. $ZU(12,&quot;&quot;)) delim - The delimiter by which to delimit the data of the exported file [DEFAULT: $C(9) // TAB] exportPlan - 0 - Export the SQL Query Text 1 - Export the SQL Query Plan [DEFAULT: 0] silent - 0 - Display all messages during the running of this method 1 - Don&#x27;t display any messages during the running of this method rtnName - If specified, return only the rows where the &#x27;RoutineName&#x27; matches the value of this parameter; Otherwise, return rows for all &#x27;RoutineName&#x27; values modName - If specified, return only the rows where the &#x27;ModuleName&#x27; matches the value of this parameter; Otherwise, return rows for all &#x27;ModuleName&#x27; values conds - A string/array of possible conditions by which to restrict the output of the Export file, in the following format: conds= OR conds(0)=pos Count (WHERE pos = {1...n}) conds(pos)=$LIST() Pieces: 1) [] (Assumed Default: &amp;&amp;) 2) [{Heading}] (Omit for override cond) 3)  |  WHERE:  :=  := {&amp;&amp; | ||} (&amp;&amp; = AND | || = OR) @* := @ :=  @ = Contains no references to {Heading} * = Contains no references to {*} EXAMPLE:  conds=&quot;(&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{Module}_&quot;&quot;,&quot;&quot;))||({GlobalRefs}&gt;20)&quot;  conds(0)=3 conds(1)=$LB(,&quot;Module&quot;,&quot;=&quot;&quot;INFO&quot;&quot;&quot;) conds(2)=$LB(&quot;||&quot;,&quot;Module&quot;,&quot;=&quot;&quot;MAIN&quot;&quot;&quot;) conds(3)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;&gt;20&quot;)  conds(0)=2 conds(1)=$LB(,&quot;Module&quot;,&quot;&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{*}_&quot;&quot;,&quot;&quot;)&quot;) conds(2)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;{*}&gt;20&quot;) WHERE: {*} = value substitution for the &#x27;Module&#x27; &amp; &#x27;GlobalRefs&#x27; fields NOTE: Conditions that don&#x27;t contain any references to {Heading} fields, often called s, can be included as s, as in the following example: conds(pos)=$LB(,,&quot;$g(^zAction(&quot;&quot;runIt&quot;&quot;))=1&quot;) NOTE: All conditions must be satisfied for the conds() to be considered true and for the row to be exported [PASS BY REFERENCE] ptInfo - A Pass By Reference information array that returns to the user the following details: ptInfo(method,statsType,variable)=value ptInfo(method,statsType,&quot;outputFile&quot;)=The canonical name of the Export/Reporting file RETURN Value: A $LIST of the output locations of the exported data; Otherwise, return the error status if one occurred $LB(filePrefix_&quot;StatsSQL_Qry.txt&quot;,filePrefix_&quot;StatsSQL_Stats.txt&quot;)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="export">Export<a href="#export" class="hash-link" aria-label="Direct link to Export" title="Direct link to Export"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod Export(file = &quot;&quot;, delim = &quot;&quot;, ByRef conds As %RawString, ByRef ptInfo As %RawString) As %String [ SqlName = StatsSQL_Export, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: Export [SQL: StatsSQL_Export] Replaces: Export [SQL: SQLStats_Export] (%SYS.PTools.SQLStats) [DEPRECATED] Status: Maintained for Backward-Compatibility. See exportStatsSQL(...) Purpose: This method generates a comma delimited file containing the data from the &#x27;%SYS.PTools.StatsSQL&#x27; class Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).Export(...) SQL: CALL %SYS_PTools.StatsSQL_Export(...) SELECT %SYS_PTools.StatsSQL_Export(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Display this export file to the screen via a InterSystems IRIS Terminal: set io=##class(%SYS.PTools.StatsSQL).Export($IO) #2 Display this export file via the SQL Query Page of the Management Portal: CALL %SYS_PTools.StatsSQL_Export(&#x27;$IO&#x27;) Where: &#x27;$IO&#x27; = Output to the current device NOTE: &#x27;$IO&#x27; can be omitted, as it is the default &#x27;file&#x27; when invoked via the CALL interface Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: file - The path and file in which to create and store the data from the %SYS.PTools.SQLStats class: (e.g. C:\exportFile.txt) NOTE: $IO = Outputs the data to the screen &#x27;$IO&#x27; = Output the data to the current device when invoked from the CALL/SELECT-interface &#x27;$DEF&#x27; = Ouput the data to the DEFAULT file when invoked from the CALL/SELECT-interface [DEFAULT: {MGR-Directory}\{computerName}_{ConfigName}_YYYYMMDD_HHMMSS_StatsSQL.psql] delim - The delimiter by which to delimit the data of the exported file [DEFAULT: $C(9) // TAB] conds - A string/array of possible conditions by which to restrict the output of the Export file, in the following format: conds= OR conds(0)=pos Count (WHERE pos = {1...n}) conds(pos)=$LIST() Pieces: 1) [] (Assumed Default: &amp;&amp;) 2) [{Heading}] (Omit for override cond) 3)  |  WHERE:  :=  := {&amp;&amp; | ||} (&amp;&amp; = AND | || = OR) @* := @ :=  @ = Contains no references to {Heading} * = Contains no references to {*} EXAMPLE:  conds=&quot;(&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{Module}_&quot;&quot;,&quot;&quot;))||({GlobalRefs}&gt;20)&quot;  conds(0)=3 conds(1)=$LB(,&quot;Module&quot;,&quot;=&quot;&quot;INFO&quot;&quot;&quot;) conds(2)=$LB(&quot;||&quot;,&quot;Module&quot;,&quot;=&quot;&quot;MAIN&quot;&quot;&quot;) conds(3)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;&gt;20&quot;)  conds(0)=2 conds(1)=$LB(,&quot;Module&quot;,&quot;&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{*}_&quot;&quot;,&quot;&quot;)&quot;) conds(2)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;{*}&gt;20&quot;) WHERE: {*} = value substitution for the &#x27;Module&#x27; &amp; &#x27;GlobalRefs&#x27; fields NOTE: Conditions that don&#x27;t contain any references to {Heading} fields, often called s, can be included as s, as in the following example: conds(pos)=$LB(,,&quot;$g(^zAction(&quot;&quot;runIt&quot;&quot;))=1&quot;) NOTE: All conditions must be satisfied for the conds() to be considered true and for the row to be exported [PASS BY REFERENCE] ptInfo - A Pass By Reference information array that returns to the user the following details: ptInfo(variable)=value ptInfo(&quot;outputFile&quot;)=The canonical name of the Export/Reporting file RETURN Value: The output locations of the exported data; Otherwise, return the error status if one occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exportsqlquery">ExportSQLQuery<a href="#exportsqlquery" class="hash-link" aria-label="Direct link to ExportSQLQuery" title="Direct link to ExportSQLQuery"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod ExportSQLQuery(file = &quot;&quot;, delim = &quot;&quot;, exportPlan = 0, ByRef conds As %RawString, ByRef ptInfo As %RawString) As %String [ SqlName = StatsSQL_ExportSQLQuery, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: ExportSQLQuery [SQL: StatsSQL_ExportSQLQuery] Replaces: Export [SQL: SQLQuery_Export] (%SYS.PTools.SQLQuery) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: This method generates a comma delimited file containing the SQL Query data from the &#x27;%SYS.PTools.StatsSQL&#x27; class Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).ExportSQLQuery(...) SQL: CALL %SYS_PTools.StatsSQL_ExportSQLQuery(...) SELECT %SYS_PTools.StatsSQL_ExportSQLQuery(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Display this export file to the screen via a InterSystems IRIS Terminal: set io=##class(%SYS.PTools.StatsSQL).ExportSQLQuery($IO) #2 Display this export file via the SQL Query Page of the Management Portal: CALL %SYS_PTools.StatsSQL_ExportSQLQuery(&#x27;$IO&#x27;) Where: &#x27;$IO&#x27; = Output to the current device NOTE: &#x27;$IO&#x27; can be omitted, as it is the default &#x27;file&#x27; when invoked via the CALL interface Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: file - The path and file in which to create and store the data from the %SYS.PTools.SQLStats class: (e.g. C:\exportFile.txt) NOTE: $IO = Outputs the data to the screen &#x27;$IO&#x27; = Output the data to the current device when invoked from the CALL/SELECT-interface &#x27;$DEF&#x27; = Ouput the data to the DEFAULT file when invoked from the CALL/SELECT-interface [DEFAULT: {MGR-Directory}\{computerName}_{ConfigName}_YYYYMMDD_HHMMSS_ExportSQLQuery.psql] delim - The delimiter by which to delimit the data of the exported file [DEFAULT: $C(9) // TAB] exportPlan - 0 - Export the SQL Query Text [DEFAULT] 1 - Export the SQL Query Plan conds - A string/array of possible conditions by which to restrict the output of the Export file, in the following format: conds= OR conds(0)=pos Count (WHERE pos = {1...n}) conds(pos)=$LIST() Pieces: 1) [] (Assumed Default: &amp;&amp;) 2) [{Heading}] (Omit for override cond) 3)  |  WHERE:  :=  := {&amp;&amp; | ||} (&amp;&amp; = AND | || = OR) @* := @ :=  @ = Contains no references to {Heading} * = Contains no references to {*} EXAMPLE:  conds=&quot;(&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{Module}_&quot;&quot;,&quot;&quot;))||({GlobalRefs}&gt;20)&quot;  conds(0)=3 conds(1)=$LB(,&quot;Module&quot;,&quot;=&quot;&quot;INFO&quot;&quot;&quot;) conds(2)=$LB(&quot;||&quot;,&quot;Module&quot;,&quot;=&quot;&quot;MAIN&quot;&quot;&quot;) conds(3)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;&gt;20&quot;)  conds(0)=2 conds(1)=$LB(,&quot;Module&quot;,&quot;&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{*}_&quot;&quot;,&quot;&quot;)&quot;) conds(2)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;{*}&gt;20&quot;) WHERE: {*} = value substitution for the &#x27;Module&#x27; &amp; &#x27;GlobalRefs&#x27; fields NOTE: Conditions that don&#x27;t contain any references to {Heading} fields, often called s, can be included as s, as in the following example: conds(pos)=$LB(,,&quot;$g(^zAction(&quot;&quot;runIt&quot;&quot;))=1&quot;) NOTE: All conditions must be satisfied for the conds() to be considered true and for the row to be exported [PASS BY REFERENCE] ptInfo - A Pass By Reference information array that returns to the user the following details: ptInfo(variable)=value ptInfo(&quot;outputFile&quot;)=The canonical name of the Export/Reporting file RETURN Value: The output locations of the exported data; Otherwise, return the error status if one occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exportstatssql">exportStatsSQL<a href="#exportstatssql" class="hash-link" aria-label="Direct link to exportStatsSQL" title="Direct link to exportStatsSQL"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod exportStatsSQL(file = &quot;&quot;, format = &quot;P&quot;, silent = 0, statsType = 0, exportPlan = 0, rtnName = &quot;&quot;, modName = &quot;&quot;, ByRef conds As %RawString, ByRef ptInfo As %RawString, contRowCnt = &quot;&quot;, bcFlag = &quot;&quot;) As %Status [ PublicList = (d, outputFile, thisMethod, tSC, version), SqlName = PT_exportStatsSQL, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: exportStatsSQL [SQL: PT_exportStatsSQL] Replaces: Export &amp; ExportAll (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Create a Performance Tool file containing the data from the &#x27;%SYS.PTools.StatsSQL&#x27; and return the output location... By default, the file will be created in the current directory of the InterSystems IRIS instance. NOTE: Current directory can be obtained in the following way, from a InterSystems IRIS Terminal: &gt;write $ZU(12,&quot;&quot;) You can pass a different value for the &#x27;file&#x27; parameters if you wish to override the default location and file name. Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).exportStatsSQL(...) SQL: CALL %SYS_PTools.PT_exportStatsSQL(...) SELECT %SYS_PTools.PT_exportStatsSQL(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Display this export file to the screen via a InterSystems IRIS Terminal: set tSC=##class(%SYS.PTools.StatsSQL).exportStatsSQL($IO) #2 Display this export file via the SQL Query Page of the Management Portal: CALL %SYS_PTools.PT_exportStatsSQL(&#x27;$IO&#x27;,&#x27;H&#x27;) Where: &#x27;$IO&#x27; = Output to the current device NOTE: &#x27;$IO&#x27; can be omitted, as it is the default &#x27;file&#x27; when invoked via the CALL interface &#x27;H&#x27; = Output the format in HTML format NOTE: &#x27;H&#x27; can be omitted, as it is the default &#x27;format&#x27; when invoked via the CALL interface Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: file - The path and file in which to create and store the data from the %SYS.PTools.StatsSQL class: (e.g. C:\exportFile.txt) NOTE: $IO = Outputs the data to the screen &#x27;$IO&#x27; = Output the data to the current device when invoked from the CALL/SELECT-interface &#x27;$DEF&#x27; = Ouput the data to the DEFAULT file when invoked from the CALL/SELECT-interface [DEFAULT: {Current-Directory}\PT_StatsSQL_exportStatsSQL[_{Stmt|Plan}]_YYYYMMDD_HHMMSS.{ext}] WHERE {Current-Directory} = The directory of the Namespace in which this method is invoked (e.g. $ZU(12,&quot;&quot;)) NOTE 2: If Passed By Reference, then &#x27;file&#x27; will be returned as the canonical name of the Export/Reporting file format - The output format of the Export/Reporting file This parameter has the following structure of constituent elements: format=[:$LB(,,)] Where the constituent elements have the following values:  - The format of the Export/Reporting file: - P = Printable/Viewable report file (.txt file, no pagination) - D = Comma-delimited data file (.csv file) which can be read into a spreadsheet - X = Microsoft Excel XML markup file suitable for import into Excel (.xml file) - H = HTML page file (.html file) - Z = User-defined delimiter &quot;P&quot; formatted file (.dlm file) NOTE: The  element is required or defaulted to $C(9) (TAB) Optional Elements:  - User-defined delimiter [DEFAULT: $C(9) (TAB)] NOTE: This is generally used for =&quot;Z&quot;  - .csv file header for =&quot;D&quot;: - 0 = Don&#x27;t add non-standard information header to file [DEFAULT] - 1 = Add non-standard information header to file  - .csv file footer for =&quot;D&quot;: - 0 = Don&#x27;t add non-standard information footer to file [DEFAULT] - 1 = Add non-standard information footer to file EXAMPLES: Valid &#x27;format&#x27; values: - &quot;H&quot; // HTML file - &quot;D&quot; // CSV file with No information header or footer - &quot;D:&quot;_$LB(,1,1) // CSV file with information header &amp; footer - &quot;Z:&quot;_$LB(&quot;^&quot;) // User-defined delimiter file (delim=&quot;^&quot;) silent - 0 - Display all messages during the running of this method 1 - Don&#x27;t display any messages during the running of this method statsType - 0 - Return SQL Query Stats rows from %SYS.PTools.StatsSQL [DEFAULT] 1 - Return SQL Query Stmt/Plan rows from %SYS.PTools.StatsSQL exportPlan - 0 - Export the SQL Query Stmt Text [DEFAULT] 1 - Export the SQL Query Plan NOTE: This parameter is ONLY applicable when statsType=1 rtnName - If specified, return only the rows where the &#x27;RoutineName&#x27; matches the value of this parameter; Otherwise, return rows for all &#x27;RoutineName&#x27; values modName - If specified, return only the rows where the &#x27;ModuleName&#x27; matches the value of this parameter; Otherwise, return rows for all &#x27;ModuleName&#x27; values conds - A string/array of possible conditions by which to restrict the output of the Export file, in the following format: conds= OR conds(0)=pos Count (WHERE pos = {1...n}) conds(pos)=$LIST() Pieces: 1) [] (Assumed Default: &amp;&amp;) 2) [{Heading}] (Omit for override cond) 3)  |  WHERE:  :=  := {&amp;&amp; | ||} (&amp;&amp; = AND | || = OR) @* := @ :=  @ = Contains no references to {Heading} * = Contains no references to {*} EXAMPLE:  conds=&quot;(&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{Module}_&quot;&quot;,&quot;&quot;))||({GlobalRefs}&gt;20)&quot;  conds(0)=3 conds(1)=$LB(,&quot;Module&quot;,&quot;=&quot;&quot;INFO&quot;&quot;&quot;) conds(2)=$LB(&quot;||&quot;,&quot;Module&quot;,&quot;=&quot;&quot;MAIN&quot;&quot;&quot;) conds(3)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;&gt;20&quot;)  conds(0)=2 conds(1)=$LB(,&quot;Module&quot;,&quot;&quot;&quot;,INFO,MAIN,&quot;&quot;[(&quot;&quot;,&quot;&quot;_{*}_&quot;&quot;,&quot;&quot;)&quot;) conds(2)=$LB(&quot;||&quot;,&quot;GlobalRefs&quot;,&quot;{*}&gt;20&quot;) WHERE: {*} = value substitution for the &#x27;Module&#x27; &amp; &#x27;GlobalRefs&#x27; fields NOTE: Conditions that don&#x27;t contain any references to {Heading} fields, often called s, can be included as s, as in the following example: conds(pos)=$LB(,,&quot;$g(^zAction(&quot;&quot;runIt&quot;&quot;))=1&quot;) NOTE: All conditions must be satisfied for the conds() to be considered true and for the row to be exported [PASS BY REFERENCE] ptInfo - A Pass By Reference information array that returns to the user the following details: ptInfo(variable)=value ptInfo(&quot;outputFile&quot;)=The canonical name of the Export/Reporting file contRowCnt - &quot;&quot; - No Action &gt;=0 - Continuation from another Export, so skip the preamble code [InterSystems: Internal Purposes ONLY] bcFlag - This is a Backward-Compatibility flag used for [InterSystems: Internal Purposes ONLY] RETURN Value: The status from the invocation of this method</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getstats">GetStats<a href="#getstats" class="hash-link" aria-label="Direct link to GetStats" title="Direct link to GetStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod GetStats(ByRef SQLText As %String = 0, mod As %String, showStats As %Integer = 0) As %String</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: GetStats [SQL: N/A] Replaces: GetStats (%SYS.PTools.SQLStats) [DEPRECATED] Status: Maintained for Backward-Compatibility Purpose: Returns the Stats for a given module of a given SQL statement Invoked by the Show Plan code when Stats are to be included Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).GetStats(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Get the stats for the &#x27;MAIN&#x27; module of the following SQL Statement from the &#x27;SAMPLES&#x27; namespace: zn &quot;SAMPLES&quot; kill sql set sql($i(sql))=&quot;SELECT ID, Name FROM Sample.Person&quot; set statsList=##class(%SYS.PTools.StatsSQL).GetStats(.sql,&quot;MAIN&quot;,1) for pos=1:1:$LL(statsList) write !?3,$LTS($LG(statsList,pos)) ModuleName,Module,MAIN TimeSpent,Time,0.00999 GlobalRefs,Globals,1,201 CommandsExecuted,Commands,41,311 DiskWait,Disk Wait,1 RowCount,Row Count,400 ModuleCount,Mod Execs,1 Counter,Run Count,1 Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: SQLText - An array of the SQL Statement in the following format: SQLText={ln# counter} SQLText({ln#})={SQL Statement} mod - SQL Module being processed showStats - 0 = Don&#x27;t show any stats with the query plan 1 = Execute a query and get/show stats with the query plan [FROM: Query Test or ShowPlan^%apiSQL] 2 = Retrieve existing stats and show the averages with the query plan [NOTE: Query Info from ^mqh($UserName,&quot;id&quot;) set in ##class(%CSP.UI.Portal.SQL.QButtons.RuntimeStats).PrepareShowPlan(...) [FROM: SQL Runtime Statistics-&gt;{View Stats}-&gt;Show Plan] 3 = Generate and show stats for an alternate Show Plan with the query plan RETURN Value: Query Stats as a $LIST with the following format: 1) $LIST({Property},{Header},{Value}) ... n) $LIST({Property},{Header},{Value})</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getlastsqlstats">GetLastSQLStats<a href="#getlastsqlstats" class="hash-link" aria-label="Direct link to GetLastSQLStats" title="Direct link to GetLastSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod GetLastSQLStats(dumpResults = 0) As %Integer [ ReturnResultsets, SqlName = StatsSQL_GetLastSQLStats, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: GetLastSQLStats [SQL: StatsSQL_GetLastSQLStats] Replaces: GetLastSQLStats [SQL: SQLStats_GetLastSQLStats] (%SYS.PTools.SQLStats) [DEPRECATED] Status: Maintained for Backward-Compatibility Purpose: This method return the SQLStats Result Set from the last invoked SQL Statement NOTE: This method makes use of a local variable &#x27;%sqlcontext&#x27; that gets set when the stats data is saved. This only works if you are running in the same process. Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).GetLastSQLStats(...) SQL: CALL %SYS_PTools.StatsSQL_GetLastSQLStats(...) SELECT %SYS_PTools.StatsSQL_GetLastSQLStats(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 To see the SQLStats Result Set from the last invoked SQL Statement, invoke one of the following methods: // First invoke a query with SQLStats turned on, such that the following // array value gets set: %SQLStats(&quot;LastRow&quot;) set tSC=##class(%SYS.PTools.StatsSQL).GetLastSQLStats() do %sqlcontext.DumpResults() OR set tSC=##class(%SYS.PTools.StatsSQL).GetLastSQLStats(1) // Automatically invokes DumpResults() OR set tSC=##class(%SQL.Statement).%ExecDirect(,&quot;CALL %SYS_PTools.GetLastSQLStats(1)&quot;) %sqlcontext: The variable containing the instantiated object of the class %Library.SQLProcContext when a stored procedure is called. %sqlcontext consists of several properties, including an Error object, the SQLCODE error status, the SQL row count, and an error message. This variable is reset before each execution. Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: dumpResults - 1 = Automatically invoke the &#x27;DumpResults()&#x27; if &#x27;%sqlcontext&#x27; is set to a valid value RETURN Value: The status of this method&#x27;s execution</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="querytext-1">QueryText<a href="#querytext-1" class="hash-link" aria-label="Direct link to QueryText" title="Direct link to QueryText"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod QueryText(CN As %String, Rtn As %String, Internal As %Boolean = 0) As %String</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Query: StatsSQLView [SQL: StatsSQLView] Replaces: SQLStatsView [SQL: SQLStatsView] (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Query to replicate Backward-Compatible Query it &#x27;Replaces&#x27; Purpose: This is a View Query that aggregates all of the data from the %SYS.PTools.StatsSQL and presents it in a precise and meaningful way. Invocation: This View Query can be invoked in the following ways: ObjectScript: N/A SQL: SELECT * FROM %SYS_PTools.StatsSQLView Examples: The following examples shows the use of this View Query: #1 Aggregated Class View Query SELECT * FROM %SYS_PTools.StatsSQLView Parameters: N/A</p>
<p>Query: ViewStatsSQL [SQL: StatsSQLView] Replaces: ViewStats [SQL: ViewStats] (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Query to replicate Backward-Compatible Query it &#x27;Replaces&#x27; Purpose: This is a General Result-Set Query that aggregates all of the data from the %SYS_PTools.StatsSQLView and presents it in a precise and meaningful way. Invocation: This General Result-Set Query can be invoked in the following ways: ObjectScript: N/A SQL: SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQL([namespace]) Examples: The following examples shows the use of this Result-Set Query: #1 General Result-Set Query SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQL() Parameters: ns - The namespace from which to retrieve the SQL Query data &quot;&quot; = All Namespaces [DEFAULT] Backward-Compatible Query  Query: ViewStatsSQLDetails [SQL: ViewStatsSQLDetails Replaces: ViewStatsDetails [SQL: ViewStatsDetails (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Query to replicate Backward-Compatible Query it &#x27;Replaces&#x27; Purpose: This is a Specific Result-Set Query that aggregates all of the data from the %SYS_PTools.StatsSQLView and presents it in a precise and meaningful way. Invocation: This Specific Result-Set Query can be invoked in the following ways: ObjectScript: N/A SQL: SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQLDetails(cursor,rtn) Examples: The following examples shows the use of this Result-Set Query: #1 Specific Result-Set Query SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQLDetails(&#x27;QRS0&#x27;,&#x27;%sqlcq.USER.cls1.1&#x27;) NOTE: The &#x27;cursor&#x27; (QRS0) and &#x27;rtn&#x27; (%sqlcq.USER.cls1.1) used in this example can be retrieved from the following query: SELECT * FROM %SYS_PTools.StatsSQL_ViewStatsSQL([namespace]) Parameters: curs - The cursor name to match against the CursorName field rtn - The routine name to match against the RoutineName field Backward-Compatible Query</p>
<p>Method: QueryText [SQL: N/A] Replaced By: getQueryText (%SYS.PTools.StatsSQL) Status: Maintained for Backward-Compatibility Purpose: This method retrieves the SQL Query Text given the parameters: &#x27;CN&#x27;, &#x27;Rtn&#x27;, &amp; &#x27;Internal&#x27; Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).QueryText(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Retrieve the SQL Text for any of the data rows retrieved from invoking the &#x27;exportStatsSQL()&#x27; method: CALL %SYS_PTools.PT_exportStatsSQL() set sql=##class(%SYS.PTools.StatsSQL).QueryText(&quot;SQLStats0&quot;,&quot;PToolsSQLStats&quot;_$JOB) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: CN - The cursor name from which to retrieve the SQL Query Text Rtn - The routine from which to retrieve the SQL Query Text Internal - 0 = Return the External Query Text [DEFAULT] 1 = Return the Internal Query Text Return: Return either the Internal or External SQL Query Text; Otherwise, return the Error Status if an error occurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getquerytext">getQueryText<a href="#getquerytext" class="hash-link" aria-label="Direct link to getQueryText" title="Direct link to getQueryText"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod getQueryText(ns As %String = &quot;&quot;, rtn As %String = &quot;&quot;, curs As %String = &quot;&quot;, getInt As %Boolean = 0) As %String [ PublicList = (curs, ns, rtn, sqlExt, sqlInt) ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: getQueryText [SQL: N/A] Replaces: QueryText (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Functionality Purpose: This method retrieves the SQL Query Text given the parameters: &#x27;ns&#x27;, &#x27;rtn&#x27;, &#x27;curs&#x27;, &amp; &#x27;getInt&#x27; Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).getQueryText(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Retrieve the SQL Text for any of the data rows retrieved from invoking the &#x27;exportStatsSQL()&#x27; method: CALL %SYS_PTools.PT_exportStatsSQL() set sql=##class(%SYS.PTools.StatsSQL).getQueryText($NAMESPACE,&quot;PToolsSQLStats&quot;_$JOB,&quot;SQLStats0&quot;) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: ns - The namespace from which to retrieve the SQL Query Text rtn - The routine from which to retrieve the SQL Query Text curs - The cursor from which to retrieve the SQL Query Text getInt - 0 = Return the External Query Text 1 = Return the Internal Query Text Return: Return either the Internal or External SQL Query Text; Otherwise, return the Error Status if an error occurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="importschema-1">ImportSchema<a href="#importschema-1" class="hash-link" aria-label="Direct link to ImportSchema" title="Direct link to ImportSchema"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod ImportSchema(CN As %String, Rtn As %String, Internal As %Boolean = 0) As %String</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: ImportSchema [SQL: N/A] Replaced By: getImportSchema (%SYS.PTools.StatsSQL) Status: Maintained for Backward-Compatibility Purpose: This method retrieves the Import Schema given the parameters: &#x27;CN&#x27;, &#x27;Rtn&#x27;, &amp; &#x27;Internal&#x27; Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).ImportSchema(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Retrieve the SQL Text for any of the data rows retrieved from invoking the &#x27;exportStatsSQL()&#x27; method: CALL %SYS_PTools.PT_exportStatsSQL() set iSchema=##class(%SYS.PTools.StatsSQL).ImportSchema(&quot;SQLStats0&quot;,&quot;PToolsSQLStats&quot;_$JOB) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: CN - The cursor name from which to retrieve the Import Schema Rtn - The routine from which to retrieve the Import Schema Internal - 0 = Return the External Query Text [DEFAULT] 1 = Return the Internal Query Text Return: Return either the Internal or External Import Schema; Otherwise, return the Error Status if an error occurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getimportschema">getImportSchema<a href="#getimportschema" class="hash-link" aria-label="Direct link to getImportSchema" title="Direct link to getImportSchema"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod getImportSchema(ns As %String = &quot;&quot;, rtn As %String = &quot;&quot;, curs As %String = &quot;&quot;) As %String [ PublicList = (curs, ns, rtn, schema) ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: getImportSchema [SQL: N/A] Replaces: ImportSchema (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Functionality Purpose: This method retrieves the Import Schema given the parameters: &#x27;ns&#x27;, &#x27;rtn&#x27;, &amp; &#x27;curs&#x27; Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).getImportSchema(...) SQL: N/A Examples: The following examples shows the use of this method: #1 Retrieve the SQL Text for any of the data rows retrieved from invoking the &#x27;exportStatsSQL()&#x27; method: CALL %SYS_PTools.PT_exportStatsSQL() set iSchema=##class(%SYS.PTools.StatsSQL).getImportSchema($NAMESPACE,&quot;PToolsSQLStats&quot;_$JOB,&quot;SQLStats0&quot;) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: ns - The namespace from which to retrieve the SQL Query Text rtn - The routine from which to retrieve the SQL Query Text curs - The cursor from which to retrieve the SQL Query Text Return: Return the Import Schema; Otherwise, return the Error Status if an error occurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clearstatssql">clearStatsSQL<a href="#clearstatssql" class="hash-link" aria-label="Direct link to clearStatsSQL" title="Direct link to clearStatsSQL"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod clearStatsSQL(ns As %String = &quot;&quot;, rtn As %String = &quot;&quot;, ph3 As %Integer = 0, clearAll As %Integer = 0, clearErrs As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQL, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: clearStatsSQL [SQL: PT_clearStatsSQL] Replaces: Purge [SQL: StatsSQL_Purge] (%SYS.PTools.SQLStats) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: This method deletes all of the data stored in the &#x27;%SYS.PTools.StatsSQL&#x27; class, based on the specified parameters: &#x27;ns&#x27; &amp; &#x27;rtn&#x27; This method clears SQLStats which are gathered when the SQLStats-flag is turned ON, a SQL Statement is invoked, and the SQLStats-flag is turned OFF, as in the following example: set SQLStatsJOB=$SYSTEM.SQL.SetSQLStatsFlagJob(3) // SQLStats-flag ON set sql($i(sql))=&quot;SELECT COUNT(*) FROM Sample.Person&quot; // Use Dynamic SQL Query Interface (%SQL.Statement) to invoke // SQL Statement &amp; collect SQLStats data: // %New() ... %Prepare(.sql) ... %Execute() ... %Next() ... %OnClose() set SQLStatsJOB=$SYSTEM.SQL.SetSQLStatsFlagJob(0) // SQLStats-flag OFF Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).clearStatsSQL(...) SQL: CALL %SYS_PTools.PT_clearStatsSQL(...) SELECT %SYS_PTools.PT_clearStatsSQL(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Delete all of the data stored in the &#x27;%SYS.PTools.StatsSQL&#x27; class in the &#x27;SAMPLES&#x27; namespace: set stats=##class(%SYS.PTools.StatsSQL).clearStatsSQL(&quot;SAMPLES&quot;) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: ns - The namespace in which to clear SQL Statistics If none provided, use the current namespaces where SQL Stats collected [DEFAULT: Current Namespace] rtn - The routine for which to clear SQL Statistics If none provided, clear all routines in the given &#x27;ns&#x27; [OPTIONAL] ph3 - Placeholder Parameter for future extensibility clearAll - 0 = Perform a normal clear, but leave the &#x27;INFO&#x27; rows 1 = Clear everything including the &#x27;INFO&#x27; rows [DEFAULT: 0] clearErrs - 0 = Don&#x27;t delete the &#x27;PTools&#x27; Application Errors 1 = Delete all of the &#x27;PTools&#x27; Application Errors [DEFAULT: 0] returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() 1 = Return the number of Stats rows deleted from the following class: %SYS.PTools.StatsSQL [DEFAULT: 0] ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { &quot;cnt&quot; | &quot;curr&quot; | &quot;term&quot; | ... } variable = A var corresponding to the given &#x27;category&#x27; Example: ptInfo(&quot;cnt&quot;,&quot;clearStatsSQL&quot;)=The number of rows deleted via this method RETURN Value: Based on the value of the &#x27;returnType&#x27; parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the number of Stats rows deleted from the following class; Otherwise, return an error message if an error occurred: %SYS.PTools.StatsSQL</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clearstatssqlallns">clearStatsSQLAllNS<a href="#clearstatssqlallns" class="hash-link" aria-label="Direct link to clearStatsSQLAllNS" title="Direct link to clearStatsSQLAllNS"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod clearStatsSQLAllNS(rtn As %String = &quot;&quot;, ph2 As %Integer = 0, ph3 As %String = &quot;&quot;, clearAll As %Integer = 0, clearErrs As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = PT_clearStatsSQLAllNS, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: clearStatsSQLAllNS [SQL: PT_clearStatsSQLAllNS] Replaces: N/A Status: New Functionality Purpose: This method deletes all of the data stored in the &#x27;%SYS.PTools.StatsSQL&#x27; class in All Namespaces on a system for which the user has Write Privileges (Write infers Read), based on the optional &#x27;rtn&#x27; parameter... This method clears SQLStats in all namespaces which are gathered when the SQLStats-flag is turned ON, a SQL Statement is invoked, and the SQLStats-flag is turned OFF, as in the following example: set SQLStatsJOB=$SYSTEM.SQL.SetSQLStatsFlagJob(3) // SQLStats-flag ON set sql($i(sql))=&quot;SELECT COUNT(*) FROM Sample.Person&quot; // Use Dynamic SQL Query Interface (%SQL.Statement) to invoke // SQL Statement &amp; collect SQLStats data: // %New() ... %Prepare(.sql) ... %Execute() ... %Next() ... %OnClose() set SQLStatsJOB=$SYSTEM.SQL.SetSQLStatsFlagJob(0) // SQLStats-flag OFF Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).clearStatsSQLAllNS(...) SQL: CALL %SYS_PTools.PT_clearStatsSQLAllNS(...) SELECT %SYS_PTools.PT_clearStatsSQLAllNS(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Delete all of the data stored in the &#x27;%SYS.PTools.StatsSQL&#x27; class in all namespaces on the system: set status=##class(%SYS.PTools.StatsSQL).clearStatsSQLAllNS() Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: rtn - The routine in which to clear SQL Statistics If none provided, clear all routines in all appropriate namespaces [OPTIONAL] ph2 - Placeholder Parameter for future extensibility ph3 - Placeholder Parameter for future extensibility clearAll - 0 = Perform a normal clear, but leave the &#x27;INFO&#x27; rows 1 = Clear everything including the &#x27;INFO&#x27; rows [DEFAULT: 0] clearErrs - 0 = Don&#x27;t delete the &#x27;PTools&#x27; Application Errors 1 = Delete all of the &#x27;PTools&#x27; Application Errors [DEFAULT: 0] returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() 1 = Return the total number of Stats rows deleted from the following class, for each namespace: %SYS.PTools.StatsSQL [DEFAULT: 0] ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { &quot;cnt&quot; | &quot;curr&quot; | &quot;term&quot; | ... } variable = A var corresponding to the given &#x27;category&#x27; Example: ptInfo(&quot;cnt&quot;,&quot;clearStatsSQLAllNS&quot;)=The number of rows deleted RETURN Value: Based on the value of the &#x27;returnType&#x27; parameter, return one of the following: 0: Return a %Status code of either $$$OK or $$$ERROR() 1: Return the number of Stats rows deleted from the following class; Otherwise, return an error message if an error occurred: %SYS.PTools.StatsSQL</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purge">Purge<a href="#purge" class="hash-link" aria-label="Direct link to Purge" title="Direct link to Purge"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod Purge(ns As %String = &quot;&quot;, rtn As %String = &quot;&quot;, ph3 As %Integer = 0, clearAll As %Integer = 0, clearErrs As %Integer = 0, returnType As %Integer = 0, ByRef ptInfo As %RawString) As %Status [ SqlName = StatsSQL_Purge, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: Purge [SQL: StatsSQL_Purge] Replaced BY: clearStatsSQL [SQL: PT_clearStatsSQL] (%SYS.PTools.StatsSQL) Status: Maintained for Backward-Compatibility Purpose: This method deletes all of the data stored in the &#x27;%SYS.PTools.StatsSQL&#x27; class, based on the specified parameters: &#x27;ns&#x27; &amp; &#x27;rtn&#x27; Invocation: This method can be invoked in the following ways: ObjectScript: ##class(%SYS.PTools.StatsSQL).Purge(...) SQL: CALL %SYS_PTools.StatsSQL_Purge(...) SELECT %SYS_PTools.StatsSQL_Purge(...) NOTE: This &#x27;SqlProc&#x27; method can be invoked with either the CALL-interface or the SELECT-interface. Both interfaces execute the method: the CALL-interface does not return any resulting value, while the SELECT-interface does. Examples: The following examples shows the use of this method: #1 Delete all of the data stored in the &#x27;%SYS.PTools.StatsSQL&#x27; class in the &#x27;SAMPLES&#x27; namespace: set stats=##class(%SYS.PTools.StatsSQL).Purge(&quot;SAMPLES&quot;) Data Storage: ^%sqlcq($NAMESPACE,&quot;PTools&quot;,&quot;db&quot;,&quot;Stats{C|D|I|S|Z}&quot;) Parameters: ns - The namespace in which to clear SQL Statistics If none provided, use the current namespaces where SQL Stats collected [DEFAULT: Current Namespace] rtn - The routine for which to clear SQL Statistics If none provided, clear all routines in the given &#x27;ns&#x27; [OPTIONAL] ph3 - Placeholder Parameter for future extensibility clearAll - 0 = Perform a normal clear, but leave the &#x27;INFO&#x27; rows 1 = Clear everything including the &#x27;INFO&#x27; rows [DEFAULT: 0] clearErrs - 0 = Don&#x27;t delete the &#x27;PTools&#x27; Application Errors 1 = Delete all of the &#x27;PTools&#x27; Application Errors [DEFAULT: 0] returnType - 0 = Return a %Status code of either $$$OK or $$$ERROR() 1 = Return the number of Stats rows deleted from the following class: %SYS.PTools.StatsSQL [DEFAULT: 0] ptInfo - A Pass By Reference information array that returns detailed information to the user in the following format: ptInfo(category,variable)=value OR $LB(val1,...,valn) Where category = { &quot;cnt&quot; | &quot;curr&quot; | &quot;term&quot; | ... } variable = A var corresponding to the given &#x27;category&#x27; Example: ptInfo(&quot;cnt&quot;,&quot;clearStatsSQL&quot;)=The number of rows deleted via this method [Routine Method] ptInfo(&quot;cnt&quot;,&quot;Purge&quot;)=The number of rows deleted via this method [Class Method] RETURN Value: Return a %Status code of either $$$OK or $$$ERROR()</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="newsqlstats">newSQLStats<a href="#newsqlstats" class="hash-link" aria-label="Direct link to newSQLStats" title="Direct link to newSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod newSQLStats(SQLText, SQLType, ns, rtn, curs, compTime = 0, SQLIndexHash = &quot;&quot;, ucqInfo = &quot;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Stub: For the &#x27;newSQLStats()&#x27; method in the &#x27;%SYS.PTools.MAC&#x27; routine Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="startsqlstats">startSQLStats<a href="#startsqlstats" class="hash-link" aria-label="Direct link to startSQLStats" title="Direct link to startSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod startSQLStats(ns, rtn, curs, params, SQLIndexHash, flag, collect)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Stub: For the &#x27;startSQLStats()&#x27; method in the &#x27;%SYS.PTools.MAC&#x27; routine Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stopsqlstats">stopSQLStats<a href="#stopsqlstats" class="hash-link" aria-label="Direct link to stopSQLStats" title="Direct link to stopSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod stopSQLStats(ns, rtn, curs, rowCount = 0, SQLIndexHash, flag, collect)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Stub: For the &#x27;stopSQLStats()&#x27; method in the &#x27;%SYS.PTools.MAC&#x27; routine Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="savesqlstats">saveSQLStats<a href="#savesqlstats" class="hash-link" aria-label="Direct link to saveSQLStats" title="Direct link to saveSQLStats"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod saveSQLStats(ns, rtn, curs, mod, rowCount, SQLIndexHash)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Stub: For the &#x27;saveSQLStats()&#x27; method in the &#x27;%SYS.PTools.MAC&#x27; routine Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplans">possiblePlans<a href="#possibleplans" class="hash-link" aria-label="Direct link to possiblePlans" title="Direct link to possiblePlans"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlans(ByRef sql As %RawString, PPcost As %Integer = 0, num As %Integer = 0, level As %Integer = 0, arr As %Integer = 0, showStats As %Integer = 0, schemaImport As %String = &quot;&quot;, schemaPath As %String = &quot;&quot;, preparse As %Integer = 0, ByRef hash As %String = &quot;&quot;, silent As %Integer = 0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ShowPlanAlt U T I L I T I E S</strong>  ------------------------------</p>
<p>Method: possiblePlans Replaces: PossiblePlans (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Generate a %plan() arrays for the SQL Plan Path specified for the given &#x27;sql&#x27; Query Statement. This method processed by the ShowPlanAlt^%apiSQL() method and other such interfaces... Parameters: sql - An array of the SQL Statement in the following format: sql={ln# counter} sql({ln#})={SQL Statement} PPcost - The cost of the SQL Plan Path specified num - The cost number of the SQL Plan Path specified level - The cost level of the SQL Plan Path specified arr - 0 = Output the %plan(1:%plan) array via WRITE 1 = Leave the resulting plan lines in the array %plan(1:%plan) showStats - 0 = Do not show stats as part of the plan [DEFAULT] 1 = Run the SQL query to generate stats and output the stats as part of the plan text 2 = Lookup the stats in %SYS.PTools.StatsSQL 3 = Generate alternate plan for the Portal schemaImport - Used with the #IMPORT preprocessor directive, one or more schema names to search to supply the schema name for an unqualified table name in an Embedded SQL query. You can specify a single schema name, or a comma-separated list of schema names. NOTE: All schemas must be in the current namespace. #IMPORT directives are additive. Specifying a second #IMPORT does not inactivate the list of schema names specified in a prior #IMPORT. [DEFAULT: &quot;&quot;] schemaPath - Used with the #SQLCompile Path preprocessor directive, one or more schema names to search, refered to as the schema search path, for any subsequent Embedded SQL query statements. You can specify a single schema name, or a comma-separated list of schema names. NOTE: #SQLCompile Path directive overwrites the path specified in a prior #SQLCompile Path directive; it does not overwrite schema names specified in prior #IMPORT directives. [DEFAULT: &quot;&quot;] preparse - 0 = Do not do any preparsing to the SQL statement [DEFAULT] 1 = Preparse the SQL statement to perform literal replacement NOTE: ShowPlan call from the SMP will call with preparse=1 so the plan reflects the same execution path as the Execute Query will hash - A hash string of the %plan() array: $$Hash^%SYS.SQLSRV(str,.%plan,.Hval) [PASS BY REFERENCE] silent - 0 = Output information for this method invocation 1 = Don&#x27;t perform any writes within this method invocation RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplansexecute">possiblePlansExecute<a href="#possibleplansexecute" class="hash-link" aria-label="Direct link to possiblePlansExecute" title="Direct link to possiblePlansExecute"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlansExecute(ByRef qHandle As %Binary, sql As %String) As %Status [ PublicList = (backgrnd, showErr, wrtref) ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Query: possiblePlans [SQL: PT_possiblePlans] Replaces: PossiblePlans [SQL: PossiblePlans] (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Query to replicate Backward-Compatible Query it &#x27;Replaces&#x27; Purpose: This is an Custom Class Query, and the Result-Set will be generated and accessed by invoking the following methods, which mimic the SQL OPEN/FETCH/CLOSE operations: - possiblePlansExecute(.qHandle,.sql) [OPEN] - possiblePlansFetch(.qHandle,.Row,.AtEnd) [FETCH] - possiblePlansClose(.qHandle) [CLOSE] Parameters: sql - An string or array of the SQL Statement in the following format: sql={SQL Statement} OR sql={ln# counter} sql({ln#})={SQL Statement}</p>
<p>Method: possiblePlansExecute Replaces: PossiblePlansExecute (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Mimic an SQL OPEN and create a Result-Set by invoking the method ShowPlanAlt^%apiSQL(...) for the specified &#x27;sql&#x27; parameter. The Result-Set created is in the following format: %AltPlan(qHandle,0)=$LIST(cost,num,$$map^%SYS.PTools(...)) %AltPlan(qHandle)=%plan() Parameters: qHandle - Query Handle sql - An string or array of the SQL Statement in the following format: sql={SQL Statement} OR sql={ln# counter} sql({ln#})={SQL Statement} RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplansfetch">possiblePlansFetch<a href="#possibleplansfetch" class="hash-link" aria-label="Direct link to possiblePlansFetch" title="Direct link to possiblePlansFetch"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlansFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ PlaceAfter = possiblePlansExecute ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: possiblePlansFetch Replaces: PossiblePlansFetch (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Query to replicate Backward-Compatible Query it &#x27;Replaces&#x27; Purpose: Mimic an SQL FETCH and return a &#x27;Row&#x27; of the Result-Set by iterating over the &#x27;%AltPlan(qHandle)&#x27; array with the &#x27;qHandle&#x27; The Result-Set &#x27;Row&#x27; is returned in the following format: $LIST(qHandle,cost,map,type,&quot;Plan&quot;) Parameters: qHandle - Query Handle Row - A row of the SQL Query Result-Set in the following format: $LIST(qHandle,cost,map,type,&quot;Plan&quot;) AtEnd - A FETCH marker with the following values: 0 = More rows to FETCH [DEFAULT] 1 = No more rows to FETCH RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplansclose">possiblePlansClose<a href="#possibleplansclose" class="hash-link" aria-label="Direct link to possiblePlansClose" title="Direct link to possiblePlansClose"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlansClose(ByRef qHandle As %Binary) As %Status [ PlaceAfter = possiblePlansFetch ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: possiblePlansClose Replaces: PossiblePlansClose (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Mimic an SQL CLOSE by clearing the Result-Set Parameters: qHandle - Query Handle RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplansstatsexecute">possiblePlansStatsExecute<a href="#possibleplansstatsexecute" class="hash-link" aria-label="Direct link to possiblePlansStatsExecute" title="Direct link to possiblePlansStatsExecute"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlansStatsExecute(ByRef qHandle As %Binary, sql As %String, ids As %String) As %Status [ PublicList = (backgrnd, showErr, wrtref) ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Query: possiblePlansStats [SQL: PT_possiblePlansStats] Replaces: PossiblePlansStats [SQL: PossiblePlansStats] (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Query to replicate Backward-Compatible Query it &#x27;Replaces&#x27; Purpose: This is an Custom Class Query, and the Result-Set will be generated and accessed by invoking the following methods, which mimic the SQL OPEN/FETCH/CLOSE operations: - possiblePlansStatsExecute(.qHandle,.sql) [OPEN] - possiblePlansStatsFetch(.qHandle,.Row,.AtEnd) [FETCH] - possiblePlansStatsClose(.qHandle) [CLOSE] Parameters: sql - An string or array of the SQL Statement in the following format: sql={SQL Statement} OR sql={ln# counter} sql({ln#})={SQL Statement} ids - A comma (,) delimited list of Possible Plans IDs in the following format: ids=&quot;[,ID]...[,ID]&quot; (e.g. &quot;,1,3&quot;)</p>
<p>Method: possiblePlansStatsExecute Replaces: PossiblePlansStatsExecute (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Mimic an SQL OPEN and create a Result-Set by invoking the method ShowPlanAlt^%apiSQL(...) for the specified &#x27;sql&#x27; &amp; &#x27;ids&#x27; parameters. The Result-Set created is in the following format: %AltPlan(qHandle,0)=$LIST(cost,num,$$map^%SYS.PTools(...)) %AltPlan(qHandle)=%plan() Parameters: qHandle - Query Handle sql - An string or array of the SQL Statement in the following format: sql={SQL Statement} OR sql={ln# counter} sql({ln#})={SQL Statement} ids - A comma (,) delimited list of Possible Plans IDs in the following format: ids=&quot;[,ID]...[,ID]&quot; (e.g. &quot;,1,3&quot;) RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplansstatsfetch">possiblePlansStatsFetch<a href="#possibleplansstatsfetch" class="hash-link" aria-label="Direct link to possiblePlansStatsFetch" title="Direct link to possiblePlansStatsFetch"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlansStatsFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ PlaceAfter = possiblePlansStatsExecute ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: possiblePlansStatsFetch Replaces: PossiblePlansStatsFetch (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Mimic an SQL FETCH and return a &#x27;Row&#x27; of the Result-Set by iterating over the &#x27;%AltPlan(qHandle)&#x27; array with the &#x27;qHandle&#x27; The Result-Set &#x27;Row&#x27; is returned in the following format: $LIST(qHandle,cost,map,globals,commands,time,rows,&quot;Plan&quot;) Parameters: qHandle - Query Handle Row - A row of the SQL Query Result-Set in the following format: $LIST(qHandle,cost,map,type,&quot;Plan&quot;) AtEnd - A FETCH marker with the following values: 0 = More rows to FETCH [DEFAULT] 1 = No more rows to FETCH RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="possibleplansstatsclose">possiblePlansStatsClose<a href="#possibleplansstatsclose" class="hash-link" aria-label="Direct link to possiblePlansStatsClose" title="Direct link to possiblePlansStatsClose"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod possiblePlansStatsClose(ByRef qHandle As %Binary) As %Status [ PlaceAfter = possiblePlansStatsFetch ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: possiblePlansStatsClose Replaces: PossiblePlansStatsClose (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: Mimic an SQL CLOSE by clearing the Result-Set Parameters: qHandle - Query Handle RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="changecost">changeCost<a href="#changecost" class="hash-link" aria-label="Direct link to changeCost" title="Direct link to changeCost"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod changeCost(PPcost As %Float, num As %Integer, level As %Integer, ByRef dmt As %RawString, ByRef dmts As %RawString, ByRef dalg As %RawString, silent As %Integer = 0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: changeCost Replaces: ChangeCost (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: * INTERNAL USE ONLY * NOTE: This method is ONLY provided as an interface for the purpose of backward compatibility Parameters: PPcost - The cost of the SQL Plan Path specified num - The cost number of the SQL Plan Path specified level - The cost level of the SQL Plan Path specified dmt - dmts - dalg - silent - 0 = Output information for this method invocation 1 = Don&#x27;t perform any writes within this method invocation RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildppcost">buildPPcost<a href="#buildppcost" class="hash-link" aria-label="Direct link to buildPPcost" title="Direct link to buildPPcost"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod buildPPcost(qoqn As %Float, ByRef dmt As %RawString, ByRef dmts As %RawString, ByRef dalg As %RawString, ByRef PPcost As %RawString, silent As %Integer = 0) [ PublicList = ptfjoo ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: buildPPcost Replaces: BuildPPcost (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: * INTERNAL USE ONLY * NOTE: This method is ONLY provided as an interface for the purpose of backward compatibility Parameters: qoqn - dmt - dmts - dalg - PPcost - An array of query cost details to return to the invoking method silent - 0 = Output information for this method invocation 1 = Don&#x27;t perform any writes within this method invocation RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="map">map<a href="#map" class="hash-link" aria-label="Direct link to map" title="Direct link to map"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod map(data As %String, ByRef mt As %RawString, ByRef mts As %RawString, ByRef alg As %RawString, qnum As %Integer, str As %Integer, silent As %Integer = 0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Method: map Replaces: map (%SYS.PTools.SQLUtilities) [DEPRECATED] Status: New Method to replicate Backward-Compatible Method it &#x27;Replaces&#x27; Purpose: * INTERNAL USE ONLY * NOTE: This method is ONLY provided as an interface for the purpose of backward compatibility Parameters: data - mt - mts - alg - qnum - str - silent - 0 = Output information for this method invocation 1 = Don&#x27;t perform any writes within this method invocation RETURN Value: The status of this method; Otherwise, return an error message if an error occurred</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="version">version<a href="#version" class="hash-link" aria-label="Direct link to version" title="Direct link to version"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod version() As %String [ SqlName = StatsSQL_version, SqlProc ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Provide the current version for the %SYS.PTools.StatsSQL class/section of the Performance Tools (PTools) Application</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="triggerondelete">TriggerOnDelete<a href="#triggerondelete" class="hash-link" aria-label="Direct link to TriggerOnDelete" title="Direct link to TriggerOnDelete"></a></h3>
<div class="language-objectscript-class codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-objectscript-class codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ClassMethod TriggerOnDelete(timing, ns, rtn, curs, sgrp, mod, rtnUCQCaller = &quot;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Perform the OnDelete Trigger operations for this class...</p></section></div><footer class="tsd-footer"></footer></article></div></div></div></div></main></div></div></div></div></div>
</body>
</html>